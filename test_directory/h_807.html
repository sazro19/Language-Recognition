<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Солнце, ветер и вода ver 0.3.5 / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/582420\/"},"headline":"Солнце, ветер и вода ver 0.3.5","datePublished":"2021-10-08T15:52:14+03:00","dateModified":"2021-10-09T18:01:45+03:00","author":{"@type":"Person","name":"Василий Карпов"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой ст...","url":"https:\/\/habr.com\/ru\/post\/582420\/#post-content-body","about":["h_circuit-design","h_arduino","h_energy","h_physics","h_transport","f_develop","f_popsci"],"image":["https:\/\/habr.com\/share\/publication\/582420\/f4246cb30eb1768058f8cc4472f62c5b\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/d8d\/d69\/3b3\/d8dd693b3d8706b3077ddb86c6c0acfa.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/63a\/76e\/0cd\/63a76e0cd9a695cb1305d6206e0122ff.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/76e\/a5c\/218\/76ea5c21883e17f3674bf349648e4008.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e91\/22a\/b42\/e9122ab4242db0fe195c18fd6fba5c5e.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/99e\/85a\/90e\/99e85a90e10281d576967f5750dc7702.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/93a\/5dd\/045\/93a5dd0456be2eeca4543576894af50a.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/3d6\/2f7\/369\/3d62f736970abeaeb88479eadb42c537.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/917\/518\/90a\/91751890ab9d31ea38d7790d341ed986.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/843\/f80\/04a\/843f8004a389e8d429b3c244150b65fd.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/13e\/dd7\/a96\/13edd7a965484d782e97cd428b85e4c5.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/122\/52d\/088\/12252d08856ddb8626ec83eb32d2352c.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/996\/dc6\/ee3\/996dc6ee3c328898d06aa74580ce25d2.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/734\/dbb\/652\/734dbb6524b3c810bc555b24e5dea7d1.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/7d1\/3dc\/077\/7d13dc077848a5cb76337e461d9cefd8.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/5aa\/849\/6f8\/5aa8496f8bcf1fea51b77cfbf001bc13.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/014\/c13\/c8c\/014c13c8c01343424acabaefcc2297c7.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/ba8\/f64\/ef9\/ba8f64ef9ec4adeb4f727473912658cd.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/31c\/c76\/22d\/31cc7622d708c06f11585dfe09d9cbb6.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/19e\/2c5\/832\/19e2c5832df2cc718c8e00fa5e6ce89a.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/ee5\/d8b\/897\/ee5d8b897e7839952c4d45eaa05540da.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e90\/079\/f6a\/e90079f6ad9dd0ccd96ed6f34c162bf5.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/6c0\/b86\/f5f\/6c0b86f5fa76323e047f4b3147fcd77f.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/107\/bdc\/b66\/107bdcb6601b16f43da59b24d2eb86b5.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/54c\/c9f\/a84\/54cc9fa842712eee3988300b19e9fe55.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/071\/402\/d59\/071402d59ee812a9d14b43db5c7f9c5c.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/28b\/063\/a1f\/28b063a1f00993fcba2bb766d1401629.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/8d7\/35c\/121\/8d735c121a44d66bd1ccc8b5c5e81b41.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e6b\/d5a\/f95\/e6bd5af9578de2bddd2891e11345144d.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/dd7\/823\/339\/dd782333972f675b4ea97cdc82c94deb.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/de1\/d1d\/f58\/de1d1df58237c4e9a2c5617be264dbb0.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/cce\/d4e\/d36\/cced4ed360ae93dd0c71611ce4f30a4f.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/d4e\/f2d\/524\/d4ef2d524065e0d0ab5ad83c91d27616.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/705\/8fd\/dd6\/7058fddd67a58084b891a63a0c2dca2f.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a3b\/8e2\/1d6\/a3b8e21d6eea1cd591769ce3280a7a20.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/4ff\/cf8\/fdd\/4ffcf8fdd4b090cb8269ba5c2bb66ef8.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/d56\/225\/6f3\/d562256f391b70dedefdefb5e2a39abb.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/bd9\/16a\/a7b\/bd916aa7b8571e3dc31fb7f3fc6281e2.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/450\/b0e\/d0e\/450b0ed0e343e229353db96a18b69c1b.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/db6\/436\/d72\/db6436d7212aad64c189dab5ab5dc619.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/1a8\/82c\/9b0\/1a882c9b0c24483a736506eb48114bd9.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/454\/c41\/ff8\/454c41ff80566e7479267413848a23c7.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/785\/0d1\/629\/7850d1629a016e3a59317682f9926d9c.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/46f\/c1f\/264\/46fc1f26446ee03aa46d5d6251bd9cab.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/f04\/a65\/0ab\/f04a650abbc58ace756001a387c4f14f.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Солнце, ветер и вода ver 0.3.5" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Солнце, ветер и вода ver 0.3.5" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Солнце, ветер и вода ver 0.3.5" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой статье цикла я рассказал как появилась..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой статье цикла я рассказал как появилась..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой статье цикла я рассказал как появилась..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой статье цикла я рассказал как появилась..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой статье цикла я рассказал как появилась..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="582420" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-08T12:52:14.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/582420/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/582420/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/582420/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/iletta/" title="iletta" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/iletta/" class="tm-user-info__username">
      iletta
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-08T12:52:14.000Z" title="2021-10-08, 15:52">8  октября   в 15:52</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Солнце, ветер и вода ver 0.3.5</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/circuit-design/" class="tm-article-snippet__hubs-item-link"><span>Схемотехника</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/arduino/" class="tm-article-snippet__hubs-item-link"><span>Разработка под Arduino</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/energy/" class="tm-article-snippet__hubs-item-link"><span>Энергия и элементы питания</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/physics/" class="tm-article-snippet__hubs-item-link"><span>Физика</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/transport/" class="tm-article-snippet__hubs-item-link"><span>Транспорт</span> <!----></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>Инновации в яхту - солнечный контроллер специального назначения</p><p>сезон третий с половиной</p><blockquote><p><em>Кризис - это когда не хочется хотеть чего-то хотеть</em></p><p><em>(С) Квртет-И</em></p></blockquote><p>В <a href="https://habr.com/ru/post/483478/" rel="noopener noreferrer nofollow">первой статье</a> цикла я рассказал как появилась парусная яхта. На момент постройки она была укомплектована малосильным (менее 1 л.с.) электрическим двигателем. Как оказалось на практике такого двигателя, в принципе, хватает для парковки, он бесшумный и без запаха по сравнению с бензиновым, но совершенно не тянет в штормовую погоду. Всего один внезапный шторм решил судьбу мотора и передо мной встала задача обеспечения на судне двигателя, способного вытянуть 2,5-х тонную яхту в аналогичный шторм. Выбор мотора это отдельный квест, почитайте об этом в <a href="https://habr.com/ru/post/582044/" rel="noopener noreferrer nofollow">предыдущей статье</a>. В итоге был выбран стационарный яхтенный электромотор — TORQEEDO CRUISE 4FP. Мотор имеет питание 48В, а стандартная электросеть яхтенного оборудования - 12В. Пока модернизация идет полным ходом, самое время создать контроллер гибридной энергосети, который, для начала, будет обеспечивать заряд аккумулятора с базовым напряжением 48В не только от двух старых солнечных батарей. Назову его КГЭ-1. Очевидно, что при возросшей энерговооруженности яхты, потребуется значительно увеличить емкость аккумуляторов. Именно поэтому КГЭ-1 должен быть готов принять питание от других возможных источников энергии — ветряк, бензогенератор, дополнительные СБ, резервные аккумуляторы и даже педальный генератор. Решать задачу буду так, как она и поставлена — модульно. Структурная схема устройства будет содержать один общий микроконтроллер, назову его УМ - управляющий модуль, и некоторое количество периферийных модулей (Контроллеры солнечных батарей), работающих на общий аккумулятор.</p><figure class="full-width "><img src="/img/image-loader.svg" height="281" data-src="https://habrastorage.org/getpro/habr/upload_files/d8d/d69/3b3/d8dd693b3d8706b3077ddb86c6c0acfa.png" data-width="711"/><figcaption></figcaption></figure><p>Принцип работы КГЭ-1: Энергия, получаемая от каждого источника квантуется и забрасывается в аккумулятор. В качестве “катапульты” используется обычный дроссель. Заброс энергии продолжается до тех пор пока в аккумуляторе есть свободная емкость. Периферийный модуль по факту является обратноходовым преобразователем с внешним управлением.</p><p> </p><figure class="full-width "><img src="/img/image-loader.svg" height="643" data-src="https://habrastorage.org/getpro/habr/upload_files/63a/76e/0cd/63a76e0cd9a695cb1305d6206e0122ff.png" data-width="1343"/><figcaption></figcaption></figure><p>Схема проста и состоит из недорогих деталей и при этом позволяет получить КПД более 90%. </p><p>Здесь АКБ это общий силовой аккумулятор. R2, R3, C3, Iskra и конвертер 48/11 это общий управляющий модуль - УМ. Остальная часть схемы соответствует периферийному модулю и будет тиражироваться под каждый отдельный источник.</p><p>Выходная характеристика обратноходового преобразователем соответствует источнику тока. Это именно то, что нужно для работы на нагрузку в виде аккумулятора. Напряжение аккумулятора - достаточно медленно меняющийся параметр, при регулировании можно считать его константой. </p><p>Все это имеет смысл только при максимально высоком КПД преобразования и именно поэтому КГЭ-1 работает по принципу mppt, настраивая каждый периферийный модуль максимальное значение выходного тока. Это и будет соответствовать максимуму отбираемой у источника мощности. Например, солнечные панели на движущейся яхте априори имеют неравные условия, одна может быть полностью освещена, на другую падает тень о леера или паруса. Через несколько минут ситуация может измениться.</p><p>Кроме того, при проектировании необходимо особое внимание уделить минимизации потерь энергии в процессе преобразования.</p><p>УМ состоит из микроконтроллера, схемы измерения напряжения аккумулятора и блока питания.</p><p>Требования к микроконтроллеру (в последующем МК):</p><ol><li><p>измерение напряжения и/или тока - минимум 9;</p></li><li><p>выходной сигнал ШИМ с высокой частотой – минимум 4 выхода ШИМ;</p></li><li><p>малое энергопотребление;</p></li><li><p>доступность в продаже и «некусучая цена».</p></li></ol><p>Микроконтроллер Iskra Neo, программируемый контроллер на базе ATmega32U4, вполне удовлетворяет всем характеристикам и доступен по цене. Он имеет  20 портов ввода-вывода общего назначения, 7 портов с поддержкой ШИМ, 12 портов, подключенных к АЦП с напряжением от 0 до 5В. МК сможет дать частоту ШИМ <img class="formula inline" source="f= { F_{CPU}} / (K* 2^n) " alt="f= { F_{CPU}} / (K* 2^n) " src="https://habrastorage.org/getpro/habr/upload_files/76e/a5c/218/76ea5c21883e17f3674bf349648e4008.svg"/>= 62,5кГц</p><p>где f – частота ШИМ,=16 МГц – тактовая частота микроконтроллера, K=1 – коэффициент предделителя счетчика, n = 8 бит – разрядность счетчика.</p><p>Теперь делитель напряжения R2 и R3. Делитель напряжения нужен, чтобы преобразовывать напряжение АКБ 38,4-56,7В в напряжение от 0 до 5 В.</p><p>Для безопасности выходное напряжение на резисторах беру меньше 5<em>0,707 и получаем 3,5В. Так как у микроконтроллера есть внутреннее сопротивление, и оно подключено параллельно к R3, то надо соблюдать условие, что R3&lt;&lt;ri, где ri - внутренне сопротивление микроконтроллера. Первое условие - R3 примерно на три порядка меньше, чем внутреннее сопротивление.</em></p><p><em>Так как делитель подключен к АКБ постоянно, то и ток через него течет постоянно, а этот ток является прямыми потерями поэтому целесообразно выбирать резистор R3, как можно больше. Объединяя первое и второе условия, он должен быть до 5кОм.</em></p><p><em>Первый удовлетворяющий требованиям резистор для R3 из сетки сопротивлений = 3,6кОм.</em></p><p><em>Тогда <img class="formula inline" source="R2=(U_{дел}*R3/U_{3})-R3" alt="R2=(U_{дел}*R3/U_{3})-R3" src="https://habrastorage.org/getpro/habr/upload_files/e91/22a/b42/e9122ab4242db0fe195c18fd6fba5c5e.svg"/>= 55,4 кОм</em></p><p><em>Ближайший по сетке 56,4кОм.</em></p><p><em>Теперь надо рассчитать потери в делителе: Pдел.потери= 0,05415 Вт, это составляет 0,135%, считаю, что это приемлемо.</em></p><p><em>Конденсатор C3 является фильтром высокочастотных помех.</em></p><p><em>Взял конденсатор с емкостью C3 = 0,1мкФ потому что был под рукой, проверяю: </em></p><p><em><img class="formula inline" source="x_{c}=1/(2*\pi*f*C)" alt="x_{c}=1/(2*\pi*f*C)" src="https://habrastorage.org/getpro/habr/upload_files/99e/85a/90e/99e85a90e10281d576967f5750dc7702.svg"/>= 25,4 Ом</em></p><p><em>Коэффициент деления помехи равен <img class="formula inline" source="R_{c}/(R_{c}+R2) &lt;= 45*10^{-5}" alt="R_{c}/(R_{c}+R2) &lt;= 45*10^{-5}" src="https://habrastorage.org/getpro/habr/upload_files/93a/5dd/045/93a5dd0456be2eeca4543576894af50a.svg"/></em></p><p>Коэффициент деления полезного сигнала = 0,06</p><p>Коэффициент подавления помехи относительно сигнала нашел как отношение двух коэффициентов деления = 133</p><figure class="float full-width "><img src="/img/image-loader.svg" height="1360" data-src="https://habrastorage.org/getpro/habr/upload_files/3d6/2f7/369/3d62f736970abeaeb88479eadb42c537.png" data-width="1360"/><figcaption></figcaption></figure><p>Преобразователь 48/11 В нужен для питания контроллера в рабочем и спящем режиме и формирования управляющих сигналов на периферийные модули. Не думаю, что там потребуется большая мощность. Чтобы не усложнять задачу - возьму готовый у китайцев. </p><p>После этого приступаю к расчету обратноходового преобразователя. В моем случае нет необходимости в гальванической развязке, поэтому сосредоточусь на однообмоточном дросселе. Во время импульса он накапливает энергию в сердечнике, а во время паузы перебрасывает ее в аккумулятор. Вначале рассчитаю сколько энергии надо запасти и передать за один импульс, по формуле: <img class="formula inline" source="W_3=P_{сб}/f = 0,64*10^{-3} Вт*c" alt="W_3=P_{сб}/f = 0,64*10^{-3} Вт*c" src="https://habrastorage.org/getpro/habr/upload_files/917/518/90a/91751890ab9d31ea38d7790d341ed986.svg"/></p><p>где Wз – энергия, которую дроссель сможет запасти за один импульс, Pсб — максимальная мощность СБ (или другого источника), Pсб=40Вт, f – частота ШИМ.</p><p>Теперь приступаю к расчету индуктивности катушки (дросселя). </p><p>Время одного импульса ton = T*<em>D,</em></p><p><em>где T – это период, D – скважность (для меандра D=0,5).</em></p><p><em>Максимальный ток Imax. При открытии транзистора ток будет нарастать практически линейно, тогда выведу формулу для Imax через Iср = 2,05А (из характеристик СБ). <img class="formula inline" source="I_{ср}=S/T" alt="I_{ср}=S/T" src="https://habrastorage.org/getpro/habr/upload_files/843/f80/04a/843f8004a389e8d429b3c244150b65fd.svg"/>, где <img class="formula inline" source="S=I_{max}*t_{on}/2" alt="S=I_{max}*t_{on}/2" src="https://habrastorage.org/getpro/habr/upload_files/13e/dd7/a96/13edd7a965484d782e97cd428b85e4c5.svg"/>, <img class="formula inline" source="T=1/f" alt="T=1/f" src="https://habrastorage.org/getpro/habr/upload_files/122/52d/088/12252d08856ddb8626ec83eb32d2352c.svg"/>— период</em></p><figure class="float "><img src="/img/image-loader.svg" height="114" data-src="https://habrastorage.org/getpro/habr/upload_files/996/dc6/ee3/996dc6ee3c328898d06aa74580ce25d2.png" data-width="149"/><figcaption></figcaption></figure><p><em>Сразу рассчитаем T=16мкс, ton=8мкс, <img class="formula inline" source="I_{max}=2*I_{cp}/(f*t_{on})=8,2A" alt="I_{max}=2*I_{cp}/(f*t_{on})=8,2A" src="https://habrastorage.org/getpro/habr/upload_files/734/dbb/652/734dbb6524b3c810bc555b24e5dea7d1.svg"/></em></p><p>Могу найти индуктивность катушки (дросселя) по формуле: <img class="formula inline" source="L=U_{сб}*t_{on}/(I_{max}-0)" alt="L=U_{сб}*t_{on}/(I_{max}-0)" src="https://habrastorage.org/getpro/habr/upload_files/7d1/3dc/077/7d13dc077848a5cb76337e461d9cefd8.svg"/><em>= 19,02 мкГн</em></p><p>где Uсб=19,5В  — рабочее напряжение солнечной батареи (из характеристик СБ).</p><p>Надо узнать среднеквадратичное значение первичного и вторичного тока (тока катушки в первый и второй полупериод).</p><p>Ipri=Imax=8,2А. <img class="formula inline" source="I_{RMS(pri)}=I_{pri}*\sqrt{D/3}" alt="I_{RMS(pri)}=I_{pri}*\sqrt{D/3}" src="https://habrastorage.org/getpro/habr/upload_files/5aa/849/6f8/5aa8496f8bcf1fea51b77cfbf001bc13.svg"/>=3,35A. </p><p><img class="formula inline" source="I_{sec}=U_{сб}*I_{pri}/U_{max(акб)}" alt="I_{sec}=U_{сб}*I_{pri}/U_{max(акб)}" src="https://habrastorage.org/getpro/habr/upload_files/014/c13/c8c/014c13c8c01343424acabaefcc2297c7.svg"/></p><p>где Umax(акб) — максимальное напряжение на которое можно зарядить аккумулятор и равно оно в моем случае 56,7 В.</p><p> <img class="formula inline" source="I_{RMS(sec)}=I_{sec}*\sqrt{D/3}" alt="I_{RMS(sec)}=I_{sec}*\sqrt{D/3}" src="https://habrastorage.org/getpro/habr/upload_files/ba8/f64/ef9/ba8f64ef9ec4adeb4f727473912658cd.svg"/>=2,86A</p><p>Теперь можно приступать к выбору сердечника.</p><p>Сердечник выбирать буду методом подбора. Для этого составлю в электронной таблице расчет и буду подставлять туда параметры различных сердечников до получения приемлемого результата. Приемлемым результатом является низкая мощность потерь и низкая температура сердечника. Рабочая частота должна быть на линейном участке работы сердечника.</p><p>Входные данные таблицы:</p><ul><li><p>Диаметр провода (dпр) возьму равным 0,5мм. </p></li><li><p>магнитная проницаемость, </p></li><li><p>наружный диаметр, </p></li><li><p>внутренний диаметр, </p></li><li><p>высота, </p></li><li><p>путь магнитной линии, </p></li><li><p>площадь поперечного сечения, </p></li><li><p>индукция насыщения, </p></li><li><p>максимальная напряженность, </p></li><li><p>удельные потери,</p></li><li><p>остаточная индукция. </p></li></ul><p>Все эти параметры можно найти в даташите сердечников.</p><p>Содержание табличного расчета:</p><p>Вначале рассчитал количество витков, которое надо намотать, чтобы получить нужную индуктивность. <img class="formula inline" source="N=\sqrt{L*l/(m_0*m*S_e)}" alt="N=\sqrt{L*l/(m_0*m*S_e)}" src="https://habrastorage.org/getpro/habr/upload_files/31c/c76/22d/31cc7622d708c06f11585dfe09d9cbb6.svg"/>,</p><p>L – индуктивность в Гн, l – путь магнитной линии в м, m0 – абсолютная магнитная проницаемость вакуума, m – магнитная проницаемость сердечника, Se – площадь поперечного сечения в м. После подстановки значений округлили до целого. </p><p>Длина одного витка: <img class="formula inline" source="l_{1вит}= ((d_{нар}-d_{внут})+d_{пр})+( h+d_{пр} )*2" alt="l_{1вит}= ((d_{нар}-d_{внут})+d_{пр})+( h+d_{пр} )*2" src="https://habrastorage.org/getpro/habr/upload_files/19e/2c5/832/19e2c5832df2cc718c8e00fa5e6ce89a.svg"/> </p><p>Считаю RMS напряженность и магнитную индукцию. Проверяю, что не вышел за максимальные значения. </p><p><img class="formula inline" source="H_{RMS}=( N / { l_{1вит}}  )* I_{RMS(pri)}" alt="H_{RMS}=( N / { l_{1вит}}  )* I_{RMS(pri)}" src="https://habrastorage.org/getpro/habr/upload_files/ee5/d8b/897/ee5d8b897e7839952c4d45eaa05540da.svg"/>, <img class="formula inline" source="B_{RMS}= {m_{0}*m*I_{RMS(pri)}*N} /{l}" alt="B_{RMS}= {m_{0}*m*I_{RMS(pri)}*N} /{l}" src="https://habrastorage.org/getpro/habr/upload_files/e90/079/f6a/e90079f6ad9dd0ccd96ed6f34c162bf5.svg"/>,</p><p>где l – путь магнитной линии в м, m0 – абсолютная магнитная проницаемость вакуума в Гн/м.</p><p>Для того, чтобы найти потери мне не хватает объема, так что считаю объем: <img class="formula inline" source="V=\pi*h*{({ d_{нар}}^{2}-{ d_{внут}}^{2})} /{2}" alt="V=\pi*h*{({ d_{нар}}^{2}-{ d_{внут}}^{2})} /{2}" src="https://habrastorage.org/getpro/habr/upload_files/6c0/b86/f5f/6c0b86f5fa76323e047f4b3147fcd77f.svg"/>, </p><p>А теперь мощность потерь в сердечнике: <img class="formula inline" source="P_{потерь}=P_{уд.потери}* 10^{-3}*V*10^{-3}" alt="P_{потерь}=P_{уд.потери}* 10^{-3}*V*10^{-3}" src="https://habrastorage.org/getpro/habr/upload_files/107/bdc/b66/107bdcb6601b16f43da59b24d2eb86b5.svg"/>, </p><p>Удельные потери даны в мВт/см^3, поэтому в формуле надо их перевести в Вт, объем я считал до этого в мм и также в формуле переведу его в см3.</p><p>Считаю на сколько максимально нагревается сердечник. Для этого вначале посчитаю площадь открытой поверхности сердечника.<br/><img class="formula inline" source="S_{закр}=d_{пр}*l_{1вит}*N" alt="S_{закр}=d_{пр}*l_{1вит}*N" src="https://habrastorage.org/getpro/habr/upload_files/54c/c9f/a84/54cc9fa842712eee3988300b19e9fe55.svg"/>,<img class="formula inline" source="S_{сердечника}= \pi*({2*( ({ d_{нар}}) ^{2} -({ d_{внут}}) ^{2})} /{4}+ d_{нар}*h+d_{внут}*h)" alt="S_{сердечника}= \pi*({2*( ({ d_{нар}}) ^{2} -({ d_{внут}}) ^{2})} /{4}+ d_{нар}*h+d_{внут}*h)" src="https://habrastorage.org/getpro/habr/upload_files/071/402/d59/071402d59ee812a9d14b43db5c7f9c5c.svg"/>,<img class="formula inline" source="S_{откр}= S_{сердечника}- S_{закр}" alt="S_{откр}= S_{сердечника}- S_{закр}" src="https://habrastorage.org/getpro/habr/upload_files/28b/063/a1f/28b063a1f00993fcba2bb766d1401629.svg"/>.</p><p>После подсчета площади считаю температуру перегрева сердечника относительно температуры окружающей среды. </p><p><img class="formula inline" source="t= ({ { P_{потерь}} \over {S _{откр}}  })^{0,833}" alt="t= ({ { P_{потерь}} \over {S _{откр}}  })^{0,833}" src="https://habrastorage.org/getpro/habr/upload_files/8d7/35c/121/8d735c121a44d66bd1ccc8b5c5e81b41.svg"/>,</p><p>Температура не должна превышать температуру плавления олова (припоя).</p><p>Выбираю красно-серый кольцевой сердечник с распределенным зазором Т94-2. Расчетные потери 0,138 Вт, температура перегрева 20 градусов.</p><figure class="full-width "><img src="/img/image-loader.svg" height="800" data-src="https://habrastorage.org/getpro/habr/upload_files/e6b/d5a/f95/e6bd5af9578de2bddd2891e11345144d.png" data-width="800"/><figcaption></figcaption></figure><p> </p><p>Расчет входного и выходного фильтра.</p><p>требования к конденсаторам:</p><ol><li><p>Емкость должна быть больше рассчитанной (ниже);</p></li><li><p>иметь возможность пропускать высокую переменную составляющую тока;</p></li><li><p>иметь низкое сопротивление (ESR);</p><p><img class="formula inline" source="C_{вх}={ { I_{ср}*dt} \over {dU} }" alt="C_{вх}={ { I_{ср}*dt} \over {dU} }" src="https://habrastorage.org/getpro/habr/upload_files/dd7/823/339/dd782333972f675b4ea97cdc82c94deb.svg"/>,</p></li></ol><p><img class="formula inline" source="С_{вых}={ { I_{фвых}*(T-ton)} \over {dU} }" alt="С_{вых}={ { I_{фвых}*(T-ton)} \over {dU} }" src="https://habrastorage.org/getpro/habr/upload_files/de1/d1d/f58/de1d1df58237c4e9a2c5617be264dbb0.svg"/>, </p><p>где dt = ton (только для входной емкости), Iср =2,05А(из характеристик СБ), Свх = 328 мкФ, Свых = 150,4 мкФ.</p><p><img class="formula inline" source="I_{фвых}= \sqrt{ I_{RMS(sec)}^{2}-I_{out}^{2}} " alt="I_{фвых}= \sqrt{ I_{RMS(sec)}^{2}-I_{out}^{2}} " src="https://habrastorage.org/getpro/habr/upload_files/cce/d4e/d36/cced4ed360ae93dd0c71611ce4f30a4f.svg"/>=3,25 А; </p><p><img class="formula inline" source="I_{out}= { P_{сб}} / { U_{max(акб)}} " alt="I_{out}= { P_{сб}} / { U_{max(акб)}} " src="https://habrastorage.org/getpro/habr/upload_files/d4e/f2d/524/d4ef2d524065e0d0ab5ad83c91d27616.svg"/>=2,24 А.</p><p>Выбрал конденсатор <strong>B41858C9687M</strong>. Его емкость = 680мкФ. Максимальный ток 2,683 А. На входной ставлю два в параллель, чтобы выполнить условие по току. На выходной фильтр - один.</p><p>Обязательно считаю потери: <img class="formula inline" source="Рпот=ESR*I_{фвых}" alt="Рпот=ESR*I_{фвых}" src="https://habrastorage.org/getpro/habr/upload_files/705/8fd/dd6/7058fddd67a58084b891a63a0c2dca2f.svg"/>,</p><p>Потери на входном фильтре Рпот вх=0,14 Вт, на выходном - Рпот вых=0,1 Вт.</p><p>Приступаю к расчету транзистора.</p><p>Требования к транзистору:</p><ol><li><p><em>Мощность потерь должна быть маленькой (меньше 2,5% от максимальной мощности)</em></p><p><em> <img class="formula inline" source="R_{канала}> {{2,5* P_{ сб}} \over {100* I_{RMS}^{2}}}" alt="R_{канала}> {{2,5* P_{ сб}} \over {100* I_{RMS}^{2}}}" src="https://habrastorage.org/getpro/habr/upload_files/a3b/8e2/1d6/a3b8e21d6eea1cd591769ce3280a7a20.svg"/>,</em></p></li><li><p><em>Допустимое напряжение закрытого канала должно быть с запасом.</em></p><p><em><img class="formula inline" source="U_{сток-исток}> {{(  U_{max(акб)}+ dU_{падение на диоде} )} \over { \sqrt{2}/2} } " alt="U_{сток-исток}> {{(  U_{max(акб)}+ dU_{падение на диоде} )} \over { \sqrt{2}/2} } " src="https://habrastorage.org/getpro/habr/upload_files/4ff/cf8/fdd/4ffcf8fdd4b090cb8269ba5c2bb66ef8.svg"/></em></p></li><li><p><em>Допустимый ток исток-сток значительно выше <img class="formula inline" source="I_{max}=8,2A" alt="I_{max}=8,2A" src="https://habrastorage.org/getpro/habr/upload_files/d56/225/6f3/d562256f391b70dedefdefb5e2a39abb.svg"/>,</em></p></li><li><p><em>Использовать то, что есть.</em></p></li></ol><p>По этим требованиям выбрал транзистор IRF530N сопротивление канала 0,11 Ом (в максимальных значениях), максимальное напряжение сток исток 100В.</p><p>Но перед тем как окончательно его выбрать нужно посчитать его потери.</p><p>Потери на перезаряд затвора достаточно большие при открытии и закрытии канала. Ведь транзистор открывается и закрывается тоже какое-то время. Поэтому надо уменьшить время открытия-закрытия и ток, проходящий через транзистор в этот период времени. На момент открытия канала ток сток-исток и так стремится к нулю. Ведь индуктивность будет блокировать резкое изменение тока. Основные потери возникают при закрытии канала, когда ток индуктивности на максимуме.</p><p>Можно без особых проблем увеличить время открытия транзистора, ограничив ток перезаряда затвора до уровня чуть больше Iзакр последовательным резистором R1.  Это уменьшит нагрев транзистора, частично перенеся потери затвора в R1. При этом время закрытия останется минимальным.</p><p><em><img class="formula inline" source="I_{откр}= {{q_{затвора}} \over { t_{r}+ t_{d(on)}} }" alt="I_{откр}= {{q_{затвора}} \over { t_{r}+ t_{d(on)}} }" src="https://habrastorage.org/getpro/habr/upload_files/bd9/16a/a7b/bd916aa7b8571e3dc31fb7f3fc6281e2.svg"/>= </em>1,18А - ток перезаряда затвора при открытии,</p><p><em><img class="formula inline" source="I_{закр}= {{q_{затвора}} \over { t_{f}+ t_{d(off)}} }" alt="I_{закр}= {{q_{затвора}} \over { t_{f}+ t_{d(off)}} }" src="https://habrastorage.org/getpro/habr/upload_files/450/b0e/d0e/450b0ed0e343e229353db96a18b69c1b.svg"/></em>= 0,6А - ток перезаряда затвора при закрытии,</p><p>где qзатвора = 37нКл – заряд затвора, tr = 22нс – время, за которое транзистор открывается, tf = 25нс – время, за которое транзистор закрывается, td(on) = 9,2нс – задержка перед открытием, td(off) = 35нс – задержка перед закрытием. Все эти величины можно найти в даташите по транзистору.</p><p>Нужно сделать так, чтобы ток, который поступает на затвор, был больше или равен, чем ток закрытия (Iзакр). Очевидно, что выходы УМ не способны генерировать такие токи в затвор, да и напряжение там менее 5 В. Глядя на входные характеристики транзистора, видно, что сопротивление канала снижается пропорционально росту напряжения затвора вплоть до 10 В. Прямое управление силовым ключом транзистора от УМ приведет к более медленному процессу открытия и закрытия канала. Как следствие потери возрастут  пропорционально времени переходного процесса и транзистор попросту нагреется до бессовестных значений. </p><p><em>Говоря человеческим языком, если хочешь чтобы транзистор заработал по-настоящему, обеспечь ему на затворе больше 10 В и больше 1А.</em></p><p>Для этого ставлю усилитель сигнала. Можно конечно построить усилитель на транзисторах, но гораздо проще использовать специальные микросхемы. Так как общий провод управляющего сигнала подключен к истоку транзистора, то схема называется «Ключ нижнего плеча», соответственно, буду искать микросхему, которая называется «драйвер нижнего плеча». Выберу микросхему TC4420CPA, которая обеспечивает усиление сигнала до 18В, и тока до 6А. Ввиду того, что напряжение питания микроконтроллера 7-12В, целесообразно использовать один общий блок питания для драйверов нижнего плеча и контроллера, а напряжение выбрать, например, 11В, что выше 10В, но ниже 12В. Надо ограничить ток перезаряда затвора, как сказал выше. Для этого надо поставить резистор R1 на затворе: <img class="formula inline" source="R_{1}= {U_{ус}} / { I_{ср.от.зак.}}" alt="R_{1}= {U_{ус}} / { I_{ср.от.зак.}}" src="https://habrastorage.org/getpro/habr/upload_files/db6/436/d72/db6436d7212aad64c189dab5ab5dc619.svg"/><em>,</em></p><p><em>где Uус — напряжение питания микроконтроллера (=11В), <img class="formula inline" source="I_{ср.от.зак.}= {{ I_{откр}+I_{закр}} \over 2}" alt="I_{ср.от.зак.}= {{ I_{откр}+I_{закр}} \over 2}" src="https://habrastorage.org/getpro/habr/upload_files/1a8/82c/9b0/1a882c9b0c24483a736506eb48114bd9.svg"/></em></p><p>Ближайший резистор по таблице сопротивлений 13Ом, поэтому возьму его.</p><p>Потери при открытии и закрытии на затворе оптимизированы по максимуму и стремятся к нулю. </p><p>Потери в открытом канале (когда транзистор включен): </p><p><img class="formula inline" source="W_{потери отк.канала}={R_{отк.канала}*(I_{max(откр)}^{2}+ I_{max(закр)}^{2})*{({t_{on}} over {2}-(t_{r}+t_{d(on)}))} \over 2} " alt="W_{потери отк.канала}={R_{отк.канала}*(I_{max(откр)}^{2}+ I_{max(закр)}^{2})*{({t_{on}} over {2}-(t_{r}+t_{d(on)}))} \over 2} " src="https://habrastorage.org/getpro/habr/upload_files/454/c41/ff8/454c41ff80566e7479267413848a23c7.svg"/></p><p>Приводя энергию к времени периода, получаю мощность потерь чуть менее 0,9 Вт. Корпус транзистора рассеивает до 3 Вт, но что-то меня терзают смутные сомнения - поставлю на него радиатор в несколько квадратных сантиметров.</p><p>Диод - самый главный по потерям в этой схеме. Ему надо уделить особое внимание.</p><p>Требования:</p><ol><li><p><em>Максимальное обратное напряжение должно быть больше 57, 6 с запасом;</em></p></li><li><p><em>Прямой ток максимально допустимый должен быть больше пикового выходного тока;</em></p></li><li><p><em>минимизация мощностей потерь, а это значит минимизация мощностей на прямом и обратном ходу;</em></p></li><li><p><em>с минимальным обратным током в закрытом состоянии</em></p></li><li><p><em>с минимальным напряжением в открытом состоянии</em></p><p>Выбрал диод MBR10100G, так как он подходит по большинству параметров. </p><p>Для измерения тока выходной цепи оказалось проще всего воспользоваться готовым “тройка-модулем” для контроллеров iskra. Просто впаял его прямо на плату. </p><p>В завершении расчета складываю все потери и… расчетный КПД получается более 94%. Превосходный результат для самоделки. Соберем и проверим! </p><figure class="full-width "><img src="/img/image-loader.svg" alt="Диаграмма" title="Диаграмма" height="742" data-src="https://habrastorage.org/getpro/habr/upload_files/785/0d1/629/7850d1629a016e3a59317682f9926d9c.png" data-width="1200"/><figcaption>Диаграмма</figcaption></figure></li></ol><p><em><br/></em></p><figure class="full-width "><img src="/img/image-loader.svg" height="1239" data-src="https://habrastorage.org/getpro/habr/upload_files/46f/c1f/264/46fc1f26446ee03aa46d5d6251bd9cab.png" data-width="929"/><figcaption></figcaption></figure><p>Считаю, что цели расчета подтверждены экспериментом, можно пускать в производство. </p><p>Как любой серьезный девайс, мой должен иметь вид законченного изделия! Нужен корпус. </p><p>У устройства много тяжелых габаритных деталей: конденсаторы, транзистор, диод, дроссель. В условиях морского судна они постоянно испытывают перегрузки. Их надо закрепить в корпусе и надежно прикрутить. Соединение УМ и периферийных модулей сделаю с помощью шлейфа. В каждом периферийном модуле установлю DIP-переключатель для установки адреса модуля в системе.</p><figure class="full-width "><img src="/img/image-loader.svg" height="902" data-src="https://habrastorage.org/getpro/habr/upload_files/f04/a65/0ab/f04a650abbc58ace756001a387c4f14f.png" data-width="1017"/><figcaption></figcaption></figure><p>Корпуса печатаю на 3D принтере и вот устройство готово! Перехожу к самому интересному - программированию.</p><p>Итак, исходные данные для управления:</p><ul><li><p><em>напряжение АКБ, снимаемое с делителя R2R3,</em></p></li><li><p><em>напряжение, пропорциональное выходному току каждого периферийного модуля приходит с интегрированных в них тройка-модулей,</em></p></li><li><p><em>для температурной компенсации пришлось добавить по 1-wire сети датчик температуры АКБ,</em></p></li><li><p><em>Зарядная характеристика АКБ из паспорта аккумулятора.</em></p></li></ul><p>Выходные данные: </p><ul><li><p><em>управляющий ШИМ-сигнал для каждого периферийного модуля,</em></p></li><li><p><em>интегрированные расчетные показатели работы: Uакб, Iзаряда, количество накопленной энергии за день и индикаторы работы каждого периферийного модуля. </em></p></li></ul><p>Для вывода пользовательской информации добавил ВТ-модуль для общения с телефоном. Теперь можно, стоя рядом с яхтой на причале узнать состояние зарядки аккумулятора.</p><p>Текст программы, думаю, писать тут незачем. Многие модули программы взяты с гитхаба и переработаны под себя.  Вот основные моменты:</p><ol><li><p><em>считал и нормализовал сигналы с датчиков,</em></p></li><li><p><em>выполнил фильтрацию помех,</em></p></li><li><p><em>оцифровал зарядную характеристику,</em></p></li><li><p><em>подготовил библиотеку ШИМ,</em></p></li><li><p><em>подготовил итератор для сканирования источника на предмет максимальной отдачи,</em></p></li><li><p><em>итератор запускается по условию, что мощность отдачи изменилась на 5%,</em></p></li><li><p><em>так как в ардуино нет понятия функциональных блоков пришлось растиражировать пункты 5 и 6 для максимального количества модулей и предусмотреть таблицу конфигурации, чтобы отключить пока отсутствующие модули,</em></p></li><li><p><em>подготовить динамический текст для отправки интегральной пользовательской информации по запросу с телефона по ВТ,</em></p></li><li><p><em>так как в ардуино нет системных часов, для определения ночи предпринял простой прием, если суммарная мощность всех источников меньше собственного потребления КГЭ-1, значит наступила ночь,</em></p></li><li><p><em> сделал ограничение тока заряда при достижении максимального уровня энергии в АКБ, просто наступает ночь,</em></p></li><li><p><em> при наступлении ночи УМ гасит периферию и засыпает на 30 минут, потом просыпается и проводит сканирование. Если опять ночь - то снова ложится спать. Так удается сэкономить энергию аккумулятора, ведь ночью поступлений от источников нет.</em></p></li></ol><p>ПС. Подходит к концу второй сезон использования девайса на яхте. Краткий итог: До установки КГЭ-1, по наблюдениям, в солнечный июльский день приходило примерно 200-250 Вт*часов. КГЭ-1 молодец, он выжимает до 400 Вт*часов за сутки с тех же солнечных батарей.</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%AF%D1%85%D1%82%D0%B0%5D" class="tm-tags-list__link">Яхта</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%BE%D0%BB%D0%BD%D0%B5%D1%87%D0%BD%D1%8B%D0%B9%20%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%5D" class="tm-tags-list__link">солнечный контроллер</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/circuit-design/" class="tm-hubs-list__link">
    Схемотехника
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/arduino/" class="tm-hubs-list__link">
    Разработка под Arduino
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/energy/" class="tm-hubs-list__link">
    Энергия и элементы питания
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/physics/" class="tm-hubs-list__link">
    Физика
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/transport/" class="tm-hubs-list__link">
    Транспорт
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 7: ↑6 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 7: ↑6 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+5</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    19
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/iletta/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 26 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    25.7
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">11.6</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Василий Карпов</span> <a href="/ru/users/iletta/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @iletta
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Управление проектами</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/582420/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 2 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/582420/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/582420/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"582420":{"id":"582420","timePublished":"2021-10-08T12:52:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"Солнце, ветер и вода ver 0.3.5","leadData":{"textHtml":"\u003Cp\u003EИнновации в яхту - солнечный контроллер специального назначения\u003C\u002Fp\u003E\u003Cp\u003Eсезон третий с половиной.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd8d\u002Fd69\u002F3b3\u002Fd8dd693b3d8706b3077ddb86c6c0acfa.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd8d\u002Fd69\u002F3b3\u002Fd8dd693b3d8706b3077ddb86c6c0acfa.png","fit":"cover","positionY":67.045454545455,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":25.7,"votesCount":26},"rating":11.6,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2216350","alias":"iletta","fullname":"Василий Карпов","avatarUrl":null,"speciality":"Управление проектами"},"statistics":{"commentsCount":2,"favoritesCount":19,"readingCount":1891,"score":5,"votesCount":7},"hubs":[{"relatedData":null,"id":"21472","alias":"circuit-design","type":"collective","title":"Схемотехника","titleHtml":"Схемотехника","isProfiled":true},{"relatedData":null,"id":"21474","alias":"arduino","type":"collective","title":"Разработка под Arduino","titleHtml":"Разработка под Arduino","isProfiled":true},{"relatedData":null,"id":"21914","alias":"energy","type":"collective","title":"Энергия и элементы питания","titleHtml":"Энергия и элементы питания","isProfiled":false},{"relatedData":null,"id":"21968","alias":"physics","type":"collective","title":"Физика","titleHtml":"Физика","isProfiled":false},{"relatedData":null,"id":"22004","alias":"transport","type":"collective","title":"Транспорт","titleHtml":"Транспорт","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EИнновации в яхту - солнечный контроллер специального назначения\u003C\u002Fp\u003E\u003Cp\u003Eсезон третий с половиной\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003Cem\u003EКризис - это когда не хочется хотеть чего-то хотеть\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E(С) Квртет-И\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F483478\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпервой статье\u003C\u002Fa\u003E цикла я рассказал как появилась парусная яхта. На момент постройки она была укомплектована малосильным (менее 1 л.с.) электрическим двигателем. Как оказалось на практике такого двигателя, в принципе, хватает для парковки, он бесшумный и без запаха по сравнению с бензиновым, но совершенно не тянет в штормовую погоду. Всего один внезапный шторм решил судьбу мотора и передо мной встала задача обеспечения на судне двигателя, способного вытянуть 2,5-х тонную яхту в аналогичный шторм. Выбор мотора это отдельный квест, почитайте об этом в \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F582044\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпредыдущей статье\u003C\u002Fa\u003E. В итоге был выбран стационарный яхтенный электромотор — TORQEEDO CRUISE 4FP. Мотор имеет питание 48В, а стандартная электросеть яхтенного оборудования - 12В. Пока модернизация идет полным ходом, самое время создать контроллер гибридной энергосети, который, для начала, будет обеспечивать заряд аккумулятора с базовым напряжением 48В не только от двух старых солнечных батарей. Назову его КГЭ-1. Очевидно, что при возросшей энерговооруженности яхты, потребуется значительно увеличить емкость аккумуляторов. Именно поэтому КГЭ-1 должен быть готов принять питание от других возможных источников энергии — ветряк, бензогенератор, дополнительные СБ, резервные аккумуляторы и даже педальный генератор. Решать задачу буду так, как она и поставлена — модульно. Структурная схема устройства будет содержать один общий микроконтроллер, назову его УМ - управляющий модуль, и некоторое количество периферийных модулей (Контроллеры солнечных батарей), работающих на общий аккумулятор.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"281\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd8d\u002Fd69\u002F3b3\u002Fd8dd693b3d8706b3077ddb86c6c0acfa.png\" data-width=\"711\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПринцип работы КГЭ-1: Энергия, получаемая от каждого источника квантуется и забрасывается в аккумулятор. В качестве “катапульты” используется обычный дроссель. Заброс энергии продолжается до тех пор пока в аккумуляторе есть свободная емкость. Периферийный модуль по факту является обратноходовым преобразователем с внешним управлением.\u003C\u002Fp\u003E\u003Cp\u003E \u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"643\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F63a\u002F76e\u002F0cd\u002F63a76e0cd9a695cb1305d6206e0122ff.png\" data-width=\"1343\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСхема проста и состоит из недорогих деталей и при этом позволяет получить КПД более 90%. \u003C\u002Fp\u003E\u003Cp\u003EЗдесь АКБ это общий силовой аккумулятор. R2, R3, C3, Iskra и конвертер 48\u002F11 это общий управляющий модуль - УМ. Остальная часть схемы соответствует периферийному модулю и будет тиражироваться под каждый отдельный источник.\u003C\u002Fp\u003E\u003Cp\u003EВыходная характеристика обратноходового преобразователем соответствует источнику тока. Это именно то, что нужно для работы на нагрузку в виде аккумулятора. Напряжение аккумулятора - достаточно медленно меняющийся параметр, при регулировании можно считать его константой. \u003C\u002Fp\u003E\u003Cp\u003EВсе это имеет смысл только при максимально высоком КПД преобразования и именно поэтому КГЭ-1 работает по принципу mppt, настраивая каждый периферийный модуль максимальное значение выходного тока. Это и будет соответствовать максимуму отбираемой у источника мощности. Например, солнечные панели на движущейся яхте априори имеют неравные условия, одна может быть полностью освещена, на другую падает тень о леера или паруса. Через несколько минут ситуация может измениться.\u003C\u002Fp\u003E\u003Cp\u003EКроме того, при проектировании необходимо особое внимание уделить минимизации потерь энергии в процессе преобразования.\u003C\u002Fp\u003E\u003Cp\u003EУМ состоит из микроконтроллера, схемы измерения напряжения аккумулятора и блока питания.\u003C\u002Fp\u003E\u003Cp\u003EТребования к микроконтроллеру (в последующем МК):\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003Eизмерение напряжения и\u002Fили тока - минимум 9;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвыходной сигнал ШИМ с высокой частотой – минимум 4 выхода ШИМ;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eмалое энергопотребление;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдоступность в продаже и «некусучая цена».\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EМикроконтроллер Iskra Neo, программируемый контроллер на базе ATmega32U4, вполне удовлетворяет всем характеристикам и доступен по цене. Он имеет  20 портов ввода-вывода общего назначения, 7 портов с поддержкой ШИМ, 12 портов, подключенных к АЦП с напряжением от 0 до 5В. МК сможет дать частоту ШИМ \u003Cimg class=\"formula inline\" source=\"f= { F_{CPU}} \u002F (K* 2^n) \" alt=\"f= { F_{CPU}} \u002F (K* 2^n) \" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F76e\u002Fa5c\u002F218\u002F76ea5c21883e17f3674bf349648e4008.svg\"\u002F\u003E= 62,5кГц\u003C\u002Fp\u003E\u003Cp\u003Eгде f – частота ШИМ,=16 МГц – тактовая частота микроконтроллера, K=1 – коэффициент предделителя счетчика, n = 8 бит – разрядность счетчика.\u003C\u002Fp\u003E\u003Cp\u003EТеперь делитель напряжения R2 и R3. Делитель напряжения нужен, чтобы преобразовывать напряжение АКБ 38,4-56,7В в напряжение от 0 до 5 В.\u003C\u002Fp\u003E\u003Cp\u003EДля безопасности выходное напряжение на резисторах беру меньше 5\u003Cem\u003E0,707 и получаем 3,5В. Так как у микроконтроллера есть внутреннее сопротивление, и оно подключено параллельно к R3, то надо соблюдать условие, что R3&lt;&lt;ri, где ri - внутренне сопротивление микроконтроллера. Первое условие - R3 примерно на три порядка меньше, чем внутреннее сопротивление.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EТак как делитель подключен к АКБ постоянно, то и ток через него течет постоянно, а этот ток является прямыми потерями поэтому целесообразно выбирать резистор R3, как можно больше. Объединяя первое и второе условия, он должен быть до 5кОм.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EПервый удовлетворяющий требованиям резистор для R3 из сетки сопротивлений = 3,6кОм.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EТогда \u003Cimg class=\"formula inline\" source=\"R2=(U_{дел}*R3\u002FU_{3})-R3\" alt=\"R2=(U_{дел}*R3\u002FU_{3})-R3\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe91\u002F22a\u002Fb42\u002Fe9122ab4242db0fe195c18fd6fba5c5e.svg\"\u002F\u003E= 55,4 кОм\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EБлижайший по сетке 56,4кОм.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EТеперь надо рассчитать потери в делителе: Pдел.потери= 0,05415 Вт, это составляет 0,135%, считаю, что это приемлемо.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EКонденсатор C3 является фильтром высокочастотных помех.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EВзял конденсатор с емкостью C3 = 0,1мкФ потому что был под рукой, проверяю: \u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E\u003Cimg class=\"formula inline\" source=\"x_{c}=1\u002F(2*\\pi*f*C)\" alt=\"x_{c}=1\u002F(2*\\pi*f*C)\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F99e\u002F85a\u002F90e\u002F99e85a90e10281d576967f5750dc7702.svg\"\u002F\u003E= 25,4 Ом\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EКоэффициент деления помехи равен \u003Cimg class=\"formula inline\" source=\"R_{c}\u002F(R_{c}+R2) &lt;= 45*10^{-5}\" alt=\"R_{c}\u002F(R_{c}+R2) &lt;= 45*10^{-5}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F93a\u002F5dd\u002F045\u002F93a5dd0456be2eeca4543576894af50a.svg\"\u002F\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EКоэффициент деления полезного сигнала = 0,06\u003C\u002Fp\u003E\u003Cp\u003EКоэффициент подавления помехи относительно сигнала нашел как отношение двух коэффициентов деления = 133\u003C\u002Fp\u003E\u003Cfigure class=\"float full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1360\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3d6\u002F2f7\u002F369\u002F3d62f736970abeaeb88479eadb42c537.png\" data-width=\"1360\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПреобразователь 48\u002F11 В нужен для питания контроллера в рабочем и спящем режиме и формирования управляющих сигналов на периферийные модули. Не думаю, что там потребуется большая мощность. Чтобы не усложнять задачу - возьму готовый у китайцев. \u003C\u002Fp\u003E\u003Cp\u003EПосле этого приступаю к расчету обратноходового преобразователя. В моем случае нет необходимости в гальванической развязке, поэтому сосредоточусь на однообмоточном дросселе. Во время импульса он накапливает энергию в сердечнике, а во время паузы перебрасывает ее в аккумулятор. Вначале рассчитаю сколько энергии надо запасти и передать за один импульс, по формуле: \u003Cimg class=\"formula inline\" source=\"W_3=P_{сб}\u002Ff = 0,64*10^{-3} Вт*c\" alt=\"W_3=P_{сб}\u002Ff = 0,64*10^{-3} Вт*c\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F917\u002F518\u002F90a\u002F91751890ab9d31ea38d7790d341ed986.svg\"\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003Eгде Wз – энергия, которую дроссель сможет запасти за один импульс, Pсб — максимальная мощность СБ (или другого источника), Pсб=40Вт, f – частота ШИМ.\u003C\u002Fp\u003E\u003Cp\u003EТеперь приступаю к расчету индуктивности катушки (дросселя). \u003C\u002Fp\u003E\u003Cp\u003EВремя одного импульса ton = T*\u003Cem\u003ED,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003Eгде T – это период, D – скважность (для меандра D=0,5).\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EМаксимальный ток Imax. При открытии транзистора ток будет нарастать практически линейно, тогда выведу формулу для Imax через Iср = 2,05А (из характеристик СБ). \u003Cimg class=\"formula inline\" source=\"I_{ср}=S\u002FT\" alt=\"I_{ср}=S\u002FT\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F843\u002Ff80\u002F04a\u002F843f8004a389e8d429b3c244150b65fd.svg\"\u002F\u003E, где \u003Cimg class=\"formula inline\" source=\"S=I_{max}*t_{on}\u002F2\" alt=\"S=I_{max}*t_{on}\u002F2\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F13e\u002Fdd7\u002Fa96\u002F13edd7a965484d782e97cd428b85e4c5.svg\"\u002F\u003E, \u003Cimg class=\"formula inline\" source=\"T=1\u002Ff\" alt=\"T=1\u002Ff\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F122\u002F52d\u002F088\u002F12252d08856ddb8626ec83eb32d2352c.svg\"\u002F\u003E— период\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cfigure class=\"float \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"114\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F996\u002Fdc6\u002Fee3\u002F996dc6ee3c328898d06aa74580ce25d2.png\" data-width=\"149\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Cem\u003EСразу рассчитаем T=16мкс, ton=8мкс, \u003Cimg class=\"formula inline\" source=\"I_{max}=2*I_{cp}\u002F(f*t_{on})=8,2A\" alt=\"I_{max}=2*I_{cp}\u002F(f*t_{on})=8,2A\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F734\u002Fdbb\u002F652\u002F734dbb6524b3c810bc555b24e5dea7d1.svg\"\u002F\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EМогу найти индуктивность катушки (дросселя) по формуле: \u003Cimg class=\"formula inline\" source=\"L=U_{сб}*t_{on}\u002F(I_{max}-0)\" alt=\"L=U_{сб}*t_{on}\u002F(I_{max}-0)\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7d1\u002F3dc\u002F077\u002F7d13dc077848a5cb76337e461d9cefd8.svg\"\u002F\u003E\u003Cem\u003E= 19,02 мкГн\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003Eгде Uсб=19,5В  — рабочее напряжение солнечной батареи (из характеристик СБ).\u003C\u002Fp\u003E\u003Cp\u003EНадо узнать среднеквадратичное значение первичного и вторичного тока (тока катушки в первый и второй полупериод).\u003C\u002Fp\u003E\u003Cp\u003EIpri=Imax=8,2А. \u003Cimg class=\"formula inline\" source=\"I_{RMS(pri)}=I_{pri}*\\sqrt{D\u002F3}\" alt=\"I_{RMS(pri)}=I_{pri}*\\sqrt{D\u002F3}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5aa\u002F849\u002F6f8\u002F5aa8496f8bcf1fea51b77cfbf001bc13.svg\"\u002F\u003E=3,35A. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"I_{sec}=U_{сб}*I_{pri}\u002FU_{max(акб)}\" alt=\"I_{sec}=U_{сб}*I_{pri}\u002FU_{max(акб)}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F014\u002Fc13\u002Fc8c\u002F014c13c8c01343424acabaefcc2297c7.svg\"\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003Eгде Umax(акб) — максимальное напряжение на которое можно зарядить аккумулятор и равно оно в моем случае 56,7 В.\u003C\u002Fp\u003E\u003Cp\u003E \u003Cimg class=\"formula inline\" source=\"I_{RMS(sec)}=I_{sec}*\\sqrt{D\u002F3}\" alt=\"I_{RMS(sec)}=I_{sec}*\\sqrt{D\u002F3}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fba8\u002Ff64\u002Fef9\u002Fba8f64ef9ec4adeb4f727473912658cd.svg\"\u002F\u003E=2,86A\u003C\u002Fp\u003E\u003Cp\u003EТеперь можно приступать к выбору сердечника.\u003C\u002Fp\u003E\u003Cp\u003EСердечник выбирать буду методом подбора. Для этого составлю в электронной таблице расчет и буду подставлять туда параметры различных сердечников до получения приемлемого результата. Приемлемым результатом является низкая мощность потерь и низкая температура сердечника. Рабочая частота должна быть на линейном участке работы сердечника.\u003C\u002Fp\u003E\u003Cp\u003EВходные данные таблицы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EДиаметр провода (dпр) возьму равным 0,5мм. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eмагнитная проницаемость, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eнаружный диаметр, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвнутренний диаметр, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eвысота, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпуть магнитной линии, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eплощадь поперечного сечения, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eиндукция насыщения, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eмаксимальная напряженность, \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eудельные потери,\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eостаточная индукция. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВсе эти параметры можно найти в даташите сердечников.\u003C\u002Fp\u003E\u003Cp\u003EСодержание табличного расчета:\u003C\u002Fp\u003E\u003Cp\u003EВначале рассчитал количество витков, которое надо намотать, чтобы получить нужную индуктивность. \u003Cimg class=\"formula inline\" source=\"N=\\sqrt{L*l\u002F(m_0*m*S_e)}\" alt=\"N=\\sqrt{L*l\u002F(m_0*m*S_e)}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F31c\u002Fc76\u002F22d\u002F31cc7622d708c06f11585dfe09d9cbb6.svg\"\u002F\u003E,\u003C\u002Fp\u003E\u003Cp\u003EL – индуктивность в Гн, l – путь магнитной линии в м, m0 – абсолютная магнитная проницаемость вакуума, m – магнитная проницаемость сердечника, Se – площадь поперечного сечения в м. После подстановки значений округлили до целого. \u003C\u002Fp\u003E\u003Cp\u003EДлина одного витка: \u003Cimg class=\"formula inline\" source=\"l_{1вит}= ((d_{нар}-d_{внут})+d_{пр})+( h+d_{пр} )*2\" alt=\"l_{1вит}= ((d_{нар}-d_{внут})+d_{пр})+( h+d_{пр} )*2\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F19e\u002F2c5\u002F832\u002F19e2c5832df2cc718c8e00fa5e6ce89a.svg\"\u002F\u003E \u003C\u002Fp\u003E\u003Cp\u003EСчитаю RMS напряженность и магнитную индукцию. Проверяю, что не вышел за максимальные значения. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"H_{RMS}=( N \u002F { l_{1вит}}  )* I_{RMS(pri)}\" alt=\"H_{RMS}=( N \u002F { l_{1вит}}  )* I_{RMS(pri)}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fee5\u002Fd8b\u002F897\u002Fee5d8b897e7839952c4d45eaa05540da.svg\"\u002F\u003E, \u003Cimg class=\"formula inline\" source=\"B_{RMS}= {m_{0}*m*I_{RMS(pri)}*N} \u002F{l}\" alt=\"B_{RMS}= {m_{0}*m*I_{RMS(pri)}*N} \u002F{l}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe90\u002F079\u002Ff6a\u002Fe90079f6ad9dd0ccd96ed6f34c162bf5.svg\"\u002F\u003E,\u003C\u002Fp\u003E\u003Cp\u003Eгде l – путь магнитной линии в м, m0 – абсолютная магнитная проницаемость вакуума в Гн\u002Fм.\u003C\u002Fp\u003E\u003Cp\u003EДля того, чтобы найти потери мне не хватает объема, так что считаю объем: \u003Cimg class=\"formula inline\" source=\"V=\\pi*h*{({ d_{нар}}^{2}-{ d_{внут}}^{2})} \u002F{2}\" alt=\"V=\\pi*h*{({ d_{нар}}^{2}-{ d_{внут}}^{2})} \u002F{2}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6c0\u002Fb86\u002Ff5f\u002F6c0b86f5fa76323e047f4b3147fcd77f.svg\"\u002F\u003E, \u003C\u002Fp\u003E\u003Cp\u003EА теперь мощность потерь в сердечнике: \u003Cimg class=\"formula inline\" source=\"P_{потерь}=P_{уд.потери}* 10^{-3}*V*10^{-3}\" alt=\"P_{потерь}=P_{уд.потери}* 10^{-3}*V*10^{-3}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F107\u002Fbdc\u002Fb66\u002F107bdcb6601b16f43da59b24d2eb86b5.svg\"\u002F\u003E, \u003C\u002Fp\u003E\u003Cp\u003EУдельные потери даны в мВт\u002Fсм^3, поэтому в формуле надо их перевести в Вт, объем я считал до этого в мм и также в формуле переведу его в см3.\u003C\u002Fp\u003E\u003Cp\u003EСчитаю на сколько максимально нагревается сердечник. Для этого вначале посчитаю площадь открытой поверхности сердечника.\u003Cbr\u002F\u003E\u003Cimg class=\"formula inline\" source=\"S_{закр}=d_{пр}*l_{1вит}*N\" alt=\"S_{закр}=d_{пр}*l_{1вит}*N\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F54c\u002Fc9f\u002Fa84\u002F54cc9fa842712eee3988300b19e9fe55.svg\"\u002F\u003E,\u003Cimg class=\"formula inline\" source=\"S_{сердечника}= \\pi*({2*( ({ d_{нар}}) ^{2} -({ d_{внут}}) ^{2})} \u002F{4}+ d_{нар}*h+d_{внут}*h)\" alt=\"S_{сердечника}= \\pi*({2*( ({ d_{нар}}) ^{2} -({ d_{внут}}) ^{2})} \u002F{4}+ d_{нар}*h+d_{внут}*h)\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F071\u002F402\u002Fd59\u002F071402d59ee812a9d14b43db5c7f9c5c.svg\"\u002F\u003E,\u003Cimg class=\"formula inline\" source=\"S_{откр}= S_{сердечника}- S_{закр}\" alt=\"S_{откр}= S_{сердечника}- S_{закр}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F28b\u002F063\u002Fa1f\u002F28b063a1f00993fcba2bb766d1401629.svg\"\u002F\u003E.\u003C\u002Fp\u003E\u003Cp\u003EПосле подсчета площади считаю температуру перегрева сердечника относительно температуры окружающей среды. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"t= ({ { P_{потерь}} \\over {S _{откр}}  })^{0,833}\" alt=\"t= ({ { P_{потерь}} \\over {S _{откр}}  })^{0,833}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8d7\u002F35c\u002F121\u002F8d735c121a44d66bd1ccc8b5c5e81b41.svg\"\u002F\u003E,\u003C\u002Fp\u003E\u003Cp\u003EТемпература не должна превышать температуру плавления олова (припоя).\u003C\u002Fp\u003E\u003Cp\u003EВыбираю красно-серый кольцевой сердечник с распределенным зазором Т94-2. Расчетные потери 0,138 Вт, температура перегрева 20 градусов.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"800\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe6b\u002Fd5a\u002Ff95\u002Fe6bd5af9578de2bddd2891e11345144d.png\" data-width=\"800\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E \u003C\u002Fp\u003E\u003Cp\u003EРасчет входного и выходного фильтра.\u003C\u002Fp\u003E\u003Cp\u003Eтребования к конденсаторам:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EЕмкость должна быть больше рассчитанной (ниже);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eиметь возможность пропускать высокую переменную составляющую тока;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eиметь низкое сопротивление (ESR);\u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"C_{вх}={ { I_{ср}*dt} \\over {dU} }\" alt=\"C_{вх}={ { I_{ср}*dt} \\over {dU} }\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdd7\u002F823\u002F339\u002Fdd782333972f675b4ea97cdc82c94deb.svg\"\u002F\u003E,\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"С_{вых}={ { I_{фвых}*(T-ton)} \\over {dU} }\" alt=\"С_{вых}={ { I_{фвых}*(T-ton)} \\over {dU} }\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fde1\u002Fd1d\u002Ff58\u002Fde1d1df58237c4e9a2c5617be264dbb0.svg\"\u002F\u003E, \u003C\u002Fp\u003E\u003Cp\u003Eгде dt = ton (только для входной емкости), Iср =2,05А(из характеристик СБ), Свх = 328 мкФ, Свых = 150,4 мкФ.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"I_{фвых}= \\sqrt{ I_{RMS(sec)}^{2}-I_{out}^{2}} \" alt=\"I_{фвых}= \\sqrt{ I_{RMS(sec)}^{2}-I_{out}^{2}} \" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcce\u002Fd4e\u002Fd36\u002Fcced4ed360ae93dd0c71611ce4f30a4f.svg\"\u002F\u003E=3,25 А; \u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"I_{out}= { P_{сб}} \u002F { U_{max(акб)}} \" alt=\"I_{out}= { P_{сб}} \u002F { U_{max(акб)}} \" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd4e\u002Ff2d\u002F524\u002Fd4ef2d524065e0d0ab5ad83c91d27616.svg\"\u002F\u003E=2,24 А.\u003C\u002Fp\u003E\u003Cp\u003EВыбрал конденсатор \u003Cstrong\u003EB41858C9687M\u003C\u002Fstrong\u003E. Его емкость = 680мкФ. Максимальный ток 2,683 А. На входной ставлю два в параллель, чтобы выполнить условие по току. На выходной фильтр - один.\u003C\u002Fp\u003E\u003Cp\u003EОбязательно считаю потери: \u003Cimg class=\"formula inline\" source=\"Рпот=ESR*I_{фвых}\" alt=\"Рпот=ESR*I_{фвых}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F705\u002F8fd\u002Fdd6\u002F7058fddd67a58084b891a63a0c2dca2f.svg\"\u002F\u003E,\u003C\u002Fp\u003E\u003Cp\u003EПотери на входном фильтре Рпот вх=0,14 Вт, на выходном - Рпот вых=0,1 Вт.\u003C\u002Fp\u003E\u003Cp\u003EПриступаю к расчету транзистора.\u003C\u002Fp\u003E\u003Cp\u003EТребования к транзистору:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EМощность потерь должна быть маленькой (меньше 2,5% от максимальной мощности)\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E \u003Cimg class=\"formula inline\" source=\"R_{канала}\u003E {{2,5* P_{ сб}} \\over {100* I_{RMS}^{2}}}\" alt=\"R_{канала}\u003E {{2,5* P_{ сб}} \\over {100* I_{RMS}^{2}}}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa3b\u002F8e2\u002F1d6\u002Fa3b8e21d6eea1cd591769ce3280a7a20.svg\"\u002F\u003E,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EДопустимое напряжение закрытого канала должно быть с запасом.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E\u003Cimg class=\"formula inline\" source=\"U_{сток-исток}\u003E {{(  U_{max(акб)}+ dU_{падение на диоде} )} \\over { \\sqrt{2}\u002F2} } \" alt=\"U_{сток-исток}\u003E {{(  U_{max(акб)}+ dU_{падение на диоде} )} \\over { \\sqrt{2}\u002F2} } \" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4ff\u002Fcf8\u002Ffdd\u002F4ffcf8fdd4b090cb8269ba5c2bb66ef8.svg\"\u002F\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EДопустимый ток исток-сток значительно выше \u003Cimg class=\"formula inline\" source=\"I_{max}=8,2A\" alt=\"I_{max}=8,2A\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd56\u002F225\u002F6f3\u002Fd562256f391b70dedefdefb5e2a39abb.svg\"\u002F\u003E,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EИспользовать то, что есть.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EПо этим требованиям выбрал транзистор IRF530N сопротивление канала 0,11 Ом (в максимальных значениях), максимальное напряжение сток исток 100В.\u003C\u002Fp\u003E\u003Cp\u003EНо перед тем как окончательно его выбрать нужно посчитать его потери.\u003C\u002Fp\u003E\u003Cp\u003EПотери на перезаряд затвора достаточно большие при открытии и закрытии канала. Ведь транзистор открывается и закрывается тоже какое-то время. Поэтому надо уменьшить время открытия-закрытия и ток, проходящий через транзистор в этот период времени. На момент открытия канала ток сток-исток и так стремится к нулю. Ведь индуктивность будет блокировать резкое изменение тока. Основные потери возникают при закрытии канала, когда ток индуктивности на максимуме.\u003C\u002Fp\u003E\u003Cp\u003EМожно без особых проблем увеличить время открытия транзистора, ограничив ток перезаряда затвора до уровня чуть больше Iзакр последовательным резистором R1.  Это уменьшит нагрев транзистора, частично перенеся потери затвора в R1. При этом время закрытия останется минимальным.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E\u003Cimg class=\"formula inline\" source=\"I_{откр}= {{q_{затвора}} \\over { t_{r}+ t_{d(on)}} }\" alt=\"I_{откр}= {{q_{затвора}} \\over { t_{r}+ t_{d(on)}} }\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbd9\u002F16a\u002Fa7b\u002Fbd916aa7b8571e3dc31fb7f3fc6281e2.svg\"\u002F\u003E= \u003C\u002Fem\u003E1,18А - ток перезаряда затвора при открытии,\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003E\u003Cimg class=\"formula inline\" source=\"I_{закр}= {{q_{затвора}} \\over { t_{f}+ t_{d(off)}} }\" alt=\"I_{закр}= {{q_{затвора}} \\over { t_{f}+ t_{d(off)}} }\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F450\u002Fb0e\u002Fd0e\u002F450b0ed0e343e229353db96a18b69c1b.svg\"\u002F\u003E\u003C\u002Fem\u003E= 0,6А - ток перезаряда затвора при закрытии,\u003C\u002Fp\u003E\u003Cp\u003Eгде qзатвора = 37нКл – заряд затвора, tr = 22нс – время, за которое транзистор открывается, tf = 25нс – время, за которое транзистор закрывается, td(on) = 9,2нс – задержка перед открытием, td(off) = 35нс – задержка перед закрытием. Все эти величины можно найти в даташите по транзистору.\u003C\u002Fp\u003E\u003Cp\u003EНужно сделать так, чтобы ток, который поступает на затвор, был больше или равен, чем ток закрытия (Iзакр). Очевидно, что выходы УМ не способны генерировать такие токи в затвор, да и напряжение там менее 5 В. Глядя на входные характеристики транзистора, видно, что сопротивление канала снижается пропорционально росту напряжения затвора вплоть до 10 В. Прямое управление силовым ключом транзистора от УМ приведет к более медленному процессу открытия и закрытия канала. Как следствие потери возрастут  пропорционально времени переходного процесса и транзистор попросту нагреется до бессовестных значений. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EГоворя человеческим языком, если хочешь чтобы транзистор заработал по-настоящему, обеспечь ему на затворе больше 10 В и больше 1А.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EДля этого ставлю усилитель сигнала. Можно конечно построить усилитель на транзисторах, но гораздо проще использовать специальные микросхемы. Так как общий провод управляющего сигнала подключен к истоку транзистора, то схема называется «Ключ нижнего плеча», соответственно, буду искать микросхему, которая называется «драйвер нижнего плеча». Выберу микросхему TC4420CPA, которая обеспечивает усиление сигнала до 18В, и тока до 6А. Ввиду того, что напряжение питания микроконтроллера 7-12В, целесообразно использовать один общий блок питания для драйверов нижнего плеча и контроллера, а напряжение выбрать, например, 11В, что выше 10В, но ниже 12В. Надо ограничить ток перезаряда затвора, как сказал выше. Для этого надо поставить резистор R1 на затворе: \u003Cimg class=\"formula inline\" source=\"R_{1}= {U_{ус}} \u002F { I_{ср.от.зак.}}\" alt=\"R_{1}= {U_{ус}} \u002F { I_{ср.от.зак.}}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdb6\u002F436\u002Fd72\u002Fdb6436d7212aad64c189dab5ab5dc619.svg\"\u002F\u003E\u003Cem\u003E,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003Eгде Uус — напряжение питания микроконтроллера (=11В), \u003Cimg class=\"formula inline\" source=\"I_{ср.от.зак.}= {{ I_{откр}+I_{закр}} \\over 2}\" alt=\"I_{ср.от.зак.}= {{ I_{откр}+I_{закр}} \\over 2}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1a8\u002F82c\u002F9b0\u002F1a882c9b0c24483a736506eb48114bd9.svg\"\u002F\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EБлижайший резистор по таблице сопротивлений 13Ом, поэтому возьму его.\u003C\u002Fp\u003E\u003Cp\u003EПотери при открытии и закрытии на затворе оптимизированы по максимуму и стремятся к нулю. \u003C\u002Fp\u003E\u003Cp\u003EПотери в открытом канале (когда транзистор включен): \u003C\u002Fp\u003E\u003Cp\u003E\u003Cimg class=\"formula inline\" source=\"W_{потери отк.канала}={R_{отк.канала}*(I_{max(откр)}^{2}+ I_{max(закр)}^{2})*{({t_{on}} over {2}-(t_{r}+t_{d(on)}))} \\over 2} \" alt=\"W_{потери отк.канала}={R_{отк.канала}*(I_{max(откр)}^{2}+ I_{max(закр)}^{2})*{({t_{on}} over {2}-(t_{r}+t_{d(on)}))} \\over 2} \" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F454\u002Fc41\u002Fff8\u002F454c41ff80566e7479267413848a23c7.svg\"\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003EПриводя энергию к времени периода, получаю мощность потерь чуть менее 0,9 Вт. Корпус транзистора рассеивает до 3 Вт, но что-то меня терзают смутные сомнения - поставлю на него радиатор в несколько квадратных сантиметров.\u003C\u002Fp\u003E\u003Cp\u003EДиод - самый главный по потерям в этой схеме. Ему надо уделить особое внимание.\u003C\u002Fp\u003E\u003Cp\u003EТребования:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EМаксимальное обратное напряжение должно быть больше 57, 6 с запасом;\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EПрямой ток максимально допустимый должен быть больше пикового выходного тока;\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eминимизация мощностей потерь, а это значит минимизация мощностей на прямом и обратном ходу;\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eс минимальным обратным током в закрытом состоянии\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eс минимальным напряжением в открытом состоянии\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EВыбрал диод MBR10100G, так как он подходит по большинству параметров. \u003C\u002Fp\u003E\u003Cp\u003EДля измерения тока выходной цепи оказалось проще всего воспользоваться готовым “тройка-модулем” для контроллеров iskra. Просто впаял его прямо на плату. \u003C\u002Fp\u003E\u003Cp\u003EВ завершении расчета складываю все потери и… расчетный КПД получается более 94%. Превосходный результат для самоделки. Соберем и проверим! \u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Диаграмма\" title=\"Диаграмма\" height=\"742\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F785\u002F0d1\u002F629\u002F7850d1629a016e3a59317682f9926d9c.png\" data-width=\"1200\"\u002F\u003E\u003Cfigcaption\u003EДиаграмма\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E\u003Cem\u003E\u003Cbr\u002F\u003E\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1239\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F46f\u002Fc1f\u002F264\u002F46fc1f26446ee03aa46d5d6251bd9cab.png\" data-width=\"929\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСчитаю, что цели расчета подтверждены экспериментом, можно пускать в производство. \u003C\u002Fp\u003E\u003Cp\u003EКак любой серьезный девайс, мой должен иметь вид законченного изделия! Нужен корпус. \u003C\u002Fp\u003E\u003Cp\u003EУ устройства много тяжелых габаритных деталей: конденсаторы, транзистор, диод, дроссель. В условиях морского судна они постоянно испытывают перегрузки. Их надо закрепить в корпусе и надежно прикрутить. Соединение УМ и периферийных модулей сделаю с помощью шлейфа. В каждом периферийном модуле установлю DIP-переключатель для установки адреса модуля в системе.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"902\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff04\u002Fa65\u002F0ab\u002Ff04a650abbc58ace756001a387c4f14f.png\" data-width=\"1017\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКорпуса печатаю на 3D принтере и вот устройство готово! Перехожу к самому интересному - программированию.\u003C\u002Fp\u003E\u003Cp\u003EИтак, исходные данные для управления:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eнапряжение АКБ, снимаемое с делителя R2R3,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eнапряжение, пропорциональное выходному току каждого периферийного модуля приходит с интегрированных в них тройка-модулей,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eдля температурной компенсации пришлось добавить по 1-wire сети датчик температуры АКБ,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003EЗарядная характеристика АКБ из паспорта аккумулятора.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВыходные данные: \u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eуправляющий ШИМ-сигнал для каждого периферийного модуля,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eинтегрированные расчетные показатели работы: Uакб, Iзаряда, количество накопленной энергии за день и индикаторы работы каждого периферийного модуля. \u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДля вывода пользовательской информации добавил ВТ-модуль для общения с телефоном. Теперь можно, стоя рядом с яхтой на причале узнать состояние зарядки аккумулятора.\u003C\u002Fp\u003E\u003Cp\u003EТекст программы, думаю, писать тут незачем. Многие модули программы взяты с гитхаба и переработаны под себя.  Вот основные моменты:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eсчитал и нормализовал сигналы с датчиков,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eвыполнил фильтрацию помех,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eоцифровал зарядную характеристику,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eподготовил библиотеку ШИМ,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eподготовил итератор для сканирования источника на предмет максимальной отдачи,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eитератор запускается по условию, что мощность отдачи изменилась на 5%,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eтак как в ардуино нет понятия функциональных блоков пришлось растиражировать пункты 5 и 6 для максимального количества модулей и предусмотреть таблицу конфигурации, чтобы отключить пока отсутствующие модули,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eподготовить динамический текст для отправки интегральной пользовательской информации по запросу с телефона по ВТ,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003Eтак как в ардуино нет системных часов, для определения ночи предпринял простой прием, если суммарная мощность всех источников меньше собственного потребления КГЭ-1, значит наступила ночь,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003E сделал ограничение тока заряда при достижении максимального уровня энергии в АКБ, просто наступает ночь,\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cem\u003E при наступлении ночи УМ гасит периферию и засыпает на 30 минут, потом просыпается и проводит сканирование. Если опять ночь - то снова ложится спать. Так удается сэкономить энергию аккумулятора, ведь ночью поступлений от источников нет.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EПС. Подходит к концу второй сезон использования девайса на яхте. Краткий итог: До установки КГЭ-1, по наблюдениям, в солнечный июльский день приходило примерно 200-250 Вт*часов. КГЭ-1 молодец, он выжимает до 400 Вт*часов за сутки с тех же солнечных батарей.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"Яхта"},{"titleHtml":"солнечный контроллер"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd8d\u002Fd69\u002F3b3\u002Fd8dd693b3d8706b3077ddb86c6c0acfa.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd8d\u002Fd69\u002F3b3\u002Fd8dd693b3d8706b3077ddb86c6c0acfa.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F582420\\\u002F\"},\"headline\":\"Солнце, ветер и вода ver 0.3.5\",\"datePublished\":\"2021-10-08T15:52:14+03:00\",\"dateModified\":\"2021-10-09T18:01:45+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Василий Карпов\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой ст...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F582420\\\u002F#post-content-body\",\"about\":[\"h_circuit-design\",\"h_arduino\",\"h_energy\",\"h_physics\",\"h_transport\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F582420\\\u002Ff4246cb30eb1768058f8cc4472f62c5b\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fd8d\\\u002Fd69\\\u002F3b3\\\u002Fd8dd693b3d8706b3077ddb86c6c0acfa.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F63a\\\u002F76e\\\u002F0cd\\\u002F63a76e0cd9a695cb1305d6206e0122ff.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F76e\\\u002Fa5c\\\u002F218\\\u002F76ea5c21883e17f3674bf349648e4008.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe91\\\u002F22a\\\u002Fb42\\\u002Fe9122ab4242db0fe195c18fd6fba5c5e.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F99e\\\u002F85a\\\u002F90e\\\u002F99e85a90e10281d576967f5750dc7702.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F93a\\\u002F5dd\\\u002F045\\\u002F93a5dd0456be2eeca4543576894af50a.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F3d6\\\u002F2f7\\\u002F369\\\u002F3d62f736970abeaeb88479eadb42c537.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F917\\\u002F518\\\u002F90a\\\u002F91751890ab9d31ea38d7790d341ed986.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F843\\\u002Ff80\\\u002F04a\\\u002F843f8004a389e8d429b3c244150b65fd.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F13e\\\u002Fdd7\\\u002Fa96\\\u002F13edd7a965484d782e97cd428b85e4c5.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F122\\\u002F52d\\\u002F088\\\u002F12252d08856ddb8626ec83eb32d2352c.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F996\\\u002Fdc6\\\u002Fee3\\\u002F996dc6ee3c328898d06aa74580ce25d2.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F734\\\u002Fdbb\\\u002F652\\\u002F734dbb6524b3c810bc555b24e5dea7d1.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F7d1\\\u002F3dc\\\u002F077\\\u002F7d13dc077848a5cb76337e461d9cefd8.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F5aa\\\u002F849\\\u002F6f8\\\u002F5aa8496f8bcf1fea51b77cfbf001bc13.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F014\\\u002Fc13\\\u002Fc8c\\\u002F014c13c8c01343424acabaefcc2297c7.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fba8\\\u002Ff64\\\u002Fef9\\\u002Fba8f64ef9ec4adeb4f727473912658cd.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F31c\\\u002Fc76\\\u002F22d\\\u002F31cc7622d708c06f11585dfe09d9cbb6.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F19e\\\u002F2c5\\\u002F832\\\u002F19e2c5832df2cc718c8e00fa5e6ce89a.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fee5\\\u002Fd8b\\\u002F897\\\u002Fee5d8b897e7839952c4d45eaa05540da.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe90\\\u002F079\\\u002Ff6a\\\u002Fe90079f6ad9dd0ccd96ed6f34c162bf5.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F6c0\\\u002Fb86\\\u002Ff5f\\\u002F6c0b86f5fa76323e047f4b3147fcd77f.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F107\\\u002Fbdc\\\u002Fb66\\\u002F107bdcb6601b16f43da59b24d2eb86b5.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F54c\\\u002Fc9f\\\u002Fa84\\\u002F54cc9fa842712eee3988300b19e9fe55.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F071\\\u002F402\\\u002Fd59\\\u002F071402d59ee812a9d14b43db5c7f9c5c.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F28b\\\u002F063\\\u002Fa1f\\\u002F28b063a1f00993fcba2bb766d1401629.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F8d7\\\u002F35c\\\u002F121\\\u002F8d735c121a44d66bd1ccc8b5c5e81b41.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe6b\\\u002Fd5a\\\u002Ff95\\\u002Fe6bd5af9578de2bddd2891e11345144d.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fdd7\\\u002F823\\\u002F339\\\u002Fdd782333972f675b4ea97cdc82c94deb.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fde1\\\u002Fd1d\\\u002Ff58\\\u002Fde1d1df58237c4e9a2c5617be264dbb0.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fcce\\\u002Fd4e\\\u002Fd36\\\u002Fcced4ed360ae93dd0c71611ce4f30a4f.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fd4e\\\u002Ff2d\\\u002F524\\\u002Fd4ef2d524065e0d0ab5ad83c91d27616.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F705\\\u002F8fd\\\u002Fdd6\\\u002F7058fddd67a58084b891a63a0c2dca2f.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa3b\\\u002F8e2\\\u002F1d6\\\u002Fa3b8e21d6eea1cd591769ce3280a7a20.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F4ff\\\u002Fcf8\\\u002Ffdd\\\u002F4ffcf8fdd4b090cb8269ba5c2bb66ef8.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fd56\\\u002F225\\\u002F6f3\\\u002Fd562256f391b70dedefdefb5e2a39abb.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fbd9\\\u002F16a\\\u002Fa7b\\\u002Fbd916aa7b8571e3dc31fb7f3fc6281e2.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F450\\\u002Fb0e\\\u002Fd0e\\\u002F450b0ed0e343e229353db96a18b69c1b.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fdb6\\\u002F436\\\u002Fd72\\\u002Fdb6436d7212aad64c189dab5ab5dc619.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F1a8\\\u002F82c\\\u002F9b0\\\u002F1a882c9b0c24483a736506eb48114bd9.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F454\\\u002Fc41\\\u002Fff8\\\u002F454c41ff80566e7479267413848a23c7.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F785\\\u002F0d1\\\u002F629\\\u002F7850d1629a016e3a59317682f9926d9c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F46f\\\u002Fc1f\\\u002F264\\\u002F46fc1f26446ee03aa46d5d6251bd9cab.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Ff04\\\u002Fa65\\\u002F0ab\\\u002Ff04a650abbc58ace756001a387c4f14f.png\"]}","metaDescription":"Инновации в яхту - солнечный контроллер специального назначениясезон третий с половинойКризис - это когда не хочется хотеть чего-то хотеть(С) Квртет-ИВ первой статье цикла я рассказал как появилась...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"circuit-design,arduino,energy,physics,transport"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
