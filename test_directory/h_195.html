<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Отрабатываем Git hooks на автоматизации commit message / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/dins\/blog\/584562\/"},"headline":"Отрабатываем Git hooks на автоматизации commit message","datePublished":"2021-10-21T15:05:04+03:00","dateModified":"2021-10-21T17:28:51+03:00","author":{"@type":"Person","name":"Roman Gorbatenko"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit&rsquo;ов и commit message.","url":"https:\/\/habr.com\/ru\/company\/dins\/blog\/584562\/#post-content-body","about":["c_dins","h_programming","h_git","h_cvs","h_github","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/584562\/326843bee31c622a2c5717a875749b10\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/cd3\/cdf\/4df\/cd3cdf4df0057d1485c826b1d8e72092.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/3a1\/c55\/63c\/3a1c5563cc04614d32a994c37d8ed546.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/9e6\/cf4\/6e4\/9e6cf46e4404b68df5caacae735bdef2.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Отрабатываем Git hooks на автоматизации commit message" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Отрабатываем Git hooks на автоматизации commit message" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Отрабатываем Git hooks на автоматизации commit message" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/0fe/e1f/670/0fee1f6702e7c12a79c74e54f9d93275.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/0fe/e1f/670/0fee1f6702e7c12a79c74e54f9d93275.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/0fe/e1f/670/0fee1f6702e7c12a79c74e54f9d93275.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/0fe/e1f/670/0fee1f6702e7c12a79c74e54f9d93275.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/0fe/e1f/670/0fee1f6702e7c12a79c74e54f9d93275.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="584562" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-21T12:05:04.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/584562/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/dins/blog/584562/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/0fe/e1f/670/0fee1f6702e7c12a79c74e54f9d93275.png" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="dins" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/dins/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/88f/253/406/88f2534069a23e16d55e7e2dfb960095.jpg" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">134.04</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/dins/profile/" class="tm-company-card__name">
        DINS
      </a> <div class="tm-company-card__description"></div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Elanlum/" title="Elanlum" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/0ff/c6e/bdb/0ffc6ebdb582bc682dfcd8a13eae1ca1.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/Elanlum/" class="tm-user-info__username">
      Elanlum
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-21T12:05:04.000Z" title="2021-10-21, 15:05">21  октября   в 15:05</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Отрабатываем Git hooks на автоматизации commit message</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/dins/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании DINS</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/git/" class="tm-article-snippet__hubs-item-link"><span>Git</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/cvs/" class="tm-article-snippet__hubs-item-link"><span>Системы управления версиями</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/github/" class="tm-article-snippet__hubs-item-link"><span>GitHub</span> <!----></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="/img/image-loader.svg" height="917" data-src="https://habrastorage.org/getpro/habr/upload_files/cd3/cdf/4df/cd3cdf4df0057d1485c826b1d8e72092.png" data-width="1626"/><figcaption></figcaption></figure><p>Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей практики: как я упрощал то, что всем надоело делать руками. Я уверен, что хуки могут оказаться полезны почти каждому разработчику. Ведь все мы пишем в сообщении коммита чуть больше, чем «fixed what was broken», верно?</p><details class="spoiler"><summary>Обо мне</summary><div class="spoiler__content"><p>Меня зовут Роман Горбатенко, я Java-разработчик в компании DINS, на момент написания текста тружусь в команде Contact Center. Занимаюсь разработкой больше 3-х лет и прошел путь от личинки стажера до middle девелопера. Считаю Git одним из самых полезных инструментов. Многие не используют его возможности на полную, — надеюсь, мне удастся это немного исправить.</p></div></details><h3>Итак, о проблеме, для затравки</h3><p>На прошлом месте работы релизный процесс включал в себя ручной сбор commit’ов, относящихся к задачам, которые входят в этот самый релиз (не правда ли, здорово?). В связи с этим, команда корабля решила облегчить себе жизнь и завести правило, по которому commit message должен обязательно (!) предваряться префиксом с названием ветки. </p><p>Известно, что любое повторяющееся действие порождает случайные ошибки. И вообще, программисты не любят в повторение, мы любим в оптимизацию. Выход был найден — работу по добавлению префикса возложили на механизм Git hooks. </p><p>Ниже я расскажу, как создать prepare-commit-msg хук, немного опишу типы хуков и принципы их работы для тех, кто <s>не знал </s>забыл, расскажу, как завести наконец правило написания сообщений commit’ов и даже его соблюдать. Помимо этого, приведу несколько полезных штук, которые я подметил в процессе исследования и дам ссылки на источники, которые меня вдохновляли. </p><p>На всякий случай: я не претендую на экспертность в вопросах Git и Git hooks, некоторые читатели Хабр могут и должны знать больше меня о данной теме. Я буду рад любой помощи и советам в комментариях. Участие в опросах в конце статьи поможет мне при написании следующей статьи о Git. </p><h3>О самих Git hooks и основных типах</h3><p>Если вкратце, hook — кастомный скрипт, выполняющийся до или после событий вроде commit, push. Вот и все, действительно очень просто. Каждый проект после инициализации содержит папку .git/hooks, в которой Git ищет скрипты для выполнения при наступлении событий.  </p><p>Хуки разделяются на клиентские (локальные) и серверные (удаленные). Локальные хуки не затрагивают мою команду, и их можно оптимизировать под себя как угодно. </p><p>На схеме ниже показано время действия части локальных и серверных хуков относительно основных событий — commit и push.</p><figure class="full-width "><img src="/img/image-loader.svg" height="571" data-src="https://habrastorage.org/getpro/habr/upload_files/3a1/c55/63c/3a1c5563cc04614d32a994c37d8ed546.png" data-width="1352"/><figcaption></figcaption></figure><p>Локальные хуки бывают нескольких типов и срабатывают после создания commit’a:</p><ol><li><p>pre-commit выполняется каждый раз при вызове git commit. На этом этапе можно выполнять различные проверки commit’ов.</p></li><li><p>prepare-commit-msg выполняется после pre-commit и позволяет работать с commit message (круто, то, что надо!)</p></li><li><p>commit-msg похож на prepare-commit-msg, но вызывается после того, как вы ввели commit message. Это, например, хорошая возможность высветить предупреждение разработчикам о том, что сообщение commit’a не соответствует принятым стандартам.</p></li><li><p>post-commit вызывается сразу после commit-msg хука. К примеру, так можно триггерить отправку письма начальнику после каждого commit’a.</p></li></ol><p>Я перечислил не все типы хуков, но это и не является моей задачей. Больше информации содержит <a href="https://www.atlassian.com/git/tutorials/git-hooks"><u>данный гайд</u></a>.</p><p>В статье я последовательно рассмотрю prepare-commit-msg и commit-msg.</p><p>Думаю, теории хватит. Наша цель практическая, больше информации вы сможете найти самостоятельно или по ссылкам на источники в конце статьи.</p><details class="spoiler"><summary>Про Git hooks на Windows</summary><div class="spoiler__content"><p>В конце статьи будет дана ремарка на счет работы хуков на Windows, поскольку запуск скриптов написанных на Python немного отличается. За исключением этого момента, содержание статьи верно и для хуков на Windows</p></div></details><blockquote><p>Если в процессе прочтения вам не захочется разбираться, как устроены хуки, или удобнее смотреть в код целиком, переходите в <a href="https://github.com/Elanlum/python_git_hooks"><u>GitHub репозиторий</u></a> с кодом из этой статьи. </p></blockquote><h3>Перейдем к имплементации</h3><h4>prepare-commit-msg hook</h4><p>Для начала нужно определиться, на каком языке можно/нужно писать скрипты, которые будут исполняться как хуки. Строго говоря, писать можно на любом скриптовом языке, будь то Bash, Python, Ruby, Perl, Rust, Swift или Go.</p><p>Я пробовал Bash и Python, последний зашел больше, т.к. Bash крайне тяжело поддается с наскока, без опыта чтения/писания на нем. В статье приведены скрипты именно на Python, поскольку я могу ручаться за то, что в них написано. </p><p>Обозначать, на каком языке написан скрипт, я буду специальным символом <strong>шебанг </strong>(#!), за которым следует путь до интерпретатора конкретного языка. В случае с <strong>Mac</strong> или <strong>Linux</strong> стандартный путь к интерпретатору для Python представлен <em>/usr/bin.</em></p><p>Итого получается:</p><pre><code class="bash">#!/usr/bin/python3</code></pre><p>Для Bash путь чуть другой:</p><pre><code class="bash">#!/bin/bash</code></pre><p>Уже почти время написать наш хук. </p><p>Сформулирую задачу: название ветки содержит буквенно-численный номер Jira тикета. Регистр не важен, помимо этого номера название ветки может содержать и другую информацию. </p><p>Ниже я реализую скрипт, который из ветки вида «ABC-123-bugfix» вытащит префикс вида «ABC-123», затем из commit message вида «initial commit message» сделает итоговое сообщение «[ABC-123] initial commit message».</p><h4>Механизм работы моего prepare-commit-msg hook</h4><p>Для лучшего понимания идеи ниже приведена схема, которая повторяет формулировку задачи:</p><figure class="full-width "><img src="/img/image-loader.svg" height="541" data-src="https://habrastorage.org/getpro/habr/upload_files/9e6/cf4/6e4/9e6cf46e4404b68df5caacae735bdef2.png" data-width="1261"/><figcaption></figcaption></figure><p>Ниже находится листинг самого скрипта prepare-commit-msg hook:</p><pre><code class="python">1    #!/usr/bin/python3
2  
3    import re
4    import sys
5    from subprocess import check_output
6  
7    commit_msg_filepath = sys.argv[1]
8    branch = (
9        check_output(["git", "symbolic-ref", "--short",  
10   "HEAD"]).decode("utf-8").strip()
11   )
12
13   regex = r"^[A-Z]{1,9}-[0-9]{1,9}"
14
15   found_obj = re.match(regex, branch)
16
17   if found_obj:
18       prefix = found_obj.group(0)
19       with open(commit_msg_filepath, "r+") as f:
20           commit_msg = f.read()
21           if commit_msg.find(prefix) == -1:
22               f.seek(0, 0)
23               f.write(f"[{prefix}] {commit_msg}")</code></pre><p>Разберу построчно, что же тут происходит. </p><ul><li><p>Line 1 — шебанг.</p></li><li><p>Lines 3-5 — блок импортов.</p></li><li><p>Line 7 — получение файла, в который сохраняется изначальное commit message.</p></li><li><p>Lines 8-10 — получаем имя ветки.</p></li><li><p>Line 13 — регулярное выражение, по которому я сверяю, что имя ветки содержит название Jira-тикета вида <strong>ABC-123.</strong></p></li><li><p>Lines 15 — по регулярке получаем сам префикс (ветка может помимо тикета содержать что-то еще, отсекаем лишнее).</p></li><li><p>Lines 17-18 — читаем текст commit message.</p></li><li><p>Line 21 — проверяю, что сообщение коммита уже не содержит префикс, который я собираюсь добавлять.</p></li><li><p>Line 22 — устанавливаем «каретку»  в начало текстового файла, у нас ведь префикс.</p></li><li><p>Line 23 — заключаем наш префикс в [ ] перед исходным сообщением.</p></li></ul><p>Дополнительно отмечу лишь один момент — проверка на наличие префикса необходима, поскольку редактирование commit message средствами той же Intellij Idea приводит к повторному появлению префикса. Я совсем этого не хочу.</p><h4>Результат выполнения prepare-commit-msg hook</h4><p>Создам commit с сообщением и увижу в результате префикс, который добавлен хуком:</p><pre><code class="bash">(base) ➜  python_git_hooks git:(ABC-123) ✗ git commit -m "my commit message"
[ABC-123 c80a30a] [ABC-123] my commit message
 1 file changed, 1 insertion(+), 1 deletion(-)</code></pre><p>Результат команды git log для последнего commit:</p><pre><code class="markdown">commit c80a30a163ac08cbdcb7a345b91823870dc8b184 (HEAD -> ABC-123)
Author: Elanlum &lt;email@example.com>
Date:   Thu Oct 21 12:11:56 2021 +0300

    [ABC-123] my commit message</code></pre><h4>commit-msg hook</h4><p>На примере данного хука я продемонстрирую еще один способ автоматизации commit message. </p><p>Представим, что тимлид устал читать одинаково бессмысленные сообщения коммитов других разработчиков и решил группировать их по ключевым словам. Для этого он предложил ввести правило — писать в сообщении, о чем коммит — Fix, Update, Rework и так далее. </p><p>С этой задачей отлично справится Git hook — он будет сообщать разработчикам об ошибке в случае, если они забыли добавить в сообщение ключевое слово.</p><pre><code class="python">#!/usr/bin/python3

import re
import sys

green_color = "\033[1;32m"
red_color = "\033[1;31m"
color_off = "\033[0m"
blue_color = "\033[1;34m"
yellow_color = "\033[1;33m"

commit_msg_filepath = sys.argv[1]

regex = r"Add: |Created: |Fix: |Update: |Rework:"
error_msg = "Commit message format must match regex " + regex

with open(commit_msg_filepath, "r+") as file:
    commit_msg = file.read()
    if re.search(regex, commit_msg):
        print(green_color + "Good Commit!" + color_off)
    else:
        print(red_color + "Bad commit " + blue_color + commit_msg)
        print(yellow_color + error_msg)
        print("commit-msg hook failed (add --no-verify to bypass)")
        sys.exit(1)</code></pre><p>Механизм работы: проверяем наличие ключевого слова в тексте сообщения коммита. Если совпадение найдено, хвалим программиста, если нет, напоминаем ему о забывчивости и отменяем создание коммита.</p><h4>Результат выполнения commit-msg hook</h4><p>В случае отсутствия одного из «тэгов» хук сообщает, что нам нужно его добавить и НЕ создает коммит. Также он сообщает, что этот механизм можно обойти.</p><pre><code class="bash">➜  git commit -m "text of commit"

Bad commit [ABC-123] text of commit
Commit message format must match regex Add: |Created: |Fix: |Update: |Rework:
commit-msg hook failed (add --no-verify to bypass)</code></pre><p>В случае, если тэг присутствует, хук хвалит разработчика за заботу о нервах тимлида.</p><pre><code class="bash">➜  git commit -m "Rework: text of commit"

Good Commit!
[ABC-123 e993c7a] [ABC-123] Rework: text of commit
 1 file changed, 1 deletion(-)</code></pre><h3>Включаем хуки</h3><p>Как я уже отмечал выше, работа Git hooks на Windows немного отличается, потому рассмотрим в отдельности системы. </p><p>Для начала текст скриптов описанных выше нужно скопировать в файл с соответствующим именем, без расширения.</p><h4>Mac OS и Linux</h4><p><strong>1.</strong> Сделать файл хука исполняемым. Это очень просто:</p><pre><code class="bash">chmod +x /path_to_hooks/hook_name</code></pre><p><strong>2.</strong> Поместить файл хука в папку проекта или общую папку.</p><p>После создания хука нужно сделать так, чтобы Git для вашего проекта мог им воспользоваться. Существует 2 способа добавить хуки на исполнение:</p><p><strong>A.</strong> Поместить их в специальную директорию .git/hooks в каждый (!) проект. Эта директория уже содержит файлы хуков с расширением .sample. Достаточно убрать .sample и вставить в файл скрипт, как все заработает.</p><blockquote><p>Еще раз: Git hook должен называться точно так же, как .sample файл, но не иметь расширения. Проще всего заменить содержимое .sample файла и затем убрать расширение</p></blockquote><p>Можно представить, как это неудобно — каждый раз для нового проекта добавлять хуки заново. Я вроде бы хотел избавиться от повторяющихся действий, разве нет?</p><p><strong>B.</strong> Существует и второй способ, более элегантный, если подразумевается, что ваши хуки применимы для всех проектов. Нужно добавить в глобальный конфиг Git параметр <strong>core.hooksPath</strong>, значение которого содержит путь до глобальной папки с хуками, откуда Git будет все тянуть в первую очередь.</p><p>Команда довольно простая и многим знакомая:</p><pre><code class="bash">git config --global core.hooksPath /your_path_to_hooks_folder</code></pre><p>Проверим, что конфиг сохранился:</p><pre><code class="bash">git config --global --list</code></pre><p>И увидим в списке глобальных переменных что-то вроде: </p><pre><code class="bash">core.hookspath=/usr/local/.../git/hooks</code></pre><p>Таким образом, все старые и новые проекты будут пользоваться преимуществами добавленных в общую директорию хуков.</p><p><strong>3.</strong> Git hooks добавлены и готовы к работе. Вы восхитительны!</p><h4>Windows</h4><p>Все приведенное выше так же верно для хуков на Windows за исключением того, что скрипт написанный на Python не может так просто запускаться в качестве Git hook, поскольку Windows не может идентифицировать интерпретатор Python с помощью шебанга.</p><p>Выход есть — можно сделать shell скрипт, который будет запускать Python скрипт. Нужно всего-то несколько действий:</p><p><strong>1.</strong> Сделать собственно сам shell скрипт:</p><pre><code class="bash">#!/bin/sh
COMMIT_MSG_FILE=$1
python .git/hooks/prepare-commit-msg.py "$COMMIT_MSG_FILE"</code></pre><p>Нам нужен соответствующий шебанг - <strong>#!/bin/sh</strong></p><p>Аргумент <strong>COMMIT_MSG_FILE</strong> содержит путь до временного текстового файла, который содержит commit message, нам нужно передать этот путь дальше Python скрипту, который выполнит основную работу.</p><p><strong>2.</strong> Убедиться, что shell скрипт исполняемый, его имя соответствует названию хука и не содержит расширения.</p><p><strong>3.</strong> Нужно удалить шебанг для интерпретатора Python из скрипта (например, у меня это prepare-commit-msg.py) и поместить сам Python файл рядом с самим Git hook.</p><h3>Полезные замечания</h3><p>Смысл решения в том, чтобы держать описанные выше хуки локально. Не думаю, что добавлять хуки в репозиторий и версионировать их — хорошая идея. На это есть причины:</p><ul><li><p>Может случиться так, что программист не будет знать, что у него под капотом орудует хук и что-то правит. </p></li><li><p>Пути до интерпретаторов разные на разных системах (Python на Windows запросто может не быть), значит нельзя гарантировать, что хуки будут работать у всех разработчиков в команде из коробки.</p></li><li><p>Добавлять хуки во много проектов = превратить их поддержку в итеративный ад (я все еще хочу избежать повторяющихся действий).</p></li></ul><p>Думаю, читатель уже догадался, что для работы Git hooks на Windows (и некоторых сборок Linux) понадобится установить Python 3, на Mac OS он имеется по умолчанию. Проверял работоспособность на версии 3.9, но и с более ранними проблем не возникнет.</p><p>Для того, чтобы адаптировать префикс под свои нужды, нужно в Python скрипте изменить итоговое сообщение, которое пишется в файл commit message.</p><h3>Полезные ссылки</h3><ul><li><p>Обязательно зацените <a href="https://github.com/Elanlum/python_git_hooks"><u>GitHub репозиторий с хуками</u></a> из этой статьи.</p></li><li><p>Довольно подробная <a href="https://www.atlassian.com/git/tutorials/git-hooks"><u>документация Atlassian</u></a>, где можно подробнее узнать о всех типах хуков, посмотреть идеи для использования и примеры реализации на Python.</p></li><li><p>Неплохая <a href="https://codeburst.io/understanding-git-hooks-in-the-easiest-way-bad9afcbb1b3"><u>статья с примерами на Bash</u></a>, отсюда я взял пару идей, это помогло на начальном этапе.</p></li><li><p>Для всех начинающих, забывчивых или юзающих Git только через любимую IDE —  вот <a href="https://learngitbranching.js.org/?locale=ru_RU"><u>отличный тренажер</u></a> для развития понимания Git.</p></li></ul><h3>Вместо заключения</h3><p>Это моя первая статья и мне не терпится поделиться знаниями с аудиторией Хабра. Если статья зайдет, я пойму, что можно продолжить разговор и придумать еще интересные кейсы использования хуков. Возможно, вы сможете подкинуть идеи в комментариях.</p></div></div> <!----> <div class="tm-article-poll"><div class="tm-notice tm-article-poll__notice tm-notice_positive"><!----> <div class="tm-notice__inner"><!----> <div class="tm-notice__content"><span>Только зарегистрированные пользователи могут участвовать в опросе. <a rel="nofollow" href="/kek/v1/auth/habrahabr/?back=/ru/company/dins/blog/584562/&hl=ru">Войдите</a>, пожалуйста.</span></div></div></div> <div class="tm-article-poll__header">Пользуетесь ли вы Git hooks?</div> <div class="tm-article-poll__answers"><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent tm-article-poll__answer-percent_winning">
            38.64%
          </span> <span class="tm-article-poll__answer-label">Использую на текущем рабочем проекте</span> <span class="tm-article-poll__answer-votes">
            17
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress tm-article-poll__answer-progress_winning" style="width:38.64%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            15.91%
          </span> <span class="tm-article-poll__answer-label">Использую самостоятельно для pet-проекта</span> <span class="tm-article-poll__answer-votes">
            7
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:15.91%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            36.36%
          </span> <span class="tm-article-poll__answer-label">Хоть раз писал или знаю, как это делать</span> <span class="tm-article-poll__answer-votes">
            16
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:36.36%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            31.82%
          </span> <span class="tm-article-poll__answer-label">Слышал про Git hooks, но не использовал</span> <span class="tm-article-poll__answer-votes">
            14
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:31.82%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            6.82%
          </span> <span class="tm-article-poll__answer-label">Никогда не слышал</span> <span class="tm-article-poll__answer-votes">
            3
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:6.82%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            4.55%
          </span> <span class="tm-article-poll__answer-label">Убедил, сейчас начну!</span> <span class="tm-article-poll__answer-votes">
            2
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:4.55%;"></div></div></div></div> <div class="tm-article-poll__stats">
       Проголосовали 44 пользователя.  

       Воздержались 3 пользователя. 
    </div></div><div class="tm-article-poll"><div class="tm-notice tm-article-poll__notice tm-notice_positive"><!----> <div class="tm-notice__inner"><!----> <div class="tm-notice__content"><span>Только зарегистрированные пользователи могут участвовать в опросе. <a rel="nofollow" href="/kek/v1/auth/habrahabr/?back=/ru/company/dins/blog/584562/&hl=ru">Войдите</a>, пожалуйста.</span></div></div></div> <div class="tm-article-poll__header">Что вы обычно пишете в commit message?</div> <div class="tm-article-poll__answers"><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            5.88%
          </span> <span class="tm-article-poll__answer-label">Что придет в голову, их никто не читает</span> <span class="tm-article-poll__answer-votes">
            3
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:5.88%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent tm-article-poll__answer-percent_winning">
            60.78%
          </span> <span class="tm-article-poll__answer-label">Что-нибудь осмысленное</span> <span class="tm-article-poll__answer-votes">
            31
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress tm-article-poll__answer-progress_winning" style="width:60.78%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            50.98%
          </span> <span class="tm-article-poll__answer-label">У нас есть специальный шаблон/рекомендации</span> <span class="tm-article-poll__answer-votes">
            26
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:50.98%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            5.88%
          </span> <span class="tm-article-poll__answer-label">Всегда пишу «fix»</span> <span class="tm-article-poll__answer-votes">
            3
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:5.88%;"></div></div></div></div> <div class="tm-article-poll__stats">
       Проголосовал 51 пользователь. 

       Воздержались 2 пользователя. 
    </div></div></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgit%5D" class="tm-tags-list__link">git</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bautomation%5D" class="tm-tags-list__link">automation</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgithub%5D" class="tm-tags-list__link">github</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgit%20workflow%5D" class="tm-tags-list__link">git workflow</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bvcs%5D" class="tm-tags-list__link">vcs</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bcommit%20message%5D" class="tm-tags-list__link">commit message</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgit%20hooks%5D" class="tm-tags-list__link">git hooks</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8F%20%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B9%5D" class="tm-tags-list__link">системы контроля версий</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F%D0%BC%D0%B8%5D" class="tm-tags-list__link">системы управления версиями</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/dins/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании DINS
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/git/" class="tm-hubs-list__link">
    Git
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/cvs/" class="tm-hubs-list__link">
    Системы управления версиями
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/github/" class="tm-hubs-list__link">
    GitHub
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 13: ↑13 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 13: ↑13 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+13</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    66
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/dins/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/88f/253/406/88f2534069a23e16d55e7e2dfb960095.jpg" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/dins/profile/" class="tm-company-snippet__title">DINS</a> <div class="tm-company-snippet__description">Компания</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="http://dins.ru/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Elanlum/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/0ff/c6e/bdb/0ffc6ebdb582bc682dfcd8a13eae1ca1.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 10 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    9.2
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">13</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Roman Gorbatenko</span> <a href="/ru/users/Elanlum/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @Elanlum
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Java developer, Git ambassador</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <button type="submit" class="tm-user-card__button btn btn_transparent btn_small">
      Задонатить
    </button> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/dins/blog/584562/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 16 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><span>
      1998
    </span></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://dins.ru/" target="_blank" class="tm-company-basic-info__link">
      dins.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    1 001–5 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2018-09-03T14:49:50.000Z" title="2018-09-03, 17:49">3  сентября  2018</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/itinmyhead/" class="tm-company-basic-info__link">
      itinmyhead
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/dins/blog/584562/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/dins/blog/584562/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"584562":{"id":"584562","timePublished":"2021-10-21T12:05:04+00:00","isCorporative":true,"lang":"ru","titleHtml":"Отрабатываем Git hooks на автоматизации commit message","leadData":{"textHtml":"\u003Cp\u003EПривет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей практики: как я упрощал то, что всем надоело делать руками. Я уверен, что хуки могут оказаться полезны почти каждому разработчику. Ведь все мы пишем в сообщении коммита чуть больше, чем «fixed what was broken», верно?\u003C\u002Fp\u003E\u003Cp\u003EМеня зовут Роман Горбатенко, я Java-разработчик в компании DINS, на момент написания текста тружусь в команде Contact Center. Занимаюсь разработкой больше 3-х лет и прошел путь от личинки стажера до middle разработчика. Считаю Git одним из самых полезных инструментов разработчика. Многие не используют его возможности на полную, возможно, мне удастся это немного исправить.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0fe\u002Fe1f\u002F670\u002F0fee1f6702e7c12a79c74e54f9d93275.png","buttonTextHtml":"Узнать больше о Git hooks","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0fe\u002Fe1f\u002F670\u002F0fee1f6702e7c12a79c74e54f9d93275.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":9.2,"votesCount":10},"rating":13,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":"8S7RVVC3QS2A8","paymentWebmoney":null},"id":"1909153","alias":"Elanlum","fullname":"Roman Gorbatenko","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F0ff\u002Fc6e\u002Fbdb\u002F0ffc6ebdb582bc682dfcd8a13eae1ca1.jpg","speciality":"Java developer, Git ambassador"},"statistics":{"commentsCount":16,"favoritesCount":66,"readingCount":3127,"score":13,"votesCount":13},"hubs":[{"relatedData":null,"id":"22105","alias":"dins","type":"corporative","title":"Блог компании DINS","titleHtml":"Блог компании DINS","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"7151","alias":"git","type":"collective","title":"Git","titleHtml":"Git","isProfiled":true},{"relatedData":null,"id":"7414","alias":"cvs","type":"collective","title":"Системы управления версиями","titleHtml":"Системы управления версиями","isProfiled":true},{"relatedData":null,"id":"18790","alias":"github","type":"collective","title":"GitHub","titleHtml":"GitHub","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"917\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcd3\u002Fcdf\u002F4df\u002Fcd3cdf4df0057d1485c826b1d8e72092.png\" data-width=\"1626\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПривет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей практики: как я упрощал то, что всем надоело делать руками. Я уверен, что хуки могут оказаться полезны почти каждому разработчику. Ведь все мы пишем в сообщении коммита чуть больше, чем «fixed what was broken», верно?\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EОбо мне\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003EМеня зовут Роман Горбатенко, я Java-разработчик в компании DINS, на момент написания текста тружусь в команде Contact Center. Занимаюсь разработкой больше 3-х лет и прошел путь от личинки стажера до middle девелопера. Считаю Git одним из самых полезных инструментов. Многие не используют его возможности на полную, — надеюсь, мне удастся это немного исправить.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Ch3\u003EИтак, о проблеме, для затравки\u003C\u002Fh3\u003E\u003Cp\u003EНа прошлом месте работы релизный процесс включал в себя ручной сбор commit’ов, относящихся к задачам, которые входят в этот самый релиз (не правда ли, здорово?). В связи с этим, команда корабля решила облегчить себе жизнь и завести правило, по которому commit message должен обязательно (!) предваряться префиксом с названием ветки. \u003C\u002Fp\u003E\u003Cp\u003EИзвестно, что любое повторяющееся действие порождает случайные ошибки. И вообще, программисты не любят в повторение, мы любим в оптимизацию. Выход был найден — работу по добавлению префикса возложили на механизм Git hooks. \u003C\u002Fp\u003E\u003Cp\u003EНиже я расскажу, как создать prepare-commit-msg хук, немного опишу типы хуков и принципы их работы для тех, кто \u003Cs\u003Eне знал \u003C\u002Fs\u003Eзабыл, расскажу, как завести наконец правило написания сообщений commit’ов и даже его соблюдать. Помимо этого, приведу несколько полезных штук, которые я подметил в процессе исследования и дам ссылки на источники, которые меня вдохновляли. \u003C\u002Fp\u003E\u003Cp\u003EНа всякий случай: я не претендую на экспертность в вопросах Git и Git hooks, некоторые читатели Хабр могут и должны знать больше меня о данной теме. Я буду рад любой помощи и советам в комментариях. Участие в опросах в конце статьи поможет мне при написании следующей статьи о Git. \u003C\u002Fp\u003E\u003Ch3\u003EО самих Git hooks и основных типах\u003C\u002Fh3\u003E\u003Cp\u003EЕсли вкратце, hook — кастомный скрипт, выполняющийся до или после событий вроде commit, push. Вот и все, действительно очень просто. Каждый проект после инициализации содержит папку .git\u002Fhooks, в которой Git ищет скрипты для выполнения при наступлении событий.  \u003C\u002Fp\u003E\u003Cp\u003EХуки разделяются на клиентские (локальные) и серверные (удаленные). Локальные хуки не затрагивают мою команду, и их можно оптимизировать под себя как угодно. \u003C\u002Fp\u003E\u003Cp\u003EНа схеме ниже показано время действия части локальных и серверных хуков относительно основных событий — commit и push.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"571\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a1\u002Fc55\u002F63c\u002F3a1c5563cc04614d32a994c37d8ed546.png\" data-width=\"1352\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЛокальные хуки бывают нескольких типов и срабатывают после создания commit’a:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003Epre-commit выполняется каждый раз при вызове git commit. На этом этапе можно выполнять различные проверки commit’ов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eprepare-commit-msg выполняется после pre-commit и позволяет работать с commit message (круто, то, что надо!)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Ecommit-msg похож на prepare-commit-msg, но вызывается после того, как вы ввели commit message. Это, например, хорошая возможность высветить предупреждение разработчикам о том, что сообщение commit’a не соответствует принятым стандартам.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Epost-commit вызывается сразу после commit-msg хука. К примеру, так можно триггерить отправку письма начальнику после каждого commit’a.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EЯ перечислил не все типы хуков, но это и не является моей задачей. Больше информации содержит \u003Ca href=\"https:\u002F\u002Fwww.atlassian.com\u002Fgit\u002Ftutorials\u002Fgit-hooks\"\u003E\u003Cu\u003Eданный гайд\u003C\u002Fu\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EВ статье я последовательно рассмотрю prepare-commit-msg и commit-msg.\u003C\u002Fp\u003E\u003Cp\u003EДумаю, теории хватит. Наша цель практическая, больше информации вы сможете найти самостоятельно или по ссылкам на источники в конце статьи.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EПро Git hooks на Windows\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003EВ конце статьи будет дана ремарка на счет работы хуков на Windows, поскольку запуск скриптов написанных на Python немного отличается. За исключением этого момента, содержание статьи верно и для хуков на Windows\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cblockquote\u003E\u003Cp\u003EЕсли в процессе прочтения вам не захочется разбираться, как устроены хуки, или удобнее смотреть в код целиком, переходите в \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FElanlum\u002Fpython_git_hooks\"\u003E\u003Cu\u003EGitHub репозиторий\u003C\u002Fu\u003E\u003C\u002Fa\u003E с кодом из этой статьи. \u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Ch3\u003EПерейдем к имплементации\u003C\u002Fh3\u003E\u003Ch4\u003Eprepare-commit-msg hook\u003C\u002Fh4\u003E\u003Cp\u003EДля начала нужно определиться, на каком языке можно\u002Fнужно писать скрипты, которые будут исполняться как хуки. Строго говоря, писать можно на любом скриптовом языке, будь то Bash, Python, Ruby, Perl, Rust, Swift или Go.\u003C\u002Fp\u003E\u003Cp\u003EЯ пробовал Bash и Python, последний зашел больше, т.к. Bash крайне тяжело поддается с наскока, без опыта чтения\u002Fписания на нем. В статье приведены скрипты именно на Python, поскольку я могу ручаться за то, что в них написано. \u003C\u002Fp\u003E\u003Cp\u003EОбозначать, на каком языке написан скрипт, я буду специальным символом \u003Cstrong\u003Eшебанг \u003C\u002Fstrong\u003E(#!), за которым следует путь до интерпретатора конкретного языка. В случае с \u003Cstrong\u003EMac\u003C\u002Fstrong\u003E или \u003Cstrong\u003ELinux\u003C\u002Fstrong\u003E стандартный путь к интерпретатору для Python представлен \u003Cem\u003E\u002Fusr\u002Fbin.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EИтого получается:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E#!\u002Fusr\u002Fbin\u002Fpython3\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EДля Bash путь чуть другой:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E#!\u002Fbin\u002Fbash\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EУже почти время написать наш хук. \u003C\u002Fp\u003E\u003Cp\u003EСформулирую задачу: название ветки содержит буквенно-численный номер Jira тикета. Регистр не важен, помимо этого номера название ветки может содержать и другую информацию. \u003C\u002Fp\u003E\u003Cp\u003EНиже я реализую скрипт, который из ветки вида «ABC-123-bugfix» вытащит префикс вида «ABC-123», затем из commit message вида «initial commit message» сделает итоговое сообщение «[ABC-123] initial commit message».\u003C\u002Fp\u003E\u003Ch4\u003EМеханизм работы моего prepare-commit-msg hook\u003C\u002Fh4\u003E\u003Cp\u003EДля лучшего понимания идеи ниже приведена схема, которая повторяет формулировку задачи:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"541\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9e6\u002Fcf4\u002F6e4\u002F9e6cf46e4404b68df5caacae735bdef2.png\" data-width=\"1261\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EНиже находится листинг самого скрипта prepare-commit-msg hook:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"python\"\u003E1    #!\u002Fusr\u002Fbin\u002Fpython3\n2  \n3    import re\n4    import sys\n5    from subprocess import check_output\n6  \n7    commit_msg_filepath = sys.argv[1]\n8    branch = (\n9        check_output([\"git\", \"symbolic-ref\", \"--short\",  \n10   \"HEAD\"]).decode(\"utf-8\").strip()\n11   )\n12\n13   regex = r\"^[A-Z]{1,9}-[0-9]{1,9}\"\n14\n15   found_obj = re.match(regex, branch)\n16\n17   if found_obj:\n18       prefix = found_obj.group(0)\n19       with open(commit_msg_filepath, \"r+\") as f:\n20           commit_msg = f.read()\n21           if commit_msg.find(prefix) == -1:\n22               f.seek(0, 0)\n23               f.write(f\"[{prefix}] {commit_msg}\")\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EРазберу построчно, что же тут происходит. \u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003ELine 1 — шебанг.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELines 3-5 — блок импортов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELine 7 — получение файла, в который сохраняется изначальное commit message.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELines 8-10 — получаем имя ветки.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELine 13 — регулярное выражение, по которому я сверяю, что имя ветки содержит название Jira-тикета вида \u003Cstrong\u003EABC-123.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELines 15 — по регулярке получаем сам префикс (ветка может помимо тикета содержать что-то еще, отсекаем лишнее).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELines 17-18 — читаем текст commit message.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELine 21 — проверяю, что сообщение коммита уже не содержит префикс, который я собираюсь добавлять.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELine 22 — устанавливаем «каретку»  в начало текстового файла, у нас ведь префикс.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ELine 23 — заключаем наш префикс в [ ] перед исходным сообщением.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДополнительно отмечу лишь один момент — проверка на наличие префикса необходима, поскольку редактирование commit message средствами той же Intellij Idea приводит к повторному появлению префикса. Я совсем этого не хочу.\u003C\u002Fp\u003E\u003Ch4\u003EРезультат выполнения prepare-commit-msg hook\u003C\u002Fh4\u003E\u003Cp\u003EСоздам commit с сообщением и увижу в результате префикс, который добавлен хуком:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E(base) ➜  python_git_hooks git:(ABC-123) ✗ git commit -m \"my commit message\"\n[ABC-123 c80a30a] [ABC-123] my commit message\n 1 file changed, 1 insertion(+), 1 deletion(-)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EРезультат команды git log для последнего commit:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"markdown\"\u003Ecommit c80a30a163ac08cbdcb7a345b91823870dc8b184 (HEAD -\u003E ABC-123)\nAuthor: Elanlum &lt;email@example.com\u003E\nDate:   Thu Oct 21 12:11:56 2021 +0300\n\n    [ABC-123] my commit message\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch4\u003Ecommit-msg hook\u003C\u002Fh4\u003E\u003Cp\u003EНа примере данного хука я продемонстрирую еще один способ автоматизации commit message. \u003C\u002Fp\u003E\u003Cp\u003EПредставим, что тимлид устал читать одинаково бессмысленные сообщения коммитов других разработчиков и решил группировать их по ключевым словам. Для этого он предложил ввести правило — писать в сообщении, о чем коммит — Fix, Update, Rework и так далее. \u003C\u002Fp\u003E\u003Cp\u003EС этой задачей отлично справится Git hook — он будет сообщать разработчикам об ошибке в случае, если они забыли добавить в сообщение ключевое слово.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"python\"\u003E#!\u002Fusr\u002Fbin\u002Fpython3\n\nimport re\nimport sys\n\ngreen_color = \"\\033[1;32m\"\nred_color = \"\\033[1;31m\"\ncolor_off = \"\\033[0m\"\nblue_color = \"\\033[1;34m\"\nyellow_color = \"\\033[1;33m\"\n\ncommit_msg_filepath = sys.argv[1]\n\nregex = r\"Add: |Created: |Fix: |Update: |Rework:\"\nerror_msg = \"Commit message format must match regex \" + regex\n\nwith open(commit_msg_filepath, \"r+\") as file:\n    commit_msg = file.read()\n    if re.search(regex, commit_msg):\n        print(green_color + \"Good Commit!\" + color_off)\n    else:\n        print(red_color + \"Bad commit \" + blue_color + commit_msg)\n        print(yellow_color + error_msg)\n        print(\"commit-msg hook failed (add --no-verify to bypass)\")\n        sys.exit(1)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EМеханизм работы: проверяем наличие ключевого слова в тексте сообщения коммита. Если совпадение найдено, хвалим программиста, если нет, напоминаем ему о забывчивости и отменяем создание коммита.\u003C\u002Fp\u003E\u003Ch4\u003EРезультат выполнения commit-msg hook\u003C\u002Fh4\u003E\u003Cp\u003EВ случае отсутствия одного из «тэгов» хук сообщает, что нам нужно его добавить и НЕ создает коммит. Также он сообщает, что этот механизм можно обойти.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E➜  git commit -m \"text of commit\"\n\nBad commit [ABC-123] text of commit\nCommit message format must match regex Add: |Created: |Fix: |Update: |Rework:\ncommit-msg hook failed (add --no-verify to bypass)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВ случае, если тэг присутствует, хук хвалит разработчика за заботу о нервах тимлида.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E➜  git commit -m \"Rework: text of commit\"\n\nGood Commit!\n[ABC-123 e993c7a] [ABC-123] Rework: text of commit\n 1 file changed, 1 deletion(-)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3\u003EВключаем хуки\u003C\u002Fh3\u003E\u003Cp\u003EКак я уже отмечал выше, работа Git hooks на Windows немного отличается, потому рассмотрим в отдельности системы. \u003C\u002Fp\u003E\u003Cp\u003EДля начала текст скриптов описанных выше нужно скопировать в файл с соответствующим именем, без расширения.\u003C\u002Fp\u003E\u003Ch4\u003EMac OS и Linux\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003E1.\u003C\u002Fstrong\u003E Сделать файл хука исполняемым. Это очень просто:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Echmod +x \u002Fpath_to_hooks\u002Fhook_name\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Cstrong\u003E2.\u003C\u002Fstrong\u003E Поместить файл хука в папку проекта или общую папку.\u003C\u002Fp\u003E\u003Cp\u003EПосле создания хука нужно сделать так, чтобы Git для вашего проекта мог им воспользоваться. Существует 2 способа добавить хуки на исполнение:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EA.\u003C\u002Fstrong\u003E Поместить их в специальную директорию .git\u002Fhooks в каждый (!) проект. Эта директория уже содержит файлы хуков с расширением .sample. Достаточно убрать .sample и вставить в файл скрипт, как все заработает.\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Cp\u003EЕще раз: Git hook должен называться точно так же, как .sample файл, но не иметь расширения. Проще всего заменить содержимое .sample файла и затем убрать расширение\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EМожно представить, как это неудобно — каждый раз для нового проекта добавлять хуки заново. Я вроде бы хотел избавиться от повторяющихся действий, разве нет?\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EB.\u003C\u002Fstrong\u003E Существует и второй способ, более элегантный, если подразумевается, что ваши хуки применимы для всех проектов. Нужно добавить в глобальный конфиг Git параметр \u003Cstrong\u003Ecore.hooksPath\u003C\u002Fstrong\u003E, значение которого содержит путь до глобальной папки с хуками, откуда Git будет все тянуть в первую очередь.\u003C\u002Fp\u003E\u003Cp\u003EКоманда довольно простая и многим знакомая:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Egit config --global core.hooksPath \u002Fyour_path_to_hooks_folder\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПроверим, что конфиг сохранился:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Egit config --global --list\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EИ увидим в списке глобальных переменных что-то вроде: \u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Ecore.hookspath=\u002Fusr\u002Flocal\u002F...\u002Fgit\u002Fhooks\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТаким образом, все старые и новые проекты будут пользоваться преимуществами добавленных в общую директорию хуков.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E3.\u003C\u002Fstrong\u003E Git hooks добавлены и готовы к работе. Вы восхитительны!\u003C\u002Fp\u003E\u003Ch4\u003EWindows\u003C\u002Fh4\u003E\u003Cp\u003EВсе приведенное выше так же верно для хуков на Windows за исключением того, что скрипт написанный на Python не может так просто запускаться в качестве Git hook, поскольку Windows не может идентифицировать интерпретатор Python с помощью шебанга.\u003C\u002Fp\u003E\u003Cp\u003EВыход есть — можно сделать shell скрипт, который будет запускать Python скрипт. Нужно всего-то несколько действий:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E1.\u003C\u002Fstrong\u003E Сделать собственно сам shell скрипт:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E#!\u002Fbin\u002Fsh\nCOMMIT_MSG_FILE=$1\npython .git\u002Fhooks\u002Fprepare-commit-msg.py \"$COMMIT_MSG_FILE\"\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EНам нужен соответствующий шебанг - \u003Cstrong\u003E#!\u002Fbin\u002Fsh\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EАргумент \u003Cstrong\u003ECOMMIT_MSG_FILE\u003C\u002Fstrong\u003E содержит путь до временного текстового файла, который содержит commit message, нам нужно передать этот путь дальше Python скрипту, который выполнит основную работу.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E2.\u003C\u002Fstrong\u003E Убедиться, что shell скрипт исполняемый, его имя соответствует названию хука и не содержит расширения.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E3.\u003C\u002Fstrong\u003E Нужно удалить шебанг для интерпретатора Python из скрипта (например, у меня это prepare-commit-msg.py) и поместить сам Python файл рядом с самим Git hook.\u003C\u002Fp\u003E\u003Ch3\u003EПолезные замечания\u003C\u002Fh3\u003E\u003Cp\u003EСмысл решения в том, чтобы держать описанные выше хуки локально. Не думаю, что добавлять хуки в репозиторий и версионировать их — хорошая идея. На это есть причины:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EМожет случиться так, что программист не будет знать, что у него под капотом орудует хук и что-то правит. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПути до интерпретаторов разные на разных системах (Python на Windows запросто может не быть), значит нельзя гарантировать, что хуки будут работать у всех разработчиков в команде из коробки.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДобавлять хуки во много проектов = превратить их поддержку в итеративный ад (я все еще хочу избежать повторяющихся действий).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДумаю, читатель уже догадался, что для работы Git hooks на Windows (и некоторых сборок Linux) понадобится установить Python 3, на Mac OS он имеется по умолчанию. Проверял работоспособность на версии 3.9, но и с более ранними проблем не возникнет.\u003C\u002Fp\u003E\u003Cp\u003EДля того, чтобы адаптировать префикс под свои нужды, нужно в Python скрипте изменить итоговое сообщение, которое пишется в файл commit message.\u003C\u002Fp\u003E\u003Ch3\u003EПолезные ссылки\u003C\u002Fh3\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EОбязательно зацените \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FElanlum\u002Fpython_git_hooks\"\u003E\u003Cu\u003EGitHub репозиторий с хуками\u003C\u002Fu\u003E\u003C\u002Fa\u003E из этой статьи.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДовольно подробная \u003Ca href=\"https:\u002F\u002Fwww.atlassian.com\u002Fgit\u002Ftutorials\u002Fgit-hooks\"\u003E\u003Cu\u003Eдокументация Atlassian\u003C\u002Fu\u003E\u003C\u002Fa\u003E, где можно подробнее узнать о всех типах хуков, посмотреть идеи для использования и примеры реализации на Python.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНеплохая \u003Ca href=\"https:\u002F\u002Fcodeburst.io\u002Funderstanding-git-hooks-in-the-easiest-way-bad9afcbb1b3\"\u003E\u003Cu\u003Eстатья с примерами на Bash\u003C\u002Fu\u003E\u003C\u002Fa\u003E, отсюда я взял пару идей, это помогло на начальном этапе.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EДля всех начинающих, забывчивых или юзающих Git только через любимую IDE —  вот \u003Ca href=\"https:\u002F\u002Flearngitbranching.js.org\u002F?locale=ru_RU\"\u003E\u003Cu\u003Eотличный тренажер\u003C\u002Fu\u003E\u003C\u002Fa\u003E для развития понимания Git.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch3\u003EВместо заключения\u003C\u002Fh3\u003E\u003Cp\u003EЭто моя первая статья и мне не терпится поделиться знаниями с аудиторией Хабра. Если статья зайдет, я пойму, что можно продолжить разговор и придумать еще интересные кейсы использования хуков. Возможно, вы сможете подкинуть идеи в комментариях.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"git"},{"titleHtml":"automation"},{"titleHtml":"github"},{"titleHtml":"git workflow"},{"titleHtml":"vcs"},{"titleHtml":"commit message"},{"titleHtml":"git hooks"},{"titleHtml":"системы контроля версий"},{"titleHtml":"системы управления версиями"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0fe\u002Fe1f\u002F670\u002F0fee1f6702e7c12a79c74e54f9d93275.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0fe\u002Fe1f\u002F670\u002F0fee1f6702e7c12a79c74e54f9d93275.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fdins\\\u002Fblog\\\u002F584562\\\u002F\"},\"headline\":\"Отрабатываем Git hooks на автоматизации commit message\",\"datePublished\":\"2021-10-21T15:05:04+03:00\",\"dateModified\":\"2021-10-21T17:28:51+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Roman Gorbatenko\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit&rsquo;ов и commit message.\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fdins\\\u002Fblog\\\u002F584562\\\u002F#post-content-body\",\"about\":[\"c_dins\",\"h_programming\",\"h_git\",\"h_cvs\",\"h_github\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F584562\\\u002F326843bee31c622a2c5717a875749b10\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fcd3\\\u002Fcdf\\\u002F4df\\\u002Fcd3cdf4df0057d1485c826b1d8e72092.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F3a1\\\u002Fc55\\\u002F63c\\\u002F3a1c5563cc04614d32a994c37d8ed546.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F9e6\\\u002Fcf4\\\u002F6e4\\\u002F9e6cf46e4404b68df5caacae735bdef2.png\"]}","metaDescription":"Привет, Хабр! В этой статье я расскажу о Git hooks и о том, как они могут помочь с некоторыми насущными кейсами организации создания commit’ов и commit message. Пост основан на реальном опыте из моей...","mainImageUrl":null,"amp":false},"polls":[{"id":"36128","timeElapsed":null,"answersType":"checkbox","votesCount":44,"passCount":3,"textHtml":"Пользуетесь ли вы Git hooks?","relatedData":null,"variants":[{"id":"170330","textHtml":"Использую на текущем рабочем проекте","votesCount":17,"percent":38.64,"selected":false},{"id":"170332","textHtml":"Использую самостоятельно для pet-проекта","votesCount":7,"percent":15.91,"selected":false},{"id":"170334","textHtml":"Хоть раз писал или знаю, как это делать","votesCount":16,"percent":36.36,"selected":false},{"id":"170336","textHtml":"Слышал про Git hooks, но не использовал","votesCount":14,"percent":31.82,"selected":false},{"id":"170338","textHtml":"Никогда не слышал","votesCount":3,"percent":6.82,"selected":false},{"id":"170340","textHtml":"Убедил, сейчас начну!","votesCount":2,"percent":4.55,"selected":false}]},{"id":"36130","timeElapsed":null,"answersType":"checkbox","votesCount":51,"passCount":2,"textHtml":"Что вы обычно пишете в commit message?","relatedData":null,"variants":[{"id":"170342","textHtml":"Что придет в голову, их никто не читает","votesCount":3,"percent":5.88,"selected":false},{"id":"170344","textHtml":"Что-нибудь осмысленное","votesCount":31,"percent":60.78,"selected":false},{"id":"170346","textHtml":"У нас есть специальный шаблон\u002Fрекомендации","votesCount":26,"percent":50.98,"selected":false},{"id":"170348","textHtml":"Всегда пишу «fix»","votesCount":3,"percent":5.88,"selected":false}]}],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"dins":{"alias":"dins","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F88f\u002F253\u002F406\u002F88f2534069a23e16d55e7e2dfb960095.jpg","titleHtml":"DINS","descriptionHtml":null,"relatedData":null,"statistics":{"postsCount":64,"newsCount":0,"vacanciesCount":17,"employeesCount":21,"careerRating":null,"subscribersCount":883,"rating":134.04,"invest":null},"foundationDate":{"year":"1998","month":null,"day":null},"location":{"city":{"id":"447733","title":"Санкт-Петербург"},"region":{"id":"1948","title":"Санкт-Петербург и область"},"country":{"id":"168","title":"Россия"}},"siteUrl":"http:\u002F\u002Fdins.ru\u002F","staffNumber":"1 001–5 000 человек","registrationDate":"2018-09-03T14:49:50+00:00","representativeUser":{"alias":"itinmyhead","fullname":null},"contacts":[{"title":"Сайт","url":"http:\u002F\u002Fdins.ru\u002F"}],"settings":{"analyticsSettings":[],"branding":null,"status":"active"},"metadata":{"titleHtml":"DINS, Санкт-Петербург -  с 1998 год","title":"DINS, Санкт-Петербург -  с 1998 год","keywords":["Конференции","Интервью","Тестирование IT-систем","DevOps","JavaScript"],"descriptionHtml":"64 статьи от авторов компании DINS","description":"64 статьи от авторов компании DINS"},"aDeskSettings":null,"careerAlias":"dins","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
