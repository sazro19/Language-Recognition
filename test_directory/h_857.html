<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>The Significance Manager в Unreal Engine 4 / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/582036\/"},"headline":"The Significance Manager в Unreal Engine 4","datePublished":"2021-10-07T23:19:30+03:00","dateModified":"2021-10-08T00:30:12+03:00","author":{"@type":"Person","name":"FAZIC"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance...","url":"https:\/\/habr.com\/ru\/post\/582036\/#post-content-body","about":["h_gamedev","h_unreal_engine","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/582036\/dd53dc7b5db0bfe78a6cee898a61d003\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/cde\/308\/19b\/cde30819bd92a2ff78328ac174814d73.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/6e3\/074\/455\/6e307445581874b2de6a6590cd203ad2.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="The Significance Manager в Unreal Engine 4" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="The Significance Manager в Unreal Engine 4" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="The Significance Manager в Unreal Engine 4" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance Manager - единая структура, которая..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance Manager - единая структура, которая..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance Manager - единая структура, которая..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance Manager - единая структура, которая..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance Manager - единая структура, которая..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/c01/93d/327/c0193d327a04c74d75a52df9ca2fd1df.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/c01/93d/327/c0193d327a04c74d75a52df9ca2fd1df.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/c01/93d/327/c0193d327a04c74d75a52df9ca2fd1df.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/c01/93d/327/c0193d327a04c74d75a52df9ca2fd1df.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/c01/93d/327/c0193d327a04c74d75a52df9ca2fd1df.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="582036" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-07T20:19:30.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/582036/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/582036/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/c01/93d/327/c0193d327a04c74d75a52df9ca2fd1df.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/582036/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/FAZIC/" title="FAZIC" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_pink"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/FAZIC/" class="tm-user-info__username">
      FAZIC
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-07T20:19:30.000Z" title="2021-10-07, 23:19">7  октября   в 23:19</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>The Significance Manager в Unreal Engine 4</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/gamedev/" class="tm-article-snippet__hubs-item-link"><span>Разработка игр</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/unreal_engine/" class="tm-article-snippet__hubs-item-link"><span>Unreal Engine</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>В одной из предыдущих статей я затронул тему<a href="https://habr.com/ru/post/581246/" rel="noopener noreferrer nofollow"> <u>Significance Manager</u></a>. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.</p><p><a href="https://docs.unrealengine.com/4.27/en-US/TestingAndOptimization/PerformanceAndProfiling/SignificanceManager/" rel="noopener noreferrer nofollow"><u>Significance Manager</u></a> - единая структура, которая предоставляет возможность, написать гибкий, специфический код, для оценки и расстановки приоритетов объектов. На основе полученных данных, появляется возможность изменять поведение системы, например отключать системы частиц\звуки, уменьшать частоту тика, изменять лоды и т.д.</p><figure class="full-width "><img src="/img/image-loader.svg" height="882" data-src="https://habrastorage.org/getpro/habr/upload_files/cde/308/19b/cde30819bd92a2ff78328ac174814d73.png" data-width="1246"/><figcaption></figcaption></figure><p>Самая простая идея реализации в том, что из PlayerController мы передаем положение и поворот камеры игрока, во все зарегистрированные в Significance Manager актеры и уже в них обрабатываем и делаем изменение для оптимизации, например Tick, LOD,URO и т.д.</p><p>Теперь перейдем непосредственно к настройке этой прекрасной тулзы, в первую очередь необходимо включить плагин(по дефолту он включенный).</p><figure class="full-width "><img src="/img/image-loader.svg" height="172" data-src="https://habrastorage.org/getpro/habr/upload_files/6e3/074/455/6e307445581874b2de6a6590cd203ad2.png" data-width="1197"/><figcaption></figcaption></figure><p>Если возникает необходимость, мы можем создать свой класс для менеджера и определить его в DefaultEngine.ini:</p><pre><code>[/Script/SignificanceManager.SignificanceManager]
SignificanceManagerClassName=/Script/DemoProject.DemoSignificanceManager</code></pre><h2>Update</h2><p>Функция Update необходима для оценки важности каждого зарегистрированного объекта в менеджере, относительно трансформа некоторого объекта. Для клиента, отлично подойдет использовать камеру в контроллере. Напишем код, который будет в менеджер передавать положение камеры и сделаем его только для игрока(IsLocalController()). </p><details class="spoiler"><summary>Код в DemoPlayerController</summary><div class="spoiler__content"><pre><code class="cpp">.h 
public:
	virtual void Tick(float DeltaTime) override;

private:
	TWeakObjectPtr&lt;class USignificanceManager> SignificanceManagerPtr;

.cpp
#include "SignificanceManager.h"

void ADemoPlayerController::Tick(float DeltaTime)
{
	Super::Tick(DeltaTime);
  
	if (!IsLocalController()) return;

	UWorld* WorldPtr = GetWorld();
	if (!WorldPtr) return;

	if (!SignificanceManagerPtr.IsValid())
		SignificanceManagerPtr = FSignificanceManagerModule::Get(WorldPtr);

	if (SignificanceManagerPtr.IsValid())
	{
		FVector ViewLocation;
		FRotator ViewRotation;
		GetPlayerViewPoint(ViewLocation, ViewRotation);

		TArray&lt;FTransform> Viewpoints;
		Viewpoints.Emplace(ViewRotation, ViewLocation, FVector::OneVector);

		SignificanceManagerPtr.Get()->Update(Viewpoints);
	}
}</code></pre></div></details><h4>FSignificanceFunction и FPostSignificanceFunction</h4><p>За любую обработку объекта отвечают два типа функций:</p><p>FSignificanceFunction - Основная оценочная функция, в которой создается алгоритм для распределения важности. Она принимает UObject и трансформ объекта и возвращает float результат. На каждый Update функция будет вызываться один раз и выдавать наиболее высокое значение(Изменить сортировку можно создав наследника менеджера). Каждый зарегистрированный объект должен быть связан с этой функцией.</p><p>FPostSignificanceFunction - Функция для обработки полученного значения важности. Принимает, старое и новое значение(если bFinal == true, то новое значение будет равно единице). Signification Manager будет вызывать эту функцию в зависимости от настроек объекта при регистрации.</p><ul><li><p><strong>None</strong> - функция не будет вызываться</p></li><li><p><strong>Concurrent - </strong>функция будет вызвана сразу после оценки важности. Функции должны быть потокобезопасными, так как они выполняются параллельно друг другу.</p></li><li><p><strong>Sequential - </strong>функция будет вызываться сразу после того как все объекты были оценены.</p></li></ul><h2>RegisterObject / UnregisterObject</h2><p>Каждые UObject, можно зарегистрировать в Significance Manager, тем самым добавив его в обработчик менеджера. Все объекты будут сгруппированы и обработаны на основе указанного тэга при создании. Во время регистрации, первая оценка будет создана на основе последнего Update менеджера. </p><details class="spoiler"><summary>Регистрация непосредственно в AActor class</summary><div class="spoiler__content"><pre><code class="cpp">.h
#include "SignificanceManager.h"

protected:
    virtual void BeginPlay() override;

    // Significance Manager implementation
    float SignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, const FTransform&amp; Viewpoint);
    void PostSignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, float OldSignificance, float Significance, bool bFinal);

.cpp
void ADemoActor::BeginPlay()
{
    Super::BeginPlay();
    if (IsNetMode(NM_DedicatedServer)) return;

    USignificanceManager* SignificanceManager = FSignificanceManagerModule::Get(GetWorld());
    if (!SignificanceManager) return;

    //Создаем 2 лямбда функции для FSignificanceFunction и FPostSignificanceFunction
    auto Significance = [&amp;](USignificanceManager::FManagedObjectInfo* ObjectInfo, const FTransform&amp; Viewpoint) -> float
    {
        return SignficanceFunction(ObjectInfo, Viewpoint);
    };

    auto PostSignificance = [&amp;](USignificanceManager::FManagedObjectInfo* ObjectInfo, float OldSignificance, float Significance, bool bFinal)
    {
        PostSignficanceFunction(ObjectInfo, OldSignificance, Significance, bFinal);
    };

    //Регистрируем наш объект в Significance Manager
    SignificanceManager->RegisterObject(this, TEXT("Cube"), Significance, USignificanceManager::EPostSignificanceType::Sequential, PostSignificance);
}

void ADemoActor::EndPlay(const EEndPlayReason::Type Reason)
{
    Super::EndPlay(Reason);

    auto WorldPtr = GetWorld();
    if (!WorldPtr) return;

    // Убираем объект из SignificanceManager
    //Так же можно использовать UnregisterAll(FName(TEXT("Cube")));
    //Для удаления всех по тэгу
    if (auto SignificanceManager = FSignificanceManagerModule::Get(WorldPtr))
        SignificanceManager->Unregister(this);
}

float ADemoActor::SignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, const FTransform&amp; Viewpoint)
{
    if (ObjectInfo->GetTag() == TEXT("Cube"))
    {
        ADemoActor* Actor = CastChecked&lt;ADemoActor>(ObjectInfo->GetObject());
        const float Distance = (Actor->GetActorLocation() - Viewpoint.GetLocation()).Size();

        if (Distance >= 2000.f) return 2.f;
        if (Distance >= 1000.f) return 1.f;
    }

    return 0.f;
}

void ADemoActor::PostSignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, float OldSignificance, float Significance, bool bFinal)
{
    if (ObjectInfo->GetTag() == TEXT("Cube"))
    {
        if (Significance >= 2.f)
        {
            SetActorTickInterval(0.25f);
        }
        else if (Significance >= 1.f)
        {
            SetActorTickInterval(0.1f);
        }
        else
        {
            SetActorTickInterval(0.f);
        }
    }
}</code></pre></div></details><h3>Заключение</h3><p>Вот таким весьма не сложным способом, вы сможете добавить немного больше оптимизации вашему проекту. Без особых проблем изменяя тики, возможность перемещения только видимых объектов, даже просто использовать чтобы скрывать объекты(culling) или тени, или воплотить любые другие ваши идеи.</p><p>А на этом я с вами прощаюсь. Всем спасибо за внимание и да прибудет с вами сила знаний.</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bunreal%5D" class="tm-tags-list__link">unreal</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bunreal%20engine%204%5D" class="tm-tags-list__link">unreal engine 4</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bunreal%20engine%5D" class="tm-tags-list__link">unreal engine</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B8%D0%B3%D1%80%5D" class="tm-tags-list__link">разработка игр</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/gamedev/" class="tm-hubs-list__link">
    Разработка игр
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/unreal_engine/" class="tm-hubs-list__link">
    Unreal Engine
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+1</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    21
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/FAZIC/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_pink"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 5 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">10</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/FAZIC/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @FAZIC
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/582036/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/582036/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/582036/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"582036":{"id":"582036","timePublished":"2021-10-07T20:19:30+00:00","isCorporative":false,"lang":"ru","titleHtml":"The Significance Manager в Unreal Engine 4","leadData":{"textHtml":"\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdocs.unrealengine.com\u002F4.27\u002Fen-US\u002FTestingAndOptimization\u002FPerformanceAndProfiling\u002FSignificanceManager\u002F\" rel=\"noopener noreferrer nofollow\"\u003ESignificance Manager\u003C\u002Fa\u003E - единая структура, которая предоставляет возможность, написать гибкий, специфический код, для оценки и расстановки приоритетов объектов. На основе полученных данных, появляется возможность изменять поведение системы, к примеру отключать системы частиц\\звуки, уменьшать частоту тика, изменять лоды и т.д.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc01\u002F93d\u002F327\u002Fc0193d327a04c74d75a52df9ca2fd1df.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc01\u002F93d\u002F327\u002Fc0193d327a04c74d75a52df9ca2fd1df.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":5,"votesCount":5},"rating":10,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1088232","alias":"FAZIC","fullname":null,"avatarUrl":null,"speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":21,"readingCount":1216,"score":1,"votesCount":1},"hubs":[{"relatedData":null,"id":"7773","alias":"gamedev","type":"collective","title":"Разработка игр","titleHtml":"Разработка игр","isProfiled":true},{"relatedData":null,"id":"19367","alias":"unreal_engine","type":"collective","title":"Unreal Engine","titleHtml":"Unreal Engine","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EВ одной из предыдущих статей я затронул тему\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F581246\u002F\" rel=\"noopener noreferrer nofollow\"\u003E \u003Cu\u003ESignificance Manager\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdocs.unrealengine.com\u002F4.27\u002Fen-US\u002FTestingAndOptimization\u002FPerformanceAndProfiling\u002FSignificanceManager\u002F\" rel=\"noopener noreferrer nofollow\"\u003E\u003Cu\u003ESignificance Manager\u003C\u002Fu\u003E\u003C\u002Fa\u003E - единая структура, которая предоставляет возможность, написать гибкий, специфический код, для оценки и расстановки приоритетов объектов. На основе полученных данных, появляется возможность изменять поведение системы, например отключать системы частиц\\звуки, уменьшать частоту тика, изменять лоды и т.д.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"882\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcde\u002F308\u002F19b\u002Fcde30819bd92a2ff78328ac174814d73.png\" data-width=\"1246\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСамая простая идея реализации в том, что из PlayerController мы передаем положение и поворот камеры игрока, во все зарегистрированные в Significance Manager актеры и уже в них обрабатываем и делаем изменение для оптимизации, например Tick, LOD,URO и т.д.\u003C\u002Fp\u003E\u003Cp\u003EТеперь перейдем непосредственно к настройке этой прекрасной тулзы, в первую очередь необходимо включить плагин(по дефолту он включенный).\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"172\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e3\u002F074\u002F455\u002F6e307445581874b2de6a6590cd203ad2.png\" data-width=\"1197\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЕсли возникает необходимость, мы можем создать свой класс для менеджера и определить его в DefaultEngine.ini:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003E[\u002FScript\u002FSignificanceManager.SignificanceManager]\nSignificanceManagerClassName=\u002FScript\u002FDemoProject.DemoSignificanceManager\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2\u003EUpdate\u003C\u002Fh2\u003E\u003Cp\u003EФункция Update необходима для оценки важности каждого зарегистрированного объекта в менеджере, относительно трансформа некоторого объекта. Для клиента, отлично подойдет использовать камеру в контроллере. Напишем код, который будет в менеджер передавать положение камеры и сделаем его только для игрока(IsLocalController()). \u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EКод в DemoPlayerController\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003E.h \npublic:\n\tvirtual void Tick(float DeltaTime) override;\n\nprivate:\n\tTWeakObjectPtr&lt;class USignificanceManager\u003E SignificanceManagerPtr;\n\n.cpp\n#include \"SignificanceManager.h\"\n\nvoid ADemoPlayerController::Tick(float DeltaTime)\n{\n\tSuper::Tick(DeltaTime);\n  \n\tif (!IsLocalController()) return;\n\n\tUWorld* WorldPtr = GetWorld();\n\tif (!WorldPtr) return;\n\n\tif (!SignificanceManagerPtr.IsValid())\n\t\tSignificanceManagerPtr = FSignificanceManagerModule::Get(WorldPtr);\n\n\tif (SignificanceManagerPtr.IsValid())\n\t{\n\t\tFVector ViewLocation;\n\t\tFRotator ViewRotation;\n\t\tGetPlayerViewPoint(ViewLocation, ViewRotation);\n\n\t\tTArray&lt;FTransform\u003E Viewpoints;\n\t\tViewpoints.Emplace(ViewRotation, ViewLocation, FVector::OneVector);\n\n\t\tSignificanceManagerPtr.Get()-\u003EUpdate(Viewpoints);\n\t}\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Ch4\u003EFSignificanceFunction и FPostSignificanceFunction\u003C\u002Fh4\u003E\u003Cp\u003EЗа любую обработку объекта отвечают два типа функций:\u003C\u002Fp\u003E\u003Cp\u003EFSignificanceFunction - Основная оценочная функция, в которой создается алгоритм для распределения важности. Она принимает UObject и трансформ объекта и возвращает float результат. На каждый Update функция будет вызываться один раз и выдавать наиболее высокое значение(Изменить сортировку можно создав наследника менеджера). Каждый зарегистрированный объект должен быть связан с этой функцией.\u003C\u002Fp\u003E\u003Cp\u003EFPostSignificanceFunction - Функция для обработки полученного значения важности. Принимает, старое и новое значение(если bFinal == true, то новое значение будет равно единице). Signification Manager будет вызывать эту функцию в зависимости от настроек объекта при регистрации.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003ENone\u003C\u002Fstrong\u003E - функция не будет вызываться\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EConcurrent - \u003C\u002Fstrong\u003Eфункция будет вызвана сразу после оценки важности. Функции должны быть потокобезопасными, так как они выполняются параллельно друг другу.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003ESequential - \u003C\u002Fstrong\u003Eфункция будет вызываться сразу после того как все объекты были оценены.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch2\u003ERegisterObject \u002F UnregisterObject\u003C\u002Fh2\u003E\u003Cp\u003EКаждые UObject, можно зарегистрировать в Significance Manager, тем самым добавив его в обработчик менеджера. Все объекты будут сгруппированы и обработаны на основе указанного тэга при создании. Во время регистрации, первая оценка будет создана на основе последнего Update менеджера. \u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EРегистрация непосредственно в AActor class\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003E.h\n#include \"SignificanceManager.h\"\n\nprotected:\n    virtual void BeginPlay() override;\n\n    \u002F\u002F Significance Manager implementation\n    float SignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, const FTransform&amp; Viewpoint);\n    void PostSignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, float OldSignificance, float Significance, bool bFinal);\n\n.cpp\nvoid ADemoActor::BeginPlay()\n{\n    Super::BeginPlay();\n    if (IsNetMode(NM_DedicatedServer)) return;\n\n    USignificanceManager* SignificanceManager = FSignificanceManagerModule::Get(GetWorld());\n    if (!SignificanceManager) return;\n\n    \u002F\u002FСоздаем 2 лямбда функции для FSignificanceFunction и FPostSignificanceFunction\n    auto Significance = [&amp;](USignificanceManager::FManagedObjectInfo* ObjectInfo, const FTransform&amp; Viewpoint) -\u003E float\n    {\n        return SignficanceFunction(ObjectInfo, Viewpoint);\n    };\n\n    auto PostSignificance = [&amp;](USignificanceManager::FManagedObjectInfo* ObjectInfo, float OldSignificance, float Significance, bool bFinal)\n    {\n        PostSignficanceFunction(ObjectInfo, OldSignificance, Significance, bFinal);\n    };\n\n    \u002F\u002FРегистрируем наш объект в Significance Manager\n    SignificanceManager-\u003ERegisterObject(this, TEXT(\"Cube\"), Significance, USignificanceManager::EPostSignificanceType::Sequential, PostSignificance);\n}\n\nvoid ADemoActor::EndPlay(const EEndPlayReason::Type Reason)\n{\n    Super::EndPlay(Reason);\n\n    auto WorldPtr = GetWorld();\n    if (!WorldPtr) return;\n\n    \u002F\u002F Убираем объект из SignificanceManager\n    \u002F\u002FТак же можно использовать UnregisterAll(FName(TEXT(\"Cube\")));\n    \u002F\u002FДля удаления всех по тэгу\n    if (auto SignificanceManager = FSignificanceManagerModule::Get(WorldPtr))\n        SignificanceManager-\u003EUnregister(this);\n}\n\nfloat ADemoActor::SignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, const FTransform&amp; Viewpoint)\n{\n    if (ObjectInfo-\u003EGetTag() == TEXT(\"Cube\"))\n    {\n        ADemoActor* Actor = CastChecked&lt;ADemoActor\u003E(ObjectInfo-\u003EGetObject());\n        const float Distance = (Actor-\u003EGetActorLocation() - Viewpoint.GetLocation()).Size();\n\n        if (Distance \u003E= 2000.f) return 2.f;\n        if (Distance \u003E= 1000.f) return 1.f;\n    }\n\n    return 0.f;\n}\n\nvoid ADemoActor::PostSignficanceFunction(USignificanceManager::FManagedObjectInfo* ObjectInfo, float OldSignificance, float Significance, bool bFinal)\n{\n    if (ObjectInfo-\u003EGetTag() == TEXT(\"Cube\"))\n    {\n        if (Significance \u003E= 2.f)\n        {\n            SetActorTickInterval(0.25f);\n        }\n        else if (Significance \u003E= 1.f)\n        {\n            SetActorTickInterval(0.1f);\n        }\n        else\n        {\n            SetActorTickInterval(0.f);\n        }\n    }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Ch3\u003EЗаключение\u003C\u002Fh3\u003E\u003Cp\u003EВот таким весьма не сложным способом, вы сможете добавить немного больше оптимизации вашему проекту. Без особых проблем изменяя тики, возможность перемещения только видимых объектов, даже просто использовать чтобы скрывать объекты(culling) или тени, или воплотить любые другие ваши идеи.\u003C\u002Fp\u003E\u003Cp\u003EА на этом я с вами прощаюсь. Всем спасибо за внимание и да прибудет с вами сила знаний.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"unreal"},{"titleHtml":"unreal engine 4"},{"titleHtml":"unreal engine"},{"titleHtml":"разработка игр"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc01\u002F93d\u002F327\u002Fc0193d327a04c74d75a52df9ca2fd1df.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc01\u002F93d\u002F327\u002Fc0193d327a04c74d75a52df9ca2fd1df.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F582036\\\u002F\"},\"headline\":\"The Significance Manager в Unreal Engine 4\",\"datePublished\":\"2021-10-07T23:19:30+03:00\",\"dateModified\":\"2021-10-08T00:30:12+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"FAZIC\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F582036\\\u002F#post-content-body\",\"about\":[\"h_gamedev\",\"h_unreal_engine\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F582036\\\u002Fdd53dc7b5db0bfe78a6cee898a61d003\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fcde\\\u002F308\\\u002F19b\\\u002Fcde30819bd92a2ff78328ac174814d73.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F6e3\\\u002F074\\\u002F455\\\u002F6e307445581874b2de6a6590cd203ad2.png\"]}","metaDescription":"В одной из предыдущих статей я затронул тему Significance Manager. Сейчас же хочу подробнее его рассмотреть его настройки и интеграцию в ваш проект.Significance Manager - единая структура, которая...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"gamedev,unreal_engine"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
