<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Ускорение Maven сборки / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/582688\/"},"headline":"Ускорение Maven сборки","datePublished":"2021-10-11T12:46:40+03:00","dateModified":"2021-10-11T14:01:16+03:00","author":{"@type":"Person","name":"val6852"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&nbsp;Я считаю, что скор...","url":"https:\/\/habr.com\/ru\/post\/582688\/#post-content-body","about":["h_java","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/582688\/4f2f5d1945287b06359ed14811356c56\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Ускорение Maven сборки" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Ускорение Maven сборки" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Ускорение Maven сборки" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&amp;nbsp;Я считаю, что скорость должна быть ниже в ​​порядке..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&amp;nbsp;Я считаю, что скорость должна быть ниже в ​​порядке..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&amp;nbsp;Я считаю, что скорость должна быть ниже в ​​порядке..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&amp;nbsp;Я считаю, что скорость должна быть ниже в ​​порядке..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&amp;nbsp;Я считаю, что скорость должна быть ниже в ​​порядке..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/582688/4f2f5d1945287b06359ed14811356c56/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/582688/4f2f5d1945287b06359ed14811356c56/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/582688/4f2f5d1945287b06359ed14811356c56/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/582688/4f2f5d1945287b06359ed14811356c56/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/582688/4f2f5d1945287b06359ed14811356c56/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="582688" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-11T09:46:40.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/582688/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/582688/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/582688/4f2f5d1945287b06359ed14811356c56/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/582688/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/val6852/" title="val6852" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_blue"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/val6852/" class="tm-user-info__username">
      val6852
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-11T09:46:40.000Z" title="2021-10-11, 12:46">11  октября   в 12:46</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Ускорение Maven сборки</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/java/" class="tm-article-snippet__hubs-item-link"><span>Java</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div><div class="tm-article-snippet__label"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://dzone.com/articles/faster-maven-builds" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Nicolas Fränkel
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><h4>Узнайте, как сделать сборки Maven более быстрыми и эффективными</h4><p>Для сборки требуется несколько свойств, главное из которых - воспроизводимость. </p><p>Я считаю, что скорость должна быть ниже в ​​порядке приоритета. Тем не менее, это также один из самых лимитирующих факторов на ваш цикл выпуска: если ваша сборка занимает <em>T</em>, вы не можете отпустить быстрее, чем каждый из <em>T</em>. </p><p>Следовательно, вы, вероятно, захотите ускорить свои сборки после достижения определенного уровня зрелости, чтобы выпускать более частые релизы.</p><p>В этом посте я хочу подробно рассказать о некоторых методах, которые вы можете использовать для ускорения Maven сборки. Следующий пост будет посвящен тому, как сделать то же самое внутри Docker.</p><h3>Исходный уровень</h3><p>Поскольку я хочу предложить методы и оценить их влияние, нам нужен образец репозитория. </p><p>Я выбрал <a href="https://github.com/hazelcast/hazelcast-code-samples" rel="noopener noreferrer nofollow">примеры кода Hazelcast,</a> потому что он обеспечивает достаточно большую многомодульную кодовую базу с множеством подмодулей; точный коммит - <a href="https://github.com/hazelcast/hazelcast-code-samples/commit/448febd9977b9927a3f00bbf61ba50b2c0d94bb4" rel="noopener noreferrer nofollow">448febd</a>.</p><p>Порядок действий следующий:</p><ul><li><p>Я запускаю команду пять раз, чтобы избежать временных проблем</p></li><li><p>Я выполняю <code>mvn clean </code>перед каждым запуском, чтобы начать с пустого <code>target </code>репозитория</p></li><li><p>Все зависимости и плагины уже загружены</p></li><li><p>Я сообщаю время, которое Maven отображает в журнале консоли:</p><pre><code class="bash">[INFO] -------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] -------------------------------------------------------
[INFO] Total time:  22.456 s (Wall Clock)
[INFO] Finished at: 2021-09-24T23:20:41+02:00
[INFO] -------------------------------------------------------</code></pre></li></ul><p>Начнем с нашего исходного уровня, выполнив команду: <code>mvn test</code>. Результат:</p><ul><li><p>02:00 мин.</p></li><li><p>01:57 мин.</p></li><li><p>01:58 мин.</p></li><li><p>01:56 мин.</p></li><li><p>01:58 мин.</p></li></ul><h3>Использование всех процессоров</h3><p>По умолчанию Maven использует один поток. В век многоядерных процессоров это пустая трата времени. Можно запускать параллельные сборки с использованием нескольких потоков, задав абсолютное число или число относительно количества доступных ядер. Для получения дополнительной информации, пожалуйста, посмотрите <a href="https://cwiki.apache.org/confluence/display/MAVEN/Parallel+builds+in+Maven+3" rel="noopener noreferrer nofollow">соответствующую документацию</a>.</p><p>Чем больше у вас подмодулей, которые не зависят друг от друга, <em>т.е</em>. Maven может выполнять их сборку параллельно, тем лучше результат вы получите с помощью этой техники. </p><p>Это очень хорошо работает на нашей кодовой базе.</p><p>Мы собираемся использовать столько потоков, сколько доступно ядер. Соответствующая команда Maven: <code>mvn test -T 1C</code>.</p><p>При запуске этой команды вы должны увидеть в консоли следующее сообщение:</p><pre><code>Using the MultiThreadedBuilder implementation with a thread count of X</code></pre><ul><li><p>51.487 s (Wall Clock)</p></li><li><p>40.322 s (Wall Clock)</p></li><li><p>52.468 s (Wall Clock)</p></li><li><p>41.862 s (Wall Clock)</p></li><li><p>41.699 s (Wall Clock)</p></li></ul><p>Цифры намного лучше, но с большей дисперсией.</p><h3>Параллельное выполнение теста</h3><p>Распараллеливание - отличный метод. Мы можем сделать то же самое в отношении выполнения тестов. По умолчанию плагин Maven Surefire запускает тесты последовательно, но можно настроить его для параллельного запуска тестов. Пожалуйста, обратитесь к <a href="https://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html#Parallel_Test_Execution" rel="noopener noreferrer nofollow">документации</a> за полным набором опций.</p><p>Этот подход отлично подходит, если у вас есть большое количество юнитов в каждом модуле. Обратите внимание, что ваши тесты <strong>должны</strong> быть независимыми друг от друга.</p><p>Мы вручную зададим количество потоков:</p><pre><code class="bash">mvn test -Dparallel=all -DperCoreThreadCount=false -DthreadCount=16 #1 #2</code></pre><ol><li><p>Настройте Surefire для параллельного запуска классов и методов</p></li><li><p>Ручное изменение количества потоков до 16</p></li></ol><p>Запустим и получим:</p><ul><li><p>02:04 мин.</p></li><li><p>02:03 мин.</p></li><li><p>01:46 мин</p></li><li><p>01:52 мин</p></li><li><p>01:53 мин.</p></li></ul><p>Похоже, что стоимость синхронизации потоков компенсирует потенциальную выгоду от выполнения параллельных тестов.</p><h3>Офлайн</h3><p>Maven будет проверять, есть ли у <code>SNAPSHOT </code>зависимости новая «версия» при каждом запуске. Это означает дополнительные сетевые запросы. Мы можем предотвратить эту проверку с помощью опции <code>--offline</code>.</p><p>Хотя вам следует избегать <code>SNAPSHOT </code>зависимостей, иногда это неизбежно, особенно во время разработки.</p><p>Команда <code>mvn test -o</code>, <code>-o </code>является сокращением для <code>--offline</code>.</p><ul><li><p>01:46 мин</p></li><li><p>01:46 мин</p></li><li><p>01:47 мин</p></li><li><p>01:55 мин.</p></li><li><p>01:44 мин</p></li></ul><p>Кодовая база имеет большое количество <code>SNAPSHOT </code>зависимостей; следовательно, автономный режим значительно ускоряет сборку.</p><h3>Параметры JVM</h3><p>Сам Maven - это приложение на основе Java. Это означает, что каждый запуск запускает новую <abbr title="Виртуальная машина Java">JVM</abbr>. JVM сначала интерпретирует <em>байт-код, </em><strong>а</strong> <strong>затем</strong> анализирует рабочий код и соответственно компилирует <em>байт-код</em> в <em>нативный код</em>: это обеспечивает максимальную производительность, но только после длительного времени сборки. Это отлично подходит для длительно выполняющихся процессов, а не для приложений командной строки.</p><p>Скорее всего, мы не достигнем максимальной производительности в контексте сборок, поскольку они относительно недолговечны, но мы по-прежнему расплачиваемся за время анализа. </p><p>Мы можем настроить Maven, чтобы отказаться от него, настроив соответствующие параметры JVM. Доступно несколько способов настройки JVM. Самый простой способ - создать специальный <code>jvm.config </code>файл конфигурации во вложенной папке <code>.mvn </code>проекта.</p><pre><code class="bash">-XX: -TieredCompilation -XX: TieredStopAtLevel = 1</code></pre><p>Давайте теперь просто запустим <code>mvn test</code>:</p><ul><li><p>01:44 мин</p></li><li><p>01:44 мин</p></li><li><p>01:53 мин.</p></li><li><p>01:53 мин.</p></li><li><p>01:55 мин.</p></li></ul><h3>Maven Daemon</h3><p><a href="https://github.com/mvndaemon/mvnd" rel="noopener noreferrer nofollow">Демон Maven</a> является недавним дополнением к экосистеме Maven. Он инспирирован <a href="https://docs.gradle.org/current/userguide/gradle_daemon.html" rel="noopener noreferrer nofollow">демоном Gradle</a> :</p><blockquote><p><strong>Gradle работает на виртуальной машине Java (JVM) и использует несколько вспомогательных библиотек, для которых требуется значительное</strong> <strong>время инициализации. </strong></p><p><strong>В результате это иногда запуск может оказаться немного замедленным. Решением этой проблемы является Gradle Daemon: долгосрочный фоновый процесс, который выполняет ваши сборки намного быстрее, чем без него. Это достигается исключая дорогостоящий процесс начальной загрузки и используя кеширование для сохранения данных о вашем проекте в памяти.</strong></p></blockquote><p>Команда Gradle осознала, что инструмент командной строки - не лучшее применение JVM. Чтобы решить эту проблему, нужно постоянно поддерживать фоновый процесс JVM, используя демон. Он работает как сервер, а <abbr title="Интерфейс командной строки">интерфейс командной строки</abbr> играет роль клиента.</p><p>В качестве дополнительного преимущества этот длительный процесс загружает классы только один раз (если они не менялись между запусками).</p><p>После установки программного обеспечения вы можете запустить демон с помощью <code>mvnd </code>команды вместо стандартной <code>mvn</code>. Вот результаты выполнения команды: <code>mvnd test</code>:</p><ul><li><p>33.124 s (Wall Clock)</p></li><li><p>33.114 s (Wall Clock)</p></li><li><p>34.440 s (Wall Clock)</p></li><li><p>32.025 s (Wall Clock)</p></li><li><p>29.364 s (Wall Clock)</p></li></ul><p>Обратите внимание, что по умолчанию демон использует несколько потоков с расширением <code>number of cores - 1</code>.</p><h3>Объединение методов</h3><p>Мы видели несколько способов ускорить сборку. Что, если бы мы использовали их вместе?</p><p>Давайте сначала попробуем использовать все методы, которые мы видели до сих пор, в одном и том же прогоне:</p><pre><code>mvnd test -Dparallel=all -DperCoreThreadCount=false -DthreadCount=16 -o #1 #2 #3 #4</code></pre><ol><li><p>Используем демон Maven</p></li><li><p>Запускаем тесты параллельно</p></li><li><p>Не обновляем <code>SNAPSHOT </code>зависимости</p></li><li><p>Настраиваем параметры JVM, как указано выше, через <code>jvm.config </code>файл - нет необходимости устанавливать какие-либо параметры</p></li></ol><p>Команда возвращает следующие результаты:</p><ul><li><p>27.061 s (Wall Clock)</p></li><li><p>24.457 s (Wall Clock)</p></li><li><p>24.853 s (Wall Clock)</p></li><li><p>25.772 s (Wall Clock)</p></li></ul><p>Давайте вспомним, что демон Maven <em>-</em> это длительный процесс. По этой причине разумно позволить JVM проанализировать и скомпилировать <em>байт-код </em>в <em>нативный код</em>. Таким образом, мы можем удалить <code>jvm.config </code>файл и повторно запустить указанную выше команду. Результаты:</p><ul><li><p>23.840 s (Wall Clock)</p></li><li><p>26.589 s (Wall Clock)</p></li><li><p>22.283 s (Wall Clock)</p></li><li><p>23.788 s (Wall Clock)</p></li><li><p>22.456 s (Wall Clock)</p></li></ul><p>Теперь мы можем отобразить сводные результаты:</p><div class="table"><table><tbody><tr><td><p></p></td><td><p>Baseline</p></td><td><p>Parallel Build</p></td><td><p>Parallel Tests</p></td><td><p>Offline</p></td><td><p>Jvm Params</p></td><td><p>Daemon</p></td><td><p>Daemon + Offline + Parallel Tests + Parameters</p></td><td><p>Daemon + Offline + Parallel Tests</p></td></tr><tr><td><p>#1 (s)</p></td><td><p>120.00</p></td><td><p>51.00</p></td><td><p>128.00</p></td><td><p>106.00</p></td><td><p>104.00</p></td><td><p>33.12</p></td><td><p>27.06</p></td><td><p>23.84</p></td></tr><tr><td><p>#2 (s)</p></td><td><p>117.00</p></td><td><p>40.00</p></td><td><p>123.00</p></td><td><p>106.00</p></td><td><p>104.00</p></td><td><p>33.11</p></td><td><p>24.46</p></td><td><p>26.59</p></td></tr><tr><td><p>#3 (s)</p></td><td><p>118.00</p></td><td><p>52.00</p></td><td><p>106.00</p></td><td><p>107.00</p></td><td><p>113.00</p></td><td><p>34.44</p></td><td><p>24.85</p></td><td><p>22.28</p></td></tr><tr><td><p>#4 (s)</p></td><td><p>116.00</p></td><td><p>42.00</p></td><td><p>112.00</p></td><td><p>115.00</p></td><td><p>113.00</p></td><td><p>32.03</p></td><td><p>25.77</p></td><td><p>23.79</p></td></tr><tr><td><p>#5 (s)</p></td><td><p>118.00</p></td><td><p>42.00</p></td><td><p>113.00</p></td><td><p>104.00</p></td><td><p>115.00</p></td><td><p></p></td><td><p>29.36</p></td><td><p>22.46</p></td></tr><tr><td><p>Average (s)</p></td><td><p>*117.80*</p></td><td><p>45.40</p></td><td><p>116.40</p></td><td><p>107.60</p></td><td><p>109.80</p></td><td><p>32.41</p></td><td><p>25.54</p></td><td><p>23.79</p></td></tr><tr><td><p>Deviation</p></td><td><p>1.76</p></td><td><p>25.44</p></td><td><p>63.44</p></td><td><p>14.64</p></td><td><p>22.96</p></td><td><p>2.91</p></td><td><p>1.00</p></td><td><p>2.38</p></td></tr><tr><td><p>Gain from baseline (s)</p></td><td><p>-</p></td><td><p>72.40</p></td><td><p>1.40</p></td><td><p>10.20</p></td><td><p>8.00</p></td><td><p>85.39</p></td><td><p>92.26</p></td><td><p><strong>94.01</strong></p></td></tr><tr><td><p>% gain</p></td><td><p>-</p></td><td><p>61.46%</p></td><td><p>1.19%</p></td><td><p>8.66%</p></td><td><p>6.79%</p></td><td><p>72.48%</p></td><td><p>78.32%</p></td><td><p><strong>79.80%</strong></p></td></tr></tbody></table></div><h3>Заключение</h3><p>В этом посте мы увидели несколько способов ускорить сборку Maven. Вот их краткое изложение:</p><ul><li><p><strong>Демон Maven</strong>: надежная и безопасная отправная точка</p></li><li><p><strong>Распараллеливание сборки</strong>: когда сборка содержит несколько модулей, независимых друг от друга.</p></li><li><p><strong>Распараллеливание тестов</strong>: когда проект содержит несколько тестов.</p></li><li><p><strong>Автономность</strong>: когда проект содержит <code>SNAPSHOT</code>зависимости <em>и</em> вам не нужно их обновлять.</p></li><li><p><strong>Параметры JVM</strong>: когда вы хотите сделать все возможное</p></li></ul><p>Я бы посоветовал каждому пользователю начать использовать демон Maven и продолжить оптимизацию при необходимости и в зависимости от вашего проекта.</p><p>В следующем посте мы сосредоточимся на ускорении ваших сборок Maven в контейнере.</p><p><strong>Чтобы продвинуться дальше, прочтите:</strong></p><ul><li><p><a href="https://cwiki.apache.org/confluence/display/MAVEN/Parallel+builds+in+Maven+3" rel="noopener noreferrer nofollow">Parallel builds in Maven 3</a></p></li><li><p><a href="https://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html#Parallel_Test_Execution" rel="noopener noreferrer nofollow">Surefire Parallel Test Execution</a></p></li><li><p><a href="https://github.com/mvndaemon/mvnd" rel="noopener noreferrer nofollow">mvnd - the Maven Daemon</a></p></li></ul></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmaven%5D" class="tm-tags-list__link">maven</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bperformance%20optimization%5D" class="tm-tags-list__link">performance optimization</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bcontinuous%20integration%5D" class="tm-tags-list__link">continuous integration</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/java/" class="tm-hubs-list__link">
    Java
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 11: ↑11 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 11: ↑11 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+11</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    50
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/val6852/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_blue"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 102 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    58
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">30</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/val6852/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @val6852
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/582688/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 6 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/582688/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/582688/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"582688":{"id":"582688","timePublished":"2021-10-11T09:46:40+00:00","isCorporative":false,"lang":"ru","titleHtml":"Ускорение Maven сборки","leadData":{"textHtml":"\u003Cp\u003EУзнайте, как сделать сборки Maven более быстрыми и эффективными\u003C\u002Fp\u003E\u003Cp\u003EВ этом посте я хочу подробно рассказать о некоторых методах, которые вы можете использовать для ускорения сборки Maven.&nbsp;\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Nicolas Fränkel","originalUrl":"https:\u002F\u002Fdzone.com\u002Farticles\u002Ffaster-maven-builds"}},{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":58,"votesCount":102},"rating":30,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2187018","alias":"val6852","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":6,"favoritesCount":50,"readingCount":3138,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"375","alias":"java","type":"collective","title":"Java","titleHtml":"Java","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Ch4\u003EУзнайте, как сделать сборки Maven более быстрыми и эффективными\u003C\u002Fh4\u003E\u003Cp\u003EДля сборки требуется несколько свойств, главное из которых - воспроизводимость. \u003C\u002Fp\u003E\u003Cp\u003EЯ считаю, что скорость должна быть ниже в ​​порядке приоритета. Тем не менее, это также один из самых лимитирующих факторов на ваш цикл выпуска: если ваша сборка занимает \u003Cem\u003ET\u003C\u002Fem\u003E, вы не можете отпустить быстрее, чем каждый из \u003Cem\u003ET\u003C\u002Fem\u003E. \u003C\u002Fp\u003E\u003Cp\u003EСледовательно, вы, вероятно, захотите ускорить свои сборки после достижения определенного уровня зрелости, чтобы выпускать более частые релизы.\u003C\u002Fp\u003E\u003Cp\u003EВ этом посте я хочу подробно рассказать о некоторых методах, которые вы можете использовать для ускорения Maven сборки. Следующий пост будет посвящен тому, как сделать то же самое внутри Docker.\u003C\u002Fp\u003E\u003Ch3\u003EИсходный уровень\u003C\u002Fh3\u003E\u003Cp\u003EПоскольку я хочу предложить методы и оценить их влияние, нам нужен образец репозитория. \u003C\u002Fp\u003E\u003Cp\u003EЯ выбрал \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fhazelcast\u002Fhazelcast-code-samples\" rel=\"noopener noreferrer nofollow\"\u003Eпримеры кода Hazelcast,\u003C\u002Fa\u003E потому что он обеспечивает достаточно большую многомодульную кодовую базу с множеством подмодулей; точный коммит - \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fhazelcast\u002Fhazelcast-code-samples\u002Fcommit\u002F448febd9977b9927a3f00bbf61ba50b2c0d94bb4\" rel=\"noopener noreferrer nofollow\"\u003E448febd\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EПорядок действий следующий:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EЯ запускаю команду пять раз, чтобы избежать временных проблем\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЯ выполняю \u003Ccode\u003Emvn clean \u003C\u002Fcode\u003Eперед каждым запуском, чтобы начать с пустого \u003Ccode\u003Etarget \u003C\u002Fcode\u003Eрепозитория\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВсе зависимости и плагины уже загружены\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЯ сообщаю время, которое Maven отображает в журнале консоли:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E[INFO] -------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] -------------------------------------------------------\n[INFO] Total time:  22.456 s (Wall Clock)\n[INFO] Finished at: 2021-09-24T23:20:41+02:00\n[INFO] -------------------------------------------------------\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНачнем с нашего исходного уровня, выполнив команду: \u003Ccode\u003Emvn test\u003C\u002Fcode\u003E. Результат:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E02:00 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:57 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:58 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:56 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:58 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch3\u003EИспользование всех процессоров\u003C\u002Fh3\u003E\u003Cp\u003EПо умолчанию Maven использует один поток. В век многоядерных процессоров это пустая трата времени. Можно запускать параллельные сборки с использованием нескольких потоков, задав абсолютное число или число относительно количества доступных ядер. Для получения дополнительной информации, пожалуйста, посмотрите \u003Ca href=\"https:\u002F\u002Fcwiki.apache.org\u002Fconfluence\u002Fdisplay\u002FMAVEN\u002FParallel+builds+in+Maven+3\" rel=\"noopener noreferrer nofollow\"\u003Eсоответствующую документацию\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EЧем больше у вас подмодулей, которые не зависят друг от друга, \u003Cem\u003Eт.е\u003C\u002Fem\u003E. Maven может выполнять их сборку параллельно, тем лучше результат вы получите с помощью этой техники. \u003C\u002Fp\u003E\u003Cp\u003EЭто очень хорошо работает на нашей кодовой базе.\u003C\u002Fp\u003E\u003Cp\u003EМы собираемся использовать столько потоков, сколько доступно ядер. Соответствующая команда Maven: \u003Ccode\u003Emvn test -T 1C\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003EПри запуске этой команды вы должны увидеть в консоли следующее сообщение:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003EUsing the MultiThreadedBuilder implementation with a thread count of X\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E51.487 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E40.322 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E52.468 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E41.862 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E41.699 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЦифры намного лучше, но с большей дисперсией.\u003C\u002Fp\u003E\u003Ch3\u003EПараллельное выполнение теста\u003C\u002Fh3\u003E\u003Cp\u003EРаспараллеливание - отличный метод. Мы можем сделать то же самое в отношении выполнения тестов. По умолчанию плагин Maven Surefire запускает тесты последовательно, но можно настроить его для параллельного запуска тестов. Пожалуйста, обратитесь к \u003Ca href=\"https:\u002F\u002Fmaven.apache.org\u002Fsurefire\u002Fmaven-surefire-plugin\u002Fexamples\u002Ffork-options-and-parallel-execution.html#Parallel_Test_Execution\" rel=\"noopener noreferrer nofollow\"\u003Eдокументации\u003C\u002Fa\u003E за полным набором опций.\u003C\u002Fp\u003E\u003Cp\u003EЭтот подход отлично подходит, если у вас есть большое количество юнитов в каждом модуле. Обратите внимание, что ваши тесты \u003Cstrong\u003Eдолжны\u003C\u002Fstrong\u003E быть независимыми друг от друга.\u003C\u002Fp\u003E\u003Cp\u003EМы вручную зададим количество потоков:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Emvn test -Dparallel=all -DperCoreThreadCount=false -DthreadCount=16 #1 #2\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EНастройте Surefire для параллельного запуска классов и методов\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EРучное изменение количества потоков до 16\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EЗапустим и получим:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E02:04 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E02:03 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:46 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:52 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:53 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПохоже, что стоимость синхронизации потоков компенсирует потенциальную выгоду от выполнения параллельных тестов.\u003C\u002Fp\u003E\u003Ch3\u003EОфлайн\u003C\u002Fh3\u003E\u003Cp\u003EMaven будет проверять, есть ли у \u003Ccode\u003ESNAPSHOT \u003C\u002Fcode\u003Eзависимости новая «версия» при каждом запуске. Это означает дополнительные сетевые запросы. Мы можем предотвратить эту проверку с помощью опции \u003Ccode\u003E--offline\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003EХотя вам следует избегать \u003Ccode\u003ESNAPSHOT \u003C\u002Fcode\u003Eзависимостей, иногда это неизбежно, особенно во время разработки.\u003C\u002Fp\u003E\u003Cp\u003EКоманда \u003Ccode\u003Emvn test -o\u003C\u002Fcode\u003E, \u003Ccode\u003E-o \u003C\u002Fcode\u003Eявляется сокращением для \u003Ccode\u003E--offline\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E01:46 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:46 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:47 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:55 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:44 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EКодовая база имеет большое количество \u003Ccode\u003ESNAPSHOT \u003C\u002Fcode\u003Eзависимостей; следовательно, автономный режим значительно ускоряет сборку.\u003C\u002Fp\u003E\u003Ch3\u003EПараметры JVM\u003C\u002Fh3\u003E\u003Cp\u003EСам Maven - это приложение на основе Java. Это означает, что каждый запуск запускает новую \u003Cabbr title=\"Виртуальная машина Java\"\u003EJVM\u003C\u002Fabbr\u003E. JVM сначала интерпретирует \u003Cem\u003Eбайт-код, \u003C\u002Fem\u003E\u003Cstrong\u003Eа\u003C\u002Fstrong\u003E \u003Cstrong\u003Eзатем\u003C\u002Fstrong\u003E анализирует рабочий код и соответственно компилирует \u003Cem\u003Eбайт-код\u003C\u002Fem\u003E в \u003Cem\u003Eнативный код\u003C\u002Fem\u003E: это обеспечивает максимальную производительность, но только после длительного времени сборки. Это отлично подходит для длительно выполняющихся процессов, а не для приложений командной строки.\u003C\u002Fp\u003E\u003Cp\u003EСкорее всего, мы не достигнем максимальной производительности в контексте сборок, поскольку они относительно недолговечны, но мы по-прежнему расплачиваемся за время анализа. \u003C\u002Fp\u003E\u003Cp\u003EМы можем настроить Maven, чтобы отказаться от него, настроив соответствующие параметры JVM. Доступно несколько способов настройки JVM. Самый простой способ - создать специальный \u003Ccode\u003Ejvm.config \u003C\u002Fcode\u003Eфайл конфигурации во вложенной папке \u003Ccode\u003E.mvn \u003C\u002Fcode\u003Eпроекта.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E-XX: -TieredCompilation -XX: TieredStopAtLevel = 1\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EДавайте теперь просто запустим \u003Ccode\u003Emvn test\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E01:44 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:44 мин\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:53 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:53 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E01:55 мин.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch3\u003EMaven Daemon\u003C\u002Fh3\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmvndaemon\u002Fmvnd\" rel=\"noopener noreferrer nofollow\"\u003EДемон Maven\u003C\u002Fa\u003E является недавним дополнением к экосистеме Maven. Он инспирирован \u003Ca href=\"https:\u002F\u002Fdocs.gradle.org\u002Fcurrent\u002Fuserguide\u002Fgradle_daemon.html\" rel=\"noopener noreferrer nofollow\"\u003Eдемоном Gradle\u003C\u002Fa\u003E :\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003Cstrong\u003EGradle работает на виртуальной машине Java (JVM) и использует несколько вспомогательных библиотек, для которых требуется значительное\u003C\u002Fstrong\u003E \u003Cstrong\u003Eвремя инициализации. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EВ результате это иногда запуск может оказаться немного замедленным. Решением этой проблемы является Gradle Daemon: долгосрочный фоновый процесс, который выполняет ваши сборки намного быстрее, чем без него. Это достигается исключая дорогостоящий процесс начальной загрузки и используя кеширование для сохранения данных о вашем проекте в памяти.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EКоманда Gradle осознала, что инструмент командной строки - не лучшее применение JVM. Чтобы решить эту проблему, нужно постоянно поддерживать фоновый процесс JVM, используя демон. Он работает как сервер, а \u003Cabbr title=\"Интерфейс командной строки\"\u003Eинтерфейс командной строки\u003C\u002Fabbr\u003E играет роль клиента.\u003C\u002Fp\u003E\u003Cp\u003EВ качестве дополнительного преимущества этот длительный процесс загружает классы только один раз (если они не менялись между запусками).\u003C\u002Fp\u003E\u003Cp\u003EПосле установки программного обеспечения вы можете запустить демон с помощью \u003Ccode\u003Emvnd \u003C\u002Fcode\u003Eкоманды вместо стандартной \u003Ccode\u003Emvn\u003C\u002Fcode\u003E. Вот результаты выполнения команды: \u003Ccode\u003Emvnd test\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E33.124 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E33.114 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E34.440 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E32.025 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E29.364 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EОбратите внимание, что по умолчанию демон использует несколько потоков с расширением \u003Ccode\u003Enumber of cores - 1\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Ch3\u003EОбъединение методов\u003C\u002Fh3\u003E\u003Cp\u003EМы видели несколько способов ускорить сборку. Что, если бы мы использовали их вместе?\u003C\u002Fp\u003E\u003Cp\u003EДавайте сначала попробуем использовать все методы, которые мы видели до сих пор, в одном и том же прогоне:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Emvnd test -Dparallel=all -DperCoreThreadCount=false -DthreadCount=16 -o #1 #2 #3 #4\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EИспользуем демон Maven\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЗапускаем тесты параллельно\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНе обновляем \u003Ccode\u003ESNAPSHOT \u003C\u002Fcode\u003Eзависимости\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНастраиваем параметры JVM, как указано выше, через \u003Ccode\u003Ejvm.config \u003C\u002Fcode\u003Eфайл - нет необходимости устанавливать какие-либо параметры\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EКоманда возвращает следующие результаты:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E27.061 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E24.457 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E24.853 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E25.772 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДавайте вспомним, что демон Maven \u003Cem\u003E-\u003C\u002Fem\u003E это длительный процесс. По этой причине разумно позволить JVM проанализировать и скомпилировать \u003Cem\u003Eбайт-код \u003C\u002Fem\u003Eв \u003Cem\u003Eнативный код\u003C\u002Fem\u003E. Таким образом, мы можем удалить \u003Ccode\u003Ejvm.config \u003C\u002Fcode\u003Eфайл и повторно запустить указанную выше команду. Результаты:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E23.840 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E26.589 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E22.283 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E23.788 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E22.456 s (Wall Clock)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EТеперь мы можем отобразить сводные результаты:\u003C\u002Fp\u003E\u003Cdiv class=\"table\"\u003E\u003Ctable\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EBaseline\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EParallel Build\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EParallel Tests\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EOffline\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EJvm Params\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EDaemon\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EDaemon + Offline + Parallel Tests + Parameters\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003EDaemon + Offline + Parallel Tests\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E#1 (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E120.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E51.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E128.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E106.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E104.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E33.12\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E27.06\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E23.84\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E#2 (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E117.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E40.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E123.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E106.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E104.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E33.11\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E24.46\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E26.59\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E#3 (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E118.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E52.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E106.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E107.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E113.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E34.44\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E24.85\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E22.28\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E#4 (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E116.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E42.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E112.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E115.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E113.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E32.03\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E25.77\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E23.79\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E#5 (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E118.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E42.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E113.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E104.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E115.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E29.36\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E22.46\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003EAverage (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E*117.80*\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E45.40\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E116.40\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E107.60\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E109.80\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E32.41\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E25.54\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E23.79\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003EDeviation\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E1.76\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E25.44\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E63.44\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E14.64\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E22.96\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E2.91\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E1.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E2.38\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003EGain from baseline (s)\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E-\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E72.40\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E1.40\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E10.20\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E8.00\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E85.39\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E92.26\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E\u003Cstrong\u003E94.01\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cp\u003E% gain\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E-\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E61.46%\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E1.19%\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E8.66%\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E6.79%\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E72.48%\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E78.32%\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003Ctd\u003E\u003Cp\u003E\u003Cstrong\u003E79.80%\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003Ch3\u003EЗаключение\u003C\u002Fh3\u003E\u003Cp\u003EВ этом посте мы увидели несколько способов ускорить сборку Maven. Вот их краткое изложение:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EДемон Maven\u003C\u002Fstrong\u003E: надежная и безопасная отправная точка\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EРаспараллеливание сборки\u003C\u002Fstrong\u003E: когда сборка содержит несколько модулей, независимых друг от друга.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EРаспараллеливание тестов\u003C\u002Fstrong\u003E: когда проект содержит несколько тестов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EАвтономность\u003C\u002Fstrong\u003E: когда проект содержит \u003Ccode\u003ESNAPSHOT\u003C\u002Fcode\u003Eзависимости \u003Cem\u003Eи\u003C\u002Fem\u003E вам не нужно их обновлять.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EПараметры JVM\u003C\u002Fstrong\u003E: когда вы хотите сделать все возможное\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЯ бы посоветовал каждому пользователю начать использовать демон Maven и продолжить оптимизацию при необходимости и в зависимости от вашего проекта.\u003C\u002Fp\u003E\u003Cp\u003EВ следующем посте мы сосредоточимся на ускорении ваших сборок Maven в контейнере.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EЧтобы продвинуться дальше, прочтите:\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fcwiki.apache.org\u002Fconfluence\u002Fdisplay\u002FMAVEN\u002FParallel+builds+in+Maven+3\" rel=\"noopener noreferrer nofollow\"\u003EParallel builds in Maven 3\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fmaven.apache.org\u002Fsurefire\u002Fmaven-surefire-plugin\u002Fexamples\u002Ffork-options-and-parallel-execution.html#Parallel_Test_Execution\" rel=\"noopener noreferrer nofollow\"\u003ESurefire Parallel Test Execution\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmvndaemon\u002Fmvnd\" rel=\"noopener noreferrer nofollow\"\u003Emvnd - the Maven Daemon\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"maven"},{"titleHtml":"performance optimization"},{"titleHtml":"continuous integration"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F582688\u002F4f2f5d1945287b06359ed14811356c56\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F582688\u002F4f2f5d1945287b06359ed14811356c56\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F582688\\\u002F\"},\"headline\":\"Ускорение Maven сборки\",\"datePublished\":\"2021-10-11T12:46:40+03:00\",\"dateModified\":\"2021-10-11T14:01:16+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"val6852\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&nbsp;Я считаю, что скор...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F582688\\\u002F#post-content-body\",\"about\":[\"h_java\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F582688\\\u002F4f2f5d1945287b06359ed14811356c56\\\u002F\"]}","metaDescription":"Узнайте, как сделать сборки Maven более быстрыми и эффективнымиДля сборки требуется несколько свойств, главное из которых - воспроизводимость.&nbsp;Я считаю, что скорость должна быть ниже в ​​порядке...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"java"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
