<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Почему в Ember не нужны React-хуки / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/583950\/"},"headline":"Почему в Ember не нужны React-хуки","datePublished":"2021-10-17T19:46:37+03:00","dateModified":"2021-10-18T00:09:31+03:00","author":{"@type":"Person","name":"chilicoder"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракц...","url":"https:\/\/habr.com\/ru\/post\/583950\/#post-content-body","about":["h_webdev","h_javascript","h_reactjs","h_emberjs","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/583950\/b4c684f03305af4530b68af7a6df21ae\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Почему в Ember не нужны React-хуки" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Почему в Ember не нужны React-хуки" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Почему в Ember не нужны React-хуки" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/a5e/0e5/f9b/a5e0e5f9be5b11d908ae9e1a5b0b8cad.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/a5e/0e5/f9b/a5e0e5f9be5b11d908ae9e1a5b0b8cad.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/a5e/0e5/f9b/a5e0e5f9be5b11d908ae9e1a5b0b8cad.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/a5e/0e5/f9b/a5e0e5f9be5b11d908ae9e1a5b0b8cad.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/a5e/0e5/f9b/a5e0e5f9be5b11d908ae9e1a5b0b8cad.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="583950" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-17T16:46:37.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/583950/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/583950/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/a5e/0e5/f9b/a5e0e5f9be5b11d908ae9e1a5b0b8cad.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/583950/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/chilicoder/" title="chilicoder" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/490/10f/cf1/49010fcf1f93897586120a940619414a.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/chilicoder/" class="tm-user-info__username">
      chilicoder
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-17T16:46:37.000Z" title="2021-10-17, 19:46">17  октября   в 19:46</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Почему в Ember не нужны React-хуки</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/webdev/" class="tm-article-snippet__hubs-item-link"><span>Разработка веб-сайтов</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/javascript/" class="tm-article-snippet__hubs-item-link"><span>JavaScript</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/reactjs/" class="tm-article-snippet__hubs-item-link"><span>ReactJS</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/emberjs/" class="tm-article-snippet__hubs-item-link"><span>Ember.js</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://www.effective-ember.com/blog/react-hooks-and-ember/" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Michael Klein
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p><em>От переводчика: Этот пост является продолжением </em><a href="https://habr.com/ru/post/583436/" rel="noopener noreferrer nofollow"><em>поста о реализация паттернов React-компонентов в Ember.js</em></a><em>. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и сравнивает ее реализацию с реализацией в Ember. И хотя в экосистеме React эта концепция признана весьма полезной, в Ember.js </em><a href="https://github.com/emberjs/rfcs/pull/567" rel="noopener noreferrer nofollow"><em>попытки предложить</em></a><em> похожую не нашли особенного отклика. Причина этому - наличие в фреймворке достаточных инструментов для решения этой задачи без использования хуков. О каких инструментах идет речь, вы узнаете из этого материала.</em></p><p>В этом посте продолжаем сравнение между реализациями паттернов компонентов в React и Ember.js. Теперь мы обсудим концепцию React-хуков и возможность применения той же концепции к Ember.js при создании ясных абстракций. </p><p>Обычно, когда обсуждают React-хуки, возникает ощущение, что они представляют собой очень мощную идею, которая позволяет разработчикам создавать элегантные абстракции и решать «сложные» проблемы. В основном <a href="https://blog.bitsrc.io/why-we-switched-to-react-hooks-48798c42c7f" rel="noopener noreferrer nofollow">люди с увлечением говорят </a>о концепции хуков, поэтому я хотел узнать, что это.</p><h2>Дисклеймер</h2><p>Этот пост не предназначен для того, чтобы оскорбить кого-либо, кто работает в экосистеме React, и не предназначен для рекламы фреймворка Ember.js. Как обсуждалось в моем прошлом посте, я верю, что людям будет интересно узнать, как решаются похожие проблемы в другой экосистеме . Я изучил тему React-хуков с позиции разработчика Ember.js и рассматривал свое исследование как возможность узнать о фреймворке, который мне незнаком.</p><h2>Изучаемая проблема - композиция абстракций</h2><p>Когда вы создаете сложное браузерное приложение, вы всегда будете хотеть выстроить интерфейс системным образом, стараясь переиспользовать повторящиеся абстракции в разных частях вашего приложения.</p><p>Обычно, когда речь заходит о переиспользовании на стороне клиента, люди думают о <a href="https://www.smashingmagazine.com/printed-books/design-systems/" rel="noopener noreferrer nofollow">дизайн-системах</a>, но UI-компоненты для репрезентации далеко не единственная вещь, которую вам захочется переиспользовать. В вашем приложении будет появляться похожее поведение, которое будет напрашиваться на повторное использование. Например, запуск асинхронного взаимодействия или показ уведомления исходя из определенного действия пользователя. Вы, наверняка, заходите переиспользовать подобные вещи.</p><p>Поэтому когда речь идет о хороших абстракциях в одностраничных приложениях, это означает не только создание библиотеки UI-компонентов, таких как кнопки, табы и прочее. Благоразумнее задуматься и о переиспользовании логики работы с состоянием (stateful logic).</p><p>Думаю вы согласитесь, что <a href="https://medium.com/javascript-scene/abstraction-composition-cb2849d5bdd6" rel="noopener noreferrer nofollow">поиск хороших абстракций и стройное их композиция - дело непростое</a>. И, не очень весело, когда используемый вами фреймворк усложняет вещи, вместо того, чтобы их упрощать.</p><p>До создания хуков, <a href="https://reactjs.org/docs/hooks-intro.html#its-hard-to-reuse-stateful-logic-between-components" rel="noopener noreferrer nofollow">по словам core-команды React</a>, библиотека не предоставляла хороших абстракций для сложной логики состояний:</p><blockquote><p>"React не предоставляет способа "присоединить" переиспользуемое поведение к компоненту (например, соединить его с хранилищем (store). Если вы работали с React какое-то время, вы, наверняка знакомы с такими паттернами, как render props или компоненты высокого порядка (high-order components), которые пытаются решить эту проблему. Но эти паттерны требуют от вас перестраивать подключаемые компоненты, что может быть запутанным и усложняющим чтение кода. </p></blockquote><p>Поэтому давайте попытаемся ответить, являются ли хуки единственным хорошим способом распространить абстракции по вашему коду? И как это реализуется в Ember.js?</p><h2>Пример - Абстракция асинхронности</h2><p>Одна из самых распространенных задач, которые возникают при создании браузерных приложений, это задача работы с асинхронными операциями. Например, мы не запрашиваем сразу все возможные данные (и не заставляем пользователя их ждать), а запрашиваем серверный API по необходимости. Или делаем асинхронные запросы для того, чтобы сохранить данные, которые пользователь вводит в поля форм. </p><p>В такие моменты хотелось бы простоты, поэтому давайте представим, что мы задумали вывести эту функциональность в абстракцию, которая будет "решать" все эти задачи. Для этого создадим сущность, которая  каким-то образом будет запускать асинхронные операции, а также <a href="https://v5.chriskrycho.com/journal/async-data-and-autotracking-in-ember-octane/#2-handling-all-data-states-is-important" rel="noopener noreferrer nofollow">будет сохранять состояние уже запущенных. </a></p><p>Чтобы привести имплементации в React и Ember к сравнимому состоянию, я решил смоделировать асинхронное поведение нашего приложения с помощью <a href="https://www.effective-ember.com/blog/robust-uis-with-statecharts/" rel="noopener noreferrer nofollow">statechart</a>.</p><p>Пойдя таким путем мы будем уверены, что компоненты будут вести себя одинаково и мы сможем лучше сравнить реализации.  Будем использовать популярную библиотеку <a href="https://xstate.js.org/" rel="noopener noreferrer nofollow">XState</a> для моделирования графа-состояния (statechart). Вот граф-состояние, который мы будем использовать в этом посте (<a href="https://xstate.js.org/viz/?gist=b90b7a517f8f756d2c87dce240f102fd" rel="noopener noreferrer nofollow">прямая ссылка</a>):</p><div class="embed_link"><div class="embed__thumb" style="background-image: url(&quot;undefined&quot;);"></div><div class="embed__caption"><div class="embed__caption-title"><span>XState Visualizer</span></div><a href="https://xstate.js.org/viz/?gist=b90b7a517f8f756d2c87dce240f102fd" target="_blank" rel="noopener noreferrer nofollow" class="embed__caption-link">xstate.js.org</a></div></div><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/6169fd2ead041b3b9bfdc79d" data-style="" id="6169fd2ead041b3b9bfdc79d" width=""></div><p>Данный граф-состояние делает не особо много интересного. У нас четыре различных состояния нашего <code>Async</code>-компонента - <code>idle</code>, <code>busy</code>, <code>success</code> и <code>error</code>. Когда мы в <code>idle</code>, мы можем запустить функцию <code>async</code>-переключателя, которую мы затем можем передать в XState <code>Machine</code> через <code>context</code> этой машины. Этот запрос может либо быть <code>resolve</code>, либо <code>reject</code>, что приведет нас либо в состояние <code>success</code>, либо - в <code>error</code> . Когда запрос удачен мы вызовем обработчик <code>onSuccess</code>. Когда же он не удается, запускается обработчик <code>onError</code>.</p><p><strong>React</strong></p><p>Во-первых, мы сравним две реализации компонентов, моделирующих асинхронное поведение в React. Одна из них будет использовать <code>React.Component</code>, а другая - <code>React Hooks</code>. Мы сделаем это, потому что в официальной документации React хуки представлены как более удачный способ реализации логики состояния. Я хочу протестировать эту гипотезу. </p><p>Обе версии показывают состояние, в котором находится <code>Async</code> взаимодействие и предоставляют кнопку, которой можно его запустить. После нажатия на кнопку состояние случайным образом будет переключаться на <code>resolve</code> или <code>reject</code>. Вы можететь попробовать и изучить обе реализации в этом Codesandbox (<a href="https://codesandbox.io/s/kind-kirch-rvteo?from-embed" rel="noopener noreferrer nofollow">прямая ссылка</a>):</p><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/616a0426cd09f7f6552eb3a3" data-style="" id="616a0426cd09f7f6552eb3a3" width=""></div><p>Как видим, обе версии <code>Async</code>-компонентов ведут себя одинаково. Что побуждает нас сделать первый вывод нашего поста:</p><p>Осуществлять абстракцию логики через компоненты чистым образом (clean way) можно как с помощью хуков, так и с помощью <code>React.Component</code></p><p>Углубимся в детали:</p><p><strong>React.Component</strong></p><p>Чтобы предоставить состояние асинхронного взаимодействия на уровень разметки будем использовать паттерн <a href="https://blog.flexiple.com/provider-pattern-with-react-context-api/" rel="noopener noreferrer nofollow">Провайдер</a>:</p><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/616a0636122cc8f63869680a" data-style="" id="616a0636122cc8f63869680a" width=""></div><p>Для начала нужно создать <code>Async</code>-компонент, который после рендеринга запустит <a href="https://xstate.js.org/docs/guides/interpretation.html" rel="noopener noreferrer nofollow">XState-интерпретатор</a>. Используя <a href="https://reactjs.org/docs/context.html" rel="noopener noreferrer nofollow">Context API</a> мы создадим пару <code>Provider/Consumer,</code> предоставляющую свойство state компонента другим компонентам, желающим использовать <code>Async</code>-поведение. </p><p>В целом, это добавляет немного бойлерплейта из-за способа работы <code>Context API</code>, но, если честно, для меня это не показалось чем-то ужасным и сложным в чтении и использовании.</p><p>Теперь перейдем к React-хукам.</p><p><strong>React-хуки</strong></p><p>Для того, чтобы создать свой хук <code>useAsync</code> создадим абстракцию на базе хука <code>useMachine</code>, который входит в состав библиотеки <a href="https://xstate.js.org/docs/packages/xstate-react/" rel="noopener noreferrer nofollow">xstate/react</a>. Создание собственных хуков <a href="https://reactjs.org/docs/hooks-custom.html" rel="noopener noreferrer nofollow">поощряется документацией</a> и является одним из продающих моментов всей концепции. </p><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/616a513b4615593b75e246a6" data-style="" id="616a513b4615593b75e246a6" width=""></div><p>Как видите, довольно просто создать свой собственный хук. Мы используем хук <code>useMachine</code>, настраиваем свой интерпретатор <code>XState</code> и затем возвращаем объект, который можно будет использовать в коде нашего приложения, чтобы обрабатывать <code>async</code>-поведение.</p><p>Для этого мы создадим компонент, использующий хук <code>useAsync</code>. Рано или поздно что-то должно вызвать наш хук и не похоже, что это можно сдать из разметки напрямую, как это возможно с помощью компонента <code>Async</code>-провайдера. </p><p>Для меня реализация с использованием React-хуков не выглядит чище реализации на React.Component. Не увидел ничего того, что можно было бы сделать с помощью хуков и чего нельзя было бы сделать, используя классы. Также мне не показалось, что концепция хуков это концепция, более понятная, чем нативные классы. И некоторые <a href="https://medium.com/swlh/the-ugly-side-of-hooks-584f0f8136b6" rel="noopener noreferrer nofollow">люди из экосистемы React склонны с этим согласиться</a>.</p><h2>Ember.js</h2><p><strong>@glimmer/component - компонент, который хранит состояние</strong></p><p>Ember не предоставляет абстракции на хуках, поэтому, чтобы запрограммировать <code>async</code>-поведение мы будем использовать подход, схожий с подходом для <code>React.Component</code> и создадим <code>Async</code>-компонент, который будет хранить состояние асинхронного взаимодействия.</p><p>Codesandbox c решением на Ember (<a href="https://codesandbox.io/embed/silly-minsky-t6p5o?autoresize=1&amp;fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview" rel="noopener noreferrer nofollow">прямая ссылка</a>)</p><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/616c580fcd09f7f6552eb3b1" data-style="" id="616c580fcd09f7f6552eb3b1" width=""></div><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/616b26eecd09f7f6552eb3a7" data-style="" id="616b26eecd09f7f6552eb3a7" width=""></div><p>Если внимательно присмотреться, то мы заметим, что решение на Ember.js представляет собой смесь между двумя реализациями от React. Мы используем абстракцию <code>useMachine</code>, предоставленную эддоном <a href="https://www.effective-ember.com/blog/react-hooks-and-ember/" rel="noopener noreferrer nofollow">ember-statecharts</a>, но потом извлекаем пользу из того, что наш компонент может сохранять у себя состояние.</p><p>В нашем примере <code>useMachine</code> создает объект с состоянием <a href="https://xstate.js.org/docs/guides/interpretation.html#interpreter" rel="noopener noreferrer nofollow">XState интерпретатора</a>. Мы присваиваем этот объект свойству экземляра компонента, чтобы пользоваться преимуществами <a href="https://guides.emberjs.com/release/in-depth-topics/autotracking-in-depth/" rel="noopener noreferrer nofollow">автотрекинга Ember</a> и добавляем <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get" rel="noopener noreferrer nofollow">геттеры</a>, такие как <code>isIdle</code>, которые автоматически обновляются при изменении графа-состояния.</p><p>Чтобы сделать состояние <code>Async</code>-поведения доступным для потребителей, мы используем функциональность <code>yield</code> и предоставляем <a href="https://guides.emberjs.com/release/components/block-content/#toc_block-parameters" rel="noopener noreferrer nofollow">блоковые параметры</a> внутри блока компонента. Потребляющие компоненты смогут сами решить, какие из свойств компонента <code>Async</code> они хотят использовать. </p><p><strong>Дополнительный материал: Хуки в Ember? - @use и Resource</strong></p><p>В экосистеме Ember есть функциональность напоминающая React-хуки. Обсуждение <a href="https://github.com/emberjs/rfcs/blob/use-and-resources/text/0567-use-and-resources.md" rel="noopener noreferrer nofollow">RFC</a> было резюмировано в статье <a href="https://www.pzuraq.com/introducing-use/" rel="noopener noreferrer nofollow">"Введение  @use"</a> . Используя декоратор <code>@use</code> и классы на основе <code>Resource</code> можно также реализовать абстракции для состояния, которые потом могут быть использованы в других объектах приложения. </p><p>Важной особенностью <code>@use</code> и в контексте приложения Ember.js является то, что <code>Resource</code> будет привязан к жизненному циклу объекта, вызвавшего <code>@use</code>. Это может быть полезно и удобно, когда вы пишите большие приложения. Но в сообществе еще не закончено обсуждение, является ли эта абстракция более удачной, чем уже существующие в экосистеме. </p><p>Поэтому, если коротко, <code>@use</code> и <code>Resource</code> не являются Ember ответом на React-хуки. Честно говоря, я лично не увидел ничего революционного в этой парадигме. Выглядит, как будто это своего рода заплатка на те недостатки, которые были в React изначально. Речь идет о необходимости написания служебного кода для передачи состояния и логики между различными частями приложения. В варианте с <code>React.Component</code> вы вынуждены положиться на <code>Context API</code>. Неудивительно, что намучившись с написанием бойлерплейта для <code>Provider/Consumer</code> многие разработчики поспешили использовать хуки. Но концептуально эта парадигма не выглядит чем-то более привлекательным, чем абстракции, которые уже есть в Ember.js</p><h2>Резюме</h2><p>Также как и в <a href="https://habr.com/ru/post/583436/" rel="noopener noreferrer nofollow">моем первом посте</a> про паттерны компонентов я рад, что удалось предоставить чистые компонентные абстракции не уступающие по качеству реализациям на React. Предложенное решение на Ember даже имеет некоторые преимущества в чистоте перед обоими React-вариантами.</p><p>Во-первых, мы используем намного меньше бойлерплейта, чем с <code>React.Component</code>. Не нужно создавать <code>Context</code>, потому что <code>yield</code> функциональность позволяет довольно просто вывести свойства и функции на сторону разметки. Во-вторых, в отличии от React-хуков, Ember позволяет легко строить <a href="https://habr.com/ru/post/488530/" rel="noopener noreferrer nofollow">реактивные абстракции на основе авто-трекинга </a>геттеров, в то время как в React вы должны обновлять состояние самостоятельно, не важно используете ли вы <code>React.Component</code> или React-хуки. </p><p>Я вижу, как многие javascript разработчики из-за доминирования React делают вывод, что именно эта библиотека лучше всего подходит для построения чистых абстракций при написании одностраничных приложений. Но после некоторого изучения вопроса, я не могу согласиться с этой оценкой. По крайней мере, когда речь заходит о сравнении с Ember.js</p><p>React-хуки не кажутся мне какой-то прорывной концепцией, как они <a href="https://blog.bitsrc.io/why-we-switched-to-react-hooks-48798c42c7f" rel="noopener noreferrer nofollow">кажутся разработчикам на React</a>. Это происходит от того, что они решают проблему, которой нет, когда мы работаем с Ember.js. Хуки действительно помогают избавиться от бойлерплейта, когда речь идет о распространении состояния по дереву компонентов, но в Ember.js это не проблема. Причин этому несколько:</p><ol><li><p><code>yield</code>-функционал Ember позволяет передать произвольные нижестоящим компонентам данные, которые те могут использовать по своему усмотрению. Это позволяет легко строить компоненты-провайдеры.</p></li><li><p>Когда необходимо получить доступ к глобальному состоянию, Ember.js предоставляет <a href="https://guides.emberjs.com/release/services/" rel="noopener noreferrer nofollow">сервисы</a>, синглтоны, которые можно подключать к различным частям приложения с помощью dependency injection. </p></li><li><p>Создание абстракций, использование этих абстракций из других абстракций и составление композиций не является революционной идеей. В Javascript и до этого можно было создавать объекты с состоянием, следующих <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF_%D0%B5%D0%B4%D0%B8%D0%BD%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8" rel="noopener noreferrer nofollow">принципу единственной ответственности,</a> и составлять из них композиции. И для этого вовсе не требуется знать <a href="https://reactjs.org/docs/hooks-rules.html" rel="noopener noreferrer nofollow">правила написания хуков</a>.</p></li></ol><p>В целом, я очень доволен как показал себя <a href="https://habr.com/ru/post/482158/" rel="noopener noreferrer nofollow">Ember Octane</a> в сравнении с React при работе над этой задачей. Фреймворк предоставил все необходимые инструменты для написания решения без большого количества бойлерплейта. Это делает простым распространение сложной логики состояния по разным частям приложения. Причем необходимые инструменты стабильны и существуют в фреймворке на протяжении долгого времени. Надеюсь, кто-нибудь найдет этот материал полезным и рассмотрит Ember.js в качестве выбора для своего следующего проекта. Также верю, что фреймворки лучше сравнивать на реальных сценариях, а не на основе господствуещего мнения на HackerNews.</p><p>Пожалуйста, поделитесь со мной своими мыслями об этом посте в <a href="https://twitter.com/levelbossmike" rel="noopener noreferrer nofollow">Твиттере</a> - мне всегда интересно услышать о вашем опыте работы с React по сравнению с Ember.js и ваше мнение о том, какой из двух, по вашему мнению, легче использовать.</p><p>Если этот пост вызвал у вас любопытство и вы считаете, что Ember.js подходит для вашего следующего проекта, не стесняйтесь <a href="https://www.effective-ember.com/" rel="noopener noreferrer nofollow">связаться с нами</a> (<em>от переводчика: на русском есть </em><a href="https://t.me/ember_js" rel="noopener noreferrer nofollow"><em>телеграмм канал</em></a><em> разработчиков на Ember.js</em>). Мы здесь, чтобы помочь командам создавать амбициозные приложения и помочь вам прототипировать решения, чтобы вы получили представление о том, какая библиотека или фреймворк лучше всего подходят для вашей проблемной области.</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D0%B0%D1%82%D1%82%D0%B5%D1%80%D0%BD%D1%8B%20javscript%5D" class="tm-tags-list__link">паттерны javscript</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D0%B0%D1%82%D1%82%D0%B5%D1%80%D0%BD%D1%8B%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%5D" class="tm-tags-list__link">паттерны проектирования</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D0%B0%D1%82%D1%82%D0%B5%D1%80%D0%BD%D1%8B%5D" class="tm-tags-list__link">паттерны</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bember.js%5D" class="tm-tags-list__link">ember.js</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Breact.js%5D" class="tm-tags-list__link">react.js</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhooks%5D" class="tm-tags-list__link">hooks</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Breact-hooks%5D" class="tm-tags-list__link">react-hooks</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/webdev/" class="tm-hubs-list__link">
    Разработка веб-сайтов
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/javascript/" class="tm-hubs-list__link">
    JavaScript
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/reactjs/" class="tm-hubs-list__link">
    ReactJS
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/emberjs/" class="tm-hubs-list__link">
    Ember.js
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Рейтинг</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span class="tm-votes-meter__value tm-votes-meter__value_medium">0</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.7K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    6
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/chilicoder/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/490/10f/cf1/49010fcf1f93897586120a940619414a.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 63 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    31
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0.3</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/chilicoder/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @chilicoder
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/583950/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 2 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/583950/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/583950/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"583950":{"id":"583950","timePublished":"2021-10-17T16:46:37+00:00","isCorporative":false,"lang":"ru","titleHtml":"Почему в Ember не нужны React-хуки","leadData":{"textHtml":"\u003Cp\u003EОт переводчика: Этот пост является продолжением \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F583436\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпоста о реализация паттернов React-компонентов в Ember.js\u003C\u002Fa\u003E. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и сравнивает ее реализацию с реализацией в Ember. И хотя в экосистеме React эта концепция признана весьма полезной, в Ember.js \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Femberjs\u002Frfcs\u002Fpull\u002F567\" rel=\"noopener noreferrer nofollow\"\u003Eпопытки предложить\u003C\u002Fa\u003E похожую не нашли особенного отклика. Причина этому - наличие в фреймворке достаточных инструментов для решения этой задачи без использования хуков. О каких инструментах идет речь, вы узнаете из этого материала.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa5e\u002F0e5\u002Ff9b\u002Fa5e0e5f9be5b11d908ae9e1a5b0b8cad.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa5e\u002F0e5\u002Ff9b\u002Fa5e0e5f9be5b11d908ae9e1a5b0b8cad.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Michael Klein","originalUrl":"https:\u002F\u002Fwww.effective-ember.com\u002Fblog\u002Freact-hooks-and-ember\u002F"}}],"author":{"scoreStats":{"score":31,"votesCount":63},"rating":0.3,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1163336","alias":"chilicoder","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F490\u002F10f\u002Fcf1\u002F49010fcf1f93897586120a940619414a.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":2,"favoritesCount":6,"readingCount":1658,"score":0,"votesCount":0},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"19327","alias":"reactjs","type":"collective","title":"ReactJS","titleHtml":"ReactJS","isProfiled":true},{"relatedData":null,"id":"22410","alias":"emberjs","type":"collective","title":"Ember.js","titleHtml":"Ember.js","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003E\u003Cem\u003EОт переводчика: Этот пост является продолжением \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F583436\u002F\" rel=\"noopener noreferrer nofollow\"\u003E\u003Cem\u003Eпоста о реализация паттернов React-компонентов в Ember.js\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и сравнивает ее реализацию с реализацией в Ember. И хотя в экосистеме React эта концепция признана весьма полезной, в Ember.js \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Femberjs\u002Frfcs\u002Fpull\u002F567\" rel=\"noopener noreferrer nofollow\"\u003E\u003Cem\u003Eпопытки предложить\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E похожую не нашли особенного отклика. Причина этому - наличие в фреймворке достаточных инструментов для решения этой задачи без использования хуков. О каких инструментах идет речь, вы узнаете из этого материала.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EВ этом посте продолжаем сравнение между реализациями паттернов компонентов в React и Ember.js. Теперь мы обсудим концепцию React-хуков и возможность применения той же концепции к Ember.js при создании ясных абстракций. \u003C\u002Fp\u003E\u003Cp\u003EОбычно, когда обсуждают React-хуки, возникает ощущение, что они представляют собой очень мощную идею, которая позволяет разработчикам создавать элегантные абстракции и решать «сложные» проблемы. В основном \u003Ca href=\"https:\u002F\u002Fblog.bitsrc.io\u002Fwhy-we-switched-to-react-hooks-48798c42c7f\" rel=\"noopener noreferrer nofollow\"\u003Eлюди с увлечением говорят \u003C\u002Fa\u003Eо концепции хуков, поэтому я хотел узнать, что это.\u003C\u002Fp\u003E\u003Ch2\u003EДисклеймер\u003C\u002Fh2\u003E\u003Cp\u003EЭтот пост не предназначен для того, чтобы оскорбить кого-либо, кто работает в экосистеме React, и не предназначен для рекламы фреймворка Ember.js. Как обсуждалось в моем прошлом посте, я верю, что людям будет интересно узнать, как решаются похожие проблемы в другой экосистеме . Я изучил тему React-хуков с позиции разработчика Ember.js и рассматривал свое исследование как возможность узнать о фреймворке, который мне незнаком.\u003C\u002Fp\u003E\u003Ch2\u003EИзучаемая проблема - композиция абстракций\u003C\u002Fh2\u003E\u003Cp\u003EКогда вы создаете сложное браузерное приложение, вы всегда будете хотеть выстроить интерфейс системным образом, стараясь переиспользовать повторящиеся абстракции в разных частях вашего приложения.\u003C\u002Fp\u003E\u003Cp\u003EОбычно, когда речь заходит о переиспользовании на стороне клиента, люди думают о \u003Ca href=\"https:\u002F\u002Fwww.smashingmagazine.com\u002Fprinted-books\u002Fdesign-systems\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eдизайн-системах\u003C\u002Fa\u003E, но UI-компоненты для репрезентации далеко не единственная вещь, которую вам захочется переиспользовать. В вашем приложении будет появляться похожее поведение, которое будет напрашиваться на повторное использование. Например, запуск асинхронного взаимодействия или показ уведомления исходя из определенного действия пользователя. Вы, наверняка, заходите переиспользовать подобные вещи.\u003C\u002Fp\u003E\u003Cp\u003EПоэтому когда речь идет о хороших абстракциях в одностраничных приложениях, это означает не только создание библиотеки UI-компонентов, таких как кнопки, табы и прочее. Благоразумнее задуматься и о переиспользовании логики работы с состоянием (stateful logic).\u003C\u002Fp\u003E\u003Cp\u003EДумаю вы согласитесь, что \u003Ca href=\"https:\u002F\u002Fmedium.com\u002Fjavascript-scene\u002Fabstraction-composition-cb2849d5bdd6\" rel=\"noopener noreferrer nofollow\"\u003Eпоиск хороших абстракций и стройное их композиция - дело непростое\u003C\u002Fa\u003E. И, не очень весело, когда используемый вами фреймворк усложняет вещи, вместо того, чтобы их упрощать.\u003C\u002Fp\u003E\u003Cp\u003EДо создания хуков, \u003Ca href=\"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-intro.html#its-hard-to-reuse-stateful-logic-between-components\" rel=\"noopener noreferrer nofollow\"\u003Eпо словам core-команды React\u003C\u002Fa\u003E, библиотека не предоставляла хороших абстракций для сложной логики состояний:\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Cp\u003E\"React не предоставляет способа \"присоединить\" переиспользуемое поведение к компоненту (например, соединить его с хранилищем (store). Если вы работали с React какое-то время, вы, наверняка знакомы с такими паттернами, как render props или компоненты высокого порядка (high-order components), которые пытаются решить эту проблему. Но эти паттерны требуют от вас перестраивать подключаемые компоненты, что может быть запутанным и усложняющим чтение кода. \u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EПоэтому давайте попытаемся ответить, являются ли хуки единственным хорошим способом распространить абстракции по вашему коду? И как это реализуется в Ember.js?\u003C\u002Fp\u003E\u003Ch2\u003EПример - Абстракция асинхронности\u003C\u002Fh2\u003E\u003Cp\u003EОдна из самых распространенных задач, которые возникают при создании браузерных приложений, это задача работы с асинхронными операциями. Например, мы не запрашиваем сразу все возможные данные (и не заставляем пользователя их ждать), а запрашиваем серверный API по необходимости. Или делаем асинхронные запросы для того, чтобы сохранить данные, которые пользователь вводит в поля форм. \u003C\u002Fp\u003E\u003Cp\u003EВ такие моменты хотелось бы простоты, поэтому давайте представим, что мы задумали вывести эту функциональность в абстракцию, которая будет \"решать\" все эти задачи. Для этого создадим сущность, которая  каким-то образом будет запускать асинхронные операции, а также \u003Ca href=\"https:\u002F\u002Fv5.chriskrycho.com\u002Fjournal\u002Fasync-data-and-autotracking-in-ember-octane\u002F#2-handling-all-data-states-is-important\" rel=\"noopener noreferrer nofollow\"\u003Eбудет сохранять состояние уже запущенных. \u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003EЧтобы привести имплементации в React и Ember к сравнимому состоянию, я решил смоделировать асинхронное поведение нашего приложения с помощью \u003Ca href=\"https:\u002F\u002Fwww.effective-ember.com\u002Fblog\u002Frobust-uis-with-statecharts\u002F\" rel=\"noopener noreferrer nofollow\"\u003Estatechart\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EПойдя таким путем мы будем уверены, что компоненты будут вести себя одинаково и мы сможем лучше сравнить реализации.  Будем использовать популярную библиотеку \u003Ca href=\"https:\u002F\u002Fxstate.js.org\u002F\" rel=\"noopener noreferrer nofollow\"\u003EXState\u003C\u002Fa\u003E для моделирования графа-состояния (statechart). Вот граф-состояние, который мы будем использовать в этом посте (\u003Ca href=\"https:\u002F\u002Fxstate.js.org\u002Fviz\u002F?gist=b90b7a517f8f756d2c87dce240f102fd\" rel=\"noopener noreferrer nofollow\"\u003Eпрямая ссылка\u003C\u002Fa\u003E):\u003C\u002Fp\u003E\u003Cdiv class=\"embed_link\"\u003E\u003Cdiv class=\"embed__thumb\" style=\"background-image: url(&quot;undefined&quot;);\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"embed__caption\"\u003E\u003Cdiv class=\"embed__caption-title\"\u003E\u003Cspan\u003EXState Visualizer\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Ca href=\"https:\u002F\u002Fxstate.js.org\u002Fviz\u002F?gist=b90b7a517f8f756d2c87dce240f102fd\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" class=\"embed__caption-link\"\u003Exstate.js.org\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F6169fd2ead041b3b9bfdc79d\" data-style=\"\" id=\"6169fd2ead041b3b9bfdc79d\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EДанный граф-состояние делает не особо много интересного. У нас четыре различных состояния нашего \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-компонента - \u003Ccode\u003Eidle\u003C\u002Fcode\u003E, \u003Ccode\u003Ebusy\u003C\u002Fcode\u003E, \u003Ccode\u003Esuccess\u003C\u002Fcode\u003E и \u003Ccode\u003Eerror\u003C\u002Fcode\u003E. Когда мы в \u003Ccode\u003Eidle\u003C\u002Fcode\u003E, мы можем запустить функцию \u003Ccode\u003Easync\u003C\u002Fcode\u003E-переключателя, которую мы затем можем передать в XState \u003Ccode\u003EMachine\u003C\u002Fcode\u003E через \u003Ccode\u003Econtext\u003C\u002Fcode\u003E этой машины. Этот запрос может либо быть \u003Ccode\u003Eresolve\u003C\u002Fcode\u003E, либо \u003Ccode\u003Ereject\u003C\u002Fcode\u003E, что приведет нас либо в состояние \u003Ccode\u003Esuccess\u003C\u002Fcode\u003E, либо - в \u003Ccode\u003Eerror\u003C\u002Fcode\u003E . Когда запрос удачен мы вызовем обработчик \u003Ccode\u003EonSuccess\u003C\u002Fcode\u003E. Когда же он не удается, запускается обработчик \u003Ccode\u003EonError\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EReact\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EВо-первых, мы сравним две реализации компонентов, моделирующих асинхронное поведение в React. Одна из них будет использовать \u003Ccode\u003EReact.Component\u003C\u002Fcode\u003E, а другая - \u003Ccode\u003EReact Hooks\u003C\u002Fcode\u003E. Мы сделаем это, потому что в официальной документации React хуки представлены как более удачный способ реализации логики состояния. Я хочу протестировать эту гипотезу. \u003C\u002Fp\u003E\u003Cp\u003EОбе версии показывают состояние, в котором находится \u003Ccode\u003EAsync\u003C\u002Fcode\u003E взаимодействие и предоставляют кнопку, которой можно его запустить. После нажатия на кнопку состояние случайным образом будет переключаться на \u003Ccode\u003Eresolve\u003C\u002Fcode\u003E или \u003Ccode\u003Ereject\u003C\u002Fcode\u003E. Вы можететь попробовать и изучить обе реализации в этом Codesandbox (\u003Ca href=\"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fkind-kirch-rvteo?from-embed\" rel=\"noopener noreferrer nofollow\"\u003Eпрямая ссылка\u003C\u002Fa\u003E):\u003C\u002Fp\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F616a0426cd09f7f6552eb3a3\" data-style=\"\" id=\"616a0426cd09f7f6552eb3a3\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EКак видим, обе версии \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-компонентов ведут себя одинаково. Что побуждает нас сделать первый вывод нашего поста:\u003C\u002Fp\u003E\u003Cp\u003EОсуществлять абстракцию логики через компоненты чистым образом (clean way) можно как с помощью хуков, так и с помощью \u003Ccode\u003EReact.Component\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\u003Cp\u003EУглубимся в детали:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EReact.Component\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EЧтобы предоставить состояние асинхронного взаимодействия на уровень разметки будем использовать паттерн \u003Ca href=\"https:\u002F\u002Fblog.flexiple.com\u002Fprovider-pattern-with-react-context-api\u002F\" rel=\"noopener noreferrer nofollow\"\u003EПровайдер\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F616a0636122cc8f63869680a\" data-style=\"\" id=\"616a0636122cc8f63869680a\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EДля начала нужно создать \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-компонент, который после рендеринга запустит \u003Ca href=\"https:\u002F\u002Fxstate.js.org\u002Fdocs\u002Fguides\u002Finterpretation.html\" rel=\"noopener noreferrer nofollow\"\u003EXState-интерпретатор\u003C\u002Fa\u003E. Используя \u003Ca href=\"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fcontext.html\" rel=\"noopener noreferrer nofollow\"\u003EContext API\u003C\u002Fa\u003E мы создадим пару \u003Ccode\u003EProvider\u002FConsumer,\u003C\u002Fcode\u003E предоставляющую свойство state компонента другим компонентам, желающим использовать \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-поведение. \u003C\u002Fp\u003E\u003Cp\u003EВ целом, это добавляет немного бойлерплейта из-за способа работы \u003Ccode\u003EContext API\u003C\u002Fcode\u003E, но, если честно, для меня это не показалось чем-то ужасным и сложным в чтении и использовании.\u003C\u002Fp\u003E\u003Cp\u003EТеперь перейдем к React-хукам.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EReact-хуки\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EДля того, чтобы создать свой хук \u003Ccode\u003EuseAsync\u003C\u002Fcode\u003E создадим абстракцию на базе хука \u003Ccode\u003EuseMachine\u003C\u002Fcode\u003E, который входит в состав библиотеки \u003Ca href=\"https:\u002F\u002Fxstate.js.org\u002Fdocs\u002Fpackages\u002Fxstate-react\u002F\" rel=\"noopener noreferrer nofollow\"\u003Exstate\u002Freact\u003C\u002Fa\u003E. Создание собственных хуков \u003Ca href=\"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-custom.html\" rel=\"noopener noreferrer nofollow\"\u003Eпоощряется документацией\u003C\u002Fa\u003E и является одним из продающих моментов всей концепции. \u003C\u002Fp\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F616a513b4615593b75e246a6\" data-style=\"\" id=\"616a513b4615593b75e246a6\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EКак видите, довольно просто создать свой собственный хук. Мы используем хук \u003Ccode\u003EuseMachine\u003C\u002Fcode\u003E, настраиваем свой интерпретатор \u003Ccode\u003EXState\u003C\u002Fcode\u003E и затем возвращаем объект, который можно будет использовать в коде нашего приложения, чтобы обрабатывать \u003Ccode\u003Easync\u003C\u002Fcode\u003E-поведение.\u003C\u002Fp\u003E\u003Cp\u003EДля этого мы создадим компонент, использующий хук \u003Ccode\u003EuseAsync\u003C\u002Fcode\u003E. Рано или поздно что-то должно вызвать наш хук и не похоже, что это можно сдать из разметки напрямую, как это возможно с помощью компонента \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-провайдера. \u003C\u002Fp\u003E\u003Cp\u003EДля меня реализация с использованием React-хуков не выглядит чище реализации на React.Component. Не увидел ничего того, что можно было бы сделать с помощью хуков и чего нельзя было бы сделать, используя классы. Также мне не показалось, что концепция хуков это концепция, более понятная, чем нативные классы. И некоторые \u003Ca href=\"https:\u002F\u002Fmedium.com\u002Fswlh\u002Fthe-ugly-side-of-hooks-584f0f8136b6\" rel=\"noopener noreferrer nofollow\"\u003Eлюди из экосистемы React склонны с этим согласиться\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Ch2\u003EEmber.js\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cstrong\u003E@glimmer\u002Fcomponent - компонент, который хранит состояние\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EEmber не предоставляет абстракции на хуках, поэтому, чтобы запрограммировать \u003Ccode\u003Easync\u003C\u002Fcode\u003E-поведение мы будем использовать подход, схожий с подходом для \u003Ccode\u003EReact.Component\u003C\u002Fcode\u003E и создадим \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-компонент, который будет хранить состояние асинхронного взаимодействия.\u003C\u002Fp\u003E\u003Cp\u003ECodesandbox c решением на Ember (\u003Ca href=\"https:\u002F\u002Fcodesandbox.io\u002Fembed\u002Fsilly-minsky-t6p5o?autoresize=1&amp;fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview\" rel=\"noopener noreferrer nofollow\"\u003Eпрямая ссылка\u003C\u002Fa\u003E)\u003C\u002Fp\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F616c580fcd09f7f6552eb3b1\" data-style=\"\" id=\"616c580fcd09f7f6552eb3b1\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F616b26eecd09f7f6552eb3a7\" data-style=\"\" id=\"616b26eecd09f7f6552eb3a7\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EЕсли внимательно присмотреться, то мы заметим, что решение на Ember.js представляет собой смесь между двумя реализациями от React. Мы используем абстракцию \u003Ccode\u003EuseMachine\u003C\u002Fcode\u003E, предоставленную эддоном \u003Ca href=\"https:\u002F\u002Fwww.effective-ember.com\u002Fblog\u002Freact-hooks-and-ember\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eember-statecharts\u003C\u002Fa\u003E, но потом извлекаем пользу из того, что наш компонент может сохранять у себя состояние.\u003C\u002Fp\u003E\u003Cp\u003EВ нашем примере \u003Ccode\u003EuseMachine\u003C\u002Fcode\u003E создает объект с состоянием \u003Ca href=\"https:\u002F\u002Fxstate.js.org\u002Fdocs\u002Fguides\u002Finterpretation.html#interpreter\" rel=\"noopener noreferrer nofollow\"\u003EXState интерпретатора\u003C\u002Fa\u003E. Мы присваиваем этот объект свойству экземляра компонента, чтобы пользоваться преимуществами \u003Ca href=\"https:\u002F\u002Fguides.emberjs.com\u002Frelease\u002Fin-depth-topics\u002Fautotracking-in-depth\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eавтотрекинга Ember\u003C\u002Fa\u003E и добавляем \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FFunctions\u002Fget\" rel=\"noopener noreferrer nofollow\"\u003Eгеттеры\u003C\u002Fa\u003E, такие как \u003Ccode\u003EisIdle\u003C\u002Fcode\u003E, которые автоматически обновляются при изменении графа-состояния.\u003C\u002Fp\u003E\u003Cp\u003EЧтобы сделать состояние \u003Ccode\u003EAsync\u003C\u002Fcode\u003E-поведения доступным для потребителей, мы используем функциональность \u003Ccode\u003Eyield\u003C\u002Fcode\u003E и предоставляем \u003Ca href=\"https:\u002F\u002Fguides.emberjs.com\u002Frelease\u002Fcomponents\u002Fblock-content\u002F#toc_block-parameters\" rel=\"noopener noreferrer nofollow\"\u003Eблоковые параметры\u003C\u002Fa\u003E внутри блока компонента. Потребляющие компоненты смогут сами решить, какие из свойств компонента \u003Ccode\u003EAsync\u003C\u002Fcode\u003E они хотят использовать. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EДополнительный материал: Хуки в Ember? - @use и Resource\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EВ экосистеме Ember есть функциональность напоминающая React-хуки. Обсуждение \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Femberjs\u002Frfcs\u002Fblob\u002Fuse-and-resources\u002Ftext\u002F0567-use-and-resources.md\" rel=\"noopener noreferrer nofollow\"\u003ERFC\u003C\u002Fa\u003E было резюмировано в статье \u003Ca href=\"https:\u002F\u002Fwww.pzuraq.com\u002Fintroducing-use\u002F\" rel=\"noopener noreferrer nofollow\"\u003E\"Введение  @use\"\u003C\u002Fa\u003E . Используя декоратор \u003Ccode\u003E@use\u003C\u002Fcode\u003E и классы на основе \u003Ccode\u003EResource\u003C\u002Fcode\u003E можно также реализовать абстракции для состояния, которые потом могут быть использованы в других объектах приложения. \u003C\u002Fp\u003E\u003Cp\u003EВажной особенностью \u003Ccode\u003E@use\u003C\u002Fcode\u003E и в контексте приложения Ember.js является то, что \u003Ccode\u003EResource\u003C\u002Fcode\u003E будет привязан к жизненному циклу объекта, вызвавшего \u003Ccode\u003E@use\u003C\u002Fcode\u003E. Это может быть полезно и удобно, когда вы пишите большие приложения. Но в сообществе еще не закончено обсуждение, является ли эта абстракция более удачной, чем уже существующие в экосистеме. \u003C\u002Fp\u003E\u003Cp\u003EПоэтому, если коротко, \u003Ccode\u003E@use\u003C\u002Fcode\u003E и \u003Ccode\u003EResource\u003C\u002Fcode\u003E не являются Ember ответом на React-хуки. Честно говоря, я лично не увидел ничего революционного в этой парадигме. Выглядит, как будто это своего рода заплатка на те недостатки, которые были в React изначально. Речь идет о необходимости написания служебного кода для передачи состояния и логики между различными частями приложения. В варианте с \u003Ccode\u003EReact.Component\u003C\u002Fcode\u003E вы вынуждены положиться на \u003Ccode\u003EContext API\u003C\u002Fcode\u003E. Неудивительно, что намучившись с написанием бойлерплейта для \u003Ccode\u003EProvider\u002FConsumer\u003C\u002Fcode\u003E многие разработчики поспешили использовать хуки. Но концептуально эта парадигма не выглядит чем-то более привлекательным, чем абстракции, которые уже есть в Ember.js\u003C\u002Fp\u003E\u003Ch2\u003EРезюме\u003C\u002Fh2\u003E\u003Cp\u003EТакже как и в \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F583436\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eмоем первом посте\u003C\u002Fa\u003E про паттерны компонентов я рад, что удалось предоставить чистые компонентные абстракции не уступающие по качеству реализациям на React. Предложенное решение на Ember даже имеет некоторые преимущества в чистоте перед обоими React-вариантами.\u003C\u002Fp\u003E\u003Cp\u003EВо-первых, мы используем намного меньше бойлерплейта, чем с \u003Ccode\u003EReact.Component\u003C\u002Fcode\u003E. Не нужно создавать \u003Ccode\u003EContext\u003C\u002Fcode\u003E, потому что \u003Ccode\u003Eyield\u003C\u002Fcode\u003E функциональность позволяет довольно просто вывести свойства и функции на сторону разметки. Во-вторых, в отличии от React-хуков, Ember позволяет легко строить \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F488530\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eреактивные абстракции на основе авто-трекинга \u003C\u002Fa\u003Eгеттеров, в то время как в React вы должны обновлять состояние самостоятельно, не важно используете ли вы \u003Ccode\u003EReact.Component\u003C\u002Fcode\u003E или React-хуки. \u003C\u002Fp\u003E\u003Cp\u003EЯ вижу, как многие javascript разработчики из-за доминирования React делают вывод, что именно эта библиотека лучше всего подходит для построения чистых абстракций при написании одностраничных приложений. Но после некоторого изучения вопроса, я не могу согласиться с этой оценкой. По крайней мере, когда речь заходит о сравнении с Ember.js\u003C\u002Fp\u003E\u003Cp\u003EReact-хуки не кажутся мне какой-то прорывной концепцией, как они \u003Ca href=\"https:\u002F\u002Fblog.bitsrc.io\u002Fwhy-we-switched-to-react-hooks-48798c42c7f\" rel=\"noopener noreferrer nofollow\"\u003Eкажутся разработчикам на React\u003C\u002Fa\u003E. Это происходит от того, что они решают проблему, которой нет, когда мы работаем с Ember.js. Хуки действительно помогают избавиться от бойлерплейта, когда речь идет о распространении состояния по дереву компонентов, но в Ember.js это не проблема. Причин этому несколько:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003E\u003Ccode\u003Eyield\u003C\u002Fcode\u003E-функционал Ember позволяет передать произвольные нижестоящим компонентам данные, которые те могут использовать по своему усмотрению. Это позволяет легко строить компоненты-провайдеры.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКогда необходимо получить доступ к глобальному состоянию, Ember.js предоставляет \u003Ca href=\"https:\u002F\u002Fguides.emberjs.com\u002Frelease\u002Fservices\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eсервисы\u003C\u002Fa\u003E, синглтоны, которые можно подключать к различным частям приложения с помощью dependency injection. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EСоздание абстракций, использование этих абстракций из других абстракций и составление композиций не является революционной идеей. В Javascript и до этого можно было создавать объекты с состоянием, следующих \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF_%D0%B5%D0%B4%D0%B8%D0%BD%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8\" rel=\"noopener noreferrer nofollow\"\u003Eпринципу единственной ответственности,\u003C\u002Fa\u003E и составлять из них композиции. И для этого вовсе не требуется знать \u003Ca href=\"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-rules.html\" rel=\"noopener noreferrer nofollow\"\u003Eправила написания хуков\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EВ целом, я очень доволен как показал себя \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F482158\u002F\" rel=\"noopener noreferrer nofollow\"\u003EEmber Octane\u003C\u002Fa\u003E в сравнении с React при работе над этой задачей. Фреймворк предоставил все необходимые инструменты для написания решения без большого количества бойлерплейта. Это делает простым распространение сложной логики состояния по разным частям приложения. Причем необходимые инструменты стабильны и существуют в фреймворке на протяжении долгого времени. Надеюсь, кто-нибудь найдет этот материал полезным и рассмотрит Ember.js в качестве выбора для своего следующего проекта. Также верю, что фреймворки лучше сравнивать на реальных сценариях, а не на основе господствуещего мнения на HackerNews.\u003C\u002Fp\u003E\u003Cp\u003EПожалуйста, поделитесь со мной своими мыслями об этом посте в \u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Flevelbossmike\" rel=\"noopener noreferrer nofollow\"\u003EТвиттере\u003C\u002Fa\u003E - мне всегда интересно услышать о вашем опыте работы с React по сравнению с Ember.js и ваше мнение о том, какой из двух, по вашему мнению, легче использовать.\u003C\u002Fp\u003E\u003Cp\u003EЕсли этот пост вызвал у вас любопытство и вы считаете, что Ember.js подходит для вашего следующего проекта, не стесняйтесь \u003Ca href=\"https:\u002F\u002Fwww.effective-ember.com\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eсвязаться с нами\u003C\u002Fa\u003E (\u003Cem\u003Eот переводчика: на русском есть \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Ft.me\u002Fember_js\" rel=\"noopener noreferrer nofollow\"\u003E\u003Cem\u003Eтелеграмм канал\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E разработчиков на Ember.js\u003C\u002Fem\u003E). Мы здесь, чтобы помочь командам создавать амбициозные приложения и помочь вам прототипировать решения, чтобы вы получили представление о том, какая библиотека или фреймворк лучше всего подходят для вашей проблемной области.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"паттерны javscript"},{"titleHtml":"паттерны проектирования"},{"titleHtml":"паттерны"},{"titleHtml":"ember.js"},{"titleHtml":"react.js"},{"titleHtml":"hooks"},{"titleHtml":"react-hooks"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa5e\u002F0e5\u002Ff9b\u002Fa5e0e5f9be5b11d908ae9e1a5b0b8cad.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa5e\u002F0e5\u002Ff9b\u002Fa5e0e5f9be5b11d908ae9e1a5b0b8cad.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583950\\\u002F\"},\"headline\":\"Почему в Ember не нужны React-хуки\",\"datePublished\":\"2021-10-17T19:46:37+03:00\",\"dateModified\":\"2021-10-18T00:09:31+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"chilicoder\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракц...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583950\\\u002F#post-content-body\",\"about\":[\"h_webdev\",\"h_javascript\",\"h_reactjs\",\"h_emberjs\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F583950\\\u002Fb4c684f03305af4530b68af7a6df21ae\\\u002F\"]}","metaDescription":"От переводчика: Этот пост является продолжением поста о реализация паттернов React-компонентов в Ember.js. Автор рассматривает концепцию React-хуков для абстракции логики состояния (stateful logic) и...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"webdev,javascript,reactjs,emberjs"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
