<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Согласование импедансов: как сломать и как починить / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/583694\/"},"headline":"Согласование импедансов: как сломать и как починить","datePublished":"2021-10-15T14:59:55+03:00","dateModified":"2021-10-16T10:33:47+03:00","author":{"@type":"Person","name":"Flammmable"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают,...","url":"https:\/\/habr.com\/ru\/post\/583694\/#post-content-body","about":["h_easyelectronics","f_popsci"],"image":["https:\/\/habr.com\/share\/publication\/583694\/bb79c6d90005ce5eacd5000b5b6746c7\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/665\/7e8\/d0b\/6657e8d0b3dff3969714c07dfc5f7162.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/d37\/0fb\/6d3\/d370fb6d3226bc7598c9ae7f48466c7e.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/092\/3d6\/44e\/0923d644ed7c571820ef563d43394397.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/7ac\/4c0\/285\/7ac4c0285963ee6746702856189c150e.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/2d4\/678\/221\/2d46782218594b3030cda7e1cb967fa4.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/0f2\/43f\/419\/0f243f4194e527630e532688c1f2a56e.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/31d\/c17\/091\/31dc17091e53507e3dcf349d7925ce1f.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e0a\/c3d\/821\/e0ac3d8212b9b58256db735fe9134d46.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/70c\/41f\/60e\/70c41f60e5c6a6224c6a6ddbef379aed.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/93d\/794\/69f\/93d79469f637841a500a0b6c68f990a0.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/573\/480\/84e\/57348084e3c09f57b348a37457bdf20c.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e89\/adc\/ef0\/e89adcef0744c707ea4486a732831735.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/c25\/9d6\/924\/c259d692477082f22eb30f18437b8b45.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/ed4\/ce3\/932\/ed4ce39320315ac2205fc314548e982c.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/1f3\/aeb\/9ae\/1f3aeb9ae3a641d64b094d0491762a49.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/4ca\/f91\/10b\/4caf9110b3c6fd449d71f29e7e29e812.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e56\/b1a\/eb3\/e56b1aeb391f33ee290e2183367dd1d6.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/33c\/774\/0e6\/33c7740e6bf7b8e82303576c92fd60b0.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/b6a\/034\/d97\/b6a034d975ec4a1ae146989b96e25f39.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/d02\/73b\/dcc\/d0273bdccfa67340d031c765ceb3fb74.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e10\/6b8\/76b\/e106b876b46b044629f39cf6b9765115.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/eb6\/c01\/0d2\/eb6c010d261320fcaa49b5e7a44c06dd.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/6df\/aec\/6aa\/6dfaec6aa3f997a0832b550deaf9114e.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/91e\/58b\/1d3\/91e58b1d3ce104920ed8e884f865fd48.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/85c\/04d\/f26\/85c04df26d84944c3d4c56a76b681c99.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Согласование импедансов: как сломать и как починить" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Согласование импедансов: как сломать и как починить" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Согласование импедансов: как сломать и как починить" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/9c6/ba7/a62/9c6ba7a625ab4cba46b3bcb59dd3abb6.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/9c6/ba7/a62/9c6ba7a625ab4cba46b3bcb59dd3abb6.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/9c6/ba7/a62/9c6ba7a625ab4cba46b3bcb59dd3abb6.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/9c6/ba7/a62/9c6ba7a625ab4cba46b3bcb59dd3abb6.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/9c6/ba7/a62/9c6ba7a625ab4cba46b3bcb59dd3abb6.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="583694" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-15T11:59:55.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/583694/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/583694/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/9c6/ba7/a62/9c6ba7a625ab4cba46b3bcb59dd3abb6.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/583694/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Flammmable/" title="Flammmable" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/Flammmable/" class="tm-user-info__username">
      Flammmable
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-15T11:59:55.000Z" title="2021-10-15, 14:59">15  октября   в 14:59</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Согласование импедансов: как сломать и как починить</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/easyelectronics/" class="tm-article-snippet__hubs-item-link"><span>Электроника для начинающих</span> <!----></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Из песочницы
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="/img/image-loader.svg" height="1732" data-src="https://habrastorage.org/getpro/habr/upload_files/665/7e8/d0b/6657e8d0b3dff3969714c07dfc5f7162.png" data-width="3071"/><figcaption></figcaption></figure><p>Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как голубая линия на заглавной картинке на деле выглядит, как жёлтая. В поисках решения проблемы они приходят к весьма многогранной области знаний под названием «Целостность сигналов». И если такие её аспекты, как питание и возвратные токи относительно просты для понимания, то согласование импедансов содержит ряд контринтуитивных положений. В процессе освоения данной темы мне показалось, что материалы по ней разделены на три не слишком хорошо связанных блока:<br/>1) теория с формулами и отсылками к 2 курсу ВУЗа<br/>2) гипертрофированные примеры на симуляторах<br/>3) применение на практике (с эмпирическими суевериями)</p><p>Данная статья является попыткой начать с конца. Я возьму работающую схему, выполненную в текстолите. Затем постараюсь ухудшить её характеристики так, чтобы рассогласование линий стало причиной сбоев в работе или хотя бы стало заметно на осциллографе. А затем постараюсь устранить возникшие проблемы.</p><p>Для начала обсудим стенд.  </p><p>В качестве приёмника сигнала будет использован осциллограф MSOX4154A, любезно предоставленный московским подразделением Keysight – большое спасибо Павлу Логинову!</p><figure class="full-width "><img src="/img/image-loader.svg" alt="MSOX4154A" title="MSOX4154A" height="499" data-src="https://habrastorage.org/getpro/habr/upload_files/d37/0fb/6d3/d370fb6d3226bc7598c9ae7f48466c7e.png" data-width="1000"/><figcaption>MSOX4154A</figcaption></figure><p>Источником сигналов будет микросхема ПЛИС 5M80ZE64C5N серии MAX-V (потому, что имелась у меня в наличии).</p><figure class="full-width "><img src="/img/image-loader.svg" alt="5M80ZE64C5N" title="5M80ZE64C5N" height="503" data-src="https://habrastorage.org/getpro/habr/upload_files/092/3d6/44e/0923d644ed7c571820ef563d43394397.png" data-width="1000"/><figcaption>5M80ZE64C5N</figcaption></figure><p> Линиями передачи выступят:</p><ul><li><p>три кабеля RG-174 длинной 200см, 60см и 20см (волновое сопротивление — 50 Ом)</p></li><li><p>одна витая пара из кабеля UTP-5e длинной 200см, один из проводников будет землёй, второй — сигнальной линией (волновое сопротивление — 100 Ом)</p></li><li><p>две копланарных линии (то есть дорожка расположена на верхнем слое платы, а по бокам и снизу от неё — земляные полигоны) на плате длинной по 40см (волновое сопротивление одной дорожки — 50 Ом, другой — 92 Ом). Длина линий на плате была выбрана исходя из габаритов материнской платы стандарта ATX —305х244мм, диагональ которой почти 40 см.</p></li></ul><figure class="full-width "><img src="/img/image-loader.svg" alt="Разные кабели и дорожки" title="Разные кабели и дорожки" height="686" data-src="https://habrastorage.org/getpro/habr/upload_files/7ac/4c0/285/7ac4c0285963ee6746702856189c150e.png" data-width="1000"/><figcaption>Разные кабели и дорожки</figcaption></figure><p>Я постараюсь обойти стороной вопрос что такое волновое сопротивление. И поменьше писать это словосочетание. Будем считать, что это некоторая характеристика линии передачи. Отмечу лишь, что она не зависит от длины линии.</p><p>Итак, зададим на выходе ПЛИСа прямоугольные импульсы амплитудой 3,3В LVTTL, частотой 1МГц и заполнением 50/50. И соединим 20-сантиметровым кабелем этот выход с осциллографом. А входной импеданс осциллографа выберем равным 1МОм, хотя он по умолчанию и так устанавливается осциллографом на эту величину.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 20см, импульс — 500нс, выход — 16мА, вход — 1МОм" title="Кабель RG-174, 20см, импульс — 500нс, выход — 16мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/2d4/678/221/2d46782218594b3030cda7e1cb967fa4.png" data-width="7083"/><figcaption>Кабель RG-174, 20см, импульс — 500нс, выход — 16мА, вход — 1МОм</figcaption></figure><p>Вроде бы красивые, ровные импульсы, с небольшими всплесками сразу после фронтов. Возьмем кабель подлиннее — на 60 сантиметров.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 60см, импульс — 500нс, выход — 16мА, вход — 1МОм" title="Кабель RG-174, 60см, импульс — 500нс, выход — 16мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/0f2/43f/419/0f243f4194e527630e532688c1f2a56e.png" data-width="7083"/><figcaption>Кабель RG-174, 60см, импульс — 500нс, выход — 16мА, вход — 1МОм</figcaption></figure><p>Можно заметить, что всплески несколько растянулись по времени. Возьмем теперь двухметровый кабель!</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/31d/c17/091/31dc17091e53507e3dcf349d7925ce1f.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм</figcaption></figure><p>Всплески растянулись ещё сильнее и приобрели слегка «уквадраченную» форму. Попробуем переключить вход осциллографа на 50 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс - 500нс, выход - 16мА, вход - 50 Ом" title="Кабель RG-174, 200см, импульс - 500нс, выход - 16мА, вход - 50 Ом" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/e0a/c3d/821/e0ac3d8212b9b58256db735fe9134d46.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс - 500нс, выход - 16мА, вход - 50 Ом</figcaption></figure><p>Всплески исчезли, но амплитуда упала до 2,27 вольт.  </p><p>Заметим, что амплитуда и число всплесков при входе 1МОм для всех трёх кабелей одинакова. Помешают ли данные всплески передаче данных? Для стандарта LVTTL входное напряжение логической единицы начинается от 2,0 вольт и выше (по документации на 5M80ZE64C5N — от 1,7 вольт). А входное напряжение логического нуля — от 0,8 вольт и ниже.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/70c/41f/60e/70c41f60e5c6a6224c6a6ddbef379aed.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм</figcaption></figure><p>Самая крупная просадка, идущая за восходящим фронтом, проваливает напряжение до 2,65 вольт, а самый крупный всплеск, идущий за нисходящим — приподнимает его до 0,6 вольт. Следовательно, если всё остальное в устройстве сделано идеально, то такое рассогласование само по себе не способно вызвать сбой. </p><p>Максимальный выходной ток с выводов ПЛИСа является конфигурируемой величиной. Правда, его значение можно выбрать всего из двух вариантов (8мА и 16мА). И по умолчанию среда разработки ПЛИСа выставляет этот ток на максимум. В порядке эксперимента, возможно выдавать сигнал синхронно с двух соседних выводов в одну линию, получая таким образом 32мА. Тогда для двухметрового кабеля осциллограмма будет следующей:</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс - 500нс, выход - 32мА, вход - 1МОм" title="Кабель RG-174, 200см, импульс - 500нс, выход - 32мА, вход - 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/93d/794/69f/93d79469f637841a500a0b6c68f990a0.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс - 500нс, выход - 32мА, вход - 1МОм</figcaption></figure><p>Как видно, длительность каждого всплеска осталась прежней, но возросло их число и амплитуда. На последней осциллограмме самая крупная просадка доходит до 1,85 вольт, а самый крупный всплеск — до 1,5 вольт. </p><p>Однако, следует заметить, что во входных буферах большинства цифровых микросхем устанавливаются триггеры Шмитта — специальные блоки с двумя пороговыми уровнями срабатывания. Если превышен верхний порог, то триггер переключается в лог.1. Если затем входное напряжение падает ниже верхнего порога, но не достигает нижнего, то триггер останется в лог.1. И переключится в лог.0 только тогда, когда напряжение станет меньше нижнего порога. Если данные уровни срабатывания соответствуют стандартным для LVTTL уровням входного напряжения, то для ошибочного срабатывания не хватит ни падения до 1,85 вольт (здесь нужно падение до 0,8 вольт) ни всплеска до 1,5 вольт (здесь нужен всплеск до 2,0 вольт). В теории, благодаря триггерам Шмитта, просадки и всплески такой амплитуды также не способны нарушить передачу данных при отсутствие иных проблем. Впрочем, это лишь в теории. Иногда цифровая микросхема способна войти в нештатное состояние даже при слишком длительном фронте входного сигнала. Что уж говорить о пересечении явно указанных пороговых уровней! Отдельно стоит сказать, что всплески (овершуты и андершуты) подобной амплитуды могут попросту вывести из строя приёмник.</p><p>Попробуем переключить вход в 50 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 500нс, выход — 32мА, вход — 50 Ом" title="Кабель RG-174, 200см, импульс — 500нс, выход — 32мА, вход — 50 Ом" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/573/480/84e/57348084e3c09f57b348a37457bdf20c.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 500нс, выход — 32мА, вход — 50 Ом</figcaption></figure><p>Всплески исчезли, амплитуда подросла относительно одиночного выхода и 50-омного входа — до 2,72 вольт. </p><p>Вернём входу 1 МОм и попробуем сделать ширину импульсов минимально возможной, скажем, 5нс.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/e89/adc/ef0/e89adcef0744c707ea4486a732831735.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 1МОм</figcaption></figure><p>Тут видно, как короткий импульс уходит в линию, фиксируется осциллографом, отражается от его входа, доходит до выхода ПЛИС, частично отражается от него и снова устремляется к осциллографу. Причём отражаясь от выхода ПЛИС, амплитуда импульса меняет знак.  </p><p>Из приведённой осциллограммы также можно понять, как образуется форма импульсов большой длительности. Сначала на приёмнике появляется первая ступенька, затем она начинает суммироваться со своим отражением (так как отражение имеет отрицательную амплитуду, оно вычитается). Затем, не прекращая суммироваться со своим первым отражением (столь же длительным, как сама ступенька), она начинает суммировать с отражением отражения и т.д.  </p><p>Попробуем переключить вход на 50 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 50 Ом" title="Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 50 Ом" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/c25/9d6/924/c259d692477082f22eb30f18437b8b45.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 50 Ом</figcaption></figure><p>Закономерно исчезают отражения и падает амплитуда. Вернём входу 1МОм импеданса и попробуем пустить короткий импульс через одиночный выход, предварительно переключив его с 16мА на 8мА.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 5нс, выход — 8мА, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 5нс, выход — 8мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/ed4/ce3/932/ed4ce39320315ac2205fc314548e982c.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 5нс, выход — 8мА, вход — 1МОм</figcaption></figure><p>Амплитуда и количество отражений драматично упали. Но! Сами отражения теперь не меняют знак после встречи со входом ПЛИС! Можем ли мы сильнее ограничить выходной ток? Да, поставив сразу после выхода из ПЛИС резистор. Скажем, 100 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 5нс, выход — 1,6мА, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 5нс, выход — 1,6мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/1f3/aeb/9ae/1f3aeb9ae3a641d64b094d0491762a49.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 5нс, выход — 1,6мА, вход — 1МОм</figcaption></figure><p>Амплитуда упала ещё сильнее, но число отражений выросло! Посмотрим, как будут выглядеть более длительные прямоугольные импульсы при таком выходе.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 500нс, выход — 1,6мА, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 500нс, выход — 1,6мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/4ca/f91/10b/4caf9110b3c6fd449d71f29e7e29e812.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 500нс, выход — 1,6мА, вход — 1МОм</figcaption></figure><p>Тут, очевидно, суммируются длинные ступеньки одного знака, но исходная, первая ступенька намного меньше, чем в случае пары 16-миллиамперных выходов. На осциллограмме видно, что пороговое значение логической единицы будет пересечено лишь при появлении на входе осциллографа первого отражения. С логическим нулём — ситуация аналогичная. Однако, фронты каждой ступеньки имеют ровно такую же длительность, что и фронты всплесков в случае сдвоенного выхода. Иными словами, нельзя однозначно утверждать, что сдвоенный выход быстрее, чем одиночный, ослабленный резистором.  </p><p>Что если мы возьмём одиночный выход, установим его в 16мА и поставим сразу после него резистор, а его номинал подберём таким, чтобы после первого фронта не было ни ступенек, ни всплесков? Тогда мы сделаем то, что называется <strong>согласованием</strong> выходного импеданса с импедансом линии! То есть сигнал уйдёт в линию, отразится от входа осциллографа (если, конечно, он установлен в 1МОм), вернётся к выходу ПЛИС и полностью поглотится им. Дальнейших отражений не будет! Данный номинал, в принципе, можно вычислить, но пока обойдёмся без формул. Просто установим резистор на 27 Ом и посмотрим на осциллограмму.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель RG-174, 200см, импульс — 500нс, выход — согласован с линией 50 Ом, вход — 1МОм" title="Кабель RG-174, 200см, импульс — 500нс, выход — согласован с линией 50 Ом, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/e56/b1a/eb3/e56b1aeb391f33ee290e2183367dd1d6.png" data-width="7083"/><figcaption>Кабель RG-174, 200см, импульс — 500нс, выход — согласован с линией 50 Ом, вход — 1МОм</figcaption></figure><p>Отражений больше нет, причём амплитуда соответствует номинальной для LVTTL.  </p><p>Попробуем теперь пропустить короткий импульс 16-миллиамперного выхода через 2 метра витой пары. Напомню,её волновое сопротивление — 100 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 1МОм" title="Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/33c/774/0e6/33c7740e6bf7b8e82303576c92fd60b0.png" data-width="7083"/><figcaption>Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 1МОм</figcaption></figure><p>В целом — похоже на 50-омный RG-174. Попробуем установить вход осциллографа в 50 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 50 Ом" title="Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 50 Ом" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/b6a/034/d97/b6a034d975ec4a1ae146989b96e25f39.png" data-width="7083"/><figcaption>Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 50 Ом</figcaption></figure><p>Отражения не исчезли! Вернём входу осциллографа 1 МОм и попробуем согласовать линию на стороне микросхемы, поставив сразу после выхода 77 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Кабель UTP-5e, 200см, импульс — 5нс, выход — согласован с линией 100 Ом, вход — 1МОм" title="Кабель UTP-5e, 200см, импульс — 5нс, выход — согласован с линией 100 Ом, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/d02/73b/dcc/d0273bdccfa67340d031c765ceb3fb74.png" data-width="7083"/><figcaption>Кабель UTP-5e, 200см, импульс — 5нс, выход — согласован с линией 100 Ом, вход — 1МОм</figcaption></figure><p> Отражения сведены к минимуму.    </p><p>Вот так будет выглядеть согласование витой пары на стороне источника по сравнению с полным отсутствием согласования.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Жёлтый график — согласованная на стороне источника витая пара,
голубой график — несогласованная витая пара" title="Жёлтый график — согласованная на стороне источника витая пара,
голубой график — несогласованная витая пара" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/e10/6b8/76b/e106b876b46b044629f39cf6b9765115.png" data-width="7083"/><figcaption>Жёлтый график — согласованная на стороне источника витая пара,
голубой график — несогласованная витая пара</figcaption></figure><p> А так будет выглядеть согласование витой пары на стороне источника по сравнению с попыткой согласовать линию переключением входа осциллографа в 50 Ом.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Жёлтый график — согласованная на стороне источника витая пара,
голубой график — несогласованная витая пара и 50-омный вход" title="Жёлтый график — согласованная на стороне источника витая пара,
голубой график — несогласованная витая пара и 50-омный вход" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/eb6/c01/0d2/eb6c010d261320fcaa49b5e7a44c06dd.png" data-width="7083"/><figcaption>Жёлтый график — согласованная на стороне источника витая пара,
голубой график — несогласованная витая пара и 50-омный вход</figcaption></figure><p> Попробуем кратко разобраться, почему так происходит.</p><figure class="full-width "><img src="/img/image-loader.svg" height="3307" data-src="https://habrastorage.org/getpro/habr/upload_files/6df/aec/6aa/6dfaec6aa3f997a0832b550deaf9114e.png" data-width="5787"/><figcaption></figcaption></figure><p>Если на конце линии передачи сопротивление между жилой и экраном не равно волновому, то от этого конца произойдёт отражение. Это отражение будет тем больше, чем больше данное сопротивление отличается от волнового. Так как источник сигнала — это по сути источник напряжения, то он обладает некоторым внутренним сопротивлением. Если его дополнить внешним резистором так, чтобы в сумме сопротивление было равно волновому сопротивлению линии, то даже если сигнал отразится от приёмника, его отражение будет поглощено источником. Если же его не дополнять, то сигнал, отразившись от приёмника, отразится и от источника, а затем снова попадёт в приёмник, создавая эхо.  </p><p>Посмотрим теперь на отличия 50-омного кабеля (длиной 60 см) и 50-омной дорожки на плате (длиной 40 см).</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Жёлтый график — дорожка 50 Ом, 40см, голубой график — кабель RG-174, 60см;
импульс - 500нс, выход — 16мА, вход — 1МОм" title="Жёлтый график — дорожка 50 Ом, 40см, голубой график — кабель RG-174, 60см;
импульс - 500нс, выход — 16мА, вход — 1МОм" height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/91e/58b/1d3/91e58b1d3ce104920ed8e884f865fd48.png" data-width="7083"/><figcaption>Жёлтый график — дорожка 50 Ом, 40см, голубой график — кабель RG-174, 60см;
импульс - 500нс, выход — 16мА, вход — 1МОм</figcaption></figure><p>В целом — весьма похоже. Некоторые различия по амплитуде отражений могут объясняться не вполне точным вычислением ширины дорожки для достижения требуемого импеданса. А различия по длительности отражений обусловлены разной длиной проводников.</p><p>Наконец посмотрим на прохождение сигнала через дорожку шириной 0,125мм (волновое сопротивление — 92 Ом): несогласованной и согласованной на стороне источника . К 23 Омам внутреннего сопротивления выхода ПЛИС надо добавить 69 Ом и получится 92 Ома — как у дорожки.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Дорожка 0,125мм, 40см, импульс — 500нс, вход — 1МОм.
Жёлтый график — выход 16мА, голубой график — выход согласован." title="Дорожка 0,125мм, 40см, импульс — 500нс, вход — 1МОм.
Жёлтый график — выход 16мА, голубой график — выход согласован." height="3542" data-src="https://habrastorage.org/getpro/habr/upload_files/85c/04d/f26/85c04df26d84944c3d4c56a76b681c99.png" data-width="7083"/><figcaption>Дорожка 0,125мм, 40см, импульс — 500нс, вход — 1МОм.
Жёлтый график — выход 16мА, голубой график — выход согласован.</figcaption></figure><p>Видно, что дорожки на плате принципиально ничем не отличаются от кабелей. А само согласование не является чем-то магическим. И производится установкой резисторов либо на стороне приёмника, либо на стороне источника, при наличии у него запаса по току. Также, при отсутствии запаса по току у встроенных буферов микросхемы, возможна установка отдельных буферных микросхем, обладающих этим запасом.  </p><p>Не исключено, что после прочтения данной статьи могли остаться вопросы. К примеру:</p><ul><li><p>почему согласование на стороне приёмника (осциллографа) понижает амплитуду сигнала и зачем такое согласование вообще может быть нужно?</p></li><li><p>где в документации найти внутреннее сопротивление выходного буфера микросхемы, чтобы не гадать с резисторами?</p></li><li><p>как получается, что сигнал способен одинаково хорошо отразится как от обрубленного конца коаксиального кабеля, так и от такого конца, где жила коротко замкнута на экран?</p></li><li><p>что же такое — это самое волновое сопротивление?</p></li></ul><p>Но обо всём этом — в другой раз.</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B8%D0%BC%D0%BF%D0%B5%D0%B4%D0%B0%D0%BD%D1%81%5D" class="tm-tags-list__link">импеданс</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%BE%D0%BB%D0%BD%D0%BE%D0%B2%D0%BE%D0%B5%20%D1%81%D0%BE%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%5D" class="tm-tags-list__link">волновое сопротивление</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%8D%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D0%BD%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">электроника</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%86%D0%B5%D0%BB%D0%BE%D1%81%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D1%81%D0%B8%D0%B3%D0%BD%D0%B0%D0%BB%D0%B0%5D" class="tm-tags-list__link">целостность сигнала</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/easyelectronics/" class="tm-hubs-list__link">
    Электроника для начинающих
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 86: ↑85 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 86: ↑85 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+84</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">11K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    147
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Flammmable/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 36 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    36
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">42.1</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/Flammmable/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @Flammmable
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/583694/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 39 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/583694/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/583694/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"583694":{"id":"583694","timePublished":"2021-10-15T11:59:55+00:00","isCorporative":false,"lang":"ru","titleHtml":"Согласование импедансов: как сломать и как починить","leadData":{"textHtml":"\u003Cp\u003EРано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства.  Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как голубая линия на заглавной картинке на деле выглядит, как жёлтая. В поисках решения проблемы они приходят к весьма многогранной области знаний под названием «Целостность сигналов». И если такие её аспекты, как питание и возвратные токи относительно просты для понимания, то согласование импедансов содержит ряд контринтуитивных положений. В процессе освоения данной темы мне показалось, что материалы по ней разделены на три не слишком хорошо связанных блока:\u003Cbr\u003E1) теория с формулами и отсылками к 2 курсу ВУЗа\u003Cbr\u003E2) гипертрофированные примеры на симуляторах\u003Cbr\u003E3) применение на практике (с эмпирическими суевериями)\u003C\u002Fp\u003E\u003Cp\u003EДанная статья является попыткой начать с конца. Я возьму работающую схему, выполненную в текстолите. Затем постараюсь ухудшить её характеристики так, чтобы рассогласование линий стало причиной сбоев в работе или хотя бы стало заметно на осциллографе. А затем постараюсь устранить возникшие проблемы.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9c6\u002Fba7\u002Fa62\u002F9c6ba7a625ab4cba46b3bcb59dd3abb6.png","buttonTextHtml":"Согласовать импедансы","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9c6\u002Fba7\u002Fa62\u002F9c6ba7a625ab4cba46b3bcb59dd3abb6.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"scoreStats":{"score":36,"votesCount":36},"rating":42.1,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2767397","alias":"Flammmable","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":39,"favoritesCount":147,"readingCount":10740,"score":84,"votesCount":86},"hubs":[{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1732\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F665\u002F7e8\u002Fd0b\u002F6657e8d0b3dff3969714c07dfc5f7162.png\" data-width=\"3071\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EРано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как голубая линия на заглавной картинке на деле выглядит, как жёлтая. В поисках решения проблемы они приходят к весьма многогранной области знаний под названием «Целостность сигналов». И если такие её аспекты, как питание и возвратные токи относительно просты для понимания, то согласование импедансов содержит ряд контринтуитивных положений. В процессе освоения данной темы мне показалось, что материалы по ней разделены на три не слишком хорошо связанных блока:\u003Cbr\u002F\u003E1) теория с формулами и отсылками к 2 курсу ВУЗа\u003Cbr\u002F\u003E2) гипертрофированные примеры на симуляторах\u003Cbr\u002F\u003E3) применение на практике (с эмпирическими суевериями)\u003C\u002Fp\u003E\u003Cp\u003EДанная статья является попыткой начать с конца. Я возьму работающую схему, выполненную в текстолите. Затем постараюсь ухудшить её характеристики так, чтобы рассогласование линий стало причиной сбоев в работе или хотя бы стало заметно на осциллографе. А затем постараюсь устранить возникшие проблемы.\u003C\u002Fp\u003E\u003Cp\u003EДля начала обсудим стенд.  \u003C\u002Fp\u003E\u003Cp\u003EВ качестве приёмника сигнала будет использован осциллограф MSOX4154A, любезно предоставленный московским подразделением Keysight – большое спасибо Павлу Логинову!\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"MSOX4154A\" title=\"MSOX4154A\" height=\"499\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd37\u002F0fb\u002F6d3\u002Fd370fb6d3226bc7598c9ae7f48466c7e.png\" data-width=\"1000\"\u002F\u003E\u003Cfigcaption\u003EMSOX4154A\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EИсточником сигналов будет микросхема ПЛИС 5M80ZE64C5N серии MAX-V (потому, что имелась у меня в наличии).\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"5M80ZE64C5N\" title=\"5M80ZE64C5N\" height=\"503\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F092\u002F3d6\u002F44e\u002F0923d644ed7c571820ef563d43394397.png\" data-width=\"1000\"\u002F\u003E\u003Cfigcaption\u003E5M80ZE64C5N\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E Линиями передачи выступят:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eтри кабеля RG-174 длинной 200см, 60см и 20см (волновое сопротивление — 50 Ом)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eодна витая пара из кабеля UTP-5e длинной 200см, один из проводников будет землёй, второй — сигнальной линией (волновое сопротивление — 100 Ом)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eдве копланарных линии (то есть дорожка расположена на верхнем слое платы, а по бокам и снизу от неё — земляные полигоны) на плате длинной по 40см (волновое сопротивление одной дорожки — 50 Ом, другой — 92 Ом). Длина линий на плате была выбрана исходя из габаритов материнской платы стандарта ATX —305х244мм, диагональ которой почти 40 см.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Разные кабели и дорожки\" title=\"Разные кабели и дорожки\" height=\"686\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7ac\u002F4c0\u002F285\u002F7ac4c0285963ee6746702856189c150e.png\" data-width=\"1000\"\u002F\u003E\u003Cfigcaption\u003EРазные кабели и дорожки\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЯ постараюсь обойти стороной вопрос что такое волновое сопротивление. И поменьше писать это словосочетание. Будем считать, что это некоторая характеристика линии передачи. Отмечу лишь, что она не зависит от длины линии.\u003C\u002Fp\u003E\u003Cp\u003EИтак, зададим на выходе ПЛИСа прямоугольные импульсы амплитудой 3,3В LVTTL, частотой 1МГц и заполнением 50\u002F50. И соединим 20-сантиметровым кабелем этот выход с осциллографом. А входной импеданс осциллографа выберем равным 1МОм, хотя он по умолчанию и так устанавливается осциллографом на эту величину.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 20см, импульс — 500нс, выход — 16мА, вход — 1МОм\" title=\"Кабель RG-174, 20см, импульс — 500нс, выход — 16мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2d4\u002F678\u002F221\u002F2d46782218594b3030cda7e1cb967fa4.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 20см, импульс — 500нс, выход — 16мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВроде бы красивые, ровные импульсы, с небольшими всплесками сразу после фронтов. Возьмем кабель подлиннее — на 60 сантиметров.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 60см, импульс — 500нс, выход — 16мА, вход — 1МОм\" title=\"Кабель RG-174, 60см, импульс — 500нс, выход — 16мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0f2\u002F43f\u002F419\u002F0f243f4194e527630e532688c1f2a56e.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 60см, импульс — 500нс, выход — 16мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EМожно заметить, что всплески несколько растянулись по времени. Возьмем теперь двухметровый кабель!\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F31d\u002Fc17\u002F091\u002F31dc17091e53507e3dcf349d7925ce1f.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВсплески растянулись ещё сильнее и приобрели слегка «уквадраченную» форму. Попробуем переключить вход осциллографа на 50 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс - 500нс, выход - 16мА, вход - 50 Ом\" title=\"Кабель RG-174, 200см, импульс - 500нс, выход - 16мА, вход - 50 Ом\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe0a\u002Fc3d\u002F821\u002Fe0ac3d8212b9b58256db735fe9134d46.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс - 500нс, выход - 16мА, вход - 50 Ом\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВсплески исчезли, но амплитуда упала до 2,27 вольт.  \u003C\u002Fp\u003E\u003Cp\u003EЗаметим, что амплитуда и число всплесков при входе 1МОм для всех трёх кабелей одинакова. Помешают ли данные всплески передаче данных? Для стандарта LVTTL входное напряжение логической единицы начинается от 2,0 вольт и выше (по документации на 5M80ZE64C5N — от 1,7 вольт). А входное напряжение логического нуля — от 0,8 вольт и ниже.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F70c\u002F41f\u002F60e\u002F70c41f60e5c6a6224c6a6ddbef379aed.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 500нс, выход — 16мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСамая крупная просадка, идущая за восходящим фронтом, проваливает напряжение до 2,65 вольт, а самый крупный всплеск, идущий за нисходящим — приподнимает его до 0,6 вольт. Следовательно, если всё остальное в устройстве сделано идеально, то такое рассогласование само по себе не способно вызвать сбой. \u003C\u002Fp\u003E\u003Cp\u003EМаксимальный выходной ток с выводов ПЛИСа является конфигурируемой величиной. Правда, его значение можно выбрать всего из двух вариантов (8мА и 16мА). И по умолчанию среда разработки ПЛИСа выставляет этот ток на максимум. В порядке эксперимента, возможно выдавать сигнал синхронно с двух соседних выводов в одну линию, получая таким образом 32мА. Тогда для двухметрового кабеля осциллограмма будет следующей:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс - 500нс, выход - 32мА, вход - 1МОм\" title=\"Кабель RG-174, 200см, импульс - 500нс, выход - 32мА, вход - 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F93d\u002F794\u002F69f\u002F93d79469f637841a500a0b6c68f990a0.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс - 500нс, выход - 32мА, вход - 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКак видно, длительность каждого всплеска осталась прежней, но возросло их число и амплитуда. На последней осциллограмме самая крупная просадка доходит до 1,85 вольт, а самый крупный всплеск — до 1,5 вольт. \u003C\u002Fp\u003E\u003Cp\u003EОднако, следует заметить, что во входных буферах большинства цифровых микросхем устанавливаются триггеры Шмитта — специальные блоки с двумя пороговыми уровнями срабатывания. Если превышен верхний порог, то триггер переключается в лог.1. Если затем входное напряжение падает ниже верхнего порога, но не достигает нижнего, то триггер останется в лог.1. И переключится в лог.0 только тогда, когда напряжение станет меньше нижнего порога. Если данные уровни срабатывания соответствуют стандартным для LVTTL уровням входного напряжения, то для ошибочного срабатывания не хватит ни падения до 1,85 вольт (здесь нужно падение до 0,8 вольт) ни всплеска до 1,5 вольт (здесь нужен всплеск до 2,0 вольт). В теории, благодаря триггерам Шмитта, просадки и всплески такой амплитуды также не способны нарушить передачу данных при отсутствие иных проблем. Впрочем, это лишь в теории. Иногда цифровая микросхема способна войти в нештатное состояние даже при слишком длительном фронте входного сигнала. Что уж говорить о пересечении явно указанных пороговых уровней! Отдельно стоит сказать, что всплески (овершуты и андершуты) подобной амплитуды могут попросту вывести из строя приёмник.\u003C\u002Fp\u003E\u003Cp\u003EПопробуем переключить вход в 50 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 500нс, выход — 32мА, вход — 50 Ом\" title=\"Кабель RG-174, 200см, импульс — 500нс, выход — 32мА, вход — 50 Ом\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F573\u002F480\u002F84e\u002F57348084e3c09f57b348a37457bdf20c.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 500нс, выход — 32мА, вход — 50 Ом\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВсплески исчезли, амплитуда подросла относительно одиночного выхода и 50-омного входа — до 2,72 вольт. \u003C\u002Fp\u003E\u003Cp\u003EВернём входу 1 МОм и попробуем сделать ширину импульсов минимально возможной, скажем, 5нс.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe89\u002Fadc\u002Fef0\u002Fe89adcef0744c707ea4486a732831735.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EТут видно, как короткий импульс уходит в линию, фиксируется осциллографом, отражается от его входа, доходит до выхода ПЛИС, частично отражается от него и снова устремляется к осциллографу. Причём отражаясь от выхода ПЛИС, амплитуда импульса меняет знак.  \u003C\u002Fp\u003E\u003Cp\u003EИз приведённой осциллограммы также можно понять, как образуется форма импульсов большой длительности. Сначала на приёмнике появляется первая ступенька, затем она начинает суммироваться со своим отражением (так как отражение имеет отрицательную амплитуду, оно вычитается). Затем, не прекращая суммироваться со своим первым отражением (столь же длительным, как сама ступенька), она начинает суммировать с отражением отражения и т.д.  \u003C\u002Fp\u003E\u003Cp\u003EПопробуем переключить вход на 50 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 50 Ом\" title=\"Кабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 50 Ом\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc25\u002F9d6\u002F924\u002Fc259d692477082f22eb30f18437b8b45.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 5нс, выход — 32мА, вход — 50 Ом\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЗакономерно исчезают отражения и падает амплитуда. Вернём входу 1МОм импеданса и попробуем пустить короткий импульс через одиночный выход, предварительно переключив его с 16мА на 8мА.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 5нс, выход — 8мА, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 5нс, выход — 8мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fed4\u002Fce3\u002F932\u002Fed4ce39320315ac2205fc314548e982c.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 5нс, выход — 8мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EАмплитуда и количество отражений драматично упали. Но! Сами отражения теперь не меняют знак после встречи со входом ПЛИС! Можем ли мы сильнее ограничить выходной ток? Да, поставив сразу после выхода из ПЛИС резистор. Скажем, 100 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 5нс, выход — 1,6мА, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 5нс, выход — 1,6мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1f3\u002Faeb\u002F9ae\u002F1f3aeb9ae3a641d64b094d0491762a49.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 5нс, выход — 1,6мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EАмплитуда упала ещё сильнее, но число отражений выросло! Посмотрим, как будут выглядеть более длительные прямоугольные импульсы при таком выходе.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 500нс, выход — 1,6мА, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 500нс, выход — 1,6мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4ca\u002Ff91\u002F10b\u002F4caf9110b3c6fd449d71f29e7e29e812.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 500нс, выход — 1,6мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EТут, очевидно, суммируются длинные ступеньки одного знака, но исходная, первая ступенька намного меньше, чем в случае пары 16-миллиамперных выходов. На осциллограмме видно, что пороговое значение логической единицы будет пересечено лишь при появлении на входе осциллографа первого отражения. С логическим нулём — ситуация аналогичная. Однако, фронты каждой ступеньки имеют ровно такую же длительность, что и фронты всплесков в случае сдвоенного выхода. Иными словами, нельзя однозначно утверждать, что сдвоенный выход быстрее, чем одиночный, ослабленный резистором.  \u003C\u002Fp\u003E\u003Cp\u003EЧто если мы возьмём одиночный выход, установим его в 16мА и поставим сразу после него резистор, а его номинал подберём таким, чтобы после первого фронта не было ни ступенек, ни всплесков? Тогда мы сделаем то, что называется \u003Cstrong\u003Eсогласованием\u003C\u002Fstrong\u003E выходного импеданса с импедансом линии! То есть сигнал уйдёт в линию, отразится от входа осциллографа (если, конечно, он установлен в 1МОм), вернётся к выходу ПЛИС и полностью поглотится им. Дальнейших отражений не будет! Данный номинал, в принципе, можно вычислить, но пока обойдёмся без формул. Просто установим резистор на 27 Ом и посмотрим на осциллограмму.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель RG-174, 200см, импульс — 500нс, выход — согласован с линией 50 Ом, вход — 1МОм\" title=\"Кабель RG-174, 200см, импульс — 500нс, выход — согласован с линией 50 Ом, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe56\u002Fb1a\u002Feb3\u002Fe56b1aeb391f33ee290e2183367dd1d6.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель RG-174, 200см, импульс — 500нс, выход — согласован с линией 50 Ом, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EОтражений больше нет, причём амплитуда соответствует номинальной для LVTTL.  \u003C\u002Fp\u003E\u003Cp\u003EПопробуем теперь пропустить короткий импульс 16-миллиамперного выхода через 2 метра витой пары. Напомню,её волновое сопротивление — 100 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 1МОм\" title=\"Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F33c\u002F774\u002F0e6\u002F33c7740e6bf7b8e82303576c92fd60b0.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВ целом — похоже на 50-омный RG-174. Попробуем установить вход осциллографа в 50 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 50 Ом\" title=\"Кабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 50 Ом\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb6a\u002F034\u002Fd97\u002Fb6a034d975ec4a1ae146989b96e25f39.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель UTP-5e, 200см, импульс — 5нс, выход — 16мА, вход — 50 Ом\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EОтражения не исчезли! Вернём входу осциллографа 1 МОм и попробуем согласовать линию на стороне микросхемы, поставив сразу после выхода 77 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Кабель UTP-5e, 200см, импульс — 5нс, выход — согласован с линией 100 Ом, вход — 1МОм\" title=\"Кабель UTP-5e, 200см, импульс — 5нс, выход — согласован с линией 100 Ом, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd02\u002F73b\u002Fdcc\u002Fd0273bdccfa67340d031c765ceb3fb74.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EКабель UTP-5e, 200см, импульс — 5нс, выход — согласован с линией 100 Ом, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E Отражения сведены к минимуму.    \u003C\u002Fp\u003E\u003Cp\u003EВот так будет выглядеть согласование витой пары на стороне источника по сравнению с полным отсутствием согласования.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Жёлтый график — согласованная на стороне источника витая пара,\nголубой график — несогласованная витая пара\" title=\"Жёлтый график — согласованная на стороне источника витая пара,\nголубой график — несогласованная витая пара\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe10\u002F6b8\u002F76b\u002Fe106b876b46b044629f39cf6b9765115.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EЖёлтый график — согласованная на стороне источника витая пара,\nголубой график — несогласованная витая пара\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E А так будет выглядеть согласование витой пары на стороне источника по сравнению с попыткой согласовать линию переключением входа осциллографа в 50 Ом.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Жёлтый график — согласованная на стороне источника витая пара,\nголубой график — несогласованная витая пара и 50-омный вход\" title=\"Жёлтый график — согласованная на стороне источника витая пара,\nголубой график — несогласованная витая пара и 50-омный вход\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Feb6\u002Fc01\u002F0d2\u002Feb6c010d261320fcaa49b5e7a44c06dd.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EЖёлтый график — согласованная на стороне источника витая пара,\nголубой график — несогласованная витая пара и 50-омный вход\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E Попробуем кратко разобраться, почему так происходит.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"3307\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002Faec\u002F6aa\u002F6dfaec6aa3f997a0832b550deaf9114e.png\" data-width=\"5787\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЕсли на конце линии передачи сопротивление между жилой и экраном не равно волновому, то от этого конца произойдёт отражение. Это отражение будет тем больше, чем больше данное сопротивление отличается от волнового. Так как источник сигнала — это по сути источник напряжения, то он обладает некоторым внутренним сопротивлением. Если его дополнить внешним резистором так, чтобы в сумме сопротивление было равно волновому сопротивлению линии, то даже если сигнал отразится от приёмника, его отражение будет поглощено источником. Если же его не дополнять, то сигнал, отразившись от приёмника, отразится и от источника, а затем снова попадёт в приёмник, создавая эхо.  \u003C\u002Fp\u003E\u003Cp\u003EПосмотрим теперь на отличия 50-омного кабеля (длиной 60 см) и 50-омной дорожки на плате (длиной 40 см).\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Жёлтый график — дорожка 50 Ом, 40см, голубой график — кабель RG-174, 60см;\nимпульс - 500нс, выход — 16мА, вход — 1МОм\" title=\"Жёлтый график — дорожка 50 Ом, 40см, голубой график — кабель RG-174, 60см;\nимпульс - 500нс, выход — 16мА, вход — 1МОм\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F91e\u002F58b\u002F1d3\u002F91e58b1d3ce104920ed8e884f865fd48.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EЖёлтый график — дорожка 50 Ом, 40см, голубой график — кабель RG-174, 60см;\nимпульс - 500нс, выход — 16мА, вход — 1МОм\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВ целом — весьма похоже. Некоторые различия по амплитуде отражений могут объясняться не вполне точным вычислением ширины дорожки для достижения требуемого импеданса. А различия по длительности отражений обусловлены разной длиной проводников.\u003C\u002Fp\u003E\u003Cp\u003EНаконец посмотрим на прохождение сигнала через дорожку шириной 0,125мм (волновое сопротивление — 92 Ом): несогласованной и согласованной на стороне источника . К 23 Омам внутреннего сопротивления выхода ПЛИС надо добавить 69 Ом и получится 92 Ома — как у дорожки.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Дорожка 0,125мм, 40см, импульс — 500нс, вход — 1МОм.\nЖёлтый график — выход 16мА, голубой график — выход согласован.\" title=\"Дорожка 0,125мм, 40см, импульс — 500нс, вход — 1МОм.\nЖёлтый график — выход 16мА, голубой график — выход согласован.\" height=\"3542\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F85c\u002F04d\u002Ff26\u002F85c04df26d84944c3d4c56a76b681c99.png\" data-width=\"7083\"\u002F\u003E\u003Cfigcaption\u003EДорожка 0,125мм, 40см, импульс — 500нс, вход — 1МОм.\nЖёлтый график — выход 16мА, голубой график — выход согласован.\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВидно, что дорожки на плате принципиально ничем не отличаются от кабелей. А само согласование не является чем-то магическим. И производится установкой резисторов либо на стороне приёмника, либо на стороне источника, при наличии у него запаса по току. Также, при отсутствии запаса по току у встроенных буферов микросхемы, возможна установка отдельных буферных микросхем, обладающих этим запасом.  \u003C\u002Fp\u003E\u003Cp\u003EНе исключено, что после прочтения данной статьи могли остаться вопросы. К примеру:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eпочему согласование на стороне приёмника (осциллографа) понижает амплитуду сигнала и зачем такое согласование вообще может быть нужно?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eгде в документации найти внутреннее сопротивление выходного буфера микросхемы, чтобы не гадать с резисторами?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eкак получается, что сигнал способен одинаково хорошо отразится как от обрубленного конца коаксиального кабеля, так и от такого конца, где жила коротко замкнута на экран?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eчто же такое — это самое волновое сопротивление?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНо обо всём этом — в другой раз.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"импеданс"},{"titleHtml":"волновое сопротивление"},{"titleHtml":"электроника"},{"titleHtml":"целостность сигнала"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9c6\u002Fba7\u002Fa62\u002F9c6ba7a625ab4cba46b3bcb59dd3abb6.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9c6\u002Fba7\u002Fa62\u002F9c6ba7a625ab4cba46b3bcb59dd3abb6.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583694\\\u002F\"},\"headline\":\"Согласование импедансов: как сломать и как починить\",\"datePublished\":\"2021-10-15T14:59:55+03:00\",\"dateModified\":\"2021-10-16T10:33:47+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Flammmable\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают,...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583694\\\u002F#post-content-body\",\"about\":[\"h_easyelectronics\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F583694\\\u002Fbb79c6d90005ce5eacd5000b5b6746c7\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F665\\\u002F7e8\\\u002Fd0b\\\u002F6657e8d0b3dff3969714c07dfc5f7162.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fd37\\\u002F0fb\\\u002F6d3\\\u002Fd370fb6d3226bc7598c9ae7f48466c7e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F092\\\u002F3d6\\\u002F44e\\\u002F0923d644ed7c571820ef563d43394397.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F7ac\\\u002F4c0\\\u002F285\\\u002F7ac4c0285963ee6746702856189c150e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F2d4\\\u002F678\\\u002F221\\\u002F2d46782218594b3030cda7e1cb967fa4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F0f2\\\u002F43f\\\u002F419\\\u002F0f243f4194e527630e532688c1f2a56e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F31d\\\u002Fc17\\\u002F091\\\u002F31dc17091e53507e3dcf349d7925ce1f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe0a\\\u002Fc3d\\\u002F821\\\u002Fe0ac3d8212b9b58256db735fe9134d46.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F70c\\\u002F41f\\\u002F60e\\\u002F70c41f60e5c6a6224c6a6ddbef379aed.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F93d\\\u002F794\\\u002F69f\\\u002F93d79469f637841a500a0b6c68f990a0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F573\\\u002F480\\\u002F84e\\\u002F57348084e3c09f57b348a37457bdf20c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe89\\\u002Fadc\\\u002Fef0\\\u002Fe89adcef0744c707ea4486a732831735.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fc25\\\u002F9d6\\\u002F924\\\u002Fc259d692477082f22eb30f18437b8b45.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fed4\\\u002Fce3\\\u002F932\\\u002Fed4ce39320315ac2205fc314548e982c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F1f3\\\u002Faeb\\\u002F9ae\\\u002F1f3aeb9ae3a641d64b094d0491762a49.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F4ca\\\u002Ff91\\\u002F10b\\\u002F4caf9110b3c6fd449d71f29e7e29e812.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe56\\\u002Fb1a\\\u002Feb3\\\u002Fe56b1aeb391f33ee290e2183367dd1d6.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F33c\\\u002F774\\\u002F0e6\\\u002F33c7740e6bf7b8e82303576c92fd60b0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fb6a\\\u002F034\\\u002Fd97\\\u002Fb6a034d975ec4a1ae146989b96e25f39.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fd02\\\u002F73b\\\u002Fdcc\\\u002Fd0273bdccfa67340d031c765ceb3fb74.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe10\\\u002F6b8\\\u002F76b\\\u002Fe106b876b46b044629f39cf6b9765115.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Feb6\\\u002Fc01\\\u002F0d2\\\u002Feb6c010d261320fcaa49b5e7a44c06dd.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F6df\\\u002Faec\\\u002F6aa\\\u002F6dfaec6aa3f997a0832b550deaf9114e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F91e\\\u002F58b\\\u002F1d3\\\u002F91e58b1d3ce104920ed8e884f865fd48.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F85c\\\u002F04d\\\u002Ff26\\\u002F85c04df26d84944c3d4c56a76b681c99.png\"]}","metaDescription":"Рано или поздно в руки любителей, начинавших с Ардуино, попадают куда более быстрые устройства. Накинув щупы осциллографа на навесные провода, они обнаруживают, что сигнал, который задумывался, как...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"easyelectronics"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
