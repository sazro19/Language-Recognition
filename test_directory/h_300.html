<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Flutter: как мы выбирали навигацию для мобильного приложения? / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/rshb\/blog\/584348\/"},"headline":"Flutter: как мы выбирали навигацию для мобильного приложения?","datePublished":"2021-10-19T17:14:54+03:00","dateModified":"2021-10-21T16:06:44+03:00","author":{"@type":"Person","name":"Владимир Сорокин"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локал...","url":"https:\/\/habr.com\/ru\/company\/rshb\/blog\/584348\/#post-content-body","about":["c_rshb","h_programming","h_mobile_dev","h_dart","h_flutter","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/584348\/306669adff3b8c47f8183df9c8f5ee9b\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/4c8\/b62\/c61\/4c8b62c6170959a4eaf92621686ef69e.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/477\/939\/2ec\/4779392ec0eb89973076381ff7c139b8.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a6c\/122\/fd0\/a6c122fd03b351a4f4cb25847c082c4d.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/575\/1d2\/805\/5751d28051b66f58f091dcbb88a4985d.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/2c1\/07b\/0c8\/2c107b0c83f14ff6d8ebea764e38b098.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/726\/912\/27c\/72691227c0a9a3ad632550ff740418ec.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/592\/0d5\/62a\/5920d562a8dc95eab21f52c394bc4805.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Flutter: как мы выбирали навигацию для мобильного приложения?" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Flutter: как мы выбирали навигацию для мобильного приложения?" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Flutter: как мы выбирали навигацию для мобильного приложения?" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/dc7/852/538/dc7852538f0a032befd00457ef33c127.jpg" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/dc7/852/538/dc7852538f0a032befd00457ef33c127.jpg" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/dc7/852/538/dc7852538f0a032befd00457ef33c127.jpg" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/dc7/852/538/dc7852538f0a032befd00457ef33c127.jpg" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/dc7/852/538/dc7852538f0a032befd00457ef33c127.jpg" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="584348" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-19T14:14:54.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/584348/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/rshb/blog/584348/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/dc7/852/538/dc7852538f0a032befd00457ef33c127.jpg" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/584348/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="rshb" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/rshb/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/b04/03a/2d2/b0403a2d2a5f6d722f97c0b1b135663c.jpg" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">97.05</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/rshb/profile/" class="tm-company-card__name">
        Россельхозбанк
      </a> <div class="tm-company-card__description">Меняем банк и сельское хозяйство</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Sorokinzzz/" title="Sorokinzzz" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/956/a6e/34b/956a6e34be82df53831f399cb3b00434.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/Sorokinzzz/" class="tm-user-info__username">
      Sorokinzzz
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-19T14:14:54.000Z" title="2021-10-19, 17:14">19  октября   в 17:14</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Flutter: как мы выбирали навигацию для мобильного приложения?</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/rshb/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Россельхозбанк</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/mobile_dev/" class="tm-article-snippet__hubs-item-link"><span>Разработка мобильных приложений</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/dart/" class="tm-article-snippet__hubs-item-link"><span>Dart</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/flutter/" class="tm-article-snippet__hubs-item-link"><span>Flutter</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/4c8/b62/c61/4c8b62c6170959a4eaf92621686ef69e.jpg" width="1560" height="880" data-src="https://habrastorage.org/getpro/habr/upload_files/4c8/b62/c61/4c8b62c6170959a4eaf92621686ef69e.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное количество новых виджетов. Одно из таких нововведений – Navigator 2.0, выпущенный Flutter осенью 2020 года. Это гибкий инструмент для решения непростой задачи навигации в мобильных приложениях. Разработчики начали применять Navigator 2.0, но <a href="https://github.com/flutter/flutter/issues/63429"><u>столкнулись с трудностями</u></a> и <a href="https://github.com/flutter/flutter/issues/45938"><u>проблемами</u></a>, о которых говорили команде Flutter в официальном репозитории, <a href="https://github.com/flutter/flutter/issues/69315"><u>предлагая упростить использование инструмента</u></a>. Самым подробным материалом по новому подходу является <a href="https://medium.com/flutter/learning-flutters-new-navigation-and-routing-system-7c9068155ade"><u>статья в блоге Flutter</u></a>, но и ее мало для того, чтобы начать работать с Navigator 2.0 в продакшен-приложениях.</p><h2>С чего все началось?</h2><p>Об этом расскажу я, Вова, Flutter-разработчик. Мы с командой делаем банковское мобильное приложение для юридических лиц. Это не единственное приложение Россельхозбанка, для создания которого используется Flutter. Фреймворк уже хорошо себя показал ранее, поэтому было принято решение использовать его и для этого проекта. Сразу обозначим результаты, к которым пришли с помощью своего варианта навигации в мобильном приложении:</p><ul><li><p>реализовали 100% хотелок бизнеса;</p></li><li><p>сократили сроки разработки по интеграции одного банковского продукта в другой;</p></li><li><p>повысили эффективность коммуникаций между отдельными командами (кредиты, депозиты, зарплатные проекты и т.д.), разрабатывающими свои разделы в рамках отдельных репозиториев.</p></li></ul><p>Дополнительно решили несколько технических задач:</p><ul><li><p>добились того, что навигация поддерживает многослойность, чтобы можно было реализовать текущие и будущие потребности бизнеса по функциональности и дизайну;</p></li><li><p>оставили точки расширения для использования новых методов навигации в дальнейшем, потому что не знаем, какие еще возможности могут появиться в приложении. То есть спустя какое-то время, нам не придется менять технологию, на которой написан продукт;</p></li><li><p>обеспечили гибкость: мы хотим сами выбирать подход, с помощью которого будет осуществляться навигация в мобильном приложении. Нам это нужно для поддержки разрозненных команд.</p></li><li><p>реализовали поддержку deeplinks: приложение должно уметь открываться из сторонних источников. Например, пользователь может перейти по ссылке и у него в приложении сразу откроется страница для оплаты счета.</p></li></ul><p>Мы получили опыт, о котором нигде не читали до этого. В этой статье я расскажу, какие варианты по навигации мы рассматривали и как пришли к нашему решению.</p><h2>Navigator – быстрый старт</h2><p>Когда в проекте мы дошли до создания навигации, то задали себе вопросы:</p><ul><li><p>Какие есть для этого возможности во Flutter?</p></li><li><p>Какой подход выбрать?</p></li><li><p>Какие есть подводные камни у разных вариантов?</p></li><li><p>Нужен ли нам Navigator 2.0?</p></li><li><p>Как все эти подходы соотносятся с нашими бизнес-требованиями?</p></li></ul><p>Естественно, мы вспомнили про <strong>Navigator</strong> – самое доступное решение во Flutter для навигации, с которым прежде всего знакомятся начинающие разработчики. Navigator – это stateful-виджет, создаваемый внутри MaterialApp/CupertinoApp. State данного виджета содержит текущий стек навигации и предоставляет методы для изменения этого состояния.</p><p>Простой переход на новую страницу выглядит следующим образом:</p><pre><code class="dart">Navigator.push(
	context, 
	MaterialPageRoute(builder: (context) => SecondPage()),
);</code></pre><p>В примере используется MaterialPageRoute, который реализует интерфейс <strong>Route</strong>. Эта сущность связывает Navigator и виджет страницы. Она определяет некоторые визуальные особенности страницы: анимацию появления и удаления, отображение на весь экран или в виде диалога, а также некоторые поведенческие особенности – например, за жест свайпа назад на iOS отвечает Route.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Пример графа навигации мобильного приложения. Источник: pcnews.ru" title="Пример графа навигации мобильного приложения. Источник: pcnews.ru" height="1871" data-src="https://habrastorage.org/getpro/habr/upload_files/477/939/2ec/4779392ec0eb89973076381ff7c139b8.png" data-width="3349"/><figcaption>Пример графа навигации мобильного приложения. Источник: pcnews.ru</figcaption></figure><p>Кроме простого push, Navigator предоставляет обширный набор методов, которыми можно изменять стек навигации:</p><ul><li><p><a href="https://api.flutter.dev/flutter/widgets/Navigator/push.html">push</a> – добавление новой страницы</p></li><li><p><a href="https://api.flutter.dev/flutter/widgets/Navigator/pop.html">pop</a> – возврат назад (в том числе с возвратом значения)</p></li><li><p><a href="https://api.flutter.dev/flutter/widgets/Navigator/popUntil.html">popUntil</a> – возврат назад, пока не выполнится переданное условие</p></li><li><p><a href="https://api.flutter.dev/flutter/widgets/Navigator/pushReplacement.html">pushReplacement</a> – замена текущей страницы на другую</p></li><li><p><a href="https://api.flutter.dev/flutter/widgets/Navigator/pushAndRemoveUntil.html">pushAndRemoveUntil</a> – добавление новой страницы и удаление из стека навигации предыдущих страниц, пока не выполнится условие.</p></li></ul><p>Есть и другие методы, с которыми можно ознакомиться в <a href="https://api.flutter.dev/flutter/widgets/Navigator-class.html">официальной документации</a>.</p><h2>Можно ли расширить Navigator?</h2><p>Легко заметить, что все эти методы императивные: мы говорим навигатору, как хотим изменить его состояние – добавить или удалить какой-то экран. При этом остальной фреймворк использует декларативный API для построения пользовательского интерфейса. Мы задаем некоторое дерево виджетов, на основе которого всё отображается. Не хотим сказать, что императивный подход для навигации – это плохо, наоборот, в этом нет ничего дурного – просто по-другому.</p><p>Мы обращаем ваше внимание на иное – набор методов для навигации и их поведение фиксированные: нельзя добавить свой метод или изменить реализацию имеющегося. Значит Navigator <strong>нерасширяемый</strong> – это намного важнее того, что он использует другой подход.</p><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/a6c/122/fd0/a6c122fd03b351a4f4cb25847c082c4d.jpg" alt="Z-index мобильного приложения" title="Z-index мобильного приложения" width="1560" height="880" data-src="https://habrastorage.org/getpro/habr/upload_files/a6c/122/fd0/a6c122fd03b351a4f4cb25847c082c4d.jpg" data-blurred="true"/><figcaption>Z-index мобильного приложения</figcaption></figure><p>Например, для реализации уже не нового, но популярного подхода к навигации с bottom navigation bar придется сделать свою сущность, отвечающую за смену табов. Эта сущность будет совсем отдельно от Navigator, таким образом теряется единая точка входа в навигацию.</p><h2>Navigator &amp; Deeplinking</h2><p>Приложение не живет в вакууме, поэтому навигация в нем может происходить и по некоторым внешним событиям. Сейчас почти все приложения используют Deeplinking: пользователь переходит по ссылке, а вместо страницы в браузере у него открывается приложение с нужным разделом. Кроме этого, Google активно продвигает Flutter for web и там тоже нужна навигация. Пункты про deeplinking и web объединены неслучайно – в целом им нужен одинаковый механизм для навигации: надо получить ссылку, взять из нее нужную информацию и отобразить необходимую страницу. Именно такую возможность и дает Navigator. При переходе по ссылке в мобильное приложение или при смене URL в адресной строке в web происходит следующее:</p><ul><li><p>у Navigator вызывается pushNamed со ссылкой в качестве параметра;</p></li><li><p>Navigator вызывает onGenerateRoute, чтобы получить из него Route;</p></li><li><p>полученный Route добавляется в стек навигации.</p></li></ul><p>На первый взгляд проблема решена, но есть и нюанс – при переходе по ссылке в стек навигации всегда будет добавлен только один экран, потому что onGenerateRoute может вернуть только один Route. Не предполагается, что deeplink может инициировать добавление сразу нескольких страниц. И ведь кейс довольно частый, например, deeplink такого вида: /users/123/post/456. Как правило, такая ссылка открывает страницу с постом и дает возможность навигации назад на страницу пользователя, который написал этот паблик. Чтобы реализовать такое поведение, придется использовать <em>секретные техники костыль-development </em>:)</p><h2>Знакомимся с Router (Navigator 2.0)</h2><p>Прошлой осенью разработчики Flutter выкатили новую версию компонента навигации – Navigator 2.0, который позже переименовали в <strong>Router</strong>. И это более правильное обозначение, так как Navigator 2.0 вносил путаницу. Казалось, он предназначен, чтобы заменить первый Navigator, что первая версия скоро станет deprecated и нужно срочно переезжать на новую версию. Это не так, Router – альтернативный подход, имеющийся теперь у разработчиков; он дает совершенно другие возможности.</p><p>Для начала попробуем разобраться, что такое Router. И первое, что можно найти в <a href="https://medium.com/flutter/learning-flutters-new-navigation-and-routing-system-7c9068155ade">официальной документации</a> – схему:</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Схема взаимодействия компонентов в Navigator 2.0. Источник: flutter.dev" title="Схема взаимодействия компонентов в Navigator 2.0. Источник: flutter.dev" height="376" data-src="https://habrastorage.org/getpro/habr/upload_files/575/1d2/805/5751d28051b66f58f091dcbb88a4985d.png" data-width="1223"/><figcaption>Схема взаимодействия компонентов в Navigator 2.0. Источник: flutter.dev</figcaption></figure><p>Используя эту схему, очень сложно понять, как этим пользоваться, какие компоненты нужно реализовать и что они должны делать. Да и примеров кода, как банально перейти на новый экран, сразу не видно. Попробуем разобраться.</p><h2>Router – просто о сложном</h2><p>Все не так уж и сложно, как кажется на первый взгляд. В новом подходе есть три основные сущности:</p><ul><li><p>Router</p></li><li><p>RouterDelegate</p></li><li><p>RouteInformationParser</p></li></ul><p>Рассмотрим каждый из них. Router – виджет, который связывает RouterDelegate, RouteInformationParser и пользовательский интерфейс. Нам нужно реализовать RouterDelegate. Он сообщает Router о том, что изменилось состояние навигации. Когда это происходит, Router вызывает build у RouterDelegate, и пользователь видит изменение состояния приложения, то есть открывается новый экран либо происходит переход назад.</p><p>RouteInformationParser должен реализовывать два метода:</p><ul><li><p>parseRouteInformation – парсит ссылку и возвращает новое состояние навигации (в случае изменения адреса в браузере или перехода по deeplink);</p></li><li><p>restoreRouteInformation – преобразовывает текущее состояние навигации в ссылку, которая отображается в адресной строке браузера. Его необязательно реализовывать в мобильном приложении.</p></li></ul><p>Упрощенная схема взаимодействия компонентов по шагам выглядит так:</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Пошаговая схема взаимодействия компонентов при использовании Router" title="Пошаговая схема взаимодействия компонентов при использовании Router" height="738" data-src="https://habrastorage.org/getpro/habr/upload_files/2c1/07b/0c8/2c107b0c83f14ff6d8ebea764e38b098.png" data-width="1430"/><figcaption>Пошаговая схема взаимодействия компонентов при использовании Router</figcaption></figure><p>Вы спросите, а где же методы для изменения состояния навигации, как отобразить новый экран и что это за "update" и "T" на схеме? Чтобы это понять, проще всего привести аналогию со StatefulWidget. Router – это как StatefulWidget, а RouterDelegate – как State. У него также реализован build и он также сообщает об изменениях (как при setState).</p><p>Router не дает никаких методов для отображения экрана из коробки, их просто нет. Мы должны <strong>сами определить</strong>, как выглядит состояние навигации (Т на схеме) и как обновлять это состояние (update на схеме). Таким образом получаем огромную гибкость и возможность подстроить систему навигации под любые бизнес-задачи, но при этом оказываемся один на один с низкоуровневым API, без возможности сразу же начать использовать Router.</p><h2>Router и полная декларативность = утопия</h2><p>Разработчики Flutter предлагают использовать Router в полностью декларативном стиле, когда все состояние приложения хранится в рамках некоторого State и на основе него формируется список страниц для отображения. Примерно так:</p><figure class="full-width "><img src="/img/image-loader.svg" alt="" title="" height="450" data-src="https://habrastorage.org/getpro/habr/upload_files/726/912/27c/72691227c0a9a3ad632550ff740418ec.png" data-width="1431"/><figcaption></figcaption></figure><p>Возьмем пример из документации, где используется такой декларативный подход, и посмотрим на него:</p><details class="spoiler"><summary>Код из примера от команды Flutter</summary><div class="spoiler__content"><pre><code class="dart">class BookRouterDelegate extends RouterDelegate&lt;BookRoutePath>
    with ChangeNotifier, PopNavigatorRouterDelegateMixin&lt;BookRoutePath> {

  Book _selectedBook;
  bool show404 = false;

  List&lt;Book> books = [
    Book('Left Hand of Darkness', 'Ursula K. Le Guin'),
    Book('Too Like the Lightning', 'Ada Palmer'),
    Book('Kindred', 'Octavia E. Butler'),
  ];

  BookRouterDelegate();

  BookRoutePath get currentConfiguration {
    if (show404) {
      return BookRoutePath.unknown();
    }
    return _selectedBook == null
        ? BookRoutePath.home()
        : BookRoutePath.details(books.indexOf(_selectedBook));
  }

  @override
  Widget build(BuildContext context) {
    return Navigator(
      key: navigatorKey,
      pages: [
        MaterialPage(
          key: ValueKey('BooksListPage'),
          child: BooksListScreen(
            books: books,
            onTapped: _handleBookTapped,
          ),
        ),
        if (show404)
          MaterialPage(key: ValueKey('UnknownPage'), child: UnknownScreen())
        else if (_selectedBook != null)
          BookDetailsPage(book: _selectedBook)
      ],
      onPopPage: (route, result) {
        if (!route.didPop(result)) {
          return false;
        }

        // Update the list of pages by setting _selectedBook to null
        _selectedBook = null;
        show404 = false;
        notifyListeners();

        return true;
      },
    );
  }

  @override
  Future&lt;void> setNewRoutePath(BookRoutePath path) async {
    if (path.isUnknown) {
      _selectedBook = null;
      show404 = true;
      return;
    }

    if (path.isDetailsPage) {
      if (path.id &lt; 0 || path.id > books.length - 1) {
        show404 = true;
        return;
      }

      _selectedBook = books[path.id];
    } else {
      _selectedBook = null;
    }

    show404 = false;
  }

  void _handleBookTapped(Book book) {
    _selectedBook = book;
    notifyListeners();
  }
}</code></pre></div></details><p>Если кратко, что происходит в примере: у нас есть некоторый State навигации, состоящий из полей _selectedBook и show404. При нажатии на книгу изменяется значение _selectedBook; при переходе по deeplink происходит парсинг id книги и отображение нужной страницы либо 404. </p><p>Выглядит красиво – применили такой же подход, как при построении UI: стек навигации полностью зависит от состояния, изменяется при возникновении некоторых событий. Прямо как StatefulWidget и setState! <s>Вау!</s> А теперь представьте, что приложение оперирует не тремя, а десятками или сотней экранов, как это обычно бывает. Как в таком случае будет выглядеть RouterDelegate? Как управлять всем этим состоянием? Такого примера, к сожалению, нет. И нет, команда Flutter не забила, они работают над этим вопросом, просто пока он не решен. Есть даже репозиторий на тему юзабилити компонентов фреймворка, в том числе там есть раздел про Router: <a href="https://github.com/flutter/uxr/wiki/Navigator-2.0-API-Usability-Research"><u>https://github.com/flutter/uxr/wiki/Navigator-2.0-API-Usability-Research</u></a></p><p>Кажется, это тупик. С одной стороны, Navigator – прост в использовании, но не гибкий, с другой стороны Router – низкоуровневый, сложный, но полностью кастомизируемый. А есть что-то среднее?</p><h2>Библиотеки спасают Router!</h2><p>Для того, чтобы получить все лучшее от Router, при этом получить простой конечный API, нужна библиотека, которая использует Router. Это может быть свое решение, на него придется потратить много времени и сил, чтобы учесть все потребности и точки расширения, а может быть и готовое решение. Плюс готового решения в том, что его можно начать использовать также просто, как Navigator, при этом оно может иметь дополнительную функциональность от Router. Существует множество пакетов на просторах <a href="https://pub.dev"><u>pub.dev</u></a>, вот часть из них с кратким описанием особенностей каждого:</p><ul><li><p><a href="https://pub.dev/packages/auto_route"><u>auto_route</u></a> – позволяет использовать кодогенерацию для конфигурации набора роутов, поддерживает вложенную навигацию; можно использовать как именованную навигацию через пути, так и через классы роутов;</p></li><li><p><a href="https://pub.dev/packages/beamer"><u>Beamer</u></a> – предлагает интересную концепцию с разделением навигации по приложению на отдельные "разделы", у каждого из которых свой обработчик;</p></li><li><p><a href="https://pub.dev/packages/routemaster"><u>Routemaster</u></a> – небольшая аккуратная библиотека для навигации по URL. Можно посмотреть реализацию, чтобы понять концепцию работы с новыми компонентами;</p></li><li><p><a href="https://pub.dev/packages/qlevar_router"><u>qlevar_router</u></a> – умеет работать с многослойной навигацией, предоставляет из коробки методы для отображения диалогов и <a href="https://medium.com/saugo360/https-medium-com-saugo360-flutter-using-overlay-to-display-floating-widgets-2e6d0e8decb9"><u>overlay</u></a>;</p></li><li><p><a href="https://pub.dev/packages/yeet"><u>yeet</u></a> – позволяет использовать паттерны в URL для описания параметров, предоставляет свой взгляд на вложенную навигацию; </p></li><li><p><a href="https://pub.dev/packages/fluro"><u>fluro</u></a> – дает возможность использовать обработчики путей в виде функций вместо роутов.</p></li></ul><p>На эти пакеты однозначно стоит взглянуть, чтобы вдохновиться их функциональными особенностями и примерами реализации. </p><p>Теперь на примере использования <a href="https://pub.dev/packages/routemaster"><u>Routemaster</u></a> рассмотрим, что нам дает такой подход:</p><pre><code class="dart">final routes = RouteMap(
  routes: {
	  '/': (_) => CupertinoTabPage(
      child: HomePage(),
      paths: ['/feed', '/settings'],
    ),
    '/feed': (_) => MaterialPage(child: FeedPage()),
    '/settings': (_) => MaterialPage(child: SettingsPage()),
    '/feed/profile/:id': (info) => MaterialPage(
      child: ProfilePage(id: info.pathParameters['id'])
    ),
  }
);

void main() {
  runApp(MaterialApp.router(
	  routerDelegate: RoutemasterDelegate(routesBuilder: (context) => routes),
    routeInformationParser: RoutemasterParser(),
  ));
}</code></pre><p>Здесь разработчики сразу показывают пример использования многоуровневой навигации. При помощи CupertinoTabPage можно обозначить, что страница содержит вкладки, и при переходе на страницы "/feed", "/settings" фактически будет выполнена смена вкладки в рамках главного экрана:</p><pre><code class="dart">routemaster.push('/feed');</code></pre><p>Таким образом мы абстрагируем потребителей навигации от знания о том, как именно происходит навигация – открывается ли новый экран либо просто сменяется вкладка.</p><p>На примере этого роута можно заметить поддержку Path-параметров из коробки:</p><pre><code class="dart">'/feed/profile/:id': (info) => MaterialPage(
  child: ProfilePage(id: info.pathParameters['id'])
),</code></pre><p>Также есть поддержка редиректов, которые довольно часто используются в web:</p><pre><code class="dart">RouteMap(routes: {
  '/one': (routeData) => MaterialPage(child: PageOne()),
  '/two': (routeData) => Redirect('/one'),
})</code></pre><p>При этом Routemaster старается быть похожим на подход именованной навигации из Navigator 1.0, но с дополнительной функциональностью.</p><p>В качестве примера другого подхода можем привести <a href="https://pub.dev/packages/beamer"><u>Beamer</u></a> с его парадигмой <a href="https://pub.dev/packages/beamer#beamlocation"><u>BeamLocation</u></a>. С ним становится возможным использовать декларативный подход, не сваливая в кучу состояние навигации всего приложения, как в примере от команды Flutter, а разделив его на разные BeamLocation, получив некоторые блоки, из которых строится все приложение и где каждый отвечает за свою часть.</p><h2>И напоследок...</h2><p>Рассмотрев все подходы к навигации, которые предоставляет Flutter, делаем вывод – нет универсального решения и каждый инструмент хорош для своей задачи:</p><ul><li><p>Navigator – нужно быстро и просто реализовать переходы между экранами;</p></li><li><p>Router – хотим сами все контролировать и определять методы навигации, нужна полная гибкость;</p></li><li><p>Пакет на основе Router – хотим большей функциональности, чем у Navigator, но не желаем работать с низкоуровневым API.</p></li></ul><figure class="full-width "><img src="/img/image-loader.svg" alt="Сравнительная таблица доступных подходов к навигации во Flutter" title="Сравнительная таблица доступных подходов к навигации во Flutter" height="776" data-src="https://habrastorage.org/getpro/habr/upload_files/592/0d5/62a/5920d562a8dc95eab21f52c394bc4805.png" data-width="1429"/><figcaption>Сравнительная таблица доступных подходов к навигации во Flutter</figcaption></figure><p>В своем проекте мы пришли к реализации собственной библиотеки поверх Router, чтобы получить максимальную гибкость и возможность в дальнейшем расширять ее под изменяющиеся требования бизнеса. </p><p>Отметим, что не так много банков рискуют связываться с новой технологией Flutter для создания мобильных приложений, когда еще не накоплен достаточный опыт в разработке и эксплуатации. Мы сталкивались с разными кейсами в своем проекте и удачно их решали. Если у вас есть вопросы по Flutter, пишите в комментариях — мы поделимся экспертизой!</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bflutter%5D" class="tm-tags-list__link">flutter</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BA%D1%80%D0%BE%D1%81%D1%81-%D0%BF%D0%BB%D0%B0%D1%82%D1%84%D0%BE%D1%80%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%5D" class="tm-tags-list__link">кросс-платформенная разработка</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D1%8B%D1%85%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9%5D" class="tm-tags-list__link">разработка мобильных приложений</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%5D" class="tm-tags-list__link">мобильная разработка</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bnavigator%202.0%5D" class="tm-tags-list__link">navigator 2.0</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdart%5D" class="tm-tags-list__link">dart</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bflutter%20mobile%20development%5D" class="tm-tags-list__link">flutter mobile development</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bnavgation%5D" class="tm-tags-list__link">navgation</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bflutter%20navigation%5D" class="tm-tags-list__link">flutter navigation</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bflutter%20router%5D" class="tm-tags-list__link">flutter router</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/rshb/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Россельхозбанк
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/mobile_dev/" class="tm-hubs-list__link">
    Разработка мобильных приложений
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/dart/" class="tm-hubs-list__link">
    Dart
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/flutter/" class="tm-hubs-list__link">
    Flutter
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 14: ↑13 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 14: ↑13 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+12</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    33
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/rshb/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/b04/03a/2d2/b0403a2d2a5f6d722f97c0b1b135663c.jpg" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/rshb/profile/" class="tm-company-snippet__title">Россельхозбанк</a> <div class="tm-company-snippet__description">Меняем банк и сельское хозяйство</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://www.rshb.ru/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Sorokinzzz/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/956/a6e/34b/956a6e34be82df53831f399cb3b00434.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 3 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    3
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">12</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Владимир Сорокин</span> <a href="/ru/users/Sorokinzzz/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @Sorokinzzz
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Flutter-разработчик</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="https://career.habr.com/Sorokindev" rel="noopener" target="_blank" class="tm-article-author__contact">
      Хабр Карьера
    </a><a href="https://telegram.me/Sorokinzzz" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/rshb/blog/584348/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 9 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2000-03-14T21:00:00.000Z" title="2000-03-15, 00:00">15  марта  2000</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://www.rshb.ru/" target="_blank" class="tm-company-basic-info__link">
      www.rshb.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    свыше 10 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2020-08-20T14:12:37.000Z" title="2020-08-20, 17:12">20  августа  2020</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/ashershov/" class="tm-company-basic-info__link">
      ashershov
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/rshb/blog/584348/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/rshb/blog/584348/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"584348":{"id":"584348","timePublished":"2021-10-19T14:14:54+00:00","isCorporative":true,"lang":"ru","titleHtml":"Flutter: как мы выбирали навигацию для мобильного приложения?","leadData":{"textHtml":"\u003Cp\u003EFlutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное количество новых виджетов. Одно из таких нововведений – Navigator 2.0, выпущенный Flutter осенью 2020 года. Это гибкий инструмент для решения непростой задачи навигации в мобильных приложениях. Разработчики начали применять Navigator 2.0, но \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fflutter\u002Fissues\u002F63429\"\u003E\u003Cu\u003Eстолкнулись с трудностями\u003C\u002Fu\u003E\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fflutter\u002Fissues\u002F45938\"\u003E\u003Cu\u003Eпроблемами\u003C\u002Fu\u003E\u003C\u002Fa\u003E, о которых говорили команде Flutter в официальном репозитории, \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fflutter\u002Fissues\u002F69315\"\u003E\u003Cu\u003Eпредлагая упростить использование инструмента\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Самым подробным материалом по новому подходу является \u003Ca href=\"https:\u002F\u002Fmedium.com\u002Fflutter\u002Flearning-flutters-new-navigation-and-routing-system-7c9068155ade\"\u003E\u003Cu\u003Eстатья в блоге Flutter\u003C\u002Fu\u003E\u003C\u002Fa\u003E, но и ее мало для того, чтобы начать работать с Navigator 2.0 в продакшен-приложениях.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc7\u002F852\u002F538\u002Fdc7852538f0a032befd00457ef33c127.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc7\u002F852\u002F538\u002Fdc7852538f0a032befd00457ef33c127.jpg","fit":"cover","positionY":0.90909090909091,"positionX":1.025641025641}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":3,"votesCount":3},"rating":12,"relatedData":null,"contacts":[{"title":"Хабр Карьера","url":"https:\u002F\u002Fcareer.habr.com\u002FSorokindev","value":"Sorokindev"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002FSorokinzzz","value":"Sorokinzzz"}],"authorContacts":[{"title":"Хабр Карьера","url":"https:\u002F\u002Fcareer.habr.com\u002FSorokindev","value":"Sorokindev"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002FSorokinzzz","value":"Sorokinzzz"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2807077","alias":"Sorokinzzz","fullname":"Владимир Сорокин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F956\u002Fa6e\u002F34b\u002F956a6e34be82df53831f399cb3b00434.jpg","speciality":"Flutter-разработчик"},"statistics":{"commentsCount":9,"favoritesCount":33,"readingCount":4084,"score":12,"votesCount":14},"hubs":[{"relatedData":null,"id":"22524","alias":"rshb","type":"corporative","title":"Блог компании Россельхозбанк","titleHtml":"Блог компании Россельхозбанк","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"17712","alias":"dart","type":"collective","title":"Dart","titleHtml":"Dart","isProfiled":true},{"relatedData":null,"id":"22176","alias":"flutter","type":"collective","title":"Flutter","titleHtml":"Flutter","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4c8\u002Fb62\u002Fc61\u002F4c8b62c6170959a4eaf92621686ef69e.jpg\" width=\"1560\" height=\"880\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4c8\u002Fb62\u002Fc61\u002F4c8b62c6170959a4eaf92621686ef69e.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EFlutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное количество новых виджетов. Одно из таких нововведений – Navigator 2.0, выпущенный Flutter осенью 2020 года. Это гибкий инструмент для решения непростой задачи навигации в мобильных приложениях. Разработчики начали применять Navigator 2.0, но \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fflutter\u002Fissues\u002F63429\"\u003E\u003Cu\u003Eстолкнулись с трудностями\u003C\u002Fu\u003E\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fflutter\u002Fissues\u002F45938\"\u003E\u003Cu\u003Eпроблемами\u003C\u002Fu\u003E\u003C\u002Fa\u003E, о которых говорили команде Flutter в официальном репозитории, \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fflutter\u002Fissues\u002F69315\"\u003E\u003Cu\u003Eпредлагая упростить использование инструмента\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Самым подробным материалом по новому подходу является \u003Ca href=\"https:\u002F\u002Fmedium.com\u002Fflutter\u002Flearning-flutters-new-navigation-and-routing-system-7c9068155ade\"\u003E\u003Cu\u003Eстатья в блоге Flutter\u003C\u002Fu\u003E\u003C\u002Fa\u003E, но и ее мало для того, чтобы начать работать с Navigator 2.0 в продакшен-приложениях.\u003C\u002Fp\u003E\u003Ch2\u003EС чего все началось?\u003C\u002Fh2\u003E\u003Cp\u003EОб этом расскажу я, Вова, Flutter-разработчик. Мы с командой делаем банковское мобильное приложение для юридических лиц. Это не единственное приложение Россельхозбанка, для создания которого используется Flutter. Фреймворк уже хорошо себя показал ранее, поэтому было принято решение использовать его и для этого проекта. Сразу обозначим результаты, к которым пришли с помощью своего варианта навигации в мобильном приложении:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eреализовали 100% хотелок бизнеса;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсократили сроки разработки по интеграции одного банковского продукта в другой;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eповысили эффективность коммуникаций между отдельными командами (кредиты, депозиты, зарплатные проекты и т.д.), разрабатывающими свои разделы в рамках отдельных репозиториев.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДополнительно решили несколько технических задач:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eдобились того, что навигация поддерживает многослойность, чтобы можно было реализовать текущие и будущие потребности бизнеса по функциональности и дизайну;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eоставили точки расширения для использования новых методов навигации в дальнейшем, потому что не знаем, какие еще возможности могут появиться в приложении. То есть спустя какое-то время, нам не придется менять технологию, на которой написан продукт;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eобеспечили гибкость: мы хотим сами выбирать подход, с помощью которого будет осуществляться навигация в мобильном приложении. Нам это нужно для поддержки разрозненных команд.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eреализовали поддержку deeplinks: приложение должно уметь открываться из сторонних источников. Например, пользователь может перейти по ссылке и у него в приложении сразу откроется страница для оплаты счета.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EМы получили опыт, о котором нигде не читали до этого. В этой статье я расскажу, какие варианты по навигации мы рассматривали и как пришли к нашему решению.\u003C\u002Fp\u003E\u003Ch2\u003ENavigator – быстрый старт\u003C\u002Fh2\u003E\u003Cp\u003EКогда в проекте мы дошли до создания навигации, то задали себе вопросы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EКакие есть для этого возможности во Flutter?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКакой подход выбрать?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКакие есть подводные камни у разных вариантов?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНужен ли нам Navigator 2.0?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКак все эти подходы соотносятся с нашими бизнес-требованиями?\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЕстественно, мы вспомнили про \u003Cstrong\u003ENavigator\u003C\u002Fstrong\u003E – самое доступное решение во Flutter для навигации, с которым прежде всего знакомятся начинающие разработчики. Navigator – это stateful-виджет, создаваемый внутри MaterialApp\u002FCupertinoApp. State данного виджета содержит текущий стек навигации и предоставляет методы для изменения этого состояния.\u003C\u002Fp\u003E\u003Cp\u003EПростой переход на новую страницу выглядит следующим образом:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003ENavigator.push(\n\tcontext, \n\tMaterialPageRoute(builder: (context) =\u003E SecondPage()),\n);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВ примере используется MaterialPageRoute, который реализует интерфейс \u003Cstrong\u003ERoute\u003C\u002Fstrong\u003E. Эта сущность связывает Navigator и виджет страницы. Она определяет некоторые визуальные особенности страницы: анимацию появления и удаления, отображение на весь экран или в виде диалога, а также некоторые поведенческие особенности – например, за жест свайпа назад на iOS отвечает Route.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Пример графа навигации мобильного приложения. Источник: pcnews.ru\" title=\"Пример графа навигации мобильного приложения. Источник: pcnews.ru\" height=\"1871\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F477\u002F939\u002F2ec\u002F4779392ec0eb89973076381ff7c139b8.png\" data-width=\"3349\"\u002F\u003E\u003Cfigcaption\u003EПример графа навигации мобильного приложения. Источник: pcnews.ru\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКроме простого push, Navigator предоставляет обширный набор методов, которыми можно изменять стек навигации:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.flutter.dev\u002Fflutter\u002Fwidgets\u002FNavigator\u002Fpush.html\"\u003Epush\u003C\u002Fa\u003E – добавление новой страницы\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.flutter.dev\u002Fflutter\u002Fwidgets\u002FNavigator\u002Fpop.html\"\u003Epop\u003C\u002Fa\u003E – возврат назад (в том числе с возвратом значения)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.flutter.dev\u002Fflutter\u002Fwidgets\u002FNavigator\u002FpopUntil.html\"\u003EpopUntil\u003C\u002Fa\u003E – возврат назад, пока не выполнится переданное условие\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.flutter.dev\u002Fflutter\u002Fwidgets\u002FNavigator\u002FpushReplacement.html\"\u003EpushReplacement\u003C\u002Fa\u003E – замена текущей страницы на другую\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.flutter.dev\u002Fflutter\u002Fwidgets\u002FNavigator\u002FpushAndRemoveUntil.html\"\u003EpushAndRemoveUntil\u003C\u002Fa\u003E – добавление новой страницы и удаление из стека навигации предыдущих страниц, пока не выполнится условие.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЕсть и другие методы, с которыми можно ознакомиться в \u003Ca href=\"https:\u002F\u002Fapi.flutter.dev\u002Fflutter\u002Fwidgets\u002FNavigator-class.html\"\u003Eофициальной документации\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Ch2\u003EМожно ли расширить Navigator?\u003C\u002Fh2\u003E\u003Cp\u003EЛегко заметить, что все эти методы императивные: мы говорим навигатору, как хотим изменить его состояние – добавить или удалить какой-то экран. При этом остальной фреймворк использует декларативный API для построения пользовательского интерфейса. Мы задаем некоторое дерево виджетов, на основе которого всё отображается. Не хотим сказать, что императивный подход для навигации – это плохо, наоборот, в этом нет ничего дурного – просто по-другому.\u003C\u002Fp\u003E\u003Cp\u003EМы обращаем ваше внимание на иное – набор методов для навигации и их поведение фиксированные: нельзя добавить свой метод или изменить реализацию имеющегося. Значит Navigator \u003Cstrong\u003Eнерасширяемый\u003C\u002Fstrong\u003E – это намного важнее того, что он использует другой подход.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa6c\u002F122\u002Ffd0\u002Fa6c122fd03b351a4f4cb25847c082c4d.jpg\" alt=\"Z-index мобильного приложения\" title=\"Z-index мобильного приложения\" width=\"1560\" height=\"880\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa6c\u002F122\u002Ffd0\u002Fa6c122fd03b351a4f4cb25847c082c4d.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003EZ-index мобильного приложения\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EНапример, для реализации уже не нового, но популярного подхода к навигации с bottom navigation bar придется сделать свою сущность, отвечающую за смену табов. Эта сущность будет совсем отдельно от Navigator, таким образом теряется единая точка входа в навигацию.\u003C\u002Fp\u003E\u003Ch2\u003ENavigator &amp; Deeplinking\u003C\u002Fh2\u003E\u003Cp\u003EПриложение не живет в вакууме, поэтому навигация в нем может происходить и по некоторым внешним событиям. Сейчас почти все приложения используют Deeplinking: пользователь переходит по ссылке, а вместо страницы в браузере у него открывается приложение с нужным разделом. Кроме этого, Google активно продвигает Flutter for web и там тоже нужна навигация. Пункты про deeplinking и web объединены неслучайно – в целом им нужен одинаковый механизм для навигации: надо получить ссылку, взять из нее нужную информацию и отобразить необходимую страницу. Именно такую возможность и дает Navigator. При переходе по ссылке в мобильное приложение или при смене URL в адресной строке в web происходит следующее:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eу Navigator вызывается pushNamed со ссылкой в качестве параметра;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ENavigator вызывает onGenerateRoute, чтобы получить из него Route;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eполученный Route добавляется в стек навигации.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНа первый взгляд проблема решена, но есть и нюанс – при переходе по ссылке в стек навигации всегда будет добавлен только один экран, потому что onGenerateRoute может вернуть только один Route. Не предполагается, что deeplink может инициировать добавление сразу нескольких страниц. И ведь кейс довольно частый, например, deeplink такого вида: \u002Fusers\u002F123\u002Fpost\u002F456. Как правило, такая ссылка открывает страницу с постом и дает возможность навигации назад на страницу пользователя, который написал этот паблик. Чтобы реализовать такое поведение, придется использовать \u003Cem\u003Eсекретные техники костыль-development \u003C\u002Fem\u003E:)\u003C\u002Fp\u003E\u003Ch2\u003EЗнакомимся с Router (Navigator 2.0)\u003C\u002Fh2\u003E\u003Cp\u003EПрошлой осенью разработчики Flutter выкатили новую версию компонента навигации – Navigator 2.0, который позже переименовали в \u003Cstrong\u003ERouter\u003C\u002Fstrong\u003E. И это более правильное обозначение, так как Navigator 2.0 вносил путаницу. Казалось, он предназначен, чтобы заменить первый Navigator, что первая версия скоро станет deprecated и нужно срочно переезжать на новую версию. Это не так, Router – альтернативный подход, имеющийся теперь у разработчиков; он дает совершенно другие возможности.\u003C\u002Fp\u003E\u003Cp\u003EДля начала попробуем разобраться, что такое Router. И первое, что можно найти в \u003Ca href=\"https:\u002F\u002Fmedium.com\u002Fflutter\u002Flearning-flutters-new-navigation-and-routing-system-7c9068155ade\"\u003Eофициальной документации\u003C\u002Fa\u003E – схему:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Схема взаимодействия компонентов в Navigator 2.0. Источник: flutter.dev\" title=\"Схема взаимодействия компонентов в Navigator 2.0. Источник: flutter.dev\" height=\"376\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F575\u002F1d2\u002F805\u002F5751d28051b66f58f091dcbb88a4985d.png\" data-width=\"1223\"\u002F\u003E\u003Cfigcaption\u003EСхема взаимодействия компонентов в Navigator 2.0. Источник: flutter.dev\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EИспользуя эту схему, очень сложно понять, как этим пользоваться, какие компоненты нужно реализовать и что они должны делать. Да и примеров кода, как банально перейти на новый экран, сразу не видно. Попробуем разобраться.\u003C\u002Fp\u003E\u003Ch2\u003ERouter – просто о сложном\u003C\u002Fh2\u003E\u003Cp\u003EВсе не так уж и сложно, как кажется на первый взгляд. В новом подходе есть три основные сущности:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003ERouter\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ERouterDelegate\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ERouteInformationParser\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EРассмотрим каждый из них. Router – виджет, который связывает RouterDelegate, RouteInformationParser и пользовательский интерфейс. Нам нужно реализовать RouterDelegate. Он сообщает Router о том, что изменилось состояние навигации. Когда это происходит, Router вызывает build у RouterDelegate, и пользователь видит изменение состояния приложения, то есть открывается новый экран либо происходит переход назад.\u003C\u002Fp\u003E\u003Cp\u003ERouteInformationParser должен реализовывать два метода:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EparseRouteInformation – парсит ссылку и возвращает новое состояние навигации (в случае изменения адреса в браузере или перехода по deeplink);\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ErestoreRouteInformation – преобразовывает текущее состояние навигации в ссылку, которая отображается в адресной строке браузера. Его необязательно реализовывать в мобильном приложении.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EУпрощенная схема взаимодействия компонентов по шагам выглядит так:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Пошаговая схема взаимодействия компонентов при использовании Router\" title=\"Пошаговая схема взаимодействия компонентов при использовании Router\" height=\"738\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2c1\u002F07b\u002F0c8\u002F2c107b0c83f14ff6d8ebea764e38b098.png\" data-width=\"1430\"\u002F\u003E\u003Cfigcaption\u003EПошаговая схема взаимодействия компонентов при использовании Router\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВы спросите, а где же методы для изменения состояния навигации, как отобразить новый экран и что это за \"update\" и \"T\" на схеме? Чтобы это понять, проще всего привести аналогию со StatefulWidget. Router – это как StatefulWidget, а RouterDelegate – как State. У него также реализован build и он также сообщает об изменениях (как при setState).\u003C\u002Fp\u003E\u003Cp\u003ERouter не дает никаких методов для отображения экрана из коробки, их просто нет. Мы должны \u003Cstrong\u003Eсами определить\u003C\u002Fstrong\u003E, как выглядит состояние навигации (Т на схеме) и как обновлять это состояние (update на схеме). Таким образом получаем огромную гибкость и возможность подстроить систему навигации под любые бизнес-задачи, но при этом оказываемся один на один с низкоуровневым API, без возможности сразу же начать использовать Router.\u003C\u002Fp\u003E\u003Ch2\u003ERouter и полная декларативность = утопия\u003C\u002Fh2\u003E\u003Cp\u003EРазработчики Flutter предлагают использовать Router в полностью декларативном стиле, когда все состояние приложения хранится в рамках некоторого State и на основе него формируется список страниц для отображения. Примерно так:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"\" title=\"\" height=\"450\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F726\u002F912\u002F27c\u002F72691227c0a9a3ad632550ff740418ec.png\" data-width=\"1431\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВозьмем пример из документации, где используется такой декларативный подход, и посмотрим на него:\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EКод из примера от команды Flutter\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Eclass BookRouterDelegate extends RouterDelegate&lt;BookRoutePath\u003E\n    with ChangeNotifier, PopNavigatorRouterDelegateMixin&lt;BookRoutePath\u003E {\n\n  Book _selectedBook;\n  bool show404 = false;\n\n  List&lt;Book\u003E books = [\n    Book('Left Hand of Darkness', 'Ursula K. Le Guin'),\n    Book('Too Like the Lightning', 'Ada Palmer'),\n    Book('Kindred', 'Octavia E. Butler'),\n  ];\n\n  BookRouterDelegate();\n\n  BookRoutePath get currentConfiguration {\n    if (show404) {\n      return BookRoutePath.unknown();\n    }\n    return _selectedBook == null\n        ? BookRoutePath.home()\n        : BookRoutePath.details(books.indexOf(_selectedBook));\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Navigator(\n      key: navigatorKey,\n      pages: [\n        MaterialPage(\n          key: ValueKey('BooksListPage'),\n          child: BooksListScreen(\n            books: books,\n            onTapped: _handleBookTapped,\n          ),\n        ),\n        if (show404)\n          MaterialPage(key: ValueKey('UnknownPage'), child: UnknownScreen())\n        else if (_selectedBook != null)\n          BookDetailsPage(book: _selectedBook)\n      ],\n      onPopPage: (route, result) {\n        if (!route.didPop(result)) {\n          return false;\n        }\n\n        \u002F\u002F Update the list of pages by setting _selectedBook to null\n        _selectedBook = null;\n        show404 = false;\n        notifyListeners();\n\n        return true;\n      },\n    );\n  }\n\n  @override\n  Future&lt;void\u003E setNewRoutePath(BookRoutePath path) async {\n    if (path.isUnknown) {\n      _selectedBook = null;\n      show404 = true;\n      return;\n    }\n\n    if (path.isDetailsPage) {\n      if (path.id &lt; 0 || path.id \u003E books.length - 1) {\n        show404 = true;\n        return;\n      }\n\n      _selectedBook = books[path.id];\n    } else {\n      _selectedBook = null;\n    }\n\n    show404 = false;\n  }\n\n  void _handleBookTapped(Book book) {\n    _selectedBook = book;\n    notifyListeners();\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EЕсли кратко, что происходит в примере: у нас есть некоторый State навигации, состоящий из полей _selectedBook и show404. При нажатии на книгу изменяется значение _selectedBook; при переходе по deeplink происходит парсинг id книги и отображение нужной страницы либо 404. \u003C\u002Fp\u003E\u003Cp\u003EВыглядит красиво – применили такой же подход, как при построении UI: стек навигации полностью зависит от состояния, изменяется при возникновении некоторых событий. Прямо как StatefulWidget и setState! \u003Cs\u003EВау!\u003C\u002Fs\u003E А теперь представьте, что приложение оперирует не тремя, а десятками или сотней экранов, как это обычно бывает. Как в таком случае будет выглядеть RouterDelegate? Как управлять всем этим состоянием? Такого примера, к сожалению, нет. И нет, команда Flutter не забила, они работают над этим вопросом, просто пока он не решен. Есть даже репозиторий на тему юзабилити компонентов фреймворка, в том числе там есть раздел про Router: \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fflutter\u002Fuxr\u002Fwiki\u002FNavigator-2.0-API-Usability-Research\"\u003E\u003Cu\u003Ehttps:\u002F\u002Fgithub.com\u002Fflutter\u002Fuxr\u002Fwiki\u002FNavigator-2.0-API-Usability-Research\u003C\u002Fu\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003EКажется, это тупик. С одной стороны, Navigator – прост в использовании, но не гибкий, с другой стороны Router – низкоуровневый, сложный, но полностью кастомизируемый. А есть что-то среднее?\u003C\u002Fp\u003E\u003Ch2\u003EБиблиотеки спасают Router!\u003C\u002Fh2\u003E\u003Cp\u003EДля того, чтобы получить все лучшее от Router, при этом получить простой конечный API, нужна библиотека, которая использует Router. Это может быть свое решение, на него придется потратить много времени и сил, чтобы учесть все потребности и точки расширения, а может быть и готовое решение. Плюс готового решения в том, что его можно начать использовать также просто, как Navigator, при этом оно может иметь дополнительную функциональность от Router. Существует множество пакетов на просторах \u003Ca href=\"https:\u002F\u002Fpub.dev\"\u003E\u003Cu\u003Epub.dev\u003C\u002Fu\u003E\u003C\u002Fa\u003E, вот часть из них с кратким описанием особенностей каждого:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fauto_route\"\u003E\u003Cu\u003Eauto_route\u003C\u002Fu\u003E\u003C\u002Fa\u003E – позволяет использовать кодогенерацию для конфигурации набора роутов, поддерживает вложенную навигацию; можно использовать как именованную навигацию через пути, так и через классы роутов;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fbeamer\"\u003E\u003Cu\u003EBeamer\u003C\u002Fu\u003E\u003C\u002Fa\u003E – предлагает интересную концепцию с разделением навигации по приложению на отдельные \"разделы\", у каждого из которых свой обработчик;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Froutemaster\"\u003E\u003Cu\u003ERoutemaster\u003C\u002Fu\u003E\u003C\u002Fa\u003E – небольшая аккуратная библиотека для навигации по URL. Можно посмотреть реализацию, чтобы понять концепцию работы с новыми компонентами;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fqlevar_router\"\u003E\u003Cu\u003Eqlevar_router\u003C\u002Fu\u003E\u003C\u002Fa\u003E – умеет работать с многослойной навигацией, предоставляет из коробки методы для отображения диалогов и \u003Ca href=\"https:\u002F\u002Fmedium.com\u002Fsaugo360\u002Fhttps-medium-com-saugo360-flutter-using-overlay-to-display-floating-widgets-2e6d0e8decb9\"\u003E\u003Cu\u003Eoverlay\u003C\u002Fu\u003E\u003C\u002Fa\u003E;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fyeet\"\u003E\u003Cu\u003Eyeet\u003C\u002Fu\u003E\u003C\u002Fa\u003E – позволяет использовать паттерны в URL для описания параметров, предоставляет свой взгляд на вложенную навигацию; \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Ffluro\"\u003E\u003Cu\u003Efluro\u003C\u002Fu\u003E\u003C\u002Fa\u003E – дает возможность использовать обработчики путей в виде функций вместо роутов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНа эти пакеты однозначно стоит взглянуть, чтобы вдохновиться их функциональными особенностями и примерами реализации. \u003C\u002Fp\u003E\u003Cp\u003EТеперь на примере использования \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Froutemaster\"\u003E\u003Cu\u003ERoutemaster\u003C\u002Fu\u003E\u003C\u002Fa\u003E рассмотрим, что нам дает такой подход:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Efinal routes = RouteMap(\n  routes: {\n\t  '\u002F': (_) =\u003E CupertinoTabPage(\n      child: HomePage(),\n      paths: ['\u002Ffeed', '\u002Fsettings'],\n    ),\n    '\u002Ffeed': (_) =\u003E MaterialPage(child: FeedPage()),\n    '\u002Fsettings': (_) =\u003E MaterialPage(child: SettingsPage()),\n    '\u002Ffeed\u002Fprofile\u002F:id': (info) =\u003E MaterialPage(\n      child: ProfilePage(id: info.pathParameters['id'])\n    ),\n  }\n);\n\nvoid main() {\n  runApp(MaterialApp.router(\n\t  routerDelegate: RoutemasterDelegate(routesBuilder: (context) =\u003E routes),\n    routeInformationParser: RoutemasterParser(),\n  ));\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЗдесь разработчики сразу показывают пример использования многоуровневой навигации. При помощи CupertinoTabPage можно обозначить, что страница содержит вкладки, и при переходе на страницы \"\u002Ffeed\", \"\u002Fsettings\" фактически будет выполнена смена вкладки в рамках главного экрана:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Eroutemaster.push('\u002Ffeed');\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТаким образом мы абстрагируем потребителей навигации от знания о том, как именно происходит навигация – открывается ли новый экран либо просто сменяется вкладка.\u003C\u002Fp\u003E\u003Cp\u003EНа примере этого роута можно заметить поддержку Path-параметров из коробки:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E'\u002Ffeed\u002Fprofile\u002F:id': (info) =\u003E MaterialPage(\n  child: ProfilePage(id: info.pathParameters['id'])\n),\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТакже есть поддержка редиректов, которые довольно часто используются в web:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003ERouteMap(routes: {\n  '\u002Fone': (routeData) =\u003E MaterialPage(child: PageOne()),\n  '\u002Ftwo': (routeData) =\u003E Redirect('\u002Fone'),\n})\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПри этом Routemaster старается быть похожим на подход именованной навигации из Navigator 1.0, но с дополнительной функциональностью.\u003C\u002Fp\u003E\u003Cp\u003EВ качестве примера другого подхода можем привести \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fbeamer\"\u003E\u003Cu\u003EBeamer\u003C\u002Fu\u003E\u003C\u002Fa\u003E с его парадигмой \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fbeamer#beamlocation\"\u003E\u003Cu\u003EBeamLocation\u003C\u002Fu\u003E\u003C\u002Fa\u003E. С ним становится возможным использовать декларативный подход, не сваливая в кучу состояние навигации всего приложения, как в примере от команды Flutter, а разделив его на разные BeamLocation, получив некоторые блоки, из которых строится все приложение и где каждый отвечает за свою часть.\u003C\u002Fp\u003E\u003Ch2\u003EИ напоследок...\u003C\u002Fh2\u003E\u003Cp\u003EРассмотрев все подходы к навигации, которые предоставляет Flutter, делаем вывод – нет универсального решения и каждый инструмент хорош для своей задачи:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003ENavigator – нужно быстро и просто реализовать переходы между экранами;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ERouter – хотим сами все контролировать и определять методы навигации, нужна полная гибкость;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПакет на основе Router – хотим большей функциональности, чем у Navigator, но не желаем работать с низкоуровневым API.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Сравнительная таблица доступных подходов к навигации во Flutter\" title=\"Сравнительная таблица доступных подходов к навигации во Flutter\" height=\"776\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F592\u002F0d5\u002F62a\u002F5920d562a8dc95eab21f52c394bc4805.png\" data-width=\"1429\"\u002F\u003E\u003Cfigcaption\u003EСравнительная таблица доступных подходов к навигации во Flutter\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВ своем проекте мы пришли к реализации собственной библиотеки поверх Router, чтобы получить максимальную гибкость и возможность в дальнейшем расширять ее под изменяющиеся требования бизнеса. \u003C\u002Fp\u003E\u003Cp\u003EОтметим, что не так много банков рискуют связываться с новой технологией Flutter для создания мобильных приложений, когда еще не накоплен достаточный опыт в разработке и эксплуатации. Мы сталкивались с разными кейсами в своем проекте и удачно их решали. Если у вас есть вопросы по Flutter, пишите в комментариях — мы поделимся экспертизой!\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"flutter"},{"titleHtml":"кросс-платформенная разработка"},{"titleHtml":"разработка мобильных приложений"},{"titleHtml":"мобильная разработка"},{"titleHtml":"navigator 2.0"},{"titleHtml":"dart"},{"titleHtml":"flutter mobile development"},{"titleHtml":"navgation"},{"titleHtml":"flutter navigation"},{"titleHtml":"flutter router"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc7\u002F852\u002F538\u002Fdc7852538f0a032befd00457ef33c127.jpg","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc7\u002F852\u002F538\u002Fdc7852538f0a032befd00457ef33c127.jpg","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Frshb\\\u002Fblog\\\u002F584348\\\u002F\"},\"headline\":\"Flutter: как мы выбирали навигацию для мобильного приложения?\",\"datePublished\":\"2021-10-19T17:14:54+03:00\",\"dateModified\":\"2021-10-21T16:06:44+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Владимир Сорокин\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локал...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Frshb\\\u002Fblog\\\u002F584348\\\u002F#post-content-body\",\"about\":[\"c_rshb\",\"h_programming\",\"h_mobile_dev\",\"h_dart\",\"h_flutter\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F584348\\\u002F306669adff3b8c47f8183df9c8f5ee9b\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F4c8\\\u002Fb62\\\u002Fc61\\\u002F4c8b62c6170959a4eaf92621686ef69e.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F477\\\u002F939\\\u002F2ec\\\u002F4779392ec0eb89973076381ff7c139b8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa6c\\\u002F122\\\u002Ffd0\\\u002Fa6c122fd03b351a4f4cb25847c082c4d.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F575\\\u002F1d2\\\u002F805\\\u002F5751d28051b66f58f091dcbb88a4985d.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F2c1\\\u002F07b\\\u002F0c8\\\u002F2c107b0c83f14ff6d8ebea764e38b098.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F726\\\u002F912\\\u002F27c\\\u002F72691227c0a9a3ad632550ff740418ec.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F592\\\u002F0d5\\\u002F62a\\\u002F5920d562a8dc95eab21f52c394bc4805.png\"]}","metaDescription":"Flutter вышел в стабильной версии в 2018 году. Все это время он активно развивался: появилась поддержка Null safety, расширились возможности по темизации и локализации приложений, добавилось огромное...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"rshb":{"alias":"rshb","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002Fb04\u002F03a\u002F2d2\u002Fb0403a2d2a5f6d722f97c0b1b135663c.jpg","titleHtml":"Россельхозбанк","descriptionHtml":"Меняем банк и сельское хозяйство","relatedData":null,"statistics":{"postsCount":66,"newsCount":8,"vacanciesCount":53,"employeesCount":33,"careerRating":null,"subscribersCount":1469,"rating":97.05,"invest":null},"foundationDate":{"year":"2000","month":"03","day":"15"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fwww.rshb.ru\u002F","staffNumber":"свыше 10 000 человек","registrationDate":"2020-08-20T14:12:37+00:00","representativeUser":{"alias":"ashershov","fullname":null},"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fwww.rshb.ru\u002F"}],"settings":{"analyticsSettings":[],"branding":null,"status":"active"},"metadata":{"titleHtml":"Россельхозбанк, Москва - Меняем банк и сельское хозяйство с 15 марта 2000 г.","title":"Россельхозбанк, Москва - Меняем банк и сельское хозяйство с 15 марта 2000 г.","keywords":["Flutter","Будущее здесь","Научно-популярное","Разработка под e-commerce","Карьера в IT-индустрии"],"descriptionHtml":"66 статей от авторов компании Россельхозбанк","description":"66 статей от авторов компании Россельхозбанк"},"aDeskSettings":null,"careerAlias":"rshb","maxCustomTrackerLinks":3}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
