<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Глобальный ренейминг в Android-проекте / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/hh\/blog\/582106\/"},"headline":"Глобальный ренейминг в Android-проекте","datePublished":"2021-10-07T13:29:37+03:00","dateModified":"2021-10-07T15:18:26+03:00","author":{"@type":"Person","name":"Евгений Таскаев"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &nbsp;&mdash; я Android-разработчик в фичевой команде h...","url":"https:\/\/habr.com\/ru\/company\/hh\/blog\/582106\/#post-content-body","about":["c_hh","h_mobile_dev","h_android_dev","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/582106\/1a717c3e36f40f6723cb6f7e51eefc09\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/37f\/bbe\/6e6\/37fbbe6e6f2a0eb4bd806e3d9cb8909f.jpeg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/03e\/dc8\/1cd\/03edc81cd1286a67899e69d86e75c03a.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/094\/89c\/1e4\/09489c1e4ce67baec57b9ba1ab0946f2.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/54b\/9b5\/d76\/54b9b5d76204d23092a49a5edbe5394f.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/1c1\/182\/2ee\/1c11822eed0f6f2d20547878cf85412c.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/675\/1d3\/bf5\/6751d3bf59a295a846359cea3fb267b3.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/b02\/c8c\/0b2\/b02c8c0b2a9cd16f412544e4ee54b951.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/999\/939\/bf3\/999939bf343e2b1b55875d57c4cf5518.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/7c2\/a7b\/61f\/7c2a7b61f0532035e59a168d34b31a52.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a03\/b4f\/74f\/a03b4f74f7aec7f8535f4abe7bc245f2.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/f86\/d00\/a1a\/f86d00a1aa5b13224441b4fbf4dc3b05.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/7f1\/2b7\/e0c\/7f12b7e0cbc8412c3e124c3debe9aa35.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/26e\/b09\/145\/26eb091456743523a034b047119cbcff.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Глобальный ренейминг в Android-проекте" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Глобальный ренейминг в Android-проекте" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Глобальный ренейминг в Android-проекте" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &amp;nbsp;— я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи,..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &amp;nbsp;— я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи,..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &amp;nbsp;— я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи,..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &amp;nbsp;— я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи,..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &amp;nbsp;— я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи,..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/189/934/87e/18993487eb5fd0f9eb7d8109777dcf4c.jpg" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/189/934/87e/18993487eb5fd0f9eb7d8109777dcf4c.jpg" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/189/934/87e/18993487eb5fd0f9eb7d8109777dcf4c.jpg" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/189/934/87e/18993487eb5fd0f9eb7d8109777dcf4c.jpg" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/189/934/87e/18993487eb5fd0f9eb7d8109777dcf4c.jpg" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="582106" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-07T10:29:37.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/582106/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/hh/blog/582106/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/189/934/87e/18993487eb5fd0f9eb7d8109777dcf4c.jpg" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/582106/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="hh" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><div class="tm-company-card__branding tm-company-article__branding tm-company-card__branding_loading"><div class="tm-company-card__branding-placeholder"><!----></div> <a href="https://www.youtube.com/channel/UCWztYdpQS3v9Gjno8bBZcNA"><img src="//habrastorage.org/getpro/habr/branding/2f5/e83/c30/2f5e83c30f413a6dcbddafbffc2df3e7.jpg" width="100%" class="tm-company-card__branding-image"></a></div></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/hh/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/fc5/967/06f/fc596706fd933f4fdbf8bb4ac5435f5d.jpg" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">164.1</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/hh/profile/" class="tm-company-card__name">
        HeadHunter
      </a> <div class="tm-company-card__description">HR Digital</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/JokerXT/" title="JokerXT" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/78e/0c4/e38/78e0c4e386d1a236c66166b502e5a855.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/JokerXT/" class="tm-user-info__username">
      JokerXT
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-07T10:29:37.000Z" title="2021-10-07, 13:29">7  октября   в 13:29</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Глобальный ренейминг в Android-проекте</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/hh/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании HeadHunter</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/mobile_dev/" class="tm-article-snippet__hubs-item-link"><span>Разработка мобильных приложений</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/android_dev/" class="tm-article-snippet__hubs-item-link"><span>Разработка под Android</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/37f/bbe/6e6/37fbbe6e6f2a0eb4bd806e3d9cb8909f.jpeg" width="1920" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/37f/bbe/6e6/37fbbe6e6f2a0eb4bd806e3d9cb8909f.jpeg" data-blurred="true"/><figcaption></figcaption></figure><p>Привет-привет! Не будем мять бока и начнем максимально быстро.</p><p>Но для начала представлюсь. Меня зовут Таскаев Евгений  — я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи, которыми вы пользуетесь  каждый день*.</p><p>В статье я расскажу, как у нас в Android-приложении прошел глобальный ренейминг фичей и пакетов и их структуризация. Что у нас получилось, а что  нет. А стоит ли вам делать так же, вы решите уже сами.</p><details class="spoiler"><summary>*</summary><div class="spoiler__content"><p>* - если вы каждый день открываете приложение "hh работа"</p></div></details><details class="spoiler"><summary>Для тех, кто не любит читать</summary><div class="spoiler__content"><p>У меня для вас есть выход! Эту статью можно глянуть в формате видео на ютубе <a href="https://youtu.be/0sSEXZtD3QQ">в одном из эпизодов «Охэхэнных историй»</a> ;)</p></div></details><p>Представим, что сейчас 2018 год. Представили? А теперь перестаньте плакать. В 2018 тоже было полно проблем.</p><p>У нас есть шикарный проект, в котором, по законам жанра, огромный монолит с 1 app gradle модулем <s>и весь код в активити</s> и несколько флэйворов. Основные из них - <strong>a<em>pplicant </em></strong>и<strong> <em>employer</em></strong><em> — </em>приложения соискателя и работодателя соответственно.</p><figure class="bordered full-width "><img src="/img/image-loader.svg" alt="Структура проекта" title="Структура проекта" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/03e/dc8/1cd/03edc81cd1286a67899e69d86e75c03a.png" data-width="1920"/><figcaption>Структура проекта</figcaption></figure><p>В этом нет ничего страшного ровно до тех пор</p><ul><li><p>пока команда не слишком разрослась и не стало трудно пилить фичи</p></li><li><p>пока старые разработчики не ушли, а новые знают не всё</p></li><li><p>пока не пришел хайптрейн с многомодульностью</p></li><li><p>пока рак на горе не свистнул</p></li></ul><p>Подчеркните нужное. </p><p>В нашем случае произошло так: были разного рода лики и баги, фиксить которые было сложно, к тому же старые разработчики разбежались, а новым было трудно ориентироваться в том, что осталось. Из-за этого было трудно декомпозировать задачи и разработка стала “дорогой”.</p><p><em>А какие у вас были проблемы на проектах пишите в комментариях)</em></p><h2>Структура проекта до ренейминга</h2><p>Спустя некоторое время, когда многое было зарефачено и отлажено, мы пришли к новому виду структуры проекта. Это как раз та структура, которая была у нас <strong>до </strong>недавнего времени.</p><p>За всё это время в плане структуры произошло следующее:</p><ul><li><p>мы избавились от <em>flavors</em> и разделили приложения на два app gradle-модуля — <em>модули которые зависят от плагина "com.android.application".</em></p></li><li><p>разбили монолит на отдельные library gradle-модули (и в дальнейшем просто gradle-модули) — <em>модули которые зависят от плагина "com.android.library".</em></p></li></ul><p>Также прошло несколько этапов формирования структуры. И перед последним, о котором я расскажу в конце, структура была такая:</p><ol><li><p>Часть фичей лежали в папке <strong>feature </strong>в корне проекта, туда складывались gradle-модули фичей соискательского приложения с префиксом “<em>feature-</em>” в именовании.<br/>Например, фича резюме называлась<em> feature-resume</em>. Это рудиментарное решение, которое появилось почти в самом начале рефакторинга.</p><figure class="full-width "><img src="/img/image-loader.svg" height="877" data-src="https://habrastorage.org/getpro/habr/upload_files/094/89c/1e4/09489c1e4ce67baec57b9ba1ab0946f2.png" data-width="1560"/><figcaption></figcaption></figure></li><li><p>Некоторые фичи состояли из нескольких сабфичей, по аналогии с 1 пунктом, но создавался не gradle-модуль, а папка также с префиксом, куда уже складывались нужные фичи. Слишком сложно? Сейчас приведу пример. Фича резюме, <em>feature-resume</em>, внутри нее лежали gradle-модули: <em>feature-resume-profile,</em> <em>feature-resume-network</em> и тд<em>.</em></p><figure class="full-width "><img src="/img/image-loader.svg" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/54b/9b5/d76/54b9b5d76204d23092a49a5edbe5394f.png" data-width="1920"/><figcaption></figcaption></figure></li><li><p>Общие gradle-модули, которые использовались в обоих приложениях, лежали в папочке <strong>shared</strong>. Помимо этого, фичи внутри <strong>shared </strong>делились на <strong>core </strong>и <strong>feature</strong>. Соответственно, в какой папке лежал gradle-модуль, то имя папки добавлялось префиксом к названию модуля. Как можете заметить на картинке, с <strong>core </strong>что-то было не так. По правилам префикс у названия фичей должен быть <em>“shared-core-”.</em></p><figure class="full-width "><img src="/img/image-loader.svg" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/1c1/182/2ee/1c11822eed0f6f2d20547878cf85412c.png" data-width="1920"/><figcaption></figcaption></figure></li><li><p>Основная логика приложений лежала в папках соответствующих названиям приложений <strong>applicant </strong>(соискательское<strong>)</strong> и <strong>employer </strong>(работодательское).<br/>Структура была аналогична папке <strong>shared </strong>и фичи в них именовались так:</p><figure class="full-width "><img src="/img/image-loader.svg" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/675/1d3/bf5/6751d3bf59a295a846359cea3fb267b3.png" data-width="1920"/><figcaption></figcaption></figure><figure class="full-width "><img src="/img/image-loader.svg" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/b02/c8c/0b2/b02c8c0b2a9cd16f412544e4ee54b951.png" data-width="1920"/><figcaption></figcaption></figure></li></ol><h2>Проблемы с именованием</h2><ol><li><p>Расположение модулей не мэтчилось с их названием, что затрудняло подключение модулей, а иногда и путало, особенно новых разработчиков</p></li><li><p>Бардак в названии пакетов, конечно были какие то правила, но за 3 года, они тоже менялись, а пакеты могли называться по-разному, иногда даже совпадали у некоторых разных фич</p></li></ol><p>И выход из всего этого был —  РЕНЕЙМИНГ!</p><h2>Ретроспектива ренейминга</h2><p>А теперь самое интересное. Расскажу про новую структуру проекта.</p><p>Начнем с небольшой ретроспективы и разберемся, с какими проблемами мы столкнулись.</p><p>До начала рефакторинга мы определились какой хотим видеть новую структуру.</p><p>Во время праздничных выходных в феврале мы начали переносить файлы по новым папкам и менять имена пакетов с помощью разного рода скриптов.</p><p>Время было выбрано специально, чтобы никто параллельно ничего не делал.Но работа затянулась.  Тогда мы плохо понимали масштаб возложенной на нас задачи.</p><p>И поэтому решили для начала вручную составить  гигантский чеклист того, что предстоит сделать, формата "как модуль назывался -> как будет называться". А также за одно переименовать пакеты в соответсвии с названием модулей</p><details class="spoiler"><summary>Он выглядел примерно так</summary><div class="spoiler__content"><pre><code>#### feature-chat --> chat

#### feature-chat/core

- [x] applicant-feature-chat-core-data
   — [x] rename module: applicant-feature-chat-core-data -> :applicant:feature:chat:core:data
   — [x] rename package: ru.hh.applicant.feature.chat.screen_core_data -> ru.hh.applicant.feature.chat.core.data

- [x] applicant-feature-chat-core-network
   — [x] rename module: applicant-feature-chat-core-network -> :applicant:feature:chat:core:network
   — [x] rename package: ru.hh.feature_chat_network -> ru.hh.applicant.feature.chat.core.network
   
#### feature-chat/feature

- [x] applicant-feature-chat-list
   — [x] rename module: applicant-feature-chat-list -> :applicant:feature:chat:chat-list
   — [x] rename package: ru.hh.feature_chat_list -> ru.hh.applicant.feature.chat.list
   
и так далее</code></pre></div></details><p>И даже после этого мы не до конца осознали, что нора, в которую мы залезли  — не кроличья. </p><p>Поэтому первые модули было решено перенести просто руками, в Android Studio. После 10 модулей стало понятно, что git-история этих файлов исчезла. Терять историю нам однозначно не хотелось, поэтому мы вспомнили про такую команду как <em>git mv</em>, которая позволяет без потери истории перенести файлы из одной папки в другую. </p><p>Попытавшись перенести несколько модулей с использованием git mv, мы сильно взгрустнули. Потому что писать руками эти команды было очень долго и муторно. </p><p>Нужно было искать какое-то автоматическое решение. Поэтому мы написали простой bash-скрипт, который для двух заданных папок генерил тонну команд git mv, которые можно было скопировать и сразу запустить.</p><details class="spoiler"><summary>А вот и сам скриптик на генерацию git mv команд</summary><div class="spoiler__content"><pre><code class="bash">#!/bin/bash

readonly LOCAL_PATH=$1
readonly START_FOLDER=$2
readonly START_PACKAGE=$3
readonly TARGET_FOLDER=$4
readonly TARGET_PACKAGE_NAME="$5"

echo "===== MV COMMANDS GENERATOR ====="
echo "LOCAL_PATH: ${LOCAL_PATH}"
echo "START_FOLDER: ${START_FOLDER}"
echo "START_PACKAGE: ${START_PACKAGE}"
echo "TARGET_FOLDER: ${TARGET_FOLDER}"
echo "TARGET_PACKAGE_NAME: ${TARGET_PACKAGE_NAME}"

readonly SPLITTED_TARGET_PACKAGE=(${TARGET_PACKAGE_NAME//./ })

TARGET_PATH_PARTS=""

for package_part in "${SPLITTED_TARGET_PACKAGE[@]}"; do
 TARGET_PATH_PARTS="${TARGET_PATH_PARTS}/${package_part}"
done

readonly SOURCE_SET_FOLDER="/src/main/java"
readonly SOURCE_KOTLIN_SET_FOLDER="/src/main/kotlin"
readonly DESIRED_CODE_ROOT_FOLDER="${START_FOLDER}${SOURCE_SET_FOLDER}${TARGET_PATH_PARTS}"

echo "DESIRED_CODE_ROOT_FOLDER: ${DESIRED_CODE_ROOT_FOLDER}"

readonly SPLITTED_START_PACKAGE=(${START_PACKAGE//./ })

START_PATH_PARTS=""

for package_part in "${SPLITTED_START_PACKAGE[@]}"; do
 START_PATH_PARTS="${START_PATH_PARTS}/${package_part}"
done

START_CODE_ROOT_FOLDER="${START_FOLDER}${SOURCE_SET_FOLDER}${START_PATH_PARTS}"

if [ ! -d "${START_CODE_ROOT_FOLDER}" ]; then
   echo "... there is no /java source set --> /kotlin source set exists"
   START_CODE_ROOT_FOLDER="${START_FOLDER}${SOURCE_KOTLIN_SET_FOLDER}${START_PATH_PARTS}"
fi

readonly FULL_START_PATH="$(cd "$(dirname "${START_CODE_ROOT_FOLDER}")"; pwd)/$(basename "${START_CODE_ROOT_FOLDER}")"

echo "START_CODE_ROOT_FOLDER: ${START_CODE_ROOT_FOLDER}"
echo "FULL_START_PATH: ${FULL_START_PATH}"
echo ""
echo "======= Generation result ======"
echo ""
# Первая команда — создаём директорию для переноса кода
echo "mkdir -p ${DESIRED_CODE_ROOT_FOLDER} &amp;&amp; \\"
# Перечисляем команды для аккуратного переноса кода

for code_directory in ${FULL_START_PATH}/* ; do
   NAME="${code_directory/${LOCAL_PATH}/.}"
   echo "git mv ${NAME} ${DESIRED_CODE_ROOT_FOLDER} &amp;&amp; \\"
done

# Последняя команда — перенос кода в target_folder
echo "git mv ${START_FOLDER} ${TARGET_FOLDER}"
echo ""
echo "================================="
echo ""</code></pre></div></details><p>Дело пошло чуть веселее. Но перенос папок — это всего лишь одна часть истории. Вторая часть заключалась в том, что мы, помимо простого переноса папок, захотели ещё и ПЕРЕИМЕНОВАТЬ некоторые модули, о чем я писал выше, добавив структуры не только в иерархию папок, но и в иерархию package-ей. </p><p>Чтобы было вот так:</p><pre><code>ru.hh.feature_chat_list -> ru.hh.applicant.feature.chat.list
ru.hh.feature_chat_network -> ru.hh.applicant.feature.chat.core.network
ru.hh.applicant.feature.chat.screen_core_data -> ru.hh.applicant.feature.chat.core.data</code></pre><p>Поэтому помимо генерации команд <em>git mv</em>, нужно было ещё сгенерить команды для переименования одних package-ей в другие. Для этого мы тоже написали дополнительный скрипт, который генерил команды для вызова скрипта переименования.</p><details class="spoiler"><summary>Скрип запуска скрипта переименования</summary><div class="spoiler__content"><pre><code class="bash">readonly START_FOLDER=$1
readonly START_PACKAGE=$2
readonly REPLACE_PACKAGE=$3

echo "START_FOLDER = ${START_FOLDER}"
echo "START_PACKAGE = ${START_PACKAGE}"
echo "REPLACE_PACKAGE = ${REPLACE_PACKAGE}"
echo ""
echo "========="
echo ""

for filename in ${START_FOLDER}/*; do
   withoutPath=$(basename -- "$filename")
   fff="${withoutPath%.*}"
   echo "sh global_rename.sh ${START_PACKAGE}.${fff} ${REPLACE_PACKAGE}.${fff} &amp;&amp; \\"
done
echo ""
echo "========="</code></pre></div></details><details class="spoiler"><summary>Сам скрипт переименования пакетов</summary><div class="spoiler__content"><pre><code class="bash">#!/bin/bash

readonly OLD_PACKAGE=$1
readonly NEW_PACKAGE=$2

find . -type d \( \
   -name 'firebase' -o \
   -name 'gradle' -o \
   -name 'hooks' -o \
   -name 'lint' -o \
   -name 'profiling' -o \
   -name 'scripts' -o \
   -name 'detekt' -o \
   -name '.git' -o \
   -name '.gradle' -o \
   -name '.mainframer' -o \
   -name 'build' -o \
   -name '.idea' -o \
   -name 'android-style-guide' -o \
   -name 'ci' \
 \) -prune -o \
 -type f \( \
   -name '*.java' -o \
   -name '*.kt' -o \
   -name '*.gradle' -o \
   -name '*.xml' -o \
   -name '*.txt' \
 \) \
 -print0 | xargs -0 sed -i '' "s/${OLD_PACKAGE}/${NEW_PACKAGE}/g"

echo "done rename for ( ${OLD_PACKAGE} / ${NEW_PACKAGE} )"</code></pre></div></details><p>В итоге мы просидели все выходные, по очереди генерируя команды для каждого модуля и проверяя, собирается ли приложение и запускается ли оно вообще.<br/>Так прошло 3 дня и две ночи...</p><p>Ответственные за это люди ушли отдыхать, а остальные разработчики продолжили, но у нас ничего не вышло.</p><p>А не получилось потому, что:</p><ul><li><p>в больших фиче ветках разработчиков было много изменений и таких веток было несколько, если бы каждый мержил себе сам, то он с большей вероятностью кто-то мог ошибиться где-то</p></li><li><p>также некоторые ветки пересекались по изменениям и было трудно потом все это смержить еще и с ренеймингом</p></li></ul><p>Подумав, мы решили что было бы хорошо, если кто-то один замержит ренейминг везде!</p><p>Поэтому решили фиче ветки смержить сразу в develop, а те кто не хочет мержить сейчас, а хотят еще поработать, будут потом сами разруливать конфликты с новым develop.</p><p>И мы не до конца понимали, чем нам это грозит...</p><p>Смержив все, что можно было в develop, в пятницу мы объявили кодфриз и избранный занялся мержем ренейминга в develop.</p><p>За неделю работы команд накопилось кучу изменений, и при мерже вылезло много конфликтов.</p><details class="spoiler"><summary>Вот например</summary><div class="spoiler__content"><figure class="full-width "><img src="/img/image-loader.svg" alt="Это малая часть конфликтов" title="Это малая часть конфликтов" height="1408" data-src="https://habrastorage.org/getpro/habr/upload_files/999/939/bf3/999939bf343e2b1b55875d57c4cf5518.png" data-width="2792"/><figcaption>Это малая часть конфликтов</figcaption></figure></div></details><p>После мержа ветки с ренеймингом в старый develop (недельной давности), старые фичи сменили имя и пакет, по факту это означало, что они отправились в другую папку.</p><p>Обратите внимание на файлы, все хорошо, они лежат в новом месте.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Старое -> Новое расположение фичи" title="Старое -> Новое расположение фичи" height="1168" data-src="https://habrastorage.org/getpro/habr/upload_files/7c2/a7b/61f/7c2a7b61f0532035e59a168d34b31a52.png" data-width="2558"/><figcaption>Старое -> Новое расположение фичи</figcaption></figure><p>Но при мерже ренейминга в новый develop после недельной работы, появились такие фантомные структуры:</p><figure class="full-width "><img src="/img/image-loader.svg" alt="&quot;Фантомная&quot; старая структура фичи" title="&quot;Фантомная&quot; старая структура фичи" height="1080" data-src="https://habrastorage.org/getpro/habr/upload_files/a03/b4f/74f/a03b4f74f7aec7f8535f4abe7bc245f2.png" data-width="1920"/><figcaption>"Фантомная" старая структура фичи</figcaption></figure><p>По старым путям пакетов лежали файлы, которые были изменены разработчиками, но изменены они были в старой структуре, и таких мест было много... голова шла кругом.</p><p>Естественно, все это править руками будет долго... Чтобы ускорить процесс, в качестве вспомогательного инструмента, была выбрана утилита <strong>rsync</strong>, потому что она умеет рекурсивно мержить папки друг с другом, и ей можно указать стратегию разрешения конфликтов (перезапись, оставить новое, оставить старое, etc.).<br/>В консоли с ее помощью рекурсивно переносили папки фичей. Из папки со старым названием в папку с новым.</p><p>Затем с помощью волшебных настроек <strong>Android Studio — Optimize imports on fly</strong> и<strong> Add unambiguous imports on the fly</strong>, были поправлены проблемы с импортами. Да, мы заходили ручками в каждый файл.</p><figure class="full-width "><img src="/img/image-loader.svg" alt="Настройки Android Studio" title="Настройки Android Studio" height="412" data-src="https://habrastorage.org/getpro/habr/upload_files/f86/d00/a1a/f86d00a1aa5b13224441b4fbf4dc3b05.png" data-width="1716"/><figcaption>Настройки Android Studio</figcaption></figure><p>По-хорошему, надо было идти сначала от корневых модулей (<em>shared/core</em>) и делать регулярный синк проекта в IDE. Так пришлось бы гораздо меньше страдать потом с импортами при переносах файлов, ибо Android Studio автоматически бы их сразу переименовывала во всех местах, куда дотянется.</p><p>Но эта мысль пришла в наши светлые головы уже после проделанной работы и полученного опыта.</p><p>Спустя пару дней <s>мучений</s> мержа, develop был актуализирован и содержал новую структуру папок и новые имена пакетов.</p><p>А ребятам, которые не стали мержить свои ветки в develop, была предоставлена инструкция, как безболезненно влить в себе новый develop.</p><p>Но все было не так просто, как хотелось бы.</p><p><strong>Приведу список основных пунктов, если вдруг вам понадобится:</strong></p><ol><li><p>Вмержить к себе в ветку develop и сохранить лог конфликтов, <s>на память</s> чтобы понимать поле работы</p></li><li><p>Конфликты типа<em> modified — modified</em> разрешить самим, руками, но таких конфликтов было минимум</p></li><li><p>Остальные конфликты нужно разрешить в свою пользу</p></li><li><p>Нужно перевести все созданные вами папки на новую структуру</p></li><li><p>Каждый перенос лучше делать отдельным коммитом, чтобы ничего не потерять и чтобы лучше контролировать процесс</p></li><li><p>Разрулить силами Android Studio все неправильные импорты</p></li><li><p>Удалить все неиспользуемые папки</p></li></ol><p>В теории звучит просто, но в реальных условиях:</p><ul><li><p>если переносить <strong>модуль/модули</strong> у себя в ветке, то рефакторинг будет применен к модулю, который располагался в <em>старом</em> месте. Приходилось повторить все, что уже сделал, но для перенесенного модуля (получилась <em>двойная работа</em>) + удалить старый модуль, причем сделать аккуратно, чтобы осталась <em>история гита</em></p></li><li><p>если переносить <strong>файлы </strong>у себя в ветке, то рефакторинг будет применен к <em>старым</em> файлам, естественно появлялась неактуальная <em>фантомная</em> структура файлов, которые были уже перенесены, поэтому приходилось аккуратно их объединить с новыми</p></li></ul><p>Всего файлов с конфликтами было ~500 в ~50 модулях.</p><h2>Итоги ренейминга</h2><ol><li><p>Названия всех модулей соответствуют структуре папок.<br/>И теперь включать gradle-модуль в <strong>settings.gradle </strong>можно через<br/><strong><em>include(':shared:feature:location')</em></strong><em>, </em>поскольку путь совпадает с неймингом.<br/><br/>Для примера, раньше это делалось вот так:</p><figure class="full-width "><img src="/img/image-loader.svg" height="252" data-src="https://habrastorage.org/getpro/habr/upload_files/7f1/2b7/e0c/7f12b7e0cbc8412c3e124c3debe9aa35.png" data-width="3508"/><figcaption></figcaption></figure></li><li><p>Все модули из папки <strong>feature </strong>из корня проекта (о чем я писал вначале), переместились на свои законные места в папку <strong>applicant/feature</strong>.</p><figure class="full-width "><img src="/img/image-loader.svg" height="568" data-src="https://habrastorage.org/getpro/habr/upload_files/26e/b09/145/26eb091456743523a034b047119cbcff.png" data-width="1358"/><figcaption></figcaption></figure></li><li><p>Имена пакетов стали соотноситься с расположением фичи.<br/>Например, фича геолокации <strong><em>:shared:feature:location</em></strong> получила пакет <strong><em>ru.hh.shared.feature.location</em>.</strong></p></li><li><p>Gradle-модули избавились от префиксов <em>feature</em>, <em>shared, core </em>и т.д.<br/>Но префиксы сабфичей решено было оставить... А потом и их решили не писать :)</p></li><li><p>Появилась возможность статической валидация подключения модулей.<br/>В будущем будем проверять нейминг модулей и пакетов, а также корректность связей между модулями разных типов.</p></li></ol><h2>Наши рекомендации</h2><p>Прежде чем идти в эту историю, надо написать скрипты, которые автоматизируют большую часть работы. Можно воспользоваться нашими наработками, но сначала нужно проверить их на валидность вашему проекту.</p><p>И <strong>основной</strong> совет — не делайте руками, делайте сразу через скрипты. Это  сэкономит кучу нервов и времени.</p><p>Также нужно составить чеклист переноса модулей/файлов. И после каждого этапа переноса по чеклисту нужно проверять: собирается ли проект. Да, это долго и замедляет процесс, но сильно упрощает жизнь в дальнейшем. По крайней мере будет понимание, что “вот из-за этого у меня проект развалился“.</p><p>Для подобных глобальных изменений нужно обязательно уведомлять всю команду и заранее договариваться, как будет идти разработка в это время, чтобы минимизировать конфликты. Самый радикальный инструмент для этого — фичефриз/кодфриз etc. Если вы проводите такой рефакторинг,  поддерживайте регулярную связь с командой, сразу же сообщайте о проблемах и потенциально сложных для мерджа местах.</p><p>И не стоит недооценивать эту задачу, если у вас большая кодовая база. Она стопудово займёт больше времени, чем вам кажется.</p><p>На этом все, если у вас остались какие-либо вопросы или вы можете поделиться собственным опытом, пишите в  комментариях.</p><p>Спасибо за внимание ;)</p><h2>Маленький опрос для большого исследования</h2><p>Мы проводим ежегодное исследование технобренда крупнейших IT-компаний России. Нам очень нужно знать, что вы думаете про популярных (и не очень) работодателей. Опрос займет всего 10 минут.</p><p>Пройти опрос можно <a href="https://q.hh.ru/poll/rXSnT57pKTGKkFCk6blfiB?source=habr"><u>здесь</u></a>. </p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bandroid%5D" class="tm-tags-list__link">android</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bkotlin%5D" class="tm-tags-list__link">kotlin</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Brenaming%5D" class="tm-tags-list__link">renaming</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B5%D0%BD%D0%B5%D0%B9%D0%BC%D0%B8%D0%BD%D0%B3%5D" class="tm-tags-list__link">ренейминг</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgradle-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C%5D" class="tm-tags-list__link">gradle-модуль</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/hh/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании HeadHunter
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/mobile_dev/" class="tm-hubs-list__link">
    Разработка мобильных приложений
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/android_dev/" class="tm-hubs-list__link">
    Разработка под Android
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 10: ↑9 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 10: ↑9 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+8</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.6K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    16
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/hh/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/fc5/967/06f/fc596706fd933f4fdbf8bb4ac5435f5d.jpg" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/hh/profile/" class="tm-company-snippet__title">HeadHunter</a> <div class="tm-company-snippet__description">HR Digital</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://facebook.com/headhuntergroup" rel="noopener" target="_blank" class="tm-article-author__contact">
      Facebook
    </a><a href="https://twitter.com/hh_ru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a><a href="https://vk.com/headhunter" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://github.com/hhru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Github
    </a><a href="https://instagram.com/hh_ru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Instagram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/JokerXT/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/78e/0c4/e38/78e0c4e386d1a236c66166b502e5a855.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 4 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    4
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">8</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Евгений Таскаев</span> <a href="/ru/users/JokerXT/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @JokerXT
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Android Developer</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/hh/blog/582106/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 8 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2000-05-22T20:00:00.000Z" title="2000-05-23, 00:00">23  мая  2000</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://hh.ru" target="_blank" class="tm-company-basic-info__link">
      hh.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    501–1 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2008-08-09T07:42:43.000Z" title="2008-08-09, 11:42">9  августа  2008</time></dd></dl> <!----></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/hh/blog/582106/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/hh/blog/582106/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"582106":{"id":"582106","timePublished":"2021-10-07T10:29:37+00:00","isCorporative":true,"lang":"ru","titleHtml":"Глобальный ренейминг в Android-проекте","leadData":{"textHtml":"\u003Cp\u003EВсем привет! Не будем мять бока и начнем максимально быстро.\u003C\u002Fp\u003E\u003Cp\u003EНо для начала, представлюсь. Меня зовут Таскаев Евгений - я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи, которыми вы пользуетесь  каждый день*.\u003C\u002Fp\u003E\u003Cp\u003EСегодня вы узнаете, как у нас в Android приложении прошел глобальный ренейминг фичей и пакетов, а также их структуризация. Что у нас получилось, а что - нет. А выводы, стоит ли вам делать также, вы сделаете сами.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F189\u002F934\u002F87e\u002F18993487eb5fd0f9eb7d8109777dcf4c.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F189\u002F934\u002F87e\u002F18993487eb5fd0f9eb7d8109777dcf4c.jpg","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":4,"votesCount":4},"rating":8,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"201325","alias":"JokerXT","fullname":"Евгений Таскаев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F78e\u002F0c4\u002Fe38\u002F78e0c4e386d1a236c66166b502e5a855.jpg","speciality":"Android Developer"},"statistics":{"commentsCount":8,"favoritesCount":16,"readingCount":1565,"score":8,"votesCount":10},"hubs":[{"relatedData":null,"id":"5073","alias":"hh","type":"corporative","title":"Блог компании HeadHunter","titleHtml":"Блог компании HeadHunter","isProfiled":false},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F37f\u002Fbbe\u002F6e6\u002F37fbbe6e6f2a0eb4bd806e3d9cb8909f.jpeg\" width=\"1920\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F37f\u002Fbbe\u002F6e6\u002F37fbbe6e6f2a0eb4bd806e3d9cb8909f.jpeg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПривет-привет! Не будем мять бока и начнем максимально быстро.\u003C\u002Fp\u003E\u003Cp\u003EНо для начала представлюсь. Меня зовут Таскаев Евгений  — я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи, которыми вы пользуетесь  каждый день*.\u003C\u002Fp\u003E\u003Cp\u003EВ статье я расскажу, как у нас в Android-приложении прошел глобальный ренейминг фичей и пакетов и их структуризация. Что у нас получилось, а что  нет. А стоит ли вам делать так же, вы решите уже сами.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003E*\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003E* - если вы каждый день открываете приложение \"hh работа\"\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EДля тех, кто не любит читать\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cp\u003EУ меня для вас есть выход! Эту статью можно глянуть в формате видео на ютубе \u003Ca href=\"https:\u002F\u002Fyoutu.be\u002F0sSEXZtD3QQ\"\u003Eв одном из эпизодов «Охэхэнных историй»\u003C\u002Fa\u003E ;)\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EПредставим, что сейчас 2018 год. Представили? А теперь перестаньте плакать. В 2018 тоже было полно проблем.\u003C\u002Fp\u003E\u003Cp\u003EУ нас есть шикарный проект, в котором, по законам жанра, огромный монолит с 1 app gradle модулем \u003Cs\u003Eи весь код в активити\u003C\u002Fs\u003E и несколько флэйворов. Основные из них - \u003Cstrong\u003Ea\u003Cem\u003Epplicant \u003C\u002Fem\u003E\u003C\u002Fstrong\u003Eи\u003Cstrong\u003E \u003Cem\u003Eemployer\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003Cem\u003E — \u003C\u002Fem\u003Eприложения соискателя и работодателя соответственно.\u003C\u002Fp\u003E\u003Cfigure class=\"bordered full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Структура проекта\" title=\"Структура проекта\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F03e\u002Fdc8\u002F1cd\u002F03edc81cd1286a67899e69d86e75c03a.png\" data-width=\"1920\"\u002F\u003E\u003Cfigcaption\u003EСтруктура проекта\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВ этом нет ничего страшного ровно до тех пор\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eпока команда не слишком разрослась и не стало трудно пилить фичи\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпока старые разработчики не ушли, а новые знают не всё\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпока не пришел хайптрейн с многомодульностью\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпока рак на горе не свистнул\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПодчеркните нужное. \u003C\u002Fp\u003E\u003Cp\u003EВ нашем случае произошло так: были разного рода лики и баги, фиксить которые было сложно, к тому же старые разработчики разбежались, а новым было трудно ориентироваться в том, что осталось. Из-за этого было трудно декомпозировать задачи и разработка стала “дорогой”.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EА какие у вас были проблемы на проектах пишите в комментариях)\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Ch2\u003EСтруктура проекта до ренейминга\u003C\u002Fh2\u003E\u003Cp\u003EСпустя некоторое время, когда многое было зарефачено и отлажено, мы пришли к новому виду структуры проекта. Это как раз та структура, которая была у нас \u003Cstrong\u003Eдо \u003C\u002Fstrong\u003Eнедавнего времени.\u003C\u002Fp\u003E\u003Cp\u003EЗа всё это время в плане структуры произошло следующее:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eмы избавились от \u003Cem\u003Eflavors\u003C\u002Fem\u003E и разделили приложения на два app gradle-модуля — \u003Cem\u003Eмодули которые зависят от плагина \"com.android.application\".\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eразбили монолит на отдельные library gradle-модули (и в дальнейшем просто gradle-модули) — \u003Cem\u003Eмодули которые зависят от плагина \"com.android.library\".\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EТакже прошло несколько этапов формирования структуры. И перед последним, о котором я расскажу в конце, структура была такая:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EЧасть фичей лежали в папке \u003Cstrong\u003Efeature \u003C\u002Fstrong\u003Eв корне проекта, туда складывались gradle-модули фичей соискательского приложения с префиксом “\u003Cem\u003Efeature-\u003C\u002Fem\u003E” в именовании.\u003Cbr\u002F\u003EНапример, фича резюме называлась\u003Cem\u003E feature-resume\u003C\u002Fem\u003E. Это рудиментарное решение, которое появилось почти в самом начале рефакторинга.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"877\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F094\u002F89c\u002F1e4\u002F09489c1e4ce67baec57b9ba1ab0946f2.png\" data-width=\"1560\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНекоторые фичи состояли из нескольких сабфичей, по аналогии с 1 пунктом, но создавался не gradle-модуль, а папка также с префиксом, куда уже складывались нужные фичи. Слишком сложно? Сейчас приведу пример. Фича резюме, \u003Cem\u003Efeature-resume\u003C\u002Fem\u003E, внутри нее лежали gradle-модули: \u003Cem\u003Efeature-resume-profile,\u003C\u002Fem\u003E \u003Cem\u003Efeature-resume-network\u003C\u002Fem\u003E и тд\u003Cem\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F54b\u002F9b5\u002Fd76\u002F54b9b5d76204d23092a49a5edbe5394f.png\" data-width=\"1920\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EОбщие gradle-модули, которые использовались в обоих приложениях, лежали в папочке \u003Cstrong\u003Eshared\u003C\u002Fstrong\u003E. Помимо этого, фичи внутри \u003Cstrong\u003Eshared \u003C\u002Fstrong\u003Eделились на \u003Cstrong\u003Ecore \u003C\u002Fstrong\u003Eи \u003Cstrong\u003Efeature\u003C\u002Fstrong\u003E. Соответственно, в какой папке лежал gradle-модуль, то имя папки добавлялось префиксом к названию модуля. Как можете заметить на картинке, с \u003Cstrong\u003Ecore \u003C\u002Fstrong\u003Eчто-то было не так. По правилам префикс у названия фичей должен быть \u003Cem\u003E“shared-core-”.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1c1\u002F182\u002F2ee\u002F1c11822eed0f6f2d20547878cf85412c.png\" data-width=\"1920\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EОсновная логика приложений лежала в папках соответствующих названиям приложений \u003Cstrong\u003Eapplicant \u003C\u002Fstrong\u003E(соискательское\u003Cstrong\u003E)\u003C\u002Fstrong\u003E и \u003Cstrong\u003Eemployer \u003C\u002Fstrong\u003E(работодательское).\u003Cbr\u002F\u003EСтруктура была аналогична папке \u003Cstrong\u003Eshared \u003C\u002Fstrong\u003Eи фичи в них именовались так:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F675\u002F1d3\u002Fbf5\u002F6751d3bf59a295a846359cea3fb267b3.png\" data-width=\"1920\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb02\u002Fc8c\u002F0b2\u002Fb02c8c0b2a9cd16f412544e4ee54b951.png\" data-width=\"1920\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Ch2\u003EПроблемы с именованием\u003C\u002Fh2\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EРасположение модулей не мэтчилось с их названием, что затрудняло подключение модулей, а иногда и путало, особенно новых разработчиков\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EБардак в названии пакетов, конечно были какие то правила, но за 3 года, они тоже менялись, а пакеты могли называться по-разному, иногда даже совпадали у некоторых разных фич\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EИ выход из всего этого был —  РЕНЕЙМИНГ!\u003C\u002Fp\u003E\u003Ch2\u003EРетроспектива ренейминга\u003C\u002Fh2\u003E\u003Cp\u003EА теперь самое интересное. Расскажу про новую структуру проекта.\u003C\u002Fp\u003E\u003Cp\u003EНачнем с небольшой ретроспективы и разберемся, с какими проблемами мы столкнулись.\u003C\u002Fp\u003E\u003Cp\u003EДо начала рефакторинга мы определились какой хотим видеть новую структуру.\u003C\u002Fp\u003E\u003Cp\u003EВо время праздничных выходных в феврале мы начали переносить файлы по новым папкам и менять имена пакетов с помощью разного рода скриптов.\u003C\u002Fp\u003E\u003Cp\u003EВремя было выбрано специально, чтобы никто параллельно ничего не делал.Но работа затянулась.  Тогда мы плохо понимали масштаб возложенной на нас задачи.\u003C\u002Fp\u003E\u003Cp\u003EИ поэтому решили для начала вручную составить  гигантский чеклист того, что предстоит сделать, формата \"как модуль назывался -\u003E как будет называться\". А также за одно переименовать пакеты в соответсвии с названием модулей\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EОн выглядел примерно так\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode\u003E#### feature-chat --\u003E chat\n\n#### feature-chat\u002Fcore\n\n- [x] applicant-feature-chat-core-data\n   — [x] rename module: applicant-feature-chat-core-data -\u003E :applicant:feature:chat:core:data\n   — [x] rename package: ru.hh.applicant.feature.chat.screen_core_data -\u003E ru.hh.applicant.feature.chat.core.data\n\n- [x] applicant-feature-chat-core-network\n   — [x] rename module: applicant-feature-chat-core-network -\u003E :applicant:feature:chat:core:network\n   — [x] rename package: ru.hh.feature_chat_network -\u003E ru.hh.applicant.feature.chat.core.network\n   \n#### feature-chat\u002Ffeature\n\n- [x] applicant-feature-chat-list\n   — [x] rename module: applicant-feature-chat-list -\u003E :applicant:feature:chat:chat-list\n   — [x] rename package: ru.hh.feature_chat_list -\u003E ru.hh.applicant.feature.chat.list\n   \nи так далее\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EИ даже после этого мы не до конца осознали, что нора, в которую мы залезли  — не кроличья. \u003C\u002Fp\u003E\u003Cp\u003EПоэтому первые модули было решено перенести просто руками, в Android Studio. После 10 модулей стало понятно, что git-история этих файлов исчезла. Терять историю нам однозначно не хотелось, поэтому мы вспомнили про такую команду как \u003Cem\u003Egit mv\u003C\u002Fem\u003E, которая позволяет без потери истории перенести файлы из одной папки в другую. \u003C\u002Fp\u003E\u003Cp\u003EПопытавшись перенести несколько модулей с использованием git mv, мы сильно взгрустнули. Потому что писать руками эти команды было очень долго и муторно. \u003C\u002Fp\u003E\u003Cp\u003EНужно было искать какое-то автоматическое решение. Поэтому мы написали простой bash-скрипт, который для двух заданных папок генерил тонну команд git mv, которые можно было скопировать и сразу запустить.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EА вот и сам скриптик на генерацию git mv команд\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E#!\u002Fbin\u002Fbash\n\nreadonly LOCAL_PATH=$1\nreadonly START_FOLDER=$2\nreadonly START_PACKAGE=$3\nreadonly TARGET_FOLDER=$4\nreadonly TARGET_PACKAGE_NAME=\"$5\"\n\necho \"===== MV COMMANDS GENERATOR =====\"\necho \"LOCAL_PATH: ${LOCAL_PATH}\"\necho \"START_FOLDER: ${START_FOLDER}\"\necho \"START_PACKAGE: ${START_PACKAGE}\"\necho \"TARGET_FOLDER: ${TARGET_FOLDER}\"\necho \"TARGET_PACKAGE_NAME: ${TARGET_PACKAGE_NAME}\"\n\nreadonly SPLITTED_TARGET_PACKAGE=(${TARGET_PACKAGE_NAME\u002F\u002F.\u002F })\n\nTARGET_PATH_PARTS=\"\"\n\nfor package_part in \"${SPLITTED_TARGET_PACKAGE[@]}\"; do\n TARGET_PATH_PARTS=\"${TARGET_PATH_PARTS}\u002F${package_part}\"\ndone\n\nreadonly SOURCE_SET_FOLDER=\"\u002Fsrc\u002Fmain\u002Fjava\"\nreadonly SOURCE_KOTLIN_SET_FOLDER=\"\u002Fsrc\u002Fmain\u002Fkotlin\"\nreadonly DESIRED_CODE_ROOT_FOLDER=\"${START_FOLDER}${SOURCE_SET_FOLDER}${TARGET_PATH_PARTS}\"\n\necho \"DESIRED_CODE_ROOT_FOLDER: ${DESIRED_CODE_ROOT_FOLDER}\"\n\nreadonly SPLITTED_START_PACKAGE=(${START_PACKAGE\u002F\u002F.\u002F })\n\nSTART_PATH_PARTS=\"\"\n\nfor package_part in \"${SPLITTED_START_PACKAGE[@]}\"; do\n START_PATH_PARTS=\"${START_PATH_PARTS}\u002F${package_part}\"\ndone\n\nSTART_CODE_ROOT_FOLDER=\"${START_FOLDER}${SOURCE_SET_FOLDER}${START_PATH_PARTS}\"\n\nif [ ! -d \"${START_CODE_ROOT_FOLDER}\" ]; then\n   echo \"... there is no \u002Fjava source set --\u003E \u002Fkotlin source set exists\"\n   START_CODE_ROOT_FOLDER=\"${START_FOLDER}${SOURCE_KOTLIN_SET_FOLDER}${START_PATH_PARTS}\"\nfi\n\nreadonly FULL_START_PATH=\"$(cd \"$(dirname \"${START_CODE_ROOT_FOLDER}\")\"; pwd)\u002F$(basename \"${START_CODE_ROOT_FOLDER}\")\"\n\necho \"START_CODE_ROOT_FOLDER: ${START_CODE_ROOT_FOLDER}\"\necho \"FULL_START_PATH: ${FULL_START_PATH}\"\necho \"\"\necho \"======= Generation result ======\"\necho \"\"\n# Первая команда — создаём директорию для переноса кода\necho \"mkdir -p ${DESIRED_CODE_ROOT_FOLDER} &amp;&amp; \\\\\"\n# Перечисляем команды для аккуратного переноса кода\n\nfor code_directory in ${FULL_START_PATH}\u002F* ; do\n   NAME=\"${code_directory\u002F${LOCAL_PATH}\u002F.}\"\n   echo \"git mv ${NAME} ${DESIRED_CODE_ROOT_FOLDER} &amp;&amp; \\\\\"\ndone\n\n# Последняя команда — перенос кода в target_folder\necho \"git mv ${START_FOLDER} ${TARGET_FOLDER}\"\necho \"\"\necho \"=================================\"\necho \"\"\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EДело пошло чуть веселее. Но перенос папок — это всего лишь одна часть истории. Вторая часть заключалась в том, что мы, помимо простого переноса папок, захотели ещё и ПЕРЕИМЕНОВАТЬ некоторые модули, о чем я писал выше, добавив структуры не только в иерархию папок, но и в иерархию package-ей. \u003C\u002Fp\u003E\u003Cp\u003EЧтобы было вот так:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Eru.hh.feature_chat_list -\u003E ru.hh.applicant.feature.chat.list\nru.hh.feature_chat_network -\u003E ru.hh.applicant.feature.chat.core.network\nru.hh.applicant.feature.chat.screen_core_data -\u003E ru.hh.applicant.feature.chat.core.data\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПоэтому помимо генерации команд \u003Cem\u003Egit mv\u003C\u002Fem\u003E, нужно было ещё сгенерить команды для переименования одних package-ей в другие. Для этого мы тоже написали дополнительный скрипт, который генерил команды для вызова скрипта переименования.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EСкрип запуска скрипта переименования\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Ereadonly START_FOLDER=$1\nreadonly START_PACKAGE=$2\nreadonly REPLACE_PACKAGE=$3\n\necho \"START_FOLDER = ${START_FOLDER}\"\necho \"START_PACKAGE = ${START_PACKAGE}\"\necho \"REPLACE_PACKAGE = ${REPLACE_PACKAGE}\"\necho \"\"\necho \"=========\"\necho \"\"\n\nfor filename in ${START_FOLDER}\u002F*; do\n   withoutPath=$(basename -- \"$filename\")\n   fff=\"${withoutPath%.*}\"\n   echo \"sh global_rename.sh ${START_PACKAGE}.${fff} ${REPLACE_PACKAGE}.${fff} &amp;&amp; \\\\\"\ndone\necho \"\"\necho \"=========\"\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EСам скрипт переименования пакетов\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E#!\u002Fbin\u002Fbash\n\nreadonly OLD_PACKAGE=$1\nreadonly NEW_PACKAGE=$2\n\nfind . -type d \\( \\\n   -name 'firebase' -o \\\n   -name 'gradle' -o \\\n   -name 'hooks' -o \\\n   -name 'lint' -o \\\n   -name 'profiling' -o \\\n   -name 'scripts' -o \\\n   -name 'detekt' -o \\\n   -name '.git' -o \\\n   -name '.gradle' -o \\\n   -name '.mainframer' -o \\\n   -name 'build' -o \\\n   -name '.idea' -o \\\n   -name 'android-style-guide' -o \\\n   -name 'ci' \\\n \\) -prune -o \\\n -type f \\( \\\n   -name '*.java' -o \\\n   -name '*.kt' -o \\\n   -name '*.gradle' -o \\\n   -name '*.xml' -o \\\n   -name '*.txt' \\\n \\) \\\n -print0 | xargs -0 sed -i '' \"s\u002F${OLD_PACKAGE}\u002F${NEW_PACKAGE}\u002Fg\"\n\necho \"done rename for ( ${OLD_PACKAGE} \u002F ${NEW_PACKAGE} )\"\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EВ итоге мы просидели все выходные, по очереди генерируя команды для каждого модуля и проверяя, собирается ли приложение и запускается ли оно вообще.\u003Cbr\u002F\u003EТак прошло 3 дня и две ночи...\u003C\u002Fp\u003E\u003Cp\u003EОтветственные за это люди ушли отдыхать, а остальные разработчики продолжили, но у нас ничего не вышло.\u003C\u002Fp\u003E\u003Cp\u003EА не получилось потому, что:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eв больших фиче ветках разработчиков было много изменений и таких веток было несколько, если бы каждый мержил себе сам, то он с большей вероятностью кто-то мог ошибиться где-то\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eтакже некоторые ветки пересекались по изменениям и было трудно потом все это смержить еще и с ренеймингом\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПодумав, мы решили что было бы хорошо, если кто-то один замержит ренейминг везде!\u003C\u002Fp\u003E\u003Cp\u003EПоэтому решили фиче ветки смержить сразу в develop, а те кто не хочет мержить сейчас, а хотят еще поработать, будут потом сами разруливать конфликты с новым develop.\u003C\u002Fp\u003E\u003Cp\u003EИ мы не до конца понимали, чем нам это грозит...\u003C\u002Fp\u003E\u003Cp\u003EСмержив все, что можно было в develop, в пятницу мы объявили кодфриз и избранный занялся мержем ренейминга в develop.\u003C\u002Fp\u003E\u003Cp\u003EЗа неделю работы команд накопилось кучу изменений, и при мерже вылезло много конфликтов.\u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EВот например\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Это малая часть конфликтов\" title=\"Это малая часть конфликтов\" height=\"1408\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F999\u002F939\u002Fbf3\u002F999939bf343e2b1b55875d57c4cf5518.png\" data-width=\"2792\"\u002F\u003E\u003Cfigcaption\u003EЭто малая часть конфликтов\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EПосле мержа ветки с ренеймингом в старый develop (недельной давности), старые фичи сменили имя и пакет, по факту это означало, что они отправились в другую папку.\u003C\u002Fp\u003E\u003Cp\u003EОбратите внимание на файлы, все хорошо, они лежат в новом месте.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Старое -\u003E Новое расположение фичи\" title=\"Старое -\u003E Новое расположение фичи\" height=\"1168\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7c2\u002Fa7b\u002F61f\u002F7c2a7b61f0532035e59a168d34b31a52.png\" data-width=\"2558\"\u002F\u003E\u003Cfigcaption\u003EСтарое -\u003E Новое расположение фичи\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EНо при мерже ренейминга в новый develop после недельной работы, появились такие фантомные структуры:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"&quot;Фантомная&quot; старая структура фичи\" title=\"&quot;Фантомная&quot; старая структура фичи\" height=\"1080\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa03\u002Fb4f\u002F74f\u002Fa03b4f74f7aec7f8535f4abe7bc245f2.png\" data-width=\"1920\"\u002F\u003E\u003Cfigcaption\u003E\"Фантомная\" старая структура фичи\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПо старым путям пакетов лежали файлы, которые были изменены разработчиками, но изменены они были в старой структуре, и таких мест было много... голова шла кругом.\u003C\u002Fp\u003E\u003Cp\u003EЕстественно, все это править руками будет долго... Чтобы ускорить процесс, в качестве вспомогательного инструмента, была выбрана утилита \u003Cstrong\u003Ersync\u003C\u002Fstrong\u003E, потому что она умеет рекурсивно мержить папки друг с другом, и ей можно указать стратегию разрешения конфликтов (перезапись, оставить новое, оставить старое, etc.).\u003Cbr\u002F\u003EВ консоли с ее помощью рекурсивно переносили папки фичей. Из папки со старым названием в папку с новым.\u003C\u002Fp\u003E\u003Cp\u003EЗатем с помощью волшебных настроек \u003Cstrong\u003EAndroid Studio — Optimize imports on fly\u003C\u002Fstrong\u003E и\u003Cstrong\u003E Add unambiguous imports on the fly\u003C\u002Fstrong\u003E, были поправлены проблемы с импортами. Да, мы заходили ручками в каждый файл.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Настройки Android Studio\" title=\"Настройки Android Studio\" height=\"412\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff86\u002Fd00\u002Fa1a\u002Ff86d00a1aa5b13224441b4fbf4dc3b05.png\" data-width=\"1716\"\u002F\u003E\u003Cfigcaption\u003EНастройки Android Studio\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПо-хорошему, надо было идти сначала от корневых модулей (\u003Cem\u003Eshared\u002Fcore\u003C\u002Fem\u003E) и делать регулярный синк проекта в IDE. Так пришлось бы гораздо меньше страдать потом с импортами при переносах файлов, ибо Android Studio автоматически бы их сразу переименовывала во всех местах, куда дотянется.\u003C\u002Fp\u003E\u003Cp\u003EНо эта мысль пришла в наши светлые головы уже после проделанной работы и полученного опыта.\u003C\u002Fp\u003E\u003Cp\u003EСпустя пару дней \u003Cs\u003Eмучений\u003C\u002Fs\u003E мержа, develop был актуализирован и содержал новую структуру папок и новые имена пакетов.\u003C\u002Fp\u003E\u003Cp\u003EА ребятам, которые не стали мержить свои ветки в develop, была предоставлена инструкция, как безболезненно влить в себе новый develop.\u003C\u002Fp\u003E\u003Cp\u003EНо все было не так просто, как хотелось бы.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EПриведу список основных пунктов, если вдруг вам понадобится:\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EВмержить к себе в ветку develop и сохранить лог конфликтов, \u003Cs\u003Eна память\u003C\u002Fs\u003E чтобы понимать поле работы\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКонфликты типа\u003Cem\u003E modified — modified\u003C\u002Fem\u003E разрешить самим, руками, но таких конфликтов было минимум\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EОстальные конфликты нужно разрешить в свою пользу\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНужно перевести все созданные вами папки на новую структуру\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКаждый перенос лучше делать отдельным коммитом, чтобы ничего не потерять и чтобы лучше контролировать процесс\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EРазрулить силами Android Studio все неправильные импорты\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EУдалить все неиспользуемые папки\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EВ теории звучит просто, но в реальных условиях:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eесли переносить \u003Cstrong\u003Eмодуль\u002Fмодули\u003C\u002Fstrong\u003E у себя в ветке, то рефакторинг будет применен к модулю, который располагался в \u003Cem\u003Eстаром\u003C\u002Fem\u003E месте. Приходилось повторить все, что уже сделал, но для перенесенного модуля (получилась \u003Cem\u003Eдвойная работа\u003C\u002Fem\u003E) + удалить старый модуль, причем сделать аккуратно, чтобы осталась \u003Cem\u003Eистория гита\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eесли переносить \u003Cstrong\u003Eфайлы \u003C\u002Fstrong\u003Eу себя в ветке, то рефакторинг будет применен к \u003Cem\u003Eстарым\u003C\u002Fem\u003E файлам, естественно появлялась неактуальная \u003Cem\u003Eфантомная\u003C\u002Fem\u003E структура файлов, которые были уже перенесены, поэтому приходилось аккуратно их объединить с новыми\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВсего файлов с конфликтами было ~500 в ~50 модулях.\u003C\u002Fp\u003E\u003Ch2\u003EИтоги ренейминга\u003C\u002Fh2\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EНазвания всех модулей соответствуют структуре папок.\u003Cbr\u002F\u003EИ теперь включать gradle-модуль в \u003Cstrong\u003Esettings.gradle \u003C\u002Fstrong\u003Eможно через\u003Cbr\u002F\u003E\u003Cstrong\u003E\u003Cem\u003Einclude(':shared:feature:location')\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003Cem\u003E, \u003C\u002Fem\u003Eпоскольку путь совпадает с неймингом.\u003Cbr\u002F\u003E\u003Cbr\u002F\u003EДля примера, раньше это делалось вот так:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"252\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7f1\u002F2b7\u002Fe0c\u002F7f12b7e0cbc8412c3e124c3debe9aa35.png\" data-width=\"3508\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EВсе модули из папки \u003Cstrong\u003Efeature \u003C\u002Fstrong\u003Eиз корня проекта (о чем я писал вначале), переместились на свои законные места в папку \u003Cstrong\u003Eapplicant\u002Ffeature\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"568\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F26e\u002Fb09\u002F145\u002F26eb091456743523a034b047119cbcff.png\" data-width=\"1358\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EИмена пакетов стали соотноситься с расположением фичи.\u003Cbr\u002F\u003EНапример, фича геолокации \u003Cstrong\u003E\u003Cem\u003E:shared:feature:location\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E получила пакет \u003Cstrong\u003E\u003Cem\u003Eru.hh.shared.feature.location\u003C\u002Fem\u003E.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EGradle-модули избавились от префиксов \u003Cem\u003Efeature\u003C\u002Fem\u003E, \u003Cem\u003Eshared, core \u003C\u002Fem\u003Eи т.д.\u003Cbr\u002F\u003EНо префиксы сабфичей решено было оставить... А потом и их решили не писать :)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПоявилась возможность статической валидация подключения модулей.\u003Cbr\u002F\u003EВ будущем будем проверять нейминг модулей и пакетов, а также корректность связей между модулями разных типов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Ch2\u003EНаши рекомендации\u003C\u002Fh2\u003E\u003Cp\u003EПрежде чем идти в эту историю, надо написать скрипты, которые автоматизируют большую часть работы. Можно воспользоваться нашими наработками, но сначала нужно проверить их на валидность вашему проекту.\u003C\u002Fp\u003E\u003Cp\u003EИ \u003Cstrong\u003Eосновной\u003C\u002Fstrong\u003E совет — не делайте руками, делайте сразу через скрипты. Это  сэкономит кучу нервов и времени.\u003C\u002Fp\u003E\u003Cp\u003EТакже нужно составить чеклист переноса модулей\u002Fфайлов. И после каждого этапа переноса по чеклисту нужно проверять: собирается ли проект. Да, это долго и замедляет процесс, но сильно упрощает жизнь в дальнейшем. По крайней мере будет понимание, что “вот из-за этого у меня проект развалился“.\u003C\u002Fp\u003E\u003Cp\u003EДля подобных глобальных изменений нужно обязательно уведомлять всю команду и заранее договариваться, как будет идти разработка в это время, чтобы минимизировать конфликты. Самый радикальный инструмент для этого — фичефриз\u002Fкодфриз etc. Если вы проводите такой рефакторинг,  поддерживайте регулярную связь с командой, сразу же сообщайте о проблемах и потенциально сложных для мерджа местах.\u003C\u002Fp\u003E\u003Cp\u003EИ не стоит недооценивать эту задачу, если у вас большая кодовая база. Она стопудово займёт больше времени, чем вам кажется.\u003C\u002Fp\u003E\u003Cp\u003EНа этом все, если у вас остались какие-либо вопросы или вы можете поделиться собственным опытом, пишите в  комментариях.\u003C\u002Fp\u003E\u003Cp\u003EСпасибо за внимание ;)\u003C\u002Fp\u003E\u003Ch2\u003EМаленький опрос для большого исследования\u003C\u002Fh2\u003E\u003Cp\u003EМы проводим ежегодное исследование технобренда крупнейших IT-компаний России. Нам очень нужно знать, что вы думаете про популярных (и не очень) работодателей. Опрос займет всего 10 минут.\u003C\u002Fp\u003E\u003Cp\u003EПройти опрос можно \u003Ca href=\"https:\u002F\u002Fq.hh.ru\u002Fpoll\u002FrXSnT57pKTGKkFCk6blfiB?source=habr\"\u003E\u003Cu\u003Eздесь\u003C\u002Fu\u003E\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"android"},{"titleHtml":"kotlin"},{"titleHtml":"renaming"},{"titleHtml":"ренейминг"},{"titleHtml":"gradle-модуль"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F189\u002F934\u002F87e\u002F18993487eb5fd0f9eb7d8109777dcf4c.jpg","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F189\u002F934\u002F87e\u002F18993487eb5fd0f9eb7d8109777dcf4c.jpg","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fhh\\\u002Fblog\\\u002F582106\\\u002F\"},\"headline\":\"Глобальный ренейминг в Android-проекте\",\"datePublished\":\"2021-10-07T13:29:37+03:00\",\"dateModified\":\"2021-10-07T15:18:26+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Евгений Таскаев\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &nbsp;&mdash; я Android-разработчик в фичевой команде h...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fhh\\\u002Fblog\\\u002F582106\\\u002F#post-content-body\",\"about\":[\"c_hh\",\"h_mobile_dev\",\"h_android_dev\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F582106\\\u002F1a717c3e36f40f6723cb6f7e51eefc09\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F37f\\\u002Fbbe\\\u002F6e6\\\u002F37fbbe6e6f2a0eb4bd806e3d9cb8909f.jpeg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F03e\\\u002Fdc8\\\u002F1cd\\\u002F03edc81cd1286a67899e69d86e75c03a.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F094\\\u002F89c\\\u002F1e4\\\u002F09489c1e4ce67baec57b9ba1ab0946f2.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F54b\\\u002F9b5\\\u002Fd76\\\u002F54b9b5d76204d23092a49a5edbe5394f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F1c1\\\u002F182\\\u002F2ee\\\u002F1c11822eed0f6f2d20547878cf85412c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F675\\\u002F1d3\\\u002Fbf5\\\u002F6751d3bf59a295a846359cea3fb267b3.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fb02\\\u002Fc8c\\\u002F0b2\\\u002Fb02c8c0b2a9cd16f412544e4ee54b951.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F999\\\u002F939\\\u002Fbf3\\\u002F999939bf343e2b1b55875d57c4cf5518.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F7c2\\\u002Fa7b\\\u002F61f\\\u002F7c2a7b61f0532035e59a168d34b31a52.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa03\\\u002Fb4f\\\u002F74f\\\u002Fa03b4f74f7aec7f8535f4abe7bc245f2.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Ff86\\\u002Fd00\\\u002Fa1a\\\u002Ff86d00a1aa5b13224441b4fbf4dc3b05.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F7f1\\\u002F2b7\\\u002Fe0c\\\u002F7f12b7e0cbc8412c3e124c3debe9aa35.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F26e\\\u002Fb09\\\u002F145\\\u002F26eb091456743523a034b047119cbcff.png\"]}","metaDescription":"Привет-привет! Не будем мять бока и начнем максимально быстро.Но для начала представлюсь. Меня зовут Таскаев Евгений &nbsp;— я Android-разработчик в фичевой команде hh.ru. Пилю всякие интересные фичи,...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"hh":{"alias":"hh","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002Ffc5\u002F967\u002F06f\u002Ffc596706fd933f4fdbf8bb4ac5435f5d.jpg","titleHtml":"HeadHunter","descriptionHtml":"HR Digital","relatedData":null,"statistics":{"postsCount":145,"newsCount":0,"vacanciesCount":0,"employeesCount":62,"careerRating":null,"subscribersCount":3947,"rating":164.1,"invest":null},"foundationDate":{"year":"2000","month":"05","day":"23"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"http:\u002F\u002Fhh.ru","staffNumber":"501–1 000 человек","registrationDate":"2008-08-09T07:42:43+00:00","representativeUser":null,"contacts":[{"title":"Facebook","url":"https:\u002F\u002Ffacebook.com\u002Fheadhuntergroup"},{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Fhh_ru"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fheadhunter"},{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fhhru"},{"title":"Instagram","url":"https:\u002F\u002Finstagram.com\u002Fhh_ru"}],"settings":{"analyticsSettings":[{"type":"ga","trackingId":"UA-39616667-7"}],"branding":{"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fbranding\u002F2f5\u002Fe83\u002Fc30\u002F2f5e83c30f413a6dcbddafbffc2df3e7.jpg","linkUrl":"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUCWztYdpQS3v9Gjno8bBZcNA","pixelUrl":""},"status":"active"},"metadata":{"titleHtml":"HeadHunter, Москва - HR Digital с 23 мая 2000 г.","title":"HeadHunter, Москва - HR Digital с 23 мая 2000 г.","keywords":["Разработка мобильных приложений","Разработка под Android","Разработка под iOS","Swift","Тестирование IT-систем"],"descriptionHtml":"145 статей от авторов компании HeadHunter","description":"145 статей от авторов компании HeadHunter"},"aDeskSettings":null,"careerAlias":"hh","maxCustomTrackerLinks":3}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
