<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация) / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/otus\/blog\/582266\/"},"headline":"Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)","datePublished":"2021-10-07T20:50:01+03:00","dateModified":"2021-10-08T01:02:19+03:00","author":{"@type":"Person","name":"OTUS"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутиз...","url":"https:\/\/habr.com\/ru\/company\/otus\/blog\/582266\/#post-content-body","about":["c_otus","h_programming","h_flutter","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/582266\/ae64becb14f25799760c12d93d8ecce1\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/219\/9e6\/1c6\/2199e61c668caaa47c5bd644e8472d6d.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/f73\/804\/cc6\/f73804cc68c246c0a420995faeda70dd.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="582266" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-07T17:50:01.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/582266/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/otus/blog/582266/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/582266/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="otus" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/otus/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/968/422/761/968422761136a38a89fc391fd927f903.jpg" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">404.8</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/otus/profile/" class="tm-company-card__name">
        OTUS
      </a> <div class="tm-company-card__description">Цифровые навыки от ведущих экспертов</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/MaxRokatansky/" title="MaxRokatansky" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/b9f/baf/5f9/b9fbaf5f96ae52973706a0716bd9216e.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/MaxRokatansky/" class="tm-user-info__username">
      MaxRokatansky
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-07T17:50:01.000Z" title="2021-10-07, 20:50">7  октября   в 20:50</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/otus/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании OTUS</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/flutter/" class="tm-article-snippet__hubs-item-link"><span>Flutter</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://resocoder.com/2021/09/16/flutter-bottom-navigation-with-nested-routing/" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Ashley Novik
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="/img/image-loader.svg" height="439" data-src="https://habrastorage.org/getpro/habr/upload_files/219/9e6/1c6/2199e61c668caaa47c5bd644e8472d6d.png" data-width="780"/><figcaption></figcaption></figure><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/615f25896a73daf6662a1b95" data-style="" id="615f25896a73daf6662a1b95" width=""></div><p>Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению пользовательского опыта. Это также сделает код намного более удобным для разработчиков. </p><p>Настройка маршрутизации во Flutter, особенно в <em>Navigator 2.0</em>, может быть очень утомительной и отнимающей много времени. Именно здесь на помощь приходит AutoRoute с его интуитивно понятным API и удобной генерацией кода, которая сэкономит вам много времени и усилий.</p><p>В этом уроке вы узнаете, как использовать простоту пакетов <a href="https://pub.dev/packages/auto_route"><u>AutoRoute</u></a> и <a href="https://pub.dev/packages/salomon_bottom_bar"><u>Salomon Bottom Bar</u></a> для создания элегантной нижней навигационной панели с вложенной маршрутизацией.</p><h3>Готовое приложение</h3><p>В этом уроке мы создадим простое приложение, которое будет состоять из трех основных разделов.</p><ul><li><p>Посты</p></li><li><p>Пользователи</p></li><li><p>Настройки</p></li></ul><p>В разделе "Посты" будет отображаться несколько макетов с плитками постов. При нажатии на них вы сможете перейти на страницу соответствующего поста. В разделе "Пользователи" отображаются макеты аватаров пользователей. При нажатии на аватар пользователя вы попадете на соответствующую страницу профиля пользователя. Наконец, в разделе настроек есть только одна страница, на которой отображается информация об учетной записи пользователя.</p><p>Навигация по этим трем разделам <em>верхнего уровня</em> осуществляется с помощью минималистичной, настраиваемой нижней навигационной панели. Каждый раздел представляет собой <em>отдельный маршрутизатор</em>, расположенный внутри <em>корневого маршрутизатора</em>. Маршрутизаторы posts (постов) и users (пользователей) имеют дочерние маршруты, через которые можно переходить на страницы отдельных постов и профилей пользователей.</p><p>В этом руководстве мы рассмотрим самый простой способ настройки подобной системы.</p><p><a href="https://resocoder.com/2021/09/16/flutter-bottom-navigation-with-nested-routing/"><em>Смотрите анимацию в оригинале</em></a></p><h3>Начало работы</h3><h4>Обновление Flutter 2.5</h4><p><em>8 сентября 2021 года</em> команда Google Flutter объявила о выпуске <strong>Flutter 2.5</strong> и <strong>Dart 2.14</strong>. На этом занятии мы выполним разработку с использованием обновленных версий. Предоставленные файлы стартового и готового проектов построены с использованием новых версий Dart и Flutter. Поэтому, если вы еще не обновились, обязательно выполните команду <code>flutter upgrade</code> в своем терминале, прежде чем продолжить изучение этого руководства. </p><p>Если по какой-то причине вы еще не готовы к обновлению, не переживайте. Вы все равно сможете продолжить обучение с небольшими корректировками.</p><ul><li><p>В новой версии Flutter каждый раз, когда вы создаете новый проект, в него будет включена зависимость для разработки <code>flutter_lints</code>. Это поможет вам писать более чистый код прямо из коробки. Если вы еще не обновились, то не увидите существенной разницы в этом уроке, кроме зависимости для разработки (dev-зависимости) <code>flutter_lints</code> в файле <strong>pubspec.yaml</strong>.</p></li></ul><ul><li><p>Некоторые зависимости, которые мы будем использовать в этом проекте, зависят от <strong>meta 1.7.0</strong>, и если вы еще не обновились, то столкнетесь с проблемой, поскольку предыдущая версия Flutter привязана к более ранней версии <strong>meta</strong>. Вы можете легко решить это, <em>переопределив версию meta</em>. Просто добавьте следующий код в ваш файл <strong>pubspec.yaml</strong>:</p></li></ul><pre><code>dependency_overrides:
  meta: ^1.7.0</code></pre><ul><li><p>Если вы хотите продолжить обучение, используя файлы начального проекта, или просмотреть готовый проект на своем устройстве, но при этом еще не обновились, необходимо сделать следующее:</p></li></ul><ol><li><p>Скачайте файлы проекта с GitHub (ссылки приведены ниже).</p></li><li><p>Создайте <strong>новый проект Flutter</strong> на своем компьютере. </p></li><li><p>Скопируйте папку <strong>lib </strong>из загруженного проекта и вставьте ее на место папки <strong>lib</strong> во вновь созданном проекте. </p></li><li><p>Исправьте импорты.</p></li><li><p>Убедитесь, что вы <strong>переопределили </strong>мета-зависимость, как указано выше. </p></li></ol><h3>Зависимости</h3><p>В этом руководстве мы будем использовать некоторые зависимости и dev-зависимости.</p><p>Для маршрутизации будут использоваться зависимость <a href="https://pub.dev/packages/auto_route"><u>auto_route</u></a> и <em>dev-зависимость</em> <a href="https://pub.dev/packages/auto_route_generator"><u>auto_route_generator</u></a>. Обе они будут версии <strong>2.3.2</strong>. Генератор автоматических маршрутов поможет нам генерировать код, который в противном случае нам пришлось бы писать самим. Именно этим и хорош AutoRoute, он позволяет нам обойтись без написания большого количества шаблонного кода. Для генерации кода нам также необходимо добавить <a href="https://pub.dev/packages/build_runner"><u>build_runner</u></a> версии <strong>2.1.2</strong> в качестве <em>dev-зависимости</em>.</p><p>Для создания стильной нижней навигационной панели мы воспользуемся пакетом <a href="https://pub.dev/packages/salomon_bottom_bar"><u>Salomon Bottom Bar</u></a>. Этот пакет был вдохновлен <a href="https://dribbble.com/shots/5925052-Google-Bottom-Bar-Navigation-Pattern/"><u>дизайном</u></a>, созданным Aurélien Salomon. Я выбрал именно его, потому что дизайн очень аккуратный и привлекательный, а реализация этой навигационной панели невероятно проста. Если вы когда-либо создавали виджет <code>BottomNavigationBar</code> во Flutter, то уже знаете, как настроить навигационную панель из пакета Salomon Bottom Bar. Их синтаксис практически идентичен. Для этого проекта мы будем использовать версию <strong>3.1.0</strong> пакета.</p><p>Перейдите к добавлению всех этих зависимостей. После этого ваш файл <strong>pubspec.yaml</strong> должен выглядеть примерно так:</p><pre><code>dependencies:
  flutter:
    sdk: flutter
  auto_route: ^2.3.2
  salomon_bottom_bar: ^3.1.0
  cupertino_icons: ^1.0.2

dev_dependencies:
  auto_route_generator: ^2.3.2
  build_runner: ^2.1.2</code></pre><blockquote><p>Если вы используете <strong>Visual Studio Code</strong>, то можете добавлять зависимости с помощью <em>палитры команд</em>. Благодаря обновленному <strong>плагину VS Code Flutter</strong> достаточно вызвать палитру команд и использовать команды "<strong>Dart: Add Dependency</strong>" и "<strong>Dart: Add Dev Dependency</strong>" для добавления пакетов в ваши проекты.</p></blockquote><h3>Обзор стартового проекта</h3><p>Для освобождения себя от забот по созданию большей части пользовательского интерфейса, в этом руководстве мы будем использовать стартовый проект. Чтобы проследить за ходом работы, можно взять <a href="https://github.com/ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial/tree/66e1a2e52e43b5aba570e3f5574c0a84dc02c48e"><u>стартовый</u></a> и уже <a href="https://github.com/ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial"><u>готовый</u></a> проекты с GitHub по ссылкам ниже.</p><div class="embed_link"><div class="embed__thumb" style="background-image: url(&quot;https://opengraph.githubassets.com/5e8f2af9d79b94ee67e8d071ea294367b696f8e352d4fca8707e8fe7b17c55b1/ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial&quot;);"></div><div class="embed__caption"><div class="embed__caption-title"><span>GitHub - ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial at 66e1a2e52e43b5aba570e3f5574c0a84dc02c48e</span></div><a href="https://github.com/ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial/tree/66e1a2e52e43b5aba570e3f5574c0a84dc02c48e" target="_blank" rel="noopener noreferrer nofollow" class="embed__caption-link">github.com</a></div></div><div class="embed_link"><div class="embed__thumb" style="background-image: url(&quot;https://opengraph.githubassets.com/5e8f2af9d79b94ee67e8d071ea294367b696f8e352d4fca8707e8fe7b17c55b1/ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial&quot;);"></div><div class="embed__caption"><div class="embed__caption-title"><span>GitHub - ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial</span></div><a href="https://github.com/ResoCoder/flutter-bottom-navigation-with-nested-routing-tutorial" target="_blank" rel="noopener noreferrer nofollow" class="embed__caption-link">github.com</a></div></div><p>В файле <strong>main.dart</strong> у нас есть <code>AppWidget</code>, который возвращает <code>MaterialApp</code>. Сейчас <code>MaterialApp</code> имеет виджет <code>PostsPage</code> в качестве аргумента <code>home</code>, но это изменится, когда мы реализуем маршрутизацию.</p><p>Затем в папке <strong>lib</strong> у нас также есть файл <strong>widgets.dart</strong>, в котором находятся виджеты <code>PostTile</code> и <code>UserAvatar</code>. Это необходимое разделение для оптимизации страниц, где используются эти виджеты. </p><p>Также у нас имеется папка data, внутри которой находится файл <strong>app_data.dart</strong>. Этот файл содержит классы <code>Post</code> и <code>User</code>. Эти классы используются при создании макетов данных для постов и пользователей в приложении.</p><blockquote><p>Обратите внимание, что способ передачи макетов данных в приложении <strong>не</strong> основан на лучших практиках. Это сделано в упрощенном виде, чтобы мы могли сосредоточиться на реализации маршрутизации.</p></blockquote><p>Остальные файлы проекта разделены на папки в соответствии с <em>функциями приложения</em>. Файлов уже довольно много, и поскольку мы будем добавлять их еще, то эта структура поможет сохранить порядок.</p><p><strong><u>Папка Posts</u></strong>:</p><p>В папке <strong>posts</strong> находятся файлы<strong> posts_page.dart</strong> и <strong>single_post_page.dart</strong>.</p><ul><li><p>В файле <strong>posts_page.dart</strong> у нас есть <code>StatelessWidget</code>, который будет отображать <code>Column</code> с тремя виджетами <code>PostTile</code>. Вы можете заметить, что на этой странице нет <code>Scaffold</code>. Когда мы перейдем к настройке нижней навигационной панели, вы поймете почему. </p></li></ul><ul><li><p>В файле <strong>single_post_page.dart</strong> содержится <code>StatelessWidget</code>, который будет <em>динамически</em> отображать страницу с названием и цветом поста, соответствующим <code>PostTile</code>, который был нажат на странице постов.</p></li></ul><p><strong><u>Папка Users</u></strong>:</p><p>В папке <strong>users</strong> находятся файлы <strong>user_page.dart</strong> и <strong>user_profile_page.dart</strong>.</p><ul><li><p><strong>Users_page.dart</strong> содержит <code>StatelessWidget</code>, который отображает <code>Column</code> с тремя виджетами <code>UserAvatar</code>. </p></li></ul><ul><li><p>В файле <strong>user_profile_page.dart</strong> находится <code>StatelessWidget</code>, который отображает страницу с <em>динамически</em> устанавливаемым цветом фона и именем пользователя, соответствующим <code>UserAvatar</code>, который был выбран на странице пользователей.</p></li></ul><p><strong><u>Папка настроек</u></strong>:</p><p>В папке <strong>настроек (settings)</strong> находится только один файл — <strong>settings_page.dart</strong>. Это самый простой из всех файлов функций, которые мы рассмотрели. Расположенный здесь виджет <code>SettingsPage</code> без сохранения состояния, который просто отображает текстовый заголовок и некоторые фейковые данные учетной записи пользователя.</p><p>Теперь, когда у вас есть ясное представление о стартовом проекте, давайте приступим к реализации маршрутизации. </p><h3>Конфигурация вложенной маршрутизации</h3><p>В этом разделе мы настроим файл, который будет служить образцом для сгенерированного кода маршрутизации. Если вы работали с <code>AutoRoute</code> не так давно, то синтаксис здесь должен выглядеть довольно знакомым. Имейте в виду, что эта конфигурация будет отличаться от стандартной настройки маршрутизации <code>AutoRouter</code>. Это связано с тем, что мы будем следовать особым рекомендациям по созданию нижней панели навигации с вложенной маршрутизацией.</p><h4>Исходная маршрутизация - HomePage</h4><p>Прежде чем мы настроим маршрутизацию, давайте сначала убедимся, что у нас есть все необходимые для этого файлы. Создайте <strong>новый файл</strong> в папке <strong>lib</strong> и назовите его <strong>home_page.dart</strong>. Это будет файл, в котором мы определим нижнюю навигационную панель. Пока что просто создайте здесь <code>StatelessWidget</code>. Неважно, что он будет возвращать, потому что мы изменим это в ближайшее время. Пока можно просто вернуть <code>Container</code>.</p><pre><code class="dart">class HomePage extends StatelessWidget {
  const HomePage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container();
  }
}</code></pre><h4>Конфигурация AutoRoute - router.dart</h4><p>Теперь создайте новую папку в папке <strong>lib</strong> и назовите ее "<strong>routes</strong>". В ней создайте новый файл и назовите его<strong> router.dart</strong>. Это файл, в котором мы создадим образец для генератора кода.</p><p>Начнем настройку маршрутизатора с начального маршрута <code>HomePage</code>. Не забудьте импортировать пакет auto route и файл <strong>home_page.dart</strong>.</p><pre><code class="dart">@MaterialAutoRouter(
  replaceInRouteName: 'Page,Route',
  routes: &lt;AutoRoute>[
    AutoRoute(
      path: '/',
      page: HomePage,
    )
  ],
)
class $AppRouter {}</code></pre><p>Синтаксис в данном случае может показаться немного необычным, но это то, что требуется для правильной работы генерации кода.</p><p>Здесь мы указываем аргумент <code>replaceInRouteName</code>, чтобы сделать наши имена маршрутов менее избыточными. Когда вы будете переходить от одной страницы к другой, придется использовать сгенерированные имена маршрутов. Если не указать <code>replaceInRouteName</code> так, как мы сделали здесь, имя маршрута для нашей страницы <code>SinglePostPage</code> будет <code>SinglePostPageRoute</code>. С настроенным <code>replaceInRouteName</code> сгенерированное имя маршрута в этом примере будет <code>SinglePostRoute</code>.</p><p>Затем мы предоставляем <code>List</code> объектов <code>AutoRoute</code> в качестве аргумента <code>routes</code>. Здесь у нас есть один объект <code>AutoRoute</code>, который устанавливает нашу <code>HomePage</code> в качестве <strong>начального маршрута</strong>, предоставляя "/" в качестве аргумента <code>path</code>.</p><p>Далее нам нужно создать <strong>маршрутизаторы</strong> для разделов "Сообщения", "Пользователи" и "Настройки" приложения. Для этого добавьте <code>List</code> объектов <code>AutoRoute</code> в качестве аргумента  <code>children</code> существующего объекта <code>AutoRoute</code>, как показано ниже. Здесь также необходимо импортировать все используемые файлы виджетов страниц.</p><pre><code class="dart">...
AutoRoute(
      path: '/',
      page: HomePage,
      children: [
        AutoRoute(
          path: 'posts',
          name: 'PostsRouter',
          page: EmptyRouterPage,
          children: [
            AutoRoute(path: '', page: PostsPage),
            AutoRoute(path: ':postId', page: SinglePostPage),
          ],
        ),
        AutoRoute(
          path: 'users',
          name: 'UsersRouter',
          page: EmptyRouterPage,
          children: [
            AutoRoute(path: '', page: UsersPage),
            AutoRoute(path: ':userId', page: UserProfilePage),
          ],
        ),
        AutoRoute(
          path: 'settings',
          name: 'SettingsRouter',
          page: SettingsPage,
        )
      ],
    )
...</code></pre><p>Теперь давайте разберемся, что именно мы здесь делаем.</p><h4>Маршрутизаторы постов и пользователей</h4><p>Маршрутизаторы постов и пользователей настраиваются одинаково, поэтому давайте обсудим все компоненты, присутствующие в их конфигурации.</p><ul><li><p><strong>path</strong>: Для аргумента <code>path</code> мы указываем имя пути, который хотелось бы использовать в маршрутизаторе.</p></li><li><p><strong>name</strong>: <code>String</code>, указанная в качестве аргумента name, будет использоваться для создания имени маршрутизатора. Это имя можно использовать во время доступа к маршрутизатору при настройке нижней панели навигации или для навигации между страницами, расположенными в разных маршрутизаторах/вкладках навигации.</p></li><li><p><strong>page</strong>: Здесь в качестве аргумента page мы указываем <code>EmptyRouterPage</code> (предоставляется пакетом <code>AutoRoute</code>). Это следует делать всякий раз, когда у вас есть <em>вложенные маршруты </em>для определенной нижней навигационной вкладки.</p></li><li><p><strong>children</strong>: Аргумент <code>children</code> принимает <code>List</code> объектов <code>AutoRoute</code>. Это будет <code>List</code> вложенных маршрутов, которые будут находиться внутри данного маршрутизатора. Первый маршрут имеет пустую <code>String</code> для аргумента <code>path</code>. Это означает, что это будет <strong>первая страница</strong>, которая будет отображаться при выборе соответствующей навигационной вкладки. Путь второго объекта <code>AutoRoute</code> выглядит немного иначе. Синтаксис <code>':postId'</code> и <code>':userId'</code> используется для создания <em>динамических сегментов</em>. При такой настройке, если вы запустите свое приложение в браузере и введете что-то вроде "<strong>/posts/1</strong>", вы попадете на страницу поста с полем <code>postId</code>, равным<strong> 1</strong>. Чтобы это работало правильно, вам также необходимо аннотировать параметры конструктора <code>postId</code> и <code>userId</code> в файлах страницы. Мы сделаем это в ближайшее время.</p></li></ul><h4>Настройки</h4><p>В маршрутизаторе настроек основные отличия заключаются в том, что здесь нет дочерних элементов и аргумент page установлен в <code>SettingsPage</code> вместо <code>EmptyRouterPage</code>. Это связано с тем, что у нас нет вложенных маршрутов, и в таком случае следует просто установить аргумент page на страницу, которую необходимо отобразить.</p><p>Прежде чем создать сгенерированный файл кода, давайте сделаем еще одну вещь. Как упоминалось ранее, для того чтобы динамические сегменты, определенные как <code>':postId'</code> и <code>':userId'</code>, работали, нам нужно перейти к файлам <strong>single_post_page.dart</strong> и <strong>user_profile_page.dart</strong> и аннотировать соответствующие параметры конструктора с помощью <code>@PathParam</code>(<code>'optional-alias'</code>). Если вы задаете псевдоним, он должен совпадать с именем сегмента, которое вы определили в файле<strong> router.dart</strong>. Если название вашего поля совпадает с именем сегмента, то вам не нужно задавать псевдоним. Сначала сделайте это для <code>SinglePostPage</code>.</p><pre><code class="dart">const SinglePostPage({
  Key? key,
  @PathParam() required this.postId,
}) : super(key: key);</code></pre><p>Поскольку название нашего поля <code>postId</code> совпадает с именем сегмента, определенным в файле <strong>router.dart</strong>, мы не стали включать псевдоним в аннотацию. Теперь вы можете сделать то же самое для страницы <code>UserProfilePage</code>.</p><pre><code class="dart">const UserProfilePage({
  Key? key,
  @PathParam() required this.userId,
}) : super(key: key);</code></pre><p>Чтобы создать файл с помощью генерации кода на основе созданного нами образца, выполните следующую команду терминала.</p><pre><code>flutter pub run build_runner build --delete-conflicting-outputs</code></pre><p>Мы используем флаг <code>build</code>, который заставит генератор запуститься <em>только один раз</em>. Если вместо этого вы планируете внести несколько изменений в файл <strong>router.dart</strong>, то флаг <code>build</code> можно заменить на <strong>watch</strong>. При использовании флага <code>watch</code> генератор будет запускаться каждый раз, когда вы вносите изменения.</p><p>Теперь вы должны обнаружить файл<strong> router.gr.dart</strong> в папке <strong>routes</strong>. Если его открыть, то можно увидеть, сколько строк кода нам помог написать этот полезный инструмент генерации.</p><h4>Подключение маршрутизатора к приложению</h4><p>Теперь, когда мы настроили маршрутизатор, его можно подключить к нашему приложению. Перейдите к файлу </p><p><strong>main.dart</strong>, и там нам нужно изменить несколько вещей. Сейчас <code>AppWidget</code> возвращает <code>MaterialApp</code>. Нам нужно поменять его на <code>MaterialApp.router</code>. Вы можете пойти дальше, удалить весь код <code>AppWidget</code> внутри метода <code>build</code>  и настроить свой файл <strong>main.dart</strong> следующим образом.</p><pre><code class="dart">void main() => runApp(AppWidget());

class AppWidget extends StatelessWidget {
  AppWidget({Key? key}) : super(key: key);
  final _appRouter = AppRouter();
  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      debugShowCheckedModeBanner: false,
      title: 'Bottom Nav Bar with Nested Routing',
      routerDelegate: _appRouter.delegate(),
      routeInformationParser: _appRouter.defaultRouteParser(),
    );
  }
}</code></pre><p>Теперь давайте обсудим, что у нас получилось. Во-первых, мы инициализировали <code>AppRouter</code> и сохранили его в переменной <code>_appRouter</code>. Из-за этого нам также пришлось убрать <code>const</code> рядом с <code>AppWidget</code> в <code>runApp</code> и в конструкторе. <code>AppRouter</code> генерируется для нас с помощью <code>AutoRoute</code>, поэтому обязательно импортируйте сюда файл <strong>router.gr.dart</strong>. Инициализируя <code>AutoRoute</code> внутри корневого виджета, мы делаем этот маршрутизатор доступным для всего приложения на протяжении его жизненного цикла.</p><p>Затем мы предоставили <code>MaterialApp.router</code> два обязательных аргумента, специфичных для маршрутизации. Значения, которые мы предоставили для аргументов <code>routerDelegate</code> и <code>routeInformaitonParser</code>, берутся из сгенерированного объекта <code>AppRouter</code>.</p><p>Вот и все, теперь у нас есть все необходимые конфигурации. Далее мы приступим к реализации нижней навигации.</p><h3>Реализация нижней навигации</h3><p><strong>AutoTabsScaffold</strong></p><p>Наконец-то мы можем приступить к реализации нижней навигационной панели приложения. К счастью, в пакете <code>AutoRoute</code> есть полезный виджет, который позволяет невероятно просто настроить ее. Откройте файл <strong>home_page.dart</strong>, который мы создали ранее, и замените <code>Container</code> в методе <code>build</code> на виджет <code>AutoTabsScaffold</code>. Этот виджет поставляется из пакета <code>AutoRoute</code>, поэтому не забудьте его сюда импортировать.</p><pre><code class="dart">class HomePage extends StatelessWidget {
  const HomePage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return AutoTabsScaffold();
  }
}</code></pre><p>Виджет <code>AutoTabsScaffold</code> позволяет нам легко создать <code>Scaffold</code> с маршрутизацией по вкладкам. Этот <code>Scaffold</code> будет продолжать действовать во всем приложении. Нам необходимо, чтобы наше приложение содержало панель приложения и нижнюю навигационную панель.</p><blockquote><p>Если присмотреться, то можно заметить, что в отличие от <code>PostsPage</code>, <code>SinglePostPage</code> имеет свой собственный <code>Scaffold</code>. Это потому, что мы хотим, чтобы у <code>PostsPage</code> был <code>Scaffold</code>, определенный с помощью виджета <code>AutoTabsScaffold</code>. Однако в <code>SinglePostPage</code> и <code>UserProfilePage</code> мы определили отдельный <code>Scaffold</code>, чтобы иметь возможность указать пользовательский цвет фона.</p></blockquote><p>Сначала создадим панель приложения. Для этого используем обратный вызов appBarBuilder, который вернет виджет <code>AppBar</code>.</p><pre><code class="dart">...
return AutoTabsScaffold(
  appBarBuilder: (_, tabsRouter) => AppBar(
    backgroundColor: Colors.indigo,
    title: const Text('FlutterBottomNav'),
    centerTitle: true,
    leading: const AutoBackButton(),
  ),
);
...</code></pre><p>Обратный вызов <code>appBarBuilder</code> дает нам доступ к <code>context</code> и объекту <code>TabsRouter</code>. Однако мы не будем использовать их для этой панели приложения. Наша панель приложения имеет пользовательский цвет фона, центрированный заголовок и кнопку <code>AutoBackButton</code> в качестве аргумента <code>leading</code>. <code>AutoBackButton</code> - это виджет, предоставляемый пакетом <code>AutoRoute</code> для удобной работы с вложенными маршрутизаторами. Вскоре мы увидим его в действии.</p><p>Далее, давайте зададим нашему <code>AutoTabsScaffold</code> пользовательский цвет фона и укажем маршрутизаторы, которые мы хотим включить в нижнюю навигационную панель. Для этого мы предоставим список маршрутизаторов, созданных нами ранее, в аргументе <code>routes</code> в таком порядке, в каком мы хотим, чтобы отображались соответствующие навигационные вкладки.</p><pre><code class="dart">...
backgroundColor: Colors.indigo,
routes: const [
  PostsRouter(),
  UsersRouter(),
  SettingsRouter(),
],
...</code></pre><p>Теперь можно настроить саму нижнюю навигационную панель. Для этого будем использовать аргумент <code>bottomNavigationBuilder</code>.</p><pre><code>...
bottomNavigationBuilder: (_, tabsRouter) {},
...</code></pre><p>Этот обратный вызов дает нам доступ к <code>context</code> и объекту <code>TabsRouter</code>. В данном случае нам понадобится объект <code>TabsRouter</code>. Вы можете использовать этот обратный вызов для возврата виджета <code>BottomNavigationBar</code>, который входит в состав Flutter, но также можно вернуть и пользовательскую панель навигации. Чтобы продемонстрировать это, воспользуемся пакетом Salomon Bottom Bar для создания нижней навигационной панели.</p><p><strong>Salomon Bottom Bar</strong></p><p>Если вы когда-либо использовали виджет <code>BottomNavigationBar</code>, поставляемый с Flutter, то <code>SalomonBottomBar</code> для вас окажется абсолютно интуитивно понятным в настройке. Сначала нам нужно импортировать пакет Salomon Bottom Bar в файл <strong>home_page.dart</strong>. Затем нужно вернуть виджет <code>SolomonBottomBar</code> из обратного вызова <code>bottomNavigationBuilder</code>. После этого необходимо указать следующие аргументы для виджета <code>SalomonBottomBar</code>:</p><ul><li><p><strong>margin</strong>: создает некоторое пространство вокруг навигационных вкладок. Это, конечно, необязательно.</p></li><li><p><strong>currentIndex</strong>: индекс текущей навигационной вкладки </p></li><li><p><strong>onTap</strong>: функция, возвращающая индекс вкладки, по которой было произведено касание</p></li></ul><ul><li><p><strong>items</strong>: List виджетов <code>SolomonBottomBarItem</code>, по одному виджету для каждой навигационной вкладки в нижней навигационной панели.</p></li></ul><p><code>SolomonBottomBarItems</code> требуют собственной настройки. В нашем приложении мы предоставим значения для следующих аргументов:</p><ul><li><p><strong>selectedColor</strong></p></li><li><p><strong>icon</strong></p></li><li><p><strong>title</strong></p></li></ul><p>После того как все это будет сделано, виджет <code>SolomonBottomBar</code> должен выглядеть так, как показано в приведенном ниже фрагменте кода.</p><pre><code class="dart">...
return SalomonBottomBar(
  margin: const EdgeInsets.symmetric(
    horizontal: 20,
    vertical: 40,
  ),
  currentIndex: tabsRouter.activeIndex,
  onTap: tabsRouter.setActiveIndex,
  items: [
    SalomonBottomBarItem(
      selectedColor: Colors.amberAccent,
      icon: const Icon(
        Icons.post_add,
        size: 30,
      ),
      title: const Text('Posts'),
    ),
    SalomonBottomBarItem(
      selectedColor: Colors.blue[200],
      icon: const Icon(
        Icons.person,
        size: 30,
      ),
      title: const Text('Users'),
    ),
    SalomonBottomBarItem(
      selectedColor: Colors.pinkAccent[100],
      icon: const Icon(
        Icons.settings,
        size: 30,
      ),
      title: const Text('Settings'),
    ),
  ],
);
...</code></pre><p>Как видите, это потребовало минимальных усилий. Существует множество других способов настройки нижней навигационной панели, но в данном простом примере мы остановимся на том, что уже есть.</p><p>Теперь можно<strong> запустить приложение</strong> и увидеть нижнюю навигационную панель в действии. При нажатии на вкладки нижней навигационной панели переходим на соответствующие страницы. Вы также увидите изящную панель навигации с анимацией во время касания вкладок.</p><figure class="full-width "><img src="/img/image-loader.svg" height="1489" data-src="https://habrastorage.org/getpro/habr/upload_files/f73/804/cc6/f73804cc68c246c0a420995faeda70dd.png" data-width="2048"/><figcaption></figcaption></figure><p><strong>Переход на SinglePostPage и UserProfilePage</strong></p><p>Прямо сейчас мы можем с комфортом перемещаться на страницы <code>PostsPage</code>, <code>UsersPage</code> и <code>SettingsPage</code> с помощью нижней навигации. Но чего нам не хватает, так это возможности перехода по маршрутам <code>SinglePostPage</code> и <code>UserProfilePage</code> при нажатии на плитки сообщений и аватары пользователей.</p><p><code>AutoRoute</code> предоставляет <a href="https://autoroute.vercel.app/basics/navigation"><u>множество различных методов</u></a> для навигации по вашему приложению. В этом примере мы будем придерживаться простого метода <code>push</code>. Чтобы вызвать <code>push</code> или любой другой метод навигации, сначала необходимо получить маршрутизатор с заданной областью действия, вызвав <code>AutoRouter.of(context)</code> или <code>context.router</code>. Затем можно вызвать метод по вашему выбору на скопированном маршрутизаторе и передать ему нужный маршрут(ы). Перейдите к файлу <strong>posts_page.dart</strong> и настройте маршрутизацию на <code>SinglePostRoute</code>, вызвав метод push в аргументе <code>onTileTap</code>.</p><pre><code class="dart">...
child: Column(
  mainAxisAlignment: MainAxisAlignment.center,
  children: [
    for (int i = 0; i &lt; posts.length; i++)
      PostTile(
        tileColor: posts[i].color,
        postTitle: posts[i].title,
        onTileTap: () => context.router.push(
          SinglePostRoute(
            postId: posts[i].id,
          ),
        ),
      ),
  ],
),
...</code></pre><p>Теперь перейдем к файлу <strong>users_page.dart</strong> и проделаем то же самое для <code>UserProfileRoute</code> в аргументе <code>onAvatarTap</code>.</p><pre><code class="dart">...
child: Column(
  mainAxisAlignment: MainAxisAlignment.center,
  children: [
    for (int i = 0; i &lt; users.length; i++)
      UserAvatar(
        avatarColor: users[i].color,
        username: 'user${users[i].id}',
        onAvatarTap: () => context.router.push(
          UserProfileRoute(
            userId: users[i].id,
          ),
        ),
      ),
  ],
),
...</code></pre><p>В этом приложении мы осуществляем навигацию по маршрутам, расположенным в одном маршрутизаторе. Если необходимо перейти со страницы в одной навигационной вкладке/маршрутизаторе на страницу в другой навигационной вкладке/маршрутизаторе, то и это тоже возможно. Предположим, нужно перейти от <code>UserProfileRoute</code> к <code>SinglePostRoute</code>, для этого надо сделать следующее:</p><pre><code>context.navigateTo(PostsRouter(children: SinglePostRoute(postId: id)).</code></pre><p>Теперь вы можете перезапустить приложение и опробовать всю навигацию, которую мы в результате настроили. Обратите внимание, что при нажатии на плитки постов и аватары пользователей вы должны увидеть кнопку "Назад", появившуюся в <code>Scaffold</code>. Это потому, что ранее мы добавили виджет <code>AutoBackButton</code> в качестве ведущего аргумента <code>AutoTabsScaffold</code>.</p><h3>Заключение</h3><p>Вот и все, наше приложение завершено! То время, которое мы сэкономили благодаря использованию <code>AutoRouter</code>, сделало данный подход беспроигрышным при создании нижней навигационной панели. Теперь вы можете использовать полученные здесь знания в своих собственных проектах и настроить все под свои индивидуальные нужды.</p><hr/><blockquote><p>Материал подготовлен в рамках курса <a href="https://otus.pw/sSF8/">«Flutter Mobile Developer». </a></p><p>Всех желающих приглашаем на demo-занятие <strong>«Explicit анимации и 3D-графика в Flutter»</strong>. На уроке рассмотрим технические детали анимации во Flutter, научимся создавать сложные составные параллельные и последовательные анимации, посмотрим основы использования двухмерных игровых движков (Flare, SpriteWidget) и создания трехмерной графики (Cube, адаптер для Unity, библиотека собственной разработки для использования WebGL в Flutter for Web-приложениях).<br/><a href="https://otus.pw/y4RH/">>> РЕГИСТРАЦИЯ</a></p></blockquote></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bflutter%5D" class="tm-tags-list__link">flutter</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%5D" class="tm-tags-list__link">автомаршрутизация</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%5D" class="tm-tags-list__link">маршрутизация</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BExplicit%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%5D" class="tm-tags-list__link">Explicit анимации</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B3d-%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">3d-графика</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/otus/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании OTUS
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/flutter/" class="tm-hubs-list__link">
    Flutter
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 5: ↑5 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 5: ↑5 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+5</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    28
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/otus/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/968/422/761/968422761136a38a89fc391fd927f903.jpg" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/otus/profile/" class="tm-company-snippet__title">OTUS</a> <div class="tm-company-snippet__description">Цифровые навыки от ведущих экспертов</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://otus.ru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://facebook.com/otus.ru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Facebook
    </a><a href="https://vk.com/club145052891" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://telegram.me/Otusjava" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/MaxRokatansky/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/b9f/baf/5f9/b9fbaf5f96ae52973706a0716bd9216e.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 664 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    25.7
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">-31.8</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">OTUS</span> <a href="/ru/users/MaxRokatansky/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @MaxRokatansky
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Редактор</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/otus/blog/582266/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2017-03-31T21:00:00.000Z" title="2017-04-01, 00:00">1  апреля  2017</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://otus.ru" target="_blank" class="tm-company-basic-info__link">
      otus.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    51–100 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2017-03-22T08:17:26.000Z" title="2017-03-22, 11:17">22  марта  2017</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/MaxRokatansky/" class="tm-company-basic-info__link">
      OTUS
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/otus/blog/582266/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/otus/blog/582266/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"582266":{"id":"582266","timePublished":"2021-10-07T17:50:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)","leadData":{"textHtml":"\u003Cp\u003EМаршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению пользовательского опыта. Это также сделает код намного более удобным для разработчиков.&nbsp;\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F219\u002F9e6\u002F1c6\u002F2199e61c668caaa47c5bd644e8472d6d.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F219\u002F9e6\u002F1c6\u002F2199e61c668caaa47c5bd644e8472d6d.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Ashley Novik","originalUrl":"https:\u002F\u002Fresocoder.com\u002F2021\u002F09\u002F16\u002Fflutter-bottom-navigation-with-nested-routing\u002F"}}],"author":{"scoreStats":{"score":25.7,"votesCount":664},"rating":-31.8,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1547287","alias":"MaxRokatansky","fullname":"OTUS","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb9f\u002Fbaf\u002F5f9\u002Fb9fbaf5f96ae52973706a0716bd9216e.jpg","speciality":"Редактор"},"statistics":{"commentsCount":0,"favoritesCount":28,"readingCount":2545,"score":5,"votesCount":5},"hubs":[{"relatedData":null,"id":"21052","alias":"otus","type":"corporative","title":"Блог компании OTUS","titleHtml":"Блог компании OTUS","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"22176","alias":"flutter","type":"collective","title":"Flutter","titleHtml":"Flutter","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"439\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F219\u002F9e6\u002F1c6\u002F2199e61c668caaa47c5bd644e8472d6d.png\" data-width=\"780\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F615f25896a73daf6662a1b95\" data-style=\"\" id=\"615f25896a73daf6662a1b95\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EМаршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению пользовательского опыта. Это также сделает код намного более удобным для разработчиков. \u003C\u002Fp\u003E\u003Cp\u003EНастройка маршрутизации во Flutter, особенно в \u003Cem\u003ENavigator 2.0\u003C\u002Fem\u003E, может быть очень утомительной и отнимающей много времени. Именно здесь на помощь приходит AutoRoute с его интуитивно понятным API и удобной генерацией кода, которая сэкономит вам много времени и усилий.\u003C\u002Fp\u003E\u003Cp\u003EВ этом уроке вы узнаете, как использовать простоту пакетов \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fauto_route\"\u003E\u003Cu\u003EAutoRoute\u003C\u002Fu\u003E\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fsalomon_bottom_bar\"\u003E\u003Cu\u003ESalomon Bottom Bar\u003C\u002Fu\u003E\u003C\u002Fa\u003E для создания элегантной нижней навигационной панели с вложенной маршрутизацией.\u003C\u002Fp\u003E\u003Ch3\u003EГотовое приложение\u003C\u002Fh3\u003E\u003Cp\u003EВ этом уроке мы создадим простое приложение, которое будет состоять из трех основных разделов.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EПосты\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПользователи\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНастройки\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВ разделе \"Посты\" будет отображаться несколько макетов с плитками постов. При нажатии на них вы сможете перейти на страницу соответствующего поста. В разделе \"Пользователи\" отображаются макеты аватаров пользователей. При нажатии на аватар пользователя вы попадете на соответствующую страницу профиля пользователя. Наконец, в разделе настроек есть только одна страница, на которой отображается информация об учетной записи пользователя.\u003C\u002Fp\u003E\u003Cp\u003EНавигация по этим трем разделам \u003Cem\u003Eверхнего уровня\u003C\u002Fem\u003E осуществляется с помощью минималистичной, настраиваемой нижней навигационной панели. Каждый раздел представляет собой \u003Cem\u003Eотдельный маршрутизатор\u003C\u002Fem\u003E, расположенный внутри \u003Cem\u003Eкорневого маршрутизатора\u003C\u002Fem\u003E. Маршрутизаторы posts (постов) и users (пользователей) имеют дочерние маршруты, через которые можно переходить на страницы отдельных постов и профилей пользователей.\u003C\u002Fp\u003E\u003Cp\u003EВ этом руководстве мы рассмотрим самый простой способ настройки подобной системы.\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fresocoder.com\u002F2021\u002F09\u002F16\u002Fflutter-bottom-navigation-with-nested-routing\u002F\"\u003E\u003Cem\u003EСмотрите анимацию в оригинале\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Ch3\u003EНачало работы\u003C\u002Fh3\u003E\u003Ch4\u003EОбновление Flutter 2.5\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cem\u003E8 сентября 2021 года\u003C\u002Fem\u003E команда Google Flutter объявила о выпуске \u003Cstrong\u003EFlutter 2.5\u003C\u002Fstrong\u003E и \u003Cstrong\u003EDart 2.14\u003C\u002Fstrong\u003E. На этом занятии мы выполним разработку с использованием обновленных версий. Предоставленные файлы стартового и готового проектов построены с использованием новых версий Dart и Flutter. Поэтому, если вы еще не обновились, обязательно выполните команду \u003Ccode\u003Eflutter upgrade\u003C\u002Fcode\u003E в своем терминале, прежде чем продолжить изучение этого руководства. \u003C\u002Fp\u003E\u003Cp\u003EЕсли по какой-то причине вы еще не готовы к обновлению, не переживайте. Вы все равно сможете продолжить обучение с небольшими корректировками.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EВ новой версии Flutter каждый раз, когда вы создаете новый проект, в него будет включена зависимость для разработки \u003Ccode\u003Eflutter_lints\u003C\u002Fcode\u003E. Это поможет вам писать более чистый код прямо из коробки. Если вы еще не обновились, то не увидите существенной разницы в этом уроке, кроме зависимости для разработки (dev-зависимости) \u003Ccode\u003Eflutter_lints\u003C\u002Fcode\u003E в файле \u003Cstrong\u003Epubspec.yaml\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EНекоторые зависимости, которые мы будем использовать в этом проекте, зависят от \u003Cstrong\u003Emeta 1.7.0\u003C\u002Fstrong\u003E, и если вы еще не обновились, то столкнетесь с проблемой, поскольку предыдущая версия Flutter привязана к более ранней версии \u003Cstrong\u003Emeta\u003C\u002Fstrong\u003E. Вы можете легко решить это, \u003Cem\u003Eпереопределив версию meta\u003C\u002Fem\u003E. Просто добавьте следующий код в ваш файл \u003Cstrong\u003Epubspec.yaml\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cpre\u003E\u003Ccode\u003Edependency_overrides:\n  meta: ^1.7.0\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EЕсли вы хотите продолжить обучение, используя файлы начального проекта, или просмотреть готовый проект на своем устройстве, но при этом еще не обновились, необходимо сделать следующее:\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EСкачайте файлы проекта с GitHub (ссылки приведены ниже).\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EСоздайте \u003Cstrong\u003Eновый проект Flutter\u003C\u002Fstrong\u003E на своем компьютере. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EСкопируйте папку \u003Cstrong\u003Elib \u003C\u002Fstrong\u003Eиз загруженного проекта и вставьте ее на место папки \u003Cstrong\u003Elib\u003C\u002Fstrong\u003E во вновь созданном проекте. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EИсправьте импорты.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EУбедитесь, что вы \u003Cstrong\u003Eпереопределили \u003C\u002Fstrong\u003Eмета-зависимость, как указано выше. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Ch3\u003EЗависимости\u003C\u002Fh3\u003E\u003Cp\u003EВ этом руководстве мы будем использовать некоторые зависимости и dev-зависимости.\u003C\u002Fp\u003E\u003Cp\u003EДля маршрутизации будут использоваться зависимость \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fauto_route\"\u003E\u003Cu\u003Eauto_route\u003C\u002Fu\u003E\u003C\u002Fa\u003E и \u003Cem\u003Edev-зависимость\u003C\u002Fem\u003E \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fauto_route_generator\"\u003E\u003Cu\u003Eauto_route_generator\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Обе они будут версии \u003Cstrong\u003E2.3.2\u003C\u002Fstrong\u003E. Генератор автоматических маршрутов поможет нам генерировать код, который в противном случае нам пришлось бы писать самим. Именно этим и хорош AutoRoute, он позволяет нам обойтись без написания большого количества шаблонного кода. Для генерации кода нам также необходимо добавить \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fbuild_runner\"\u003E\u003Cu\u003Ebuild_runner\u003C\u002Fu\u003E\u003C\u002Fa\u003E версии \u003Cstrong\u003E2.1.2\u003C\u002Fstrong\u003E в качестве \u003Cem\u003Edev-зависимости\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\u003Cp\u003EДля создания стильной нижней навигационной панели мы воспользуемся пакетом \u003Ca href=\"https:\u002F\u002Fpub.dev\u002Fpackages\u002Fsalomon_bottom_bar\"\u003E\u003Cu\u003ESalomon Bottom Bar\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Этот пакет был вдохновлен \u003Ca href=\"https:\u002F\u002Fdribbble.com\u002Fshots\u002F5925052-Google-Bottom-Bar-Navigation-Pattern\u002F\"\u003E\u003Cu\u003Eдизайном\u003C\u002Fu\u003E\u003C\u002Fa\u003E, созданным Aurélien Salomon. Я выбрал именно его, потому что дизайн очень аккуратный и привлекательный, а реализация этой навигационной панели невероятно проста. Если вы когда-либо создавали виджет \u003Ccode\u003EBottomNavigationBar\u003C\u002Fcode\u003E во Flutter, то уже знаете, как настроить навигационную панель из пакета Salomon Bottom Bar. Их синтаксис практически идентичен. Для этого проекта мы будем использовать версию \u003Cstrong\u003E3.1.0\u003C\u002Fstrong\u003E пакета.\u003C\u002Fp\u003E\u003Cp\u003EПерейдите к добавлению всех этих зависимостей. После этого ваш файл \u003Cstrong\u003Epubspec.yaml\u003C\u002Fstrong\u003E должен выглядеть примерно так:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Edependencies:\n  flutter:\n    sdk: flutter\n  auto_route: ^2.3.2\n  salomon_bottom_bar: ^3.1.0\n  cupertino_icons: ^1.0.2\n\ndev_dependencies:\n  auto_route_generator: ^2.3.2\n  build_runner: ^2.1.2\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cblockquote\u003E\u003Cp\u003EЕсли вы используете \u003Cstrong\u003EVisual Studio Code\u003C\u002Fstrong\u003E, то можете добавлять зависимости с помощью \u003Cem\u003Eпалитры команд\u003C\u002Fem\u003E. Благодаря обновленному \u003Cstrong\u003Eплагину VS Code Flutter\u003C\u002Fstrong\u003E достаточно вызвать палитру команд и использовать команды \"\u003Cstrong\u003EDart: Add Dependency\u003C\u002Fstrong\u003E\" и \"\u003Cstrong\u003EDart: Add Dev Dependency\u003C\u002Fstrong\u003E\" для добавления пакетов в ваши проекты.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Ch3\u003EОбзор стартового проекта\u003C\u002Fh3\u003E\u003Cp\u003EДля освобождения себя от забот по созданию большей части пользовательского интерфейса, в этом руководстве мы будем использовать стартовый проект. Чтобы проследить за ходом работы, можно взять \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial\u002Ftree\u002F66e1a2e52e43b5aba570e3f5574c0a84dc02c48e\"\u003E\u003Cu\u003Eстартовый\u003C\u002Fu\u003E\u003C\u002Fa\u003E и уже \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial\"\u003E\u003Cu\u003Eготовый\u003C\u002Fu\u003E\u003C\u002Fa\u003E проекты с GitHub по ссылкам ниже.\u003C\u002Fp\u003E\u003Cdiv class=\"embed_link\"\u003E\u003Cdiv class=\"embed__thumb\" style=\"background-image: url(&quot;https:\u002F\u002Fopengraph.githubassets.com\u002F5e8f2af9d79b94ee67e8d071ea294367b696f8e352d4fca8707e8fe7b17c55b1\u002FResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial&quot;);\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"embed__caption\"\u003E\u003Cdiv class=\"embed__caption-title\"\u003E\u003Cspan\u003EGitHub - ResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial at 66e1a2e52e43b5aba570e3f5574c0a84dc02c48e\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial\u002Ftree\u002F66e1a2e52e43b5aba570e3f5574c0a84dc02c48e\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" class=\"embed__caption-link\"\u003Egithub.com\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"embed_link\"\u003E\u003Cdiv class=\"embed__thumb\" style=\"background-image: url(&quot;https:\u002F\u002Fopengraph.githubassets.com\u002F5e8f2af9d79b94ee67e8d071ea294367b696f8e352d4fca8707e8fe7b17c55b1\u002FResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial&quot;);\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"embed__caption\"\u003E\u003Cdiv class=\"embed__caption-title\"\u003E\u003Cspan\u003EGitHub - ResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FResoCoder\u002Fflutter-bottom-navigation-with-nested-routing-tutorial\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" class=\"embed__caption-link\"\u003Egithub.com\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EВ файле \u003Cstrong\u003Emain.dart\u003C\u002Fstrong\u003E у нас есть \u003Ccode\u003EAppWidget\u003C\u002Fcode\u003E, который возвращает \u003Ccode\u003EMaterialApp\u003C\u002Fcode\u003E. Сейчас \u003Ccode\u003EMaterialApp\u003C\u002Fcode\u003E имеет виджет \u003Ccode\u003EPostsPage\u003C\u002Fcode\u003E в качестве аргумента \u003Ccode\u003Ehome\u003C\u002Fcode\u003E, но это изменится, когда мы реализуем маршрутизацию.\u003C\u002Fp\u003E\u003Cp\u003EЗатем в папке \u003Cstrong\u003Elib\u003C\u002Fstrong\u003E у нас также есть файл \u003Cstrong\u003Ewidgets.dart\u003C\u002Fstrong\u003E, в котором находятся виджеты \u003Ccode\u003EPostTile\u003C\u002Fcode\u003E и \u003Ccode\u003EUserAvatar\u003C\u002Fcode\u003E. Это необходимое разделение для оптимизации страниц, где используются эти виджеты. \u003C\u002Fp\u003E\u003Cp\u003EТакже у нас имеется папка data, внутри которой находится файл \u003Cstrong\u003Eapp_data.dart\u003C\u002Fstrong\u003E. Этот файл содержит классы \u003Ccode\u003EPost\u003C\u002Fcode\u003E и \u003Ccode\u003EUser\u003C\u002Fcode\u003E. Эти классы используются при создании макетов данных для постов и пользователей в приложении.\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Cp\u003EОбратите внимание, что способ передачи макетов данных в приложении \u003Cstrong\u003Eне\u003C\u002Fstrong\u003E основан на лучших практиках. Это сделано в упрощенном виде, чтобы мы могли сосредоточиться на реализации маршрутизации.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EОстальные файлы проекта разделены на папки в соответствии с \u003Cem\u003Eфункциями приложения\u003C\u002Fem\u003E. Файлов уже довольно много, и поскольку мы будем добавлять их еще, то эта структура поможет сохранить порядок.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cu\u003EПапка Posts\u003C\u002Fu\u003E\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\u003Cp\u003EВ папке \u003Cstrong\u003Eposts\u003C\u002Fstrong\u003E находятся файлы\u003Cstrong\u003E posts_page.dart\u003C\u002Fstrong\u003E и \u003Cstrong\u003Esingle_post_page.dart\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EВ файле \u003Cstrong\u003Eposts_page.dart\u003C\u002Fstrong\u003E у нас есть \u003Ccode\u003EStatelessWidget\u003C\u002Fcode\u003E, который будет отображать \u003Ccode\u003EColumn\u003C\u002Fcode\u003E с тремя виджетами \u003Ccode\u003EPostTile\u003C\u002Fcode\u003E. Вы можете заметить, что на этой странице нет \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E. Когда мы перейдем к настройке нижней навигационной панели, вы поймете почему. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EВ файле \u003Cstrong\u003Esingle_post_page.dart\u003C\u002Fstrong\u003E содержится \u003Ccode\u003EStatelessWidget\u003C\u002Fcode\u003E, который будет \u003Cem\u003Eдинамически\u003C\u002Fem\u003E отображать страницу с названием и цветом поста, соответствующим \u003Ccode\u003EPostTile\u003C\u002Fcode\u003E, который был нажат на странице постов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cu\u003EПапка Users\u003C\u002Fu\u003E\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\u003Cp\u003EВ папке \u003Cstrong\u003Eusers\u003C\u002Fstrong\u003E находятся файлы \u003Cstrong\u003Euser_page.dart\u003C\u002Fstrong\u003E и \u003Cstrong\u003Euser_profile_page.dart\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EUsers_page.dart\u003C\u002Fstrong\u003E содержит \u003Ccode\u003EStatelessWidget\u003C\u002Fcode\u003E, который отображает \u003Ccode\u003EColumn\u003C\u002Fcode\u003E с тремя виджетами \u003Ccode\u003EUserAvatar\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EВ файле \u003Cstrong\u003Euser_profile_page.dart\u003C\u002Fstrong\u003E находится \u003Ccode\u003EStatelessWidget\u003C\u002Fcode\u003E, который отображает страницу с \u003Cem\u003Eдинамически\u003C\u002Fem\u003E устанавливаемым цветом фона и именем пользователя, соответствующим \u003Ccode\u003EUserAvatar\u003C\u002Fcode\u003E, который был выбран на странице пользователей.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cu\u003EПапка настроек\u003C\u002Fu\u003E\u003C\u002Fstrong\u003E:\u003C\u002Fp\u003E\u003Cp\u003EВ папке \u003Cstrong\u003Eнастроек (settings)\u003C\u002Fstrong\u003E находится только один файл — \u003Cstrong\u003Esettings_page.dart\u003C\u002Fstrong\u003E. Это самый простой из всех файлов функций, которые мы рассмотрели. Расположенный здесь виджет \u003Ccode\u003ESettingsPage\u003C\u002Fcode\u003E без сохранения состояния, который просто отображает текстовый заголовок и некоторые фейковые данные учетной записи пользователя.\u003C\u002Fp\u003E\u003Cp\u003EТеперь, когда у вас есть ясное представление о стартовом проекте, давайте приступим к реализации маршрутизации. \u003C\u002Fp\u003E\u003Ch3\u003EКонфигурация вложенной маршрутизации\u003C\u002Fh3\u003E\u003Cp\u003EВ этом разделе мы настроим файл, который будет служить образцом для сгенерированного кода маршрутизации. Если вы работали с \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E не так давно, то синтаксис здесь должен выглядеть довольно знакомым. Имейте в виду, что эта конфигурация будет отличаться от стандартной настройки маршрутизации \u003Ccode\u003EAutoRouter\u003C\u002Fcode\u003E. Это связано с тем, что мы будем следовать особым рекомендациям по созданию нижней панели навигации с вложенной маршрутизацией.\u003C\u002Fp\u003E\u003Ch4\u003EИсходная маршрутизация - HomePage\u003C\u002Fh4\u003E\u003Cp\u003EПрежде чем мы настроим маршрутизацию, давайте сначала убедимся, что у нас есть все необходимые для этого файлы. Создайте \u003Cstrong\u003Eновый файл\u003C\u002Fstrong\u003E в папке \u003Cstrong\u003Elib\u003C\u002Fstrong\u003E и назовите его \u003Cstrong\u003Ehome_page.dart\u003C\u002Fstrong\u003E. Это будет файл, в котором мы определим нижнюю навигационную панель. Пока что просто создайте здесь \u003Ccode\u003EStatelessWidget\u003C\u002Fcode\u003E. Неважно, что он будет возвращать, потому что мы изменим это в ближайшее время. Пока можно просто вернуть \u003Ccode\u003EContainer\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Eclass HomePage extends StatelessWidget {\n  const HomePage({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return Container();\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch4\u003EКонфигурация AutoRoute - router.dart\u003C\u002Fh4\u003E\u003Cp\u003EТеперь создайте новую папку в папке \u003Cstrong\u003Elib\u003C\u002Fstrong\u003E и назовите ее \"\u003Cstrong\u003Eroutes\u003C\u002Fstrong\u003E\". В ней создайте новый файл и назовите его\u003Cstrong\u003E router.dart\u003C\u002Fstrong\u003E. Это файл, в котором мы создадим образец для генератора кода.\u003C\u002Fp\u003E\u003Cp\u003EНачнем настройку маршрутизатора с начального маршрута \u003Ccode\u003EHomePage\u003C\u002Fcode\u003E. Не забудьте импортировать пакет auto route и файл \u003Cstrong\u003Ehome_page.dart\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E@MaterialAutoRouter(\n  replaceInRouteName: 'Page,Route',\n  routes: &lt;AutoRoute\u003E[\n    AutoRoute(\n      path: '\u002F',\n      page: HomePage,\n    )\n  ],\n)\nclass $AppRouter {}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EСинтаксис в данном случае может показаться немного необычным, но это то, что требуется для правильной работы генерации кода.\u003C\u002Fp\u003E\u003Cp\u003EЗдесь мы указываем аргумент \u003Ccode\u003EreplaceInRouteName\u003C\u002Fcode\u003E, чтобы сделать наши имена маршрутов менее избыточными. Когда вы будете переходить от одной страницы к другой, придется использовать сгенерированные имена маршрутов. Если не указать \u003Ccode\u003EreplaceInRouteName\u003C\u002Fcode\u003E так, как мы сделали здесь, имя маршрута для нашей страницы \u003Ccode\u003ESinglePostPage\u003C\u002Fcode\u003E будет \u003Ccode\u003ESinglePostPageRoute\u003C\u002Fcode\u003E. С настроенным \u003Ccode\u003EreplaceInRouteName\u003C\u002Fcode\u003E сгенерированное имя маршрута в этом примере будет \u003Ccode\u003ESinglePostRoute\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003EЗатем мы предоставляем \u003Ccode\u003EList\u003C\u002Fcode\u003E объектов \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E в качестве аргумента \u003Ccode\u003Eroutes\u003C\u002Fcode\u003E. Здесь у нас есть один объект \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E, который устанавливает нашу \u003Ccode\u003EHomePage\u003C\u002Fcode\u003E в качестве \u003Cstrong\u003Eначального маршрута\u003C\u002Fstrong\u003E, предоставляя \"\u002F\" в качестве аргумента \u003Ccode\u003Epath\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003EДалее нам нужно создать \u003Cstrong\u003Eмаршрутизаторы\u003C\u002Fstrong\u003E для разделов \"Сообщения\", \"Пользователи\" и \"Настройки\" приложения. Для этого добавьте \u003Ccode\u003EList\u003C\u002Fcode\u003E объектов \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E в качестве аргумента  \u003Ccode\u003Echildren\u003C\u002Fcode\u003E существующего объекта \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E, как показано ниже. Здесь также необходимо импортировать все используемые файлы виджетов страниц.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E...\nAutoRoute(\n      path: '\u002F',\n      page: HomePage,\n      children: [\n        AutoRoute(\n          path: 'posts',\n          name: 'PostsRouter',\n          page: EmptyRouterPage,\n          children: [\n            AutoRoute(path: '', page: PostsPage),\n            AutoRoute(path: ':postId', page: SinglePostPage),\n          ],\n        ),\n        AutoRoute(\n          path: 'users',\n          name: 'UsersRouter',\n          page: EmptyRouterPage,\n          children: [\n            AutoRoute(path: '', page: UsersPage),\n            AutoRoute(path: ':userId', page: UserProfilePage),\n          ],\n        ),\n        AutoRoute(\n          path: 'settings',\n          name: 'SettingsRouter',\n          page: SettingsPage,\n        )\n      ],\n    )\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь давайте разберемся, что именно мы здесь делаем.\u003C\u002Fp\u003E\u003Ch4\u003EМаршрутизаторы постов и пользователей\u003C\u002Fh4\u003E\u003Cp\u003EМаршрутизаторы постов и пользователей настраиваются одинаково, поэтому давайте обсудим все компоненты, присутствующие в их конфигурации.\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Epath\u003C\u002Fstrong\u003E: Для аргумента \u003Ccode\u003Epath\u003C\u002Fcode\u003E мы указываем имя пути, который хотелось бы использовать в маршрутизаторе.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Ename\u003C\u002Fstrong\u003E: \u003Ccode\u003EString\u003C\u002Fcode\u003E, указанная в качестве аргумента name, будет использоваться для создания имени маршрутизатора. Это имя можно использовать во время доступа к маршрутизатору при настройке нижней панели навигации или для навигации между страницами, расположенными в разных маршрутизаторах\u002Fвкладках навигации.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Epage\u003C\u002Fstrong\u003E: Здесь в качестве аргумента page мы указываем \u003Ccode\u003EEmptyRouterPage\u003C\u002Fcode\u003E (предоставляется пакетом \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E). Это следует делать всякий раз, когда у вас есть \u003Cem\u003Eвложенные маршруты \u003C\u002Fem\u003Eдля определенной нижней навигационной вкладки.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Echildren\u003C\u002Fstrong\u003E: Аргумент \u003Ccode\u003Echildren\u003C\u002Fcode\u003E принимает \u003Ccode\u003EList\u003C\u002Fcode\u003E объектов \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E. Это будет \u003Ccode\u003EList\u003C\u002Fcode\u003E вложенных маршрутов, которые будут находиться внутри данного маршрутизатора. Первый маршрут имеет пустую \u003Ccode\u003EString\u003C\u002Fcode\u003E для аргумента \u003Ccode\u003Epath\u003C\u002Fcode\u003E. Это означает, что это будет \u003Cstrong\u003Eпервая страница\u003C\u002Fstrong\u003E, которая будет отображаться при выборе соответствующей навигационной вкладки. Путь второго объекта \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E выглядит немного иначе. Синтаксис \u003Ccode\u003E':postId'\u003C\u002Fcode\u003E и \u003Ccode\u003E':userId'\u003C\u002Fcode\u003E используется для создания \u003Cem\u003Eдинамических сегментов\u003C\u002Fem\u003E. При такой настройке, если вы запустите свое приложение в браузере и введете что-то вроде \"\u003Cstrong\u003E\u002Fposts\u002F1\u003C\u002Fstrong\u003E\", вы попадете на страницу поста с полем \u003Ccode\u003EpostId\u003C\u002Fcode\u003E, равным\u003Cstrong\u003E 1\u003C\u002Fstrong\u003E. Чтобы это работало правильно, вам также необходимо аннотировать параметры конструктора \u003Ccode\u003EpostId\u003C\u002Fcode\u003E и \u003Ccode\u003EuserId\u003C\u002Fcode\u003E в файлах страницы. Мы сделаем это в ближайшее время.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch4\u003EНастройки\u003C\u002Fh4\u003E\u003Cp\u003EВ маршрутизаторе настроек основные отличия заключаются в том, что здесь нет дочерних элементов и аргумент page установлен в \u003Ccode\u003ESettingsPage\u003C\u002Fcode\u003E вместо \u003Ccode\u003EEmptyRouterPage\u003C\u002Fcode\u003E. Это связано с тем, что у нас нет вложенных маршрутов, и в таком случае следует просто установить аргумент page на страницу, которую необходимо отобразить.\u003C\u002Fp\u003E\u003Cp\u003EПрежде чем создать сгенерированный файл кода, давайте сделаем еще одну вещь. Как упоминалось ранее, для того чтобы динамические сегменты, определенные как \u003Ccode\u003E':postId'\u003C\u002Fcode\u003E и \u003Ccode\u003E':userId'\u003C\u002Fcode\u003E, работали, нам нужно перейти к файлам \u003Cstrong\u003Esingle_post_page.dart\u003C\u002Fstrong\u003E и \u003Cstrong\u003Euser_profile_page.dart\u003C\u002Fstrong\u003E и аннотировать соответствующие параметры конструктора с помощью \u003Ccode\u003E@PathParam\u003C\u002Fcode\u003E(\u003Ccode\u003E'optional-alias'\u003C\u002Fcode\u003E). Если вы задаете псевдоним, он должен совпадать с именем сегмента, которое вы определили в файле\u003Cstrong\u003E router.dart\u003C\u002Fstrong\u003E. Если название вашего поля совпадает с именем сегмента, то вам не нужно задавать псевдоним. Сначала сделайте это для \u003Ccode\u003ESinglePostPage\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Econst SinglePostPage({\n  Key? key,\n  @PathParam() required this.postId,\n}) : super(key: key);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПоскольку название нашего поля \u003Ccode\u003EpostId\u003C\u002Fcode\u003E совпадает с именем сегмента, определенным в файле \u003Cstrong\u003Erouter.dart\u003C\u002Fstrong\u003E, мы не стали включать псевдоним в аннотацию. Теперь вы можете сделать то же самое для страницы \u003Ccode\u003EUserProfilePage\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Econst UserProfilePage({\n  Key? key,\n  @PathParam() required this.userId,\n}) : super(key: key);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЧтобы создать файл с помощью генерации кода на основе созданного нами образца, выполните следующую команду терминала.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Eflutter pub run build_runner build --delete-conflicting-outputs\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EМы используем флаг \u003Ccode\u003Ebuild\u003C\u002Fcode\u003E, который заставит генератор запуститься \u003Cem\u003Eтолько один раз\u003C\u002Fem\u003E. Если вместо этого вы планируете внести несколько изменений в файл \u003Cstrong\u003Erouter.dart\u003C\u002Fstrong\u003E, то флаг \u003Ccode\u003Ebuild\u003C\u002Fcode\u003E можно заменить на \u003Cstrong\u003Ewatch\u003C\u002Fstrong\u003E. При использовании флага \u003Ccode\u003Ewatch\u003C\u002Fcode\u003E генератор будет запускаться каждый раз, когда вы вносите изменения.\u003C\u002Fp\u003E\u003Cp\u003EТеперь вы должны обнаружить файл\u003Cstrong\u003E router.gr.dart\u003C\u002Fstrong\u003E в папке \u003Cstrong\u003Eroutes\u003C\u002Fstrong\u003E. Если его открыть, то можно увидеть, сколько строк кода нам помог написать этот полезный инструмент генерации.\u003C\u002Fp\u003E\u003Ch4\u003EПодключение маршрутизатора к приложению\u003C\u002Fh4\u003E\u003Cp\u003EТеперь, когда мы настроили маршрутизатор, его можно подключить к нашему приложению. Перейдите к файлу \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003Emain.dart\u003C\u002Fstrong\u003E, и там нам нужно изменить несколько вещей. Сейчас \u003Ccode\u003EAppWidget\u003C\u002Fcode\u003E возвращает \u003Ccode\u003EMaterialApp\u003C\u002Fcode\u003E. Нам нужно поменять его на \u003Ccode\u003EMaterialApp.router\u003C\u002Fcode\u003E. Вы можете пойти дальше, удалить весь код \u003Ccode\u003EAppWidget\u003C\u002Fcode\u003E внутри метода \u003Ccode\u003Ebuild\u003C\u002Fcode\u003E  и настроить свой файл \u003Cstrong\u003Emain.dart\u003C\u002Fstrong\u003E следующим образом.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Evoid main() =\u003E runApp(AppWidget());\n\nclass AppWidget extends StatelessWidget {\n  AppWidget({Key? key}) : super(key: key);\n  final _appRouter = AppRouter();\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp.router(\n      debugShowCheckedModeBanner: false,\n      title: 'Bottom Nav Bar with Nested Routing',\n      routerDelegate: _appRouter.delegate(),\n      routeInformationParser: _appRouter.defaultRouteParser(),\n    );\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь давайте обсудим, что у нас получилось. Во-первых, мы инициализировали \u003Ccode\u003EAppRouter\u003C\u002Fcode\u003E и сохранили его в переменной \u003Ccode\u003E_appRouter\u003C\u002Fcode\u003E. Из-за этого нам также пришлось убрать \u003Ccode\u003Econst\u003C\u002Fcode\u003E рядом с \u003Ccode\u003EAppWidget\u003C\u002Fcode\u003E в \u003Ccode\u003ErunApp\u003C\u002Fcode\u003E и в конструкторе. \u003Ccode\u003EAppRouter\u003C\u002Fcode\u003E генерируется для нас с помощью \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E, поэтому обязательно импортируйте сюда файл \u003Cstrong\u003Erouter.gr.dart\u003C\u002Fstrong\u003E. Инициализируя \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E внутри корневого виджета, мы делаем этот маршрутизатор доступным для всего приложения на протяжении его жизненного цикла.\u003C\u002Fp\u003E\u003Cp\u003EЗатем мы предоставили \u003Ccode\u003EMaterialApp.router\u003C\u002Fcode\u003E два обязательных аргумента, специфичных для маршрутизации. Значения, которые мы предоставили для аргументов \u003Ccode\u003ErouterDelegate\u003C\u002Fcode\u003E и \u003Ccode\u003ErouteInformaitonParser\u003C\u002Fcode\u003E, берутся из сгенерированного объекта \u003Ccode\u003EAppRouter\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cp\u003EВот и все, теперь у нас есть все необходимые конфигурации. Далее мы приступим к реализации нижней навигации.\u003C\u002Fp\u003E\u003Ch3\u003EРеализация нижней навигации\u003C\u002Fh3\u003E\u003Cp\u003E\u003Cstrong\u003EAutoTabsScaffold\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EНаконец-то мы можем приступить к реализации нижней навигационной панели приложения. К счастью, в пакете \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E есть полезный виджет, который позволяет невероятно просто настроить ее. Откройте файл \u003Cstrong\u003Ehome_page.dart\u003C\u002Fstrong\u003E, который мы создали ранее, и замените \u003Ccode\u003EContainer\u003C\u002Fcode\u003E в методе \u003Ccode\u003Ebuild\u003C\u002Fcode\u003E на виджет \u003Ccode\u003EAutoTabsScaffold\u003C\u002Fcode\u003E. Этот виджет поставляется из пакета \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E, поэтому не забудьте его сюда импортировать.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003Eclass HomePage extends StatelessWidget {\n  const HomePage({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return AutoTabsScaffold();\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВиджет \u003Ccode\u003EAutoTabsScaffold\u003C\u002Fcode\u003E позволяет нам легко создать \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E с маршрутизацией по вкладкам. Этот \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E будет продолжать действовать во всем приложении. Нам необходимо, чтобы наше приложение содержало панель приложения и нижнюю навигационную панель.\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Cp\u003EЕсли присмотреться, то можно заметить, что в отличие от \u003Ccode\u003EPostsPage\u003C\u002Fcode\u003E, \u003Ccode\u003ESinglePostPage\u003C\u002Fcode\u003E имеет свой собственный \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E. Это потому, что мы хотим, чтобы у \u003Ccode\u003EPostsPage\u003C\u002Fcode\u003E был \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E, определенный с помощью виджета \u003Ccode\u003EAutoTabsScaffold\u003C\u002Fcode\u003E. Однако в \u003Ccode\u003ESinglePostPage\u003C\u002Fcode\u003E и \u003Ccode\u003EUserProfilePage\u003C\u002Fcode\u003E мы определили отдельный \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E, чтобы иметь возможность указать пользовательский цвет фона.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cp\u003EСначала создадим панель приложения. Для этого используем обратный вызов appBarBuilder, который вернет виджет \u003Ccode\u003EAppBar\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E...\nreturn AutoTabsScaffold(\n  appBarBuilder: (_, tabsRouter) =\u003E AppBar(\n    backgroundColor: Colors.indigo,\n    title: const Text('FlutterBottomNav'),\n    centerTitle: true,\n    leading: const AutoBackButton(),\n  ),\n);\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EОбратный вызов \u003Ccode\u003EappBarBuilder\u003C\u002Fcode\u003E дает нам доступ к \u003Ccode\u003Econtext\u003C\u002Fcode\u003E и объекту \u003Ccode\u003ETabsRouter\u003C\u002Fcode\u003E. Однако мы не будем использовать их для этой панели приложения. Наша панель приложения имеет пользовательский цвет фона, центрированный заголовок и кнопку \u003Ccode\u003EAutoBackButton\u003C\u002Fcode\u003E в качестве аргумента \u003Ccode\u003Eleading\u003C\u002Fcode\u003E. \u003Ccode\u003EAutoBackButton\u003C\u002Fcode\u003E - это виджет, предоставляемый пакетом \u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E для удобной работы с вложенными маршрутизаторами. Вскоре мы увидим его в действии.\u003C\u002Fp\u003E\u003Cp\u003EДалее, давайте зададим нашему \u003Ccode\u003EAutoTabsScaffold\u003C\u002Fcode\u003E пользовательский цвет фона и укажем маршрутизаторы, которые мы хотим включить в нижнюю навигационную панель. Для этого мы предоставим список маршрутизаторов, созданных нами ранее, в аргументе \u003Ccode\u003Eroutes\u003C\u002Fcode\u003E в таком порядке, в каком мы хотим, чтобы отображались соответствующие навигационные вкладки.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E...\nbackgroundColor: Colors.indigo,\nroutes: const [\n  PostsRouter(),\n  UsersRouter(),\n  SettingsRouter(),\n],\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь можно настроить саму нижнюю навигационную панель. Для этого будем использовать аргумент \u003Ccode\u003EbottomNavigationBuilder\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003E...\nbottomNavigationBuilder: (_, tabsRouter) {},\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЭтот обратный вызов дает нам доступ к \u003Ccode\u003Econtext\u003C\u002Fcode\u003E и объекту \u003Ccode\u003ETabsRouter\u003C\u002Fcode\u003E. В данном случае нам понадобится объект \u003Ccode\u003ETabsRouter\u003C\u002Fcode\u003E. Вы можете использовать этот обратный вызов для возврата виджета \u003Ccode\u003EBottomNavigationBar\u003C\u002Fcode\u003E, который входит в состав Flutter, но также можно вернуть и пользовательскую панель навигации. Чтобы продемонстрировать это, воспользуемся пакетом Salomon Bottom Bar для создания нижней навигационной панели.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003ESalomon Bottom Bar\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EЕсли вы когда-либо использовали виджет \u003Ccode\u003EBottomNavigationBar\u003C\u002Fcode\u003E, поставляемый с Flutter, то \u003Ccode\u003ESalomonBottomBar\u003C\u002Fcode\u003E для вас окажется абсолютно интуитивно понятным в настройке. Сначала нам нужно импортировать пакет Salomon Bottom Bar в файл \u003Cstrong\u003Ehome_page.dart\u003C\u002Fstrong\u003E. Затем нужно вернуть виджет \u003Ccode\u003ESolomonBottomBar\u003C\u002Fcode\u003E из обратного вызова \u003Ccode\u003EbottomNavigationBuilder\u003C\u002Fcode\u003E. После этого необходимо указать следующие аргументы для виджета \u003Ccode\u003ESalomonBottomBar\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Emargin\u003C\u002Fstrong\u003E: создает некоторое пространство вокруг навигационных вкладок. Это, конечно, необязательно.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EcurrentIndex\u003C\u002Fstrong\u003E: индекс текущей навигационной вкладки \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EonTap\u003C\u002Fstrong\u003E: функция, возвращающая индекс вкладки, по которой было произведено касание\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Eitems\u003C\u002Fstrong\u003E: List виджетов \u003Ccode\u003ESolomonBottomBarItem\u003C\u002Fcode\u003E, по одному виджету для каждой навигационной вкладки в нижней навигационной панели.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E\u003Ccode\u003ESolomonBottomBarItems\u003C\u002Fcode\u003E требуют собственной настройки. В нашем приложении мы предоставим значения для следующих аргументов:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EselectedColor\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Eicon\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003Etitle\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПосле того как все это будет сделано, виджет \u003Ccode\u003ESolomonBottomBar\u003C\u002Fcode\u003E должен выглядеть так, как показано в приведенном ниже фрагменте кода.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E...\nreturn SalomonBottomBar(\n  margin: const EdgeInsets.symmetric(\n    horizontal: 20,\n    vertical: 40,\n  ),\n  currentIndex: tabsRouter.activeIndex,\n  onTap: tabsRouter.setActiveIndex,\n  items: [\n    SalomonBottomBarItem(\n      selectedColor: Colors.amberAccent,\n      icon: const Icon(\n        Icons.post_add,\n        size: 30,\n      ),\n      title: const Text('Posts'),\n    ),\n    SalomonBottomBarItem(\n      selectedColor: Colors.blue[200],\n      icon: const Icon(\n        Icons.person,\n        size: 30,\n      ),\n      title: const Text('Users'),\n    ),\n    SalomonBottomBarItem(\n      selectedColor: Colors.pinkAccent[100],\n      icon: const Icon(\n        Icons.settings,\n        size: 30,\n      ),\n      title: const Text('Settings'),\n    ),\n  ],\n);\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EКак видите, это потребовало минимальных усилий. Существует множество других способов настройки нижней навигационной панели, но в данном простом примере мы остановимся на том, что уже есть.\u003C\u002Fp\u003E\u003Cp\u003EТеперь можно\u003Cstrong\u003E запустить приложение\u003C\u002Fstrong\u003E и увидеть нижнюю навигационную панель в действии. При нажатии на вкладки нижней навигационной панели переходим на соответствующие страницы. Вы также увидите изящную панель навигации с анимацией во время касания вкладок.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"1489\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff73\u002F804\u002Fcc6\u002Ff73804cc68c246c0a420995faeda70dd.png\" data-width=\"2048\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Cstrong\u003EПереход на SinglePostPage и UserProfilePage\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EПрямо сейчас мы можем с комфортом перемещаться на страницы \u003Ccode\u003EPostsPage\u003C\u002Fcode\u003E, \u003Ccode\u003EUsersPage\u003C\u002Fcode\u003E и \u003Ccode\u003ESettingsPage\u003C\u002Fcode\u003E с помощью нижней навигации. Но чего нам не хватает, так это возможности перехода по маршрутам \u003Ccode\u003ESinglePostPage\u003C\u002Fcode\u003E и \u003Ccode\u003EUserProfilePage\u003C\u002Fcode\u003E при нажатии на плитки сообщений и аватары пользователей.\u003C\u002Fp\u003E\u003Cp\u003E\u003Ccode\u003EAutoRoute\u003C\u002Fcode\u003E предоставляет \u003Ca href=\"https:\u002F\u002Fautoroute.vercel.app\u002Fbasics\u002Fnavigation\"\u003E\u003Cu\u003Eмножество различных методов\u003C\u002Fu\u003E\u003C\u002Fa\u003E для навигации по вашему приложению. В этом примере мы будем придерживаться простого метода \u003Ccode\u003Epush\u003C\u002Fcode\u003E. Чтобы вызвать \u003Ccode\u003Epush\u003C\u002Fcode\u003E или любой другой метод навигации, сначала необходимо получить маршрутизатор с заданной областью действия, вызвав \u003Ccode\u003EAutoRouter.of(context)\u003C\u002Fcode\u003E или \u003Ccode\u003Econtext.router\u003C\u002Fcode\u003E. Затем можно вызвать метод по вашему выбору на скопированном маршрутизаторе и передать ему нужный маршрут(ы). Перейдите к файлу \u003Cstrong\u003Eposts_page.dart\u003C\u002Fstrong\u003E и настройте маршрутизацию на \u003Ccode\u003ESinglePostRoute\u003C\u002Fcode\u003E, вызвав метод push в аргументе \u003Ccode\u003EonTileTap\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E...\nchild: Column(\n  mainAxisAlignment: MainAxisAlignment.center,\n  children: [\n    for (int i = 0; i &lt; posts.length; i++)\n      PostTile(\n        tileColor: posts[i].color,\n        postTitle: posts[i].title,\n        onTileTap: () =\u003E context.router.push(\n          SinglePostRoute(\n            postId: posts[i].id,\n          ),\n        ),\n      ),\n  ],\n),\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь перейдем к файлу \u003Cstrong\u003Eusers_page.dart\u003C\u002Fstrong\u003E и проделаем то же самое для \u003Ccode\u003EUserProfileRoute\u003C\u002Fcode\u003E в аргументе \u003Ccode\u003EonAvatarTap\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"dart\"\u003E...\nchild: Column(\n  mainAxisAlignment: MainAxisAlignment.center,\n  children: [\n    for (int i = 0; i &lt; users.length; i++)\n      UserAvatar(\n        avatarColor: users[i].color,\n        username: 'user${users[i].id}',\n        onAvatarTap: () =\u003E context.router.push(\n          UserProfileRoute(\n            userId: users[i].id,\n          ),\n        ),\n      ),\n  ],\n),\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВ этом приложении мы осуществляем навигацию по маршрутам, расположенным в одном маршрутизаторе. Если необходимо перейти со страницы в одной навигационной вкладке\u002Fмаршрутизаторе на страницу в другой навигационной вкладке\u002Fмаршрутизаторе, то и это тоже возможно. Предположим, нужно перейти от \u003Ccode\u003EUserProfileRoute\u003C\u002Fcode\u003E к \u003Ccode\u003ESinglePostRoute\u003C\u002Fcode\u003E, для этого надо сделать следующее:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Econtext.navigateTo(PostsRouter(children: SinglePostRoute(postId: id)).\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь вы можете перезапустить приложение и опробовать всю навигацию, которую мы в результате настроили. Обратите внимание, что при нажатии на плитки постов и аватары пользователей вы должны увидеть кнопку \"Назад\", появившуюся в \u003Ccode\u003EScaffold\u003C\u002Fcode\u003E. Это потому, что ранее мы добавили виджет \u003Ccode\u003EAutoBackButton\u003C\u002Fcode\u003E в качестве ведущего аргумента \u003Ccode\u003EAutoTabsScaffold\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Ch3\u003EЗаключение\u003C\u002Fh3\u003E\u003Cp\u003EВот и все, наше приложение завершено! То время, которое мы сэкономили благодаря использованию \u003Ccode\u003EAutoRouter\u003C\u002Fcode\u003E, сделало данный подход беспроигрышным при создании нижней навигационной панели. Теперь вы можете использовать полученные здесь знания в своих собственных проектах и настроить все под свои индивидуальные нужды.\u003C\u002Fp\u003E\u003Chr\u002F\u003E\u003Cblockquote\u003E\u003Cp\u003EМатериал подготовлен в рамках курса \u003Ca href=\"https:\u002F\u002Fotus.pw\u002FsSF8\u002F\"\u003E«Flutter Mobile Developer». \u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003EВсех желающих приглашаем на demo-занятие \u003Cstrong\u003E«Explicit анимации и 3D-графика в Flutter»\u003C\u002Fstrong\u003E. На уроке рассмотрим технические детали анимации во Flutter, научимся создавать сложные составные параллельные и последовательные анимации, посмотрим основы использования двухмерных игровых движков (Flare, SpriteWidget) и создания трехмерной графики (Cube, адаптер для Unity, библиотека собственной разработки для использования WebGL в Flutter for Web-приложениях).\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Fotus.pw\u002Fy4RH\u002F\"\u003E\u003E\u003E РЕГИСТРАЦИЯ\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"flutter"},{"titleHtml":"автомаршрутизация"},{"titleHtml":"маршрутизация"},{"titleHtml":"Explicit анимации"},{"titleHtml":"3d-графика"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F219\u002F9e6\u002F1c6\u002F2199e61c668caaa47c5bd644e8472d6d.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F219\u002F9e6\u002F1c6\u002F2199e61c668caaa47c5bd644e8472d6d.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fotus\\\u002Fblog\\\u002F582266\\\u002F\"},\"headline\":\"Нижняя панель навигации Flutter с вложенной маршрутизацией (автомаршрутизация)\",\"datePublished\":\"2021-10-07T20:50:01+03:00\",\"dateModified\":\"2021-10-08T01:02:19+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"OTUS\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутиз...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fotus\\\u002Fblog\\\u002F582266\\\u002F#post-content-body\",\"about\":[\"c_otus\",\"h_programming\",\"h_flutter\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F582266\\\u002Fae64becb14f25799760c12d93d8ecce1\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F219\\\u002F9e6\\\u002F1c6\\\u002F2199e61c668caaa47c5bd644e8472d6d.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Ff73\\\u002F804\\\u002Fcc6\\\u002Ff73804cc68c246c0a420995faeda70dd.png\"]}","metaDescription":"Маршрутизация во Flutter  это обширная тема, поскольку она может быть выполнена множеством различных способов. Логичная и простая в навигации настройка маршрутизации однозначно приведет к улучшению...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"otus":{"alias":"otus","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F968\u002F422\u002F761\u002F968422761136a38a89fc391fd927f903.jpg","titleHtml":"OTUS","descriptionHtml":"Цифровые навыки от ведущих экспертов","relatedData":null,"statistics":{"postsCount":1483,"newsCount":2,"vacanciesCount":0,"employeesCount":46,"careerRating":null,"subscribersCount":66840,"rating":404.8,"invest":null},"foundationDate":{"year":"2017","month":"04","day":"01"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fotus.ru","staffNumber":"51–100 человек","registrationDate":"2017-03-22T08:17:26+00:00","representativeUser":{"alias":"MaxRokatansky","fullname":"OTUS"},"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fotus.ru"},{"title":"Facebook","url":"https:\u002F\u002Ffacebook.com\u002Fotus.ru"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fclub145052891"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002FOtusjava"}],"settings":{"analyticsSettings":[],"branding":null,"status":"active"},"metadata":{"titleHtml":"OTUS, Москва - Цифровые навыки от ведущих экспертов с 1 апреля 2017 г.","title":"OTUS, Москва - Цифровые навыки от ведущих экспертов с 1 апреля 2017 г.","keywords":["Программирование","Python","Java","Информационная безопасность","Машинное обучение"],"descriptionHtml":"1 483 статьи от авторов компании OTUS","description":"1 483 статьи от авторов компании OTUS"},"aDeskSettings":null,"careerAlias":"otus","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
