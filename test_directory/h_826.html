<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Simics: RISC-нём? / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/auriga\/blog\/582350\/"},"headline":"Simics: RISC-нём?","datePublished":"2021-10-08T12:22:38+03:00","dateModified":"2021-10-08T16:33:14+03:00","author":{"@type":"Person","name":"Андрей Породько"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Ранее в сериале&hellip; Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующ...","url":"https:\/\/habr.com\/ru\/company\/auriga\/blog\/582350\/#post-content-body","about":["c_auriga","h_analysis_design","h_virtualization","h_fpga","h_controllers","f_develop","f_admin"],"image":["https:\/\/habr.com\/share\/publication\/582350\/352b01273a6a667abcafd6c1bd75d3af\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/a1f\/884\/463\/a1f884463b2d45edefce7a012233ec48.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/f36\/a17\/2b4\/f36a172b4f5be16470412cea82d9f9ae.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/9c9\/0bf\/56a\/9c90bf56a0ec23f71f7d65f7803c40c8.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/436\/9a9\/7ed\/4369a97edda35aec693ab7f17d569f50.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Simics: RISC-нём?" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Simics: RISC-нём?" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Simics: RISC-нём?" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="582350" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-08T09:22:38.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/582350/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/auriga/blog/582350/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/582350/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="auriga" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/auriga/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/984/b3c/e65/984b3ce65b2fb74b58e9e2a5937fc0f8.png" width="48" class="tm-entity-image__pic"></div></a> <a href="https://career.habr.com/companies/auriga" rel="noopener" target="_blank" class="tm-grade tm-company-card__rating"><div class="tm-rating"><div class="tm-rating__header"><svg height="24" width="24" class="tm-svg-img tm-svg-grade__icon"><title>Оценка компании на Хабр Карьере</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#grade"></use></svg> <div class="tm-rating__counter tm-rating__counter_variant-grade">4.28</div></div> <div class="tm-rating__text tm-rating__text_variant-grade">
    Оценка
  </div></div></a> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">86.53</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/auriga/profile/" class="tm-company-card__name">
        Auriga
      </a> <div class="tm-company-card__description">Аурига — это люди</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/andy_pop/" title="andy_pop" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/46d/b62/4df/46db624dfe08eb2de976eef177aa6766.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/andy_pop/" class="tm-user-info__username">
      andy_pop
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-08T09:22:38.000Z" title="2021-10-08, 12:22">8  октября   в 12:22</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Simics: RISC-нём?</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/auriga/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Auriga</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/analysis_design/" class="tm-article-snippet__hubs-item-link"><span>Анализ и проектирование систем</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/virtualization/" class="tm-article-snippet__hubs-item-link"><span>Виртуализация</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/fpga/" class="tm-article-snippet__hubs-item-link"><span>FPGA</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/controllers/" class="tm-article-snippet__hubs-item-link"><span>Программирование микроконтроллеров</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим продолжением материала <a href="https://habr.com/ru/company/auriga/blog/504086/">«Симуляторы компьютерных систем – похожи ли на реальность»</a> моего коллеги <a href="https://habr.com/ru/users/alex_dzen/">@alex_dzen</a>.         </p><p>Из этих трех статей мы знаем, что есть такие симуляторы аппаратного обеспечения и ими пользуются серьезные дядьки из больших компаний. Наверное, меня тоже можно отнести к этим «дядькам», но у меня есть одна слабость — на досуге я люблю что-нибудь паять и использую для проектов «несерьезную» среду Arduino, где в качестве процессоров применяется что-нибудь из «несерьезных» Atmel-ARM или ESP32-RISC. И интрига в том, можно ли использовать Simics для небольших и хобби-проектов?</p><figure class="full-width "><img src="/img/image-loader.svg" height="440" data-src="https://habrastorage.org/getpro/habr/upload_files/a1f/884/463/a1f884463b2d45edefce7a012233ec48.png" data-width="780"/><figcaption></figcaption></figure><h3>Часть 1. 1+1</h3><p>Тихо, и без особого шума Intel выпустил общедоступную версию полноплатформенного симулятора Simics. <a href="https://software.intel.com/content/www/us/en/develop/articles/simics-simulator.html">По ссылке</a>, ознакомившись и согласившись с лицензией, можно скачать базовый набор пакетов. В него входят: собственно симулятор, модели процессоров Intel с ядром Nehalem<a href="#sdfootnote1sym"><sup>1</sup></a>, чипсета X58, модели нескольких типовых x86 компьютеров, пакет с Clear Linux (подготовленный к запуску в Simics) и некоторый набор учебных материалов. В публичную версию не вошел пакет Simics Eclipse. Однако разработку кода можно вести и в Visual Studio, в Notepad++, есть даже попытки «прикрутить» Simics к Qt Creator. Все это добро разворачивается специальным установщиком Intel, который нужно скачать там же.</p><p>Если, дочитав до этого места, вы уже решили, что это не для вас, не спешите. Несмотря на кажущийся минимальный набор, да еще и «устаревшие» модели процессоров, базовый пакет вполне самодостаточен, например, для разработки моделей и отладки драйверов устройств на шине PCI, USB1/2/3, I2C/I3C и т. д. Если же вы являетесь полноправным пользователем Xtensa SDK, то несложный интерфейс позволяет подключать к Simics любые процессоры, поддерживаемые Xtensa. А если немного пошарить среди примеров и файлов, то окажется, что можно моделировать и встраиваемые системы на базе RISC-процессоров. Вот это как раз то, что я и искал для себя. Я предлагаю вместе со мной смоделировать небольшую встраиваемую систему на базе RISC-процессора, ПЗУ, ОЗУ. По мере продвижения, я предлагаю добавить в систему защиту памяти, последовательный порт и пару новых инструкций для нашего процессора, позаимствовав их из существующих решений.</p><p>Чтобы не создавать модель процессора совсем уж с нуля (что, впрочем, вполне возможно даже в публичной версии) мы возьмем модель процессора sample-risc из расширенных примеров.</p><p>Скопируем ее себе в рабочий каталог Simics</p><pre><code class="bash">$> ./bin/project-setup --copy-module sample-risc</code></pre><p>Скомпилируем</p><pre><code class="bash">$> make sample-risc</code></pre><p>Теперь все готово чтобы собрать простейшую конфигурацию, состоящую из процессора и ОЗУ:</p><figure class="full-width "><img src="/img/image-loader.svg" height="600" data-src="https://habrastorage.org/getpro/habr/upload_files/f36/a17/2b4/f36a172b4f5be16470412cea82d9f9ae.png" data-width="1000"/><figcaption></figcaption></figure><p>Сделаем это прямо из командной строки Simics:</p><pre><code>simics> load-module sample-risc
simics> @import simics_common
simics> @MEMORY_SIZE = 0x10000000
simics> @cpu = simics_common.pre_conf_object("cpu","sample-risc")
simics> @cpu.freq_mhz = 40
simics> @cpu_core = simics_common.pre_conf_object("cpu_core","sample-risc-core")
simics> @cpu.current_risc_core = cpu_core
simics> @phys_mem = simics_common.pre_conf_object("phys_mem","memory-space")
simics> @cpu_core.physical_memory_space = phys_mem
simics> @mem = simics_common.pre_conf_object("ram", "ram")
simics> @mem_image = simics_common.pre_conf_object("mem_image", "image")
simics> @mem_image.size = MEMORY_SIZE
simics> @mem.image = mem_image
simics> @phys_mem.map = [[0x00000000, mem, 0, 0, MEMORY_SIZE]]
simics> @cpu_core.sample_risc = cpu
simics> @simics.SIM_add_configuration([cpu,cpu_core,phys_mem,mem,mem_image], None)</code></pre><p>И вот, у нас уже работают команды Simics чтения и записи в память:</p><pre><code>simics> phys_mem.write(0x100, 0xDEADBEEF)
simics> phys_mem.read(0x100)
3735928559 (BE)</code></pre><p>BE — означает, что память у нас «big-endian», как и полагается нашему RISC процессору. Обратите внимание, что строки, указанные в качестве первых параметров Python-функции <em>pre_conf_object()</em>, стали именами объектов в Simics. Прочитанное значение выведено в десятичном формате. Однако, нам привычнее 16-ти разрядная система счисления в контексте электроники и чипов:</p><pre><code>simics> output-radix 16
simics> phys_mem.read(0x100)
0xdeadbeef (BE)</code></pre><p>Память доступна, а значит уже можно вручную оттранслировать и записать в память программу и ее данные ;-)</p><figure class=""><img src="/img/image-loader.svg" height="303" data-src="https://habrastorage.org/getpro/habr/upload_files/9c9/0bf/56a/9c90bf56a0ec23f71f7d65f7803c40c8.png" data-width="300"/><figcaption></figcaption></figure><p>Как это выглядит можно посмотреть в тестах на модель sample-risc. Например, файл <em>s-add.py</em> демонстрирует инструкцию <em>add r1, r2</em>.</p><p>Чтобы не набирать все вышеприведенные команды каждый раз, давайте создадим компонент, интегрирующий в нашу систему процессор и память.</p><p>В рабочем каталоге Simics, в подкаталоге <em>modules </em>создадим папку <em>myrisc-comp.</em></p><figure class="full-width "><img src="/img/image-loader.svg" height="409" data-src="https://habrastorage.org/getpro/habr/upload_files/436/9a9/7ed/4369a97edda35aec693ab7f17d569f50.png" data-width="624"/><figcaption></figcaption></figure><p>И в ней файлы. Файл<em> Makefile:</em></p><pre><code class="cmake">#                                                              -*- Makefile -*-
# Simics module makefile
#

MODULE_COMPONENTS := RISC_controller

PYTHON_FILES = myrisc_comp.py module_load.py

THREAD_SAFE=yes
SIMICS_API := latest

include $(MODULE_MAKEFILE)
module_load.py
myrisc_comp.py
Файл module_load.py:
from . import myrisc_comp
myrisc_comp.RISC_controller.register()</code></pre><p>Этот файл будет загружен и исполнен автоматически при выполнении команды <em>load-module &lt;module></em>. В нем находится код регистрирующий объекты модели и добавляющий им специфические команды. Мы еще вернемся к <em>module_load.py</em> и с его помощью расширим функционал модели.</p><p>Файл <em>myrisc_comp.py:</em></p><pre><code class="python">import simics
import simics_common
from comp import *

class RISC_controller(StandardConnectorComponent):
    """Base class for RISC controller."""

    def setup(self):
        super().setup()
        if not self.instantiated.val:
            self.add_objects()

    class basename(StandardConnectorComponent.basename):
        val = "controller"

    class freq_mhz(SimpleConfigAttribute(40, 'i')):
        """Processor frequency in MHz, default is 40 MHz."""
        def setter(self, val):
            if val &lt;= 0:
                raise CompException('Illegal processor frequency %d' % val)
            self.val = val

    class mem_size(SimpleConfigAttribute(0x10000000, 'i')):
        """Contoller RAM size, default is 0x10000000 bytes."""
        def setter(self, val):
            if val &lt;= 0:
                raise CompException('Illegal controller memory size %d' % val)
            self.val = val

    class component_queue(StandardComponent.component_queue):
        def getter(self):
            return self._up.get_clock()

    def get_clock(self):
        sub_cmps = [x for x in self.obj.iface.component.get_slot_objects() if (
            isinstance(x, simics.conf_object_t) and hasattr(x.iface, 'component'))]
        clocks = []
        for c in sub_cmps:
            if hasattr(c, 'component_queue'):
                q = c.component_queue
                if q:
                    clocks.append(q)
        if len(clocks) > 0:
            return clocks[0]

    def add_objects(self):
        cpu_core = self.add_pre_obj('cpu_core', 'sample-risc-core')
        cpu = self.add_pre_obj('cpu', 'sample-risc')
        cpu.freq_mhz = self.freq_mhz.val
        cpu.current_risc_core = cpu_core
        cpu_core.sample_risc = cpu
        phys_mem = self.add_pre_obj('phys_mem', 'memory-space')
        cpu_core.physical_memory_space = phys_mem
        mem = self.add_pre_obj('ram', 'ram')
        mem_image = self.add_pre_obj('mem_image', 'image')
        mem_image.size = self.mem_size.val
        mem.image = mem_image
        phys_mem.map = [[0x00000000, mem, 0, 0, self.mem_size.val]]

    def get_processors(self):
        ret = [self.get_slot('cpu')]
        return list(set(ret))

    class top_level(StandardComponent.top_level):
        def _initialize(self):
            self.val = True

    class cpu_list(StandardComponent.cpu_list):
        def getter(self):
            return self._up.get_processors()</code></pre><p>В последнем файле мы видим уже знакомые нам команды, создающие те или иные объекты модели. Только вместо вызова <em>pre_conf_object()</em> используется метод <em>add_pre_obj()</em> из класса <em>StandardComponent</em>. Это позволяет вместо плоского набора объектов получить их иерархию. Мы это увидим чуть позже. Скомпилируем:</p><pre><code class="bash">$> make sample-risc</code></pre><p>Теперь модель нашего контроллера можно загрузить в Simics тремя командами:</p><pre><code>simics> load-module myrisc-comp
simics> $controller=(create-RISC-controller name="controller")
simics> instantiate-components</code></pre><p>Посмотрим, как выглядит иерархия объектов модели контроллера:</p><pre><code>simics> list-objects namespace=controller -tree
┐
├ cell ┐
│      └ ps 
├ cpu ┐
│     └ vtime ┐
│             ├ cycles 
│             └ ps 
├ cpu_core 
├ mem_image 
├ phys_mem 
└ ram ┐
      └ port ┐
             └ tags </code></pre><p>Но и три команды много ;-) Сделаем отдельный скрипт для запуска модели. В рабочем каталоге Simics, в подкаталоге <em>targets</em>, файл <em>myrisc.simics</em>:</p><pre><code>load-module myrisc-comp
$controller=(create-RISC-controller name="controller")
instantiate-components
controller.status</code></pre><p> Теперь вся модель может быть загружена одной командой:</p><pre><code>simics> run-command-file "%simics%/targets/myrisc.simics"
Status of controller [class RISC_controller]
============================================

Setup:
    Top component : controller
     Instantiated : True
      System Info : 

Attributes:
         freq_mhz : 40
         mem_size : 268435456

Connections:</code></pre><h3> Что в итоге? 1+1=2?</h3><p>Подведем промежуточный итог наших усилий. Мы автоматизировали создание нашей модели. Несмотря на то, что, казалось бы, три команды ввести несложно, автоматизация важна с той точки зрения, что создание модели не является самоцелью. Целью является ее многократный запуск при написании и отладке прошивки, при отладке взаимодействия с другими устройствами и системами (возможно, физическими) и, вероятно, даже долговременная работа в качестве замены подсистемы, которая еще не создана в железе.  </p><p> Осталось проверить что наш контроллер все также позволяет работать с памятью:</p><pre><code>simics> controller.phys_mem.write(0x100, 0xDEADBEEF)
simics> controller.phys_mem.read(0x100)
3735928559 (BE)</code></pre><p>На этом пока, пожалуй, стоит остановиться чтобы подумать и передохнуть… Но мы ведь с вами не закончили. Вы помните? Нам предстоит, еще как минимум — добавить ПЗУ, защиту памяти и последовательный порт. Не переключайтесь.</p><p><sup>[</sup><a href="#sdfootnote1anc"><sup>1</sup></a><sup>]</sup> <sup>Intel Core i7©, Intel Xeon 5500©, 5530, Intel Atom©</sup></p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bsimics%5D" class="tm-tags-list__link">simics</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bsimulation%5D" class="tm-tags-list__link">simulation</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80%5D" class="tm-tags-list__link">симулятор</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D1%8F%5D" class="tm-tags-list__link">симуляция</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80%D1%8B%5D" class="tm-tags-list__link">симуляторы</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhardware%5D" class="tm-tags-list__link">hardware</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhardware%20design%5D" class="tm-tags-list__link">hardware design</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdrivers%5D" class="tm-tags-list__link">drivers</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bfirmware%2Fhardware%5D" class="tm-tags-list__link">firmware/hardware</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%5D" class="tm-tags-list__link">виртуализация</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/auriga/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Auriga
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/analysis_design/" class="tm-hubs-list__link">
    Анализ и проектирование систем
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/virtualization/" class="tm-hubs-list__link">
    Виртуализация
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/fpga/" class="tm-hubs-list__link">
    FPGA
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/controllers/" class="tm-hubs-list__link">
    Программирование микроконтроллеров
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 19: ↑19 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 19: ↑19 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+19</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.7K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    22
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/auriga/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/984/b3c/e65/984b3ce65b2fb74b58e9e2a5937fc0f8.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/auriga/profile/" class="tm-company-snippet__title">Auriga</a> <div class="tm-company-snippet__description">Аурига — это люди</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <!----> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/andy_pop/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/46d/b62/4df/46db624dfe08eb2de976eef177aa6766.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 8 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    8
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">19</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Андрей Породько</span> <a href="/ru/users/andy_pop/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @andy_pop
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Инженер-разработчик ПО</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/auriga/blog/582350/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 3 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="1990-11-30T21:00:00.000Z" title="1990-12-01, 00:00">1  декабря  1990</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://auriga.com" target="_blank" class="tm-company-basic-info__link">
      auriga.com
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    501–1 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2020-04-29T06:34:05.000Z" title="2020-04-29, 09:34">29  апреля  2020</time></dd></dl> <!----></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/auriga/blog/582350/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/auriga/blog/582350/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"582350":{"id":"582350","timePublished":"2021-10-08T09:22:38+00:00","isCorporative":true,"lang":"ru","titleHtml":"Simics: RISC-нём?","leadData":{"textHtml":"\u003Cp\u003EРанее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим продолжением материала \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fauriga\u002Fblog\u002F504086\u002F\"\u003E«Симуляторы компьютерных систем – похожи ли на реальность»\u003C\u002Fa\u003E моего коллеги \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Falex_dzen\u002F\"\u003E@alex_dzen\u003C\u002Fa\u003E.         \u003C\u002Fp\u003E\u003Cp\u003EИз этих трех статей мы знаем, что есть такие симуляторы аппаратного обеспечения и ими пользуются серьезные дядьки из больших компаний. Наверное, меня тоже можно отнести к этим «дядькам», но у меня есть одна слабость — на досуге я люблю что-нибудь паять и использую для проектов «несерьезную» среду Arduino, где в качестве процессоров применятеся что-нибудь из «несерьезных» Atmel-ARM или ESP32-RISC. И интрига в том, можно ли использовать Simics для небольших и хобби-проектов?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1f\u002F884\u002F463\u002Fa1f884463b2d45edefce7a012233ec48.png","buttonTextHtml":"Расрыть интригу","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1f\u002F884\u002F463\u002Fa1f884463b2d45edefce7a012233ec48.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":8,"votesCount":8},"rating":19,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2802313","alias":"andy_pop","fullname":"Андрей Породько","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F46d\u002Fb62\u002F4df\u002F46db624dfe08eb2de976eef177aa6766.jpg","speciality":"Инженер-разработчик ПО"},"statistics":{"commentsCount":3,"favoritesCount":22,"readingCount":2716,"score":19,"votesCount":19},"hubs":[{"relatedData":null,"id":"22460","alias":"auriga","type":"corporative","title":"Блог компании Auriga","titleHtml":"Блог компании Auriga","isProfiled":false},{"relatedData":null,"id":"397","alias":"analysis_design","type":"collective","title":"Анализ и проектирование систем","titleHtml":"Анализ и проектирование систем","isProfiled":true},{"relatedData":null,"id":"7312","alias":"virtualization","type":"collective","title":"Виртуализация","titleHtml":"Виртуализация","isProfiled":true},{"relatedData":null,"id":"19733","alias":"fpga","type":"collective","title":"FPGA","titleHtml":"FPGA","isProfiled":true},{"relatedData":null,"id":"19737","alias":"controllers","type":"collective","title":"Программирование микроконтроллеров","titleHtml":"Программирование микроконтроллеров","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EРанее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим продолжением материала \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fauriga\u002Fblog\u002F504086\u002F\"\u003E«Симуляторы компьютерных систем – похожи ли на реальность»\u003C\u002Fa\u003E моего коллеги \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Falex_dzen\u002F\"\u003E@alex_dzen\u003C\u002Fa\u003E.         \u003C\u002Fp\u003E\u003Cp\u003EИз этих трех статей мы знаем, что есть такие симуляторы аппаратного обеспечения и ими пользуются серьезные дядьки из больших компаний. Наверное, меня тоже можно отнести к этим «дядькам», но у меня есть одна слабость — на досуге я люблю что-нибудь паять и использую для проектов «несерьезную» среду Arduino, где в качестве процессоров применяется что-нибудь из «несерьезных» Atmel-ARM или ESP32-RISC. И интрига в том, можно ли использовать Simics для небольших и хобби-проектов?\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"440\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1f\u002F884\u002F463\u002Fa1f884463b2d45edefce7a012233ec48.png\" data-width=\"780\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EЧасть 1. 1+1\u003C\u002Fh3\u003E\u003Cp\u003EТихо, и без особого шума Intel выпустил общедоступную версию полноплатформенного симулятора Simics. \u003Ca href=\"https:\u002F\u002Fsoftware.intel.com\u002Fcontent\u002Fwww\u002Fus\u002Fen\u002Fdevelop\u002Farticles\u002Fsimics-simulator.html\"\u003EПо ссылке\u003C\u002Fa\u003E, ознакомившись и согласившись с лицензией, можно скачать базовый набор пакетов. В него входят: собственно симулятор, модели процессоров Intel с ядром Nehalem\u003Ca href=\"#sdfootnote1sym\"\u003E\u003Csup\u003E1\u003C\u002Fsup\u003E\u003C\u002Fa\u003E, чипсета X58, модели нескольких типовых x86 компьютеров, пакет с Clear Linux (подготовленный к запуску в Simics) и некоторый набор учебных материалов. В публичную версию не вошел пакет Simics Eclipse. Однако разработку кода можно вести и в Visual Studio, в Notepad++, есть даже попытки «прикрутить» Simics к Qt Creator. Все это добро разворачивается специальным установщиком Intel, который нужно скачать там же.\u003C\u002Fp\u003E\u003Cp\u003EЕсли, дочитав до этого места, вы уже решили, что это не для вас, не спешите. Несмотря на кажущийся минимальный набор, да еще и «устаревшие» модели процессоров, базовый пакет вполне самодостаточен, например, для разработки моделей и отладки драйверов устройств на шине PCI, USB1\u002F2\u002F3, I2C\u002FI3C и т. д. Если же вы являетесь полноправным пользователем Xtensa SDK, то несложный интерфейс позволяет подключать к Simics любые процессоры, поддерживаемые Xtensa. А если немного пошарить среди примеров и файлов, то окажется, что можно моделировать и встраиваемые системы на базе RISC-процессоров. Вот это как раз то, что я и искал для себя. Я предлагаю вместе со мной смоделировать небольшую встраиваемую систему на базе RISC-процессора, ПЗУ, ОЗУ. По мере продвижения, я предлагаю добавить в систему защиту памяти, последовательный порт и пару новых инструкций для нашего процессора, позаимствовав их из существующих решений.\u003C\u002Fp\u003E\u003Cp\u003EЧтобы не создавать модель процессора совсем уж с нуля (что, впрочем, вполне возможно даже в публичной версии) мы возьмем модель процессора sample-risc из расширенных примеров.\u003C\u002Fp\u003E\u003Cp\u003EСкопируем ее себе в рабочий каталог Simics\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E$\u003E .\u002Fbin\u002Fproject-setup --copy-module sample-risc\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EСкомпилируем\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E$\u003E make sample-risc\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь все готово чтобы собрать простейшую конфигурацию, состоящую из процессора и ОЗУ:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"600\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff36\u002Fa17\u002F2b4\u002Ff36a172b4f5be16470412cea82d9f9ae.png\" data-width=\"1000\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСделаем это прямо из командной строки Simics:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E load-module sample-risc\nsimics\u003E @import simics_common\nsimics\u003E @MEMORY_SIZE = 0x10000000\nsimics\u003E @cpu = simics_common.pre_conf_object(\"cpu\",\"sample-risc\")\nsimics\u003E @cpu.freq_mhz = 40\nsimics\u003E @cpu_core = simics_common.pre_conf_object(\"cpu_core\",\"sample-risc-core\")\nsimics\u003E @cpu.current_risc_core = cpu_core\nsimics\u003E @phys_mem = simics_common.pre_conf_object(\"phys_mem\",\"memory-space\")\nsimics\u003E @cpu_core.physical_memory_space = phys_mem\nsimics\u003E @mem = simics_common.pre_conf_object(\"ram\", \"ram\")\nsimics\u003E @mem_image = simics_common.pre_conf_object(\"mem_image\", \"image\")\nsimics\u003E @mem_image.size = MEMORY_SIZE\nsimics\u003E @mem.image = mem_image\nsimics\u003E @phys_mem.map = [[0x00000000, mem, 0, 0, MEMORY_SIZE]]\nsimics\u003E @cpu_core.sample_risc = cpu\nsimics\u003E @simics.SIM_add_configuration([cpu,cpu_core,phys_mem,mem,mem_image], None)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EИ вот, у нас уже работают команды Simics чтения и записи в память:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E phys_mem.write(0x100, 0xDEADBEEF)\nsimics\u003E phys_mem.read(0x100)\n3735928559 (BE)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EBE — означает, что память у нас «big-endian», как и полагается нашему RISC процессору. Обратите внимание, что строки, указанные в качестве первых параметров Python-функции \u003Cem\u003Epre_conf_object()\u003C\u002Fem\u003E, стали именами объектов в Simics. Прочитанное значение выведено в десятичном формате. Однако, нам привычнее 16-ти разрядная система счисления в контексте электроники и чипов:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E output-radix 16\nsimics\u003E phys_mem.read(0x100)\n0xdeadbeef (BE)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПамять доступна, а значит уже можно вручную оттранслировать и записать в память программу и ее данные ;-)\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"303\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9c9\u002F0bf\u002F56a\u002F9c90bf56a0ec23f71f7d65f7803c40c8.png\" data-width=\"300\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКак это выглядит можно посмотреть в тестах на модель sample-risc. Например, файл \u003Cem\u003Es-add.py\u003C\u002Fem\u003E демонстрирует инструкцию \u003Cem\u003Eadd r1, r2\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\u003Cp\u003EЧтобы не набирать все вышеприведенные команды каждый раз, давайте создадим компонент, интегрирующий в нашу систему процессор и память.\u003C\u002Fp\u003E\u003Cp\u003EВ рабочем каталоге Simics, в подкаталоге \u003Cem\u003Emodules \u003C\u002Fem\u003Eсоздадим папку \u003Cem\u003Emyrisc-comp.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"409\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F436\u002F9a9\u002F7ed\u002F4369a97edda35aec693ab7f17d569f50.png\" data-width=\"624\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EИ в ней файлы. Файл\u003Cem\u003E Makefile:\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"cmake\"\u003E#                                                              -*- Makefile -*-\n# Simics module makefile\n#\n\nMODULE_COMPONENTS := RISC_controller\n\nPYTHON_FILES = myrisc_comp.py module_load.py\n\nTHREAD_SAFE=yes\nSIMICS_API := latest\n\ninclude $(MODULE_MAKEFILE)\nmodule_load.py\nmyrisc_comp.py\nФайл module_load.py:\nfrom . import myrisc_comp\nmyrisc_comp.RISC_controller.register()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EЭтот файл будет загружен и исполнен автоматически при выполнении команды \u003Cem\u003Eload-module &lt;module\u003E\u003C\u002Fem\u003E. В нем находится код регистрирующий объекты модели и добавляющий им специфические команды. Мы еще вернемся к \u003Cem\u003Emodule_load.py\u003C\u002Fem\u003E и с его помощью расширим функционал модели.\u003C\u002Fp\u003E\u003Cp\u003EФайл \u003Cem\u003Emyrisc_comp.py:\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eimport simics\nimport simics_common\nfrom comp import *\n\nclass RISC_controller(StandardConnectorComponent):\n    \"\"\"Base class for RISC controller.\"\"\"\n\n    def setup(self):\n        super().setup()\n        if not self.instantiated.val:\n            self.add_objects()\n\n    class basename(StandardConnectorComponent.basename):\n        val = \"controller\"\n\n    class freq_mhz(SimpleConfigAttribute(40, 'i')):\n        \"\"\"Processor frequency in MHz, default is 40 MHz.\"\"\"\n        def setter(self, val):\n            if val &lt;= 0:\n                raise CompException('Illegal processor frequency %d' % val)\n            self.val = val\n\n    class mem_size(SimpleConfigAttribute(0x10000000, 'i')):\n        \"\"\"Contoller RAM size, default is 0x10000000 bytes.\"\"\"\n        def setter(self, val):\n            if val &lt;= 0:\n                raise CompException('Illegal controller memory size %d' % val)\n            self.val = val\n\n    class component_queue(StandardComponent.component_queue):\n        def getter(self):\n            return self._up.get_clock()\n\n    def get_clock(self):\n        sub_cmps = [x for x in self.obj.iface.component.get_slot_objects() if (\n            isinstance(x, simics.conf_object_t) and hasattr(x.iface, 'component'))]\n        clocks = []\n        for c in sub_cmps:\n            if hasattr(c, 'component_queue'):\n                q = c.component_queue\n                if q:\n                    clocks.append(q)\n        if len(clocks) \u003E 0:\n            return clocks[0]\n\n    def add_objects(self):\n        cpu_core = self.add_pre_obj('cpu_core', 'sample-risc-core')\n        cpu = self.add_pre_obj('cpu', 'sample-risc')\n        cpu.freq_mhz = self.freq_mhz.val\n        cpu.current_risc_core = cpu_core\n        cpu_core.sample_risc = cpu\n        phys_mem = self.add_pre_obj('phys_mem', 'memory-space')\n        cpu_core.physical_memory_space = phys_mem\n        mem = self.add_pre_obj('ram', 'ram')\n        mem_image = self.add_pre_obj('mem_image', 'image')\n        mem_image.size = self.mem_size.val\n        mem.image = mem_image\n        phys_mem.map = [[0x00000000, mem, 0, 0, self.mem_size.val]]\n\n    def get_processors(self):\n        ret = [self.get_slot('cpu')]\n        return list(set(ret))\n\n    class top_level(StandardComponent.top_level):\n        def _initialize(self):\n            self.val = True\n\n    class cpu_list(StandardComponent.cpu_list):\n        def getter(self):\n            return self._up.get_processors()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EВ последнем файле мы видим уже знакомые нам команды, создающие те или иные объекты модели. Только вместо вызова \u003Cem\u003Epre_conf_object()\u003C\u002Fem\u003E используется метод \u003Cem\u003Eadd_pre_obj()\u003C\u002Fem\u003E из класса \u003Cem\u003EStandardComponent\u003C\u002Fem\u003E. Это позволяет вместо плоского набора объектов получить их иерархию. Мы это увидим чуть позже. Скомпилируем:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"bash\"\u003E$\u003E make sample-risc\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EТеперь модель нашего контроллера можно загрузить в Simics тремя командами:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E load-module myrisc-comp\nsimics\u003E $controller=(create-RISC-controller name=\"controller\")\nsimics\u003E instantiate-components\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПосмотрим, как выглядит иерархия объектов модели контроллера:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E list-objects namespace=controller -tree\n┐\n├ cell ┐\n│      └ ps \n├ cpu ┐\n│     └ vtime ┐\n│             ├ cycles \n│             └ ps \n├ cpu_core \n├ mem_image \n├ phys_mem \n└ ram ┐\n      └ port ┐\n             └ tags \u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EНо и три команды много ;-) Сделаем отдельный скрипт для запуска модели. В рабочем каталоге Simics, в подкаталоге \u003Cem\u003Etargets\u003C\u002Fem\u003E, файл \u003Cem\u003Emyrisc.simics\u003C\u002Fem\u003E:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Eload-module myrisc-comp\n$controller=(create-RISC-controller name=\"controller\")\ninstantiate-components\ncontroller.status\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E Теперь вся модель может быть загружена одной командой:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E run-command-file \"%simics%\u002Ftargets\u002Fmyrisc.simics\"\nStatus of controller [class RISC_controller]\n============================================\n\nSetup:\n    Top component : controller\n     Instantiated : True\n      System Info : \n\nAttributes:\n         freq_mhz : 40\n         mem_size : 268435456\n\nConnections:\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3\u003E Что в итоге? 1+1=2?\u003C\u002Fh3\u003E\u003Cp\u003EПодведем промежуточный итог наших усилий. Мы автоматизировали создание нашей модели. Несмотря на то, что, казалось бы, три команды ввести несложно, автоматизация важна с той точки зрения, что создание модели не является самоцелью. Целью является ее многократный запуск при написании и отладке прошивки, при отладке взаимодействия с другими устройствами и системами (возможно, физическими) и, вероятно, даже долговременная работа в качестве замены подсистемы, которая еще не создана в железе.  \u003C\u002Fp\u003E\u003Cp\u003E Осталось проверить что наш контроллер все также позволяет работать с памятью:\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode\u003Esimics\u003E controller.phys_mem.write(0x100, 0xDEADBEEF)\nsimics\u003E controller.phys_mem.read(0x100)\n3735928559 (BE)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EНа этом пока, пожалуй, стоит остановиться чтобы подумать и передохнуть… Но мы ведь с вами не закончили. Вы помните? Нам предстоит, еще как минимум — добавить ПЗУ, защиту памяти и последовательный порт. Не переключайтесь.\u003C\u002Fp\u003E\u003Cp\u003E\u003Csup\u003E[\u003C\u002Fsup\u003E\u003Ca href=\"#sdfootnote1anc\"\u003E\u003Csup\u003E1\u003C\u002Fsup\u003E\u003C\u002Fa\u003E\u003Csup\u003E]\u003C\u002Fsup\u003E \u003Csup\u003EIntel Core i7©, Intel Xeon 5500©, 5530, Intel Atom©\u003C\u002Fsup\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"simics"},{"titleHtml":"simulation"},{"titleHtml":"симулятор"},{"titleHtml":"симуляция"},{"titleHtml":"симуляторы"},{"titleHtml":"hardware"},{"titleHtml":"hardware design"},{"titleHtml":"drivers"},{"titleHtml":"firmware\u002Fhardware"},{"titleHtml":"виртуализация"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1f\u002F884\u002F463\u002Fa1f884463b2d45edefce7a012233ec48.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1f\u002F884\u002F463\u002Fa1f884463b2d45edefce7a012233ec48.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fauriga\\\u002Fblog\\\u002F582350\\\u002F\"},\"headline\":\"Simics: RISC-нём?\",\"datePublished\":\"2021-10-08T12:22:38+03:00\",\"dateModified\":\"2021-10-08T16:33:14+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Андрей Породько\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Ранее в сериале&hellip; Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующ...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fauriga\\\u002Fblog\\\u002F582350\\\u002F#post-content-body\",\"about\":[\"c_auriga\",\"h_analysis_design\",\"h_virtualization\",\"h_fpga\",\"h_controllers\",\"f_develop\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F582350\\\u002F352b01273a6a667abcafd6c1bd75d3af\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fa1f\\\u002F884\\\u002F463\\\u002Fa1f884463b2d45edefce7a012233ec48.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Ff36\\\u002Fa17\\\u002F2b4\\\u002Ff36a172b4f5be16470412cea82d9f9ae.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F9c9\\\u002F0bf\\\u002F56a\\\u002F9c90bf56a0ec23f71f7d65f7803c40c8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F436\\\u002F9a9\\\u002F7ed\\\u002F4369a97edda35aec693ab7f17d569f50.png\"]}","metaDescription":"Ранее в сериале… Ах, да, не все технари уважают сериалы. Тем не менее, слово Simics уже было написано в заголовке и мне не отвертеться от того, что все последующее будет своеобразным практическим...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"auriga":{"alias":"auriga","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F984\u002Fb3c\u002Fe65\u002F984b3ce65b2fb74b58e9e2a5937fc0f8.png","titleHtml":"Auriga","descriptionHtml":"Аурига — это люди","relatedData":null,"statistics":{"postsCount":26,"newsCount":0,"vacanciesCount":1,"employeesCount":35,"careerRating":4.28,"subscribersCount":83,"rating":86.53,"invest":null},"foundationDate":{"year":"1990","month":"12","day":"01"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"http:\u002F\u002Fauriga.com","staffNumber":"501–1 000 человек","registrationDate":"2020-04-29T06:34:05+00:00","representativeUser":null,"contacts":[],"settings":{"analyticsSettings":[{"type":"ym","trackingId":"68936620"}],"branding":null,"status":"active"},"metadata":{"titleHtml":"Auriga, Москва - Аурига — это люди с 1 декабря 1990 г.","title":"Auriga, Москва - Аурига — это люди с 1 декабря 1990 г.","keywords":["C++","C#","Python","Open source","Карьера в IT-индустрии"],"descriptionHtml":"26 статей от авторов компании Auriga","description":"26 статей от авторов компании Auriga"},"aDeskSettings":null,"careerAlias":"auriga","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
