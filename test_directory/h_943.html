<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Микрофронтенды: наш путь к более быстрому и гибкому сайту / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/leroy_merlin\/blog\/581938\/"},"headline":"Микрофронтенды: наш путь к более быстрому и гибкому сайту","datePublished":"2021-10-06T16:51:12+03:00","dateModified":"2021-10-06T19:58:53+03:00","author":{"@type":"Person","name":"Georgii Koni"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы.","url":"https:\/\/habr.com\/ru\/company\/leroy_merlin\/blog\/581938\/#post-content-body","about":["c_leroy_merlin","h_webdev","h_microservices","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/581938\/fe5819908e549e7e8186da5ac50f4d38\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/414\/bb6\/99a\/414bb699abd04a44e394c8ab0da88e31.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/984\/ad2\/26c\/984ad226c0fcfec5227079da7e84ff17.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/686\/dd1\/c9c\/686dd1c9c0cffe484f3382f0ed3f2687.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/407\/a79\/522\/407a79522b916225cafc932270b0ea2b.jpg"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Микрофронтенды: наш путь к более быстрому и гибкому сайту" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Микрофронтенды: наш путь к более быстрому и гибкому сайту" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Микрофронтенды: наш путь к более быстрому и гибкому сайту" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/332/ad7/374/332ad73746f0d36a6433f1361dafd306.jpg" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/332/ad7/374/332ad73746f0d36a6433f1361dafd306.jpg" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/332/ad7/374/332ad73746f0d36a6433f1361dafd306.jpg" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/332/ad7/374/332ad73746f0d36a6433f1361dafd306.jpg" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/332/ad7/374/332ad73746f0d36a6433f1361dafd306.jpg" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="581938" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-06T13:51:12.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/581938/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/leroy_merlin/blog/581938/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/332/ad7/374/332ad73746f0d36a6433f1361dafd306.jpg" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/581938/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="leroy_merlin" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/leroy_merlin/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/f4d/f89/aaf/f4df89aaf5d4dcfc45d4da846e78640c.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">80.33</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/leroy_merlin/profile/" class="tm-company-card__name">
        Леруа Мерлен
      </a> <div class="tm-company-card__description">Мы строим технологическую компанию-платформу.</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/cloudofgeorge/" title="cloudofgeorge" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/79c/80a/73f/79c80a73fee05ea629cefc6c3ca88573.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/cloudofgeorge/" class="tm-user-info__username">
      cloudofgeorge
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-06T13:51:12.000Z" title="2021-10-06, 16:51">6  октября   в 16:51</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Микрофронтенды: наш путь к более быстрому и гибкому сайту</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/leroy_merlin/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Леруа Мерлен</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/webdev/" class="tm-article-snippet__hubs-item-link"><span>Разработка веб-сайтов</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/microservices/" class="tm-article-snippet__hubs-item-link"><span>Микросервисы</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/414/bb6/99a/414bb699abd04a44e394c8ab0da88e31.jpg" width="780" height="440" data-src="https://habrastorage.org/getpro/habr/upload_files/414/bb6/99a/414bb699abd04a44e394c8ab0da88e31.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли к этому решению, каким образом организовано тестирование фрагментов сайта, а также немного о повседневных задачах разработчиков, которые создают компоненты для такого модульного сайта. Если вы тоже занимаетесь микрофронтами или планируете это делать, обязательно делитесь опытом и присоединяйтесь к нашей дискуссии.</p><p>Микрофронтенды — очень перспективное направление, однако теории по этой теме намного больше чем практики. Леруа Мерлен уже прошла часть этого пути, и мы хотим поделиться с вами нашим опытом. </p><p>Вообще работа с микрофронтами — в любом случае новаторский проект. Мы хотели создать новый, более гибкий сайт, обеспечив server side rendering (генерация статической html-разметки) с соответствующей оптимизацией для пользователей, так и для SEO. Кстати, оптимизация под поисковики была важной задачей, потому что именно она помогла “продать” проект бизнесу, показав реальный результат в виде уменьшения TTM (Time To Market).</p><h2>Создание платформы микрофронтендов Okapi</h2><p>Начнем с того, как мы пришли к этому решению. Некоторое время наш сайт работал на базе Bitrix. Функционировал он нормально, но мы были сильно ограничены в масштабировании и по мере появления новых идей развития e-com, возникали различные технические ограничения. А поскольку мы хотим быть более гибкими, стильными и молодежными увеличить долю оборота e-com, нужно было что-то менять. </p><p>К идее микросервисов на фронтенде мы пришли не сразу. Еще до этого, в 2016 году стартовал проект Elbrus по переходу на новую платформу AEM (Adobe experience manager). Это, конечно, не самое популярное в России решение, но оно явно было функциональнее Bitrix. И Леруа Мерлен окончательно переехал на AEM в апреле 2019 года, когда мы перевели на новую платформу регион с самым большим трафиком — то есть Москву. </p><p>Спустя некоторое время мы заметили, что имеем длинный релизный цикл, большой срок регрессивного тестирования. Все это формировалось как снежный ком, из-за влияния команд друг на друга. Фактически мы получили монолит, которым сложно управлять, и который сложно развивать. Командам разработки приходилось достаточно долго выносить новый функционал в продуктив. Ведь если мы готовим релиз, и в каком-то компоненте обнаруживается критичный баг, приходится ждать его исправления, даже если сама задача не такая уж важная. К тому же на рынке наблюдался (да и сейчас наблюдается) дефицит компетентных разработчиков под AEM. Мы сотрудничали с подрядчиками, а найти свободных людей просто на рынке было невозможно. Именно тогда было принято решение переходить на микрофронтовую архитектуру, чтобы предоставить различным продуктовым командам свой микрофронт, который они создают, развивают и запускают независимо от коллег.</p><h2>Создание платформы микрофронтендов Okapi</h2><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/984/ad2/26c/984ad226c0fcfec5227079da7e84ff17.jpg" alt="Окапи, или лесной жираф — это редкое животное, смесь многих представителей парнокопытных" title="Окапи, или лесной жираф — это редкое животное, смесь многих представителей парнокопытных" width="600" height="350" data-src="https://habrastorage.org/getpro/habr/upload_files/984/ad2/26c/984ad226c0fcfec5227079da7e84ff17.jpg" data-blurred="true"/><figcaption>Окапи, или лесной жираф — это редкое животное, смесь многих представителей парнокопытных</figcaption></figure><p>Посовещавшись, в середине 2019 года мы начали создавать собственную платформу для работы с микрофронтами на базе React. </p><p>Okapi — это одновременно набор библиотек и небольшой сервер приложений с использованием библиотеки react, которые используют команды Леруа Мерлен для создания микрофронтендов. Сейчас мы имеем платформу, которая обеспечивает работу и связки между микрофронтендами. Первая версия библиотеки была готова примерно через год. Конечно, реализация подобной инициативы потребовала найма новых разработчиков, и ребята продолжают присоединяться к командам микрофронтендов, потому что нам нужны дополнительные руки и опыт, а для разработчиков подобный проект — возможность поработать с чем-то интересным. </p><h2>Как именно все это работает </h2><figure class="full-width "><img src="/img/image-loader.svg" height="721" data-src="https://habrastorage.org/getpro/habr/upload_files/686/dd1/c9c/686dd1c9c0cffe484f3382f0ed3f2687.png" data-width="982"/><figcaption></figcaption></figure><p>Для начала немного терминологии и уточнений из схемы архитектуры:</p><ul><li><p><strong>Микрофронтенд</strong> - самостоятельное приложение, имеющее собственный адрес и публичный API</p></li><li><p><strong>Виджет/ремоут</strong> - компонент, предоставляемый микрофронтендом, который пере используется другими микрофронтендами (кнопка, форма, шапка приложения и т.д.). </p></li><li><p><strong>BFF</strong> - Backend for frontend - сервер, выполняющий запросы к внешним сервисам и подготавливающий полученные данные в удобной для микро фронта форме.</p></li><li><p><strong>Service Discovery</strong> - сервис передачи данных между приложениями.</p></li><li><p><strong>AEM Dispatcher</strong> - Adobe Experience Manager Dispatcher. В этом контексте он управляет информацией о страницах и данными.</p></li></ul><p>Каждый микрофронтенд - это приложение (App1 , App2), которое использует библиотеку Okapi. При запуске приложение сообщает в Service Discovery своё имя и адрес сервера, на котором находится. Service Discovery рассылает всем зарегистрированным приложениям обновленные данные. В итоге, у каждого приложения всегда есть актуальная схема других приложений. </p><p>Клиент делает запрос к App1. Запрос приходит на AEM Dispatcher, который редиректит его на нужный микрофронтенд. App1 через BFF1 запрашивает у AEM Dispatcher информацию о запрашиваемой странице, а у внешних сервисов необходимые данные. App1 формирует html страницу (SSR), куда добавляет ссылки на статические ресурсы на CDN и скрипты аналитики. Клиент получает страницу, скачиваются клиентские бандлы приложения и библиотека React и происходит гидрация - построение SPA на основе html с микрофронтенда. При переходах внутри микрофронтенда - SPA делает запросы в BFF для получения данных о странице, не задействуя SSR. Если клиент переходит на другой микрофронтенд (App2), то App1 проверяет есть ли у него информация об этом микрофронтенде, если нет - она запрашивается у Service Discovery. App 1 делает запрос к App 2 за его расширенной конфигурацией со списком опубликованных ремоут компонентов, ссылками на клиентские бандлы и стили. App 1 добавляет в свой роутер роуты из App 2 и подключает его клиентские бандлы к себе. Происходит переход на другой роут без перерисовки страницы.  </p><p>Чтобы продуктовые команды могли работать максимально эффективно, за год мы подготовили не только библиотеки Okapi, но также связанные сервисы —  репозиторий с шаблоном для создания базового приложений/микрофронтенда с уже настроенными инструментами, настроенный CI/CD, дизайн систему и прочее.</p><p>Обновление версий нашей библиотеки okapi происходит через NPM Registry, который установлен на серверах компании. Чтобы выкатить новую версию, мы создаем changelog через Change Set с описанием внесенных изменений, которые мы внесли. Если предложенные изменения были проверены и одобрены, формируется итоговый Change Set из всех текущих коммитов, а обновленный код переезжает в продуктив, а номер версии библиотеки увеличивается на 1 с помощью инструмента "Lerna".</p><h2>Решаем проблему переиспользования</h2><p>Сейчас мы работаем над расширением возможностей микрофронтендов — над Remote-компонентами. Это виджеты, которые можно переиспользовать на разных микрофронтендах.</p><p>Для решения переиспользования кода/компонентов мы построили схему взаимодействия.</p><p>Микрофронтенд A имеет компонент для переиспользования. Микрофронтенд Z запрашивает по сети компонент от микрофронтенд A и использует у себя в приложение. При этом все контракты и логика сохраняются, а также все работает с поддержкой SSR. Такими компонентами являются шапка, подвал карусели товаров и тд. Так мы решаем основной вопрос потребления и распространения кодовой базы.</p><h2>Сложности на пути</h2><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/407/a79/522/407a79522b916225cafc932270b0ea2b.jpg" width="910" height="512" data-src="https://habrastorage.org/getpro/habr/upload_files/407/a79/522/407a79522b916225cafc932270b0ea2b.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Конечно, не все складывалось гладко. Вообще сложностей было много, они встречались из-за того, что мы создавали на тот момент принципиально новый инструмент. Систему, которая может обеспечивать работу микрофронтендов с поддержкой SSR. При разработке самого решения мы пытались опробовать много гипотез, при реализации конечных микрофронтендов с использованием нашего инструмента - мы делали дополнительное обучение/мастер классы по принципам работы с изоморфными приложениями, а также по правилам поддержания высокого качества кода, что закладывалось с учетом quality first подхода. Что выражается в автоматизации всего и вся - исключая человеческий фактор, в высоком проценте покрытия unit-тестами (минимум 80%), однако мы понимаем что это false positive значение, которые мы стараемся балансировать с помощью интеграционных и e2e тестов. Вследствие нам пришлось ставить рамки для разработчиков, чтобы они писали тесты на все свои кейсы</p><p>Можно выделить основные моменты, которые точно будут актуальны для всех, кто захочет строить подобную архитектуру у себя. </p><p>Когда люди начинают работать в новой системе, очень сложно бывает понять, как “играть по новым правилам”. Сразу создать команду для разработки и поддержки микрофронтенда, которая понимает, что она делает — нереально.  Для помощи и быстрого старта мы обеспечили команды большим количеством структурированной документации на любой вопрос. Если вдруг возникла форс-мажорная ситуация при которой ответа в документации вдруг не нашлось - команда платформы okapi может проконсультировать другие команды микрофронтендов в соответствующих публичных чатах, с их помощью мы и вносим недостающие части в документацию и актуализируем знания.</p><p>Было сформулировано правило: если возникает проблема, мы ее решаем и добавляем раздел в руководство. В результате за год появилась база знаний, которая  на 95% покрывает развертывание, CI/CD, ревью кода и так далее. Но здесь очень важно соблюдать баланс между количеством документации и ее полнотой. Если руководств слишком много — никто не будет их читать, а если мало — они не помогут решить проблемы.</p><p>Чтобы упростить адаптацию, мы создали систему светофора. Продуктовые разработчики прогоняют его через инструменты анализа в каждом коммите, который принадлежит pull request’у. Такими инструментами является “Sonar qube”, typecheck от typescript, все возможные линтеры “eslint”, “stylelint” проверка каммитов на правильное название соответствующее шаблону номеров задач в таск менеджере и тд.  В процессе работы над первыми микрофронтендом мы определили три категории оценок - светофор.</p><p>Красный - Запрещенные действия. К примеру: отсутствие изоляции стилей между микрофронтенда</p><p>Желтый - не рекомендуются. К примеру: некоторые решения или библиотеки много весят в сборке и аффектов на bundle size</p><p>Зеленый - Рекомендации для команд работающих с микрофронтенда. К примеру: Использовать инструменты и настройки, что уже заложены в микрофронтенде и не редактировать без особой нужды правила/конфигурации инструментов проверки кода.</p><h2>Планы развития</h2><p>Существует проблема - сейчас создание новых микрофронтендов и их присоединение, а также настройка pipeline и тд - происходит вручную силами нескольких человек и некого количества времени. Разумеется это дорогая операции и мы решили инвестировать наше время в создание полностью автоматизированной системы. Мы хотим сделать так, чтобы пользователи заходили на какой-то дашборд и могли буквально “накликать” себе микрофронтенды без нашего участия. Это большие планы на ближайшие годы, и поэтому наш бэклог на сегодняшний день полон интересных и перспективных задач. </p><h2>Результаты</h2><p>Подведем небольшие итоги. Создав для себя Okapi, мы добились полной автономности продуктовых команд, которые получили независимые релизные циклы, без какого-либо влияния на другие приложения. Кроме этого сокращение TTM (time to market) в некоторых случаях достигало нескольких раз. Так, как ранее мы могли ждать релиз фичи несколько недель и даже месяцев, то сейчас это сократилось до одного спринта, а если задача срочная - то нескольких дней.</p><p>На этом долгом пути в несколько лет и кучи итераций мы готовы рекомендовать подход микрофронтенды, если вы уже крупная компания, которая очевидно страдает от долгих или конфликтных релизов. Если вы готовы инвестировать время и деньги в реализацию такого подхода с технической стороны, обучение сотрудников и налаживание инфраструктуры и процессов вокруг. Вам нужно будет написать очень много внутренней документации на каждый чих. Иначе этот большой титан может рухнуть и покажет себя еще хуже чем проверенный временем монолит. Микрофронтенды - это не панацея, это один из способов решить боль или усилить ее.</p><p>В настоящий момент на сайте запущено уже 7 микрофронтовых приложений, через которые проходит большая часть пользовательского трафика, а еще 9 приложений готовится к релизу. В их числе  главная страница, карточка товара, личный кабинет пользователей В2С и В2В и прочие разделы с менее интенсивным трафиком.</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D1%8B%5D" class="tm-tags-list__link">микросервисы</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D0%B4%D1%8B%5D" class="tm-tags-list__link">микрофронтенды</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%B5%D0%B1-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%5D" class="tm-tags-list__link">веб-приложения</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/leroy_merlin/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Леруа Мерлен
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/webdev/" class="tm-hubs-list__link">
    Разработка веб-сайтов
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/microservices/" class="tm-hubs-list__link">
    Микросервисы
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 8: ↑6 и ↓2</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 8: ↑6 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+4</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    40
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/leroy_merlin/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/f4d/f89/aaf/f4df89aaf5d4dcfc45d4da846e78640c.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/leroy_merlin/profile/" class="tm-company-snippet__title">Леруа Мерлен</a> <div class="tm-company-snippet__description">Мы строим технологическую компанию-платформу.</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://leroymerlin.ru/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/cloudofgeorge/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/79c/80a/73f/79c80a73fee05ea629cefc6c3ca88573.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 3 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    3
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">4</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Georgii Koni</span> <a href="/ru/users/cloudofgeorge/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @cloudofgeorge
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Senior Frontend Engineer</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/leroy_merlin/blog/581938/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 10 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><span>
      2004
    </span></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://leroymerlin.ru/" target="_blank" class="tm-company-basic-info__link">
      leroymerlin.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    свыше 10 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2020-05-13T14:23:35.000Z" title="2020-05-13, 17:23">13  мая  2020</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/annikamartynova/" class="tm-company-basic-info__link">
      annikamartynova
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/leroy_merlin/blog/581938/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/leroy_merlin/blog/581938/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"581938":{"id":"581938","timePublished":"2021-10-06T13:51:12+00:00","isCorporative":true,"lang":"ru","titleHtml":"Микрофронтенды: наш путь к более быстрому и гибкому сайту","leadData":{"textHtml":"\u003Cp\u003EПривет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтэндов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли к этому решению, каким образом организовано тестирование фрагментов сайта, а также немного о повседневных задачах разработчиков, которые создают компоненты для такого модульного сайта. Если вы тоже занимаетесь микрофронтами или планируете это делать, обязательно делитесь опытом и присоединяйтесь к нашей дискуссии.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F332\u002Fad7\u002F374\u002F332ad73746f0d36a6433f1361dafd306.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F332\u002Fad7\u002F374\u002F332ad73746f0d36a6433f1361dafd306.jpg","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":3,"votesCount":3},"rating":4,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1026596","alias":"cloudofgeorge","fullname":"Georgii Koni","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F79c\u002F80a\u002F73f\u002F79c80a73fee05ea629cefc6c3ca88573.png","speciality":"Senior Frontend Engineer"},"statistics":{"commentsCount":10,"favoritesCount":40,"readingCount":4323,"score":4,"votesCount":8},"hubs":[{"relatedData":null,"id":"22087","alias":"leroy_merlin","type":"corporative","title":"Блог компании Леруа Мерлен","titleHtml":"Блог компании Леруа Мерлен","isProfiled":false},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F414\u002Fbb6\u002F99a\u002F414bb699abd04a44e394c8ab0da88e31.jpg\" width=\"780\" height=\"440\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F414\u002Fbb6\u002F99a\u002F414bb699abd04a44e394c8ab0da88e31.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПривет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли к этому решению, каким образом организовано тестирование фрагментов сайта, а также немного о повседневных задачах разработчиков, которые создают компоненты для такого модульного сайта. Если вы тоже занимаетесь микрофронтами или планируете это делать, обязательно делитесь опытом и присоединяйтесь к нашей дискуссии.\u003C\u002Fp\u003E\u003Cp\u003EМикрофронтенды — очень перспективное направление, однако теории по этой теме намного больше чем практики. Леруа Мерлен уже прошла часть этого пути, и мы хотим поделиться с вами нашим опытом. \u003C\u002Fp\u003E\u003Cp\u003EВообще работа с микрофронтами — в любом случае новаторский проект. Мы хотели создать новый, более гибкий сайт, обеспечив server side rendering (генерация статической html-разметки) с соответствующей оптимизацией для пользователей, так и для SEO. Кстати, оптимизация под поисковики была важной задачей, потому что именно она помогла “продать” проект бизнесу, показав реальный результат в виде уменьшения TTM (Time To Market).\u003C\u002Fp\u003E\u003Ch2\u003EСоздание платформы микрофронтендов Okapi\u003C\u002Fh2\u003E\u003Cp\u003EНачнем с того, как мы пришли к этому решению. Некоторое время наш сайт работал на базе Bitrix. Функционировал он нормально, но мы были сильно ограничены в масштабировании и по мере появления новых идей развития e-com, возникали различные технические ограничения. А поскольку мы хотим быть более гибкими, стильными и молодежными увеличить долю оборота e-com, нужно было что-то менять. \u003C\u002Fp\u003E\u003Cp\u003EК идее микросервисов на фронтенде мы пришли не сразу. Еще до этого, в 2016 году стартовал проект Elbrus по переходу на новую платформу AEM (Adobe experience manager). Это, конечно, не самое популярное в России решение, но оно явно было функциональнее Bitrix. И Леруа Мерлен окончательно переехал на AEM в апреле 2019 года, когда мы перевели на новую платформу регион с самым большим трафиком — то есть Москву. \u003C\u002Fp\u003E\u003Cp\u003EСпустя некоторое время мы заметили, что имеем длинный релизный цикл, большой срок регрессивного тестирования. Все это формировалось как снежный ком, из-за влияния команд друг на друга. Фактически мы получили монолит, которым сложно управлять, и который сложно развивать. Командам разработки приходилось достаточно долго выносить новый функционал в продуктив. Ведь если мы готовим релиз, и в каком-то компоненте обнаруживается критичный баг, приходится ждать его исправления, даже если сама задача не такая уж важная. К тому же на рынке наблюдался (да и сейчас наблюдается) дефицит компетентных разработчиков под AEM. Мы сотрудничали с подрядчиками, а найти свободных людей просто на рынке было невозможно. Именно тогда было принято решение переходить на микрофронтовую архитектуру, чтобы предоставить различным продуктовым командам свой микрофронт, который они создают, развивают и запускают независимо от коллег.\u003C\u002Fp\u003E\u003Ch2\u003EСоздание платформы микрофронтендов Okapi\u003C\u002Fh2\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F984\u002Fad2\u002F26c\u002F984ad226c0fcfec5227079da7e84ff17.jpg\" alt=\"Окапи, или лесной жираф — это редкое животное, смесь многих представителей парнокопытных\" title=\"Окапи, или лесной жираф — это редкое животное, смесь многих представителей парнокопытных\" width=\"600\" height=\"350\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F984\u002Fad2\u002F26c\u002F984ad226c0fcfec5227079da7e84ff17.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003EОкапи, или лесной жираф — это редкое животное, смесь многих представителей парнокопытных\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПосовещавшись, в середине 2019 года мы начали создавать собственную платформу для работы с микрофронтами на базе React. \u003C\u002Fp\u003E\u003Cp\u003EOkapi — это одновременно набор библиотек и небольшой сервер приложений с использованием библиотеки react, которые используют команды Леруа Мерлен для создания микрофронтендов. Сейчас мы имеем платформу, которая обеспечивает работу и связки между микрофронтендами. Первая версия библиотеки была готова примерно через год. Конечно, реализация подобной инициативы потребовала найма новых разработчиков, и ребята продолжают присоединяться к командам микрофронтендов, потому что нам нужны дополнительные руки и опыт, а для разработчиков подобный проект — возможность поработать с чем-то интересным. \u003C\u002Fp\u003E\u003Ch2\u003EКак именно все это работает \u003C\u002Fh2\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"721\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F686\u002Fdd1\u002Fc9c\u002F686dd1c9c0cffe484f3382f0ed3f2687.png\" data-width=\"982\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EДля начала немного терминологии и уточнений из схемы архитектуры:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EМикрофронтенд\u003C\u002Fstrong\u003E - самостоятельное приложение, имеющее собственный адрес и публичный API\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EВиджет\u002Fремоут\u003C\u002Fstrong\u003E - компонент, предоставляемый микрофронтендом, который пере используется другими микрофронтендами (кнопка, форма, шапка приложения и т.д.). \u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EBFF\u003C\u002Fstrong\u003E - Backend for frontend - сервер, выполняющий запросы к внешним сервисам и подготавливающий полученные данные в удобной для микро фронта форме.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EService Discovery\u003C\u002Fstrong\u003E - сервис передачи данных между приложениями.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Cstrong\u003EAEM Dispatcher\u003C\u002Fstrong\u003E - Adobe Experience Manager Dispatcher. В этом контексте он управляет информацией о страницах и данными.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EКаждый микрофронтенд - это приложение (App1 , App2), которое использует библиотеку Okapi. При запуске приложение сообщает в Service Discovery своё имя и адрес сервера, на котором находится. Service Discovery рассылает всем зарегистрированным приложениям обновленные данные. В итоге, у каждого приложения всегда есть актуальная схема других приложений. \u003C\u002Fp\u003E\u003Cp\u003EКлиент делает запрос к App1. Запрос приходит на AEM Dispatcher, который редиректит его на нужный микрофронтенд. App1 через BFF1 запрашивает у AEM Dispatcher информацию о запрашиваемой странице, а у внешних сервисов необходимые данные. App1 формирует html страницу (SSR), куда добавляет ссылки на статические ресурсы на CDN и скрипты аналитики. Клиент получает страницу, скачиваются клиентские бандлы приложения и библиотека React и происходит гидрация - построение SPA на основе html с микрофронтенда. При переходах внутри микрофронтенда - SPA делает запросы в BFF для получения данных о странице, не задействуя SSR. Если клиент переходит на другой микрофронтенд (App2), то App1 проверяет есть ли у него информация об этом микрофронтенде, если нет - она запрашивается у Service Discovery. App 1 делает запрос к App 2 за его расширенной конфигурацией со списком опубликованных ремоут компонентов, ссылками на клиентские бандлы и стили. App 1 добавляет в свой роутер роуты из App 2 и подключает его клиентские бандлы к себе. Происходит переход на другой роут без перерисовки страницы.  \u003C\u002Fp\u003E\u003Cp\u003EЧтобы продуктовые команды могли работать максимально эффективно, за год мы подготовили не только библиотеки Okapi, но также связанные сервисы —  репозиторий с шаблоном для создания базового приложений\u002Fмикрофронтенда с уже настроенными инструментами, настроенный CI\u002FCD, дизайн систему и прочее.\u003C\u002Fp\u003E\u003Cp\u003EОбновление версий нашей библиотеки okapi происходит через NPM Registry, который установлен на серверах компании. Чтобы выкатить новую версию, мы создаем changelog через Change Set с описанием внесенных изменений, которые мы внесли. Если предложенные изменения были проверены и одобрены, формируется итоговый Change Set из всех текущих коммитов, а обновленный код переезжает в продуктив, а номер версии библиотеки увеличивается на 1 с помощью инструмента \"Lerna\".\u003C\u002Fp\u003E\u003Ch2\u003EРешаем проблему переиспользования\u003C\u002Fh2\u003E\u003Cp\u003EСейчас мы работаем над расширением возможностей микрофронтендов — над Remote-компонентами. Это виджеты, которые можно переиспользовать на разных микрофронтендах.\u003C\u002Fp\u003E\u003Cp\u003EДля решения переиспользования кода\u002Fкомпонентов мы построили схему взаимодействия.\u003C\u002Fp\u003E\u003Cp\u003EМикрофронтенд A имеет компонент для переиспользования. Микрофронтенд Z запрашивает по сети компонент от микрофронтенд A и использует у себя в приложение. При этом все контракты и логика сохраняются, а также все работает с поддержкой SSR. Такими компонентами являются шапка, подвал карусели товаров и тд. Так мы решаем основной вопрос потребления и распространения кодовой базы.\u003C\u002Fp\u003E\u003Ch2\u003EСложности на пути\u003C\u002Fh2\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F407\u002Fa79\u002F522\u002F407a79522b916225cafc932270b0ea2b.jpg\" width=\"910\" height=\"512\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F407\u002Fa79\u002F522\u002F407a79522b916225cafc932270b0ea2b.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EКонечно, не все складывалось гладко. Вообще сложностей было много, они встречались из-за того, что мы создавали на тот момент принципиально новый инструмент. Систему, которая может обеспечивать работу микрофронтендов с поддержкой SSR. При разработке самого решения мы пытались опробовать много гипотез, при реализации конечных микрофронтендов с использованием нашего инструмента - мы делали дополнительное обучение\u002Fмастер классы по принципам работы с изоморфными приложениями, а также по правилам поддержания высокого качества кода, что закладывалось с учетом quality first подхода. Что выражается в автоматизации всего и вся - исключая человеческий фактор, в высоком проценте покрытия unit-тестами (минимум 80%), однако мы понимаем что это false positive значение, которые мы стараемся балансировать с помощью интеграционных и e2e тестов. Вследствие нам пришлось ставить рамки для разработчиков, чтобы они писали тесты на все свои кейсы\u003C\u002Fp\u003E\u003Cp\u003EМожно выделить основные моменты, которые точно будут актуальны для всех, кто захочет строить подобную архитектуру у себя. \u003C\u002Fp\u003E\u003Cp\u003EКогда люди начинают работать в новой системе, очень сложно бывает понять, как “играть по новым правилам”. Сразу создать команду для разработки и поддержки микрофронтенда, которая понимает, что она делает — нереально.  Для помощи и быстрого старта мы обеспечили команды большим количеством структурированной документации на любой вопрос. Если вдруг возникла форс-мажорная ситуация при которой ответа в документации вдруг не нашлось - команда платформы okapi может проконсультировать другие команды микрофронтендов в соответствующих публичных чатах, с их помощью мы и вносим недостающие части в документацию и актуализируем знания.\u003C\u002Fp\u003E\u003Cp\u003EБыло сформулировано правило: если возникает проблема, мы ее решаем и добавляем раздел в руководство. В результате за год появилась база знаний, которая  на 95% покрывает развертывание, CI\u002FCD, ревью кода и так далее. Но здесь очень важно соблюдать баланс между количеством документации и ее полнотой. Если руководств слишком много — никто не будет их читать, а если мало — они не помогут решить проблемы.\u003C\u002Fp\u003E\u003Cp\u003EЧтобы упростить адаптацию, мы создали систему светофора. Продуктовые разработчики прогоняют его через инструменты анализа в каждом коммите, который принадлежит pull request’у. Такими инструментами является “Sonar qube”, typecheck от typescript, все возможные линтеры “eslint”, “stylelint” проверка каммитов на правильное название соответствующее шаблону номеров задач в таск менеджере и тд.  В процессе работы над первыми микрофронтендом мы определили три категории оценок - светофор.\u003C\u002Fp\u003E\u003Cp\u003EКрасный - Запрещенные действия. К примеру: отсутствие изоляции стилей между микрофронтенда\u003C\u002Fp\u003E\u003Cp\u003EЖелтый - не рекомендуются. К примеру: некоторые решения или библиотеки много весят в сборке и аффектов на bundle size\u003C\u002Fp\u003E\u003Cp\u003EЗеленый - Рекомендации для команд работающих с микрофронтенда. К примеру: Использовать инструменты и настройки, что уже заложены в микрофронтенде и не редактировать без особой нужды правила\u002Fконфигурации инструментов проверки кода.\u003C\u002Fp\u003E\u003Ch2\u003EПланы развития\u003C\u002Fh2\u003E\u003Cp\u003EСуществует проблема - сейчас создание новых микрофронтендов и их присоединение, а также настройка pipeline и тд - происходит вручную силами нескольких человек и некого количества времени. Разумеется это дорогая операции и мы решили инвестировать наше время в создание полностью автоматизированной системы. Мы хотим сделать так, чтобы пользователи заходили на какой-то дашборд и могли буквально “накликать” себе микрофронтенды без нашего участия. Это большие планы на ближайшие годы, и поэтому наш бэклог на сегодняшний день полон интересных и перспективных задач. \u003C\u002Fp\u003E\u003Ch2\u003EРезультаты\u003C\u002Fh2\u003E\u003Cp\u003EПодведем небольшие итоги. Создав для себя Okapi, мы добились полной автономности продуктовых команд, которые получили независимые релизные циклы, без какого-либо влияния на другие приложения. Кроме этого сокращение TTM (time to market) в некоторых случаях достигало нескольких раз. Так, как ранее мы могли ждать релиз фичи несколько недель и даже месяцев, то сейчас это сократилось до одного спринта, а если задача срочная - то нескольких дней.\u003C\u002Fp\u003E\u003Cp\u003EНа этом долгом пути в несколько лет и кучи итераций мы готовы рекомендовать подход микрофронтенды, если вы уже крупная компания, которая очевидно страдает от долгих или конфликтных релизов. Если вы готовы инвестировать время и деньги в реализацию такого подхода с технической стороны, обучение сотрудников и налаживание инфраструктуры и процессов вокруг. Вам нужно будет написать очень много внутренней документации на каждый чих. Иначе этот большой титан может рухнуть и покажет себя еще хуже чем проверенный временем монолит. Микрофронтенды - это не панацея, это один из способов решить боль или усилить ее.\u003C\u002Fp\u003E\u003Cp\u003EВ настоящий момент на сайте запущено уже 7 микрофронтовых приложений, через которые проходит большая часть пользовательского трафика, а еще 9 приложений готовится к релизу. В их числе  главная страница, карточка товара, личный кабинет пользователей В2С и В2В и прочие разделы с менее интенсивным трафиком.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"микросервисы"},{"titleHtml":"микрофронтенды"},{"titleHtml":"веб-приложения"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F332\u002Fad7\u002F374\u002F332ad73746f0d36a6433f1361dafd306.jpg","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F332\u002Fad7\u002F374\u002F332ad73746f0d36a6433f1361dafd306.jpg","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fleroy_merlin\\\u002Fblog\\\u002F581938\\\u002F\"},\"headline\":\"Микрофронтенды: наш путь к более быстрому и гибкому сайту\",\"datePublished\":\"2021-10-06T16:51:12+03:00\",\"dateModified\":\"2021-10-06T19:58:53+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Georgii Koni\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы.\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fleroy_merlin\\\u002Fblog\\\u002F581938\\\u002F#post-content-body\",\"about\":[\"c_leroy_merlin\",\"h_webdev\",\"h_microservices\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F581938\\\u002Ffe5819908e549e7e8186da5ac50f4d38\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F414\\\u002Fbb6\\\u002F99a\\\u002F414bb699abd04a44e394c8ab0da88e31.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F984\\\u002Fad2\\\u002F26c\\\u002F984ad226c0fcfec5227079da7e84ff17.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F686\\\u002Fdd1\\\u002Fc9c\\\u002F686dd1c9c0cffe484f3382f0ed3f2687.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F407\\\u002Fa79\\\u002F522\\\u002F407a79522b916225cafc932270b0ea2b.jpg\"]}","metaDescription":"Привет, Хабр! Сегодня мы хотим поделиться нашим опытом создания собственной платформы микрофронтендов и постепенной миграции веб-сайта компании на микросервисы. В этом посте вы узнаете, как мы пришли...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"leroy_merlin":{"alias":"leroy_merlin","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002Ff4d\u002Ff89\u002Faaf\u002Ff4df89aaf5d4dcfc45d4da846e78640c.png","titleHtml":"Леруа Мерлен","descriptionHtml":"Мы строим технологическую компанию-платформу.","relatedData":null,"statistics":{"postsCount":33,"newsCount":0,"vacanciesCount":5,"employeesCount":32,"careerRating":null,"subscribersCount":869,"rating":80.33,"invest":null},"foundationDate":{"year":"2004","month":null,"day":null},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fleroymerlin.ru\u002F","staffNumber":"свыше 10 000 человек","registrationDate":"2020-05-13T14:23:35+00:00","representativeUser":{"alias":"annikamartynova","fullname":null},"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fleroymerlin.ru\u002F"}],"settings":{"analyticsSettings":[],"branding":null,"status":"active"},"metadata":{"titleHtml":"Леруа Мерлен, Москва - Мы строим технологическую компанию-платформу. с 2004 год","title":"Леруа Мерлен, Москва - Мы строим технологическую компанию-платформу. с 2004 год","keywords":["Big Data","Data Engineering","Хранилища данных","Микросервисы","Apache"],"descriptionHtml":"33 статьи от авторов компании Леруа Мерлен","description":"33 статьи от авторов компании Леруа Мерлен"},"aDeskSettings":null,"careerAlias":"leroy-merlin","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
