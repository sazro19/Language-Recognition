<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/netcracker\/blog\/584542\/"},"headline":"Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive","datePublished":"2021-10-20T15:04:49+03:00","dateModified":"2021-10-21T00:52:16+03:00","author":{"@type":"Person","name":"Netcracker Team"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (Rea...","url":"https:\/\/habr.com\/ru\/company\/netcracker\/blog\/584542\/#post-content-body","about":["c_netcracker","h_javascript","h_angular","h_reactjs","h_microservices","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/584542\/c8dc6c4cae8b7e08d3ffa8c295c908e1\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/30e\/1ef\/ff7\/30e1efff70ba8e42160586a510d602e3.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/cc3\/370\/2e5\/cc33702e52d09ff336e890f8c6dcd592.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/156\/8f5\/b1d\/1568f5b1d216cbee8e29d3c465ce6143.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e3e\/c66\/a35\/e3ec66a356d29fde5949ca9bf59a88c9.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/7d5\/264\/b64\/7d5264b645053d7be6c4ac7f8f67ba84.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e13\/66d\/907\/e1366d90714e7de0ac7ba1cf556ef069.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/775\/e16\/92b\/775e1692bf9698a8a26e40ecc73902bf.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/5d9\/f72\/9bd\/5d9f729bdbff7a9a1a4ef2f67e76be9d.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/f18\/3cf\/7f2\/f183cf7f2a79543b29427b8d03a844fe.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/903\/50f\/732\/90350f73289637491653879385201195.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/aef\/374\/669\/aef3746691576b635e93e84d0e853345.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/af3\/f70\/ff1\/af3f70ff15b05d6e764de8384f21813a.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/9ce\/061\/d7a\/9ce061d7a575ff81155934e3ee61750e.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/36a\/163\/2a0\/36a1632a0b648b527a6da01eebca5464.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/6dc\/5c8\/7fa\/6dc5c87fa9dca95930b5325ac169a467.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/4a5\/25e\/59d\/4a525e59dc32df017c50291344a31023.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/3dc\/dbf\/d41\/3dcdbfd41d179c195555a1cee4e6dfd1.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/06b\/c5b\/80e\/06bc5b80e6fc7ed3445f4c3953ef65c5.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/d3b\/3b2\/99d\/d3b3b299de73b98fb0b48c8d40082620.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e47\/a3a\/fc2\/e47a3afc240afed0d17b5fd43f59c3fd.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/33d\/e86\/322\/33de86322257f3ed6758938566017afd.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (React/Vue Routing внутри..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (React/Vue Routing внутри..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (React/Vue Routing внутри..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (React/Vue Routing внутри..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (React/Vue Routing внутри..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/ae9/4a2/07f/ae94a207f927af71d603698331676aec.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/ae9/4a2/07f/ae94a207f927af71d603698331676aec.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/ae9/4a2/07f/ae94a207f927af71d603698331676aec.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/ae9/4a2/07f/ae94a207f927af71d603698331676aec.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/ae9/4a2/07f/ae94a207f927af71d603698331676aec.png" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="584542" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-20T12:04:49.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/584542/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/netcracker/blog/584542/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/ae9/4a2/07f/ae94a207f927af71d603698331676aec.png" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/584542/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="netcracker" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/netcracker/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/a56/d77/c66/a56d77c6615d2284efee97805fbcade9.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">61.61</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/netcracker/profile/" class="tm-company-card__name">
        Netcracker
      </a> <div class="tm-company-card__description">Технологическое перерождение телеком разработки</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/netcracker_team/" title="netcracker_team" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/ff6/091/eb4/ff6091eb42b01e8b2a799f7f4ee6b5c8.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/netcracker_team/" class="tm-user-info__username">
      netcracker_team
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-20T12:04:49.000Z" title="2021-10-20, 15:04">20  октября   в 15:04</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/netcracker/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Netcracker</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/javascript/" class="tm-article-snippet__hubs-item-link"><span>JavaScript</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/angular/" class="tm-article-snippet__hubs-item-link"><span>Angular</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/reactjs/" class="tm-article-snippet__hubs-item-link"><span>ReactJS</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/microservices/" class="tm-article-snippet__hubs-item-link"><span>Микросервисы</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>По мотивам вопросов из <a href="https://habr.com/ru/company/netcracker/blog/568054/">предыдущей статьи</a> мы решили написать вторую часть и рассказать, что удалось сделать еще. </p><p>На повестке дня:</p><ul><li><p>Роутинг хостового приложения (React/Vue Routing внутри Angular)</p></li><li><p>Полноценные адаптеры для работы удаленных плагинов</p></li><li><p>Использование сервисных модулей в рантайме</p></li></ul><figure class="full-width "><img src="/img/image-loader.svg" height="385" data-src="https://habrastorage.org/getpro/habr/upload_files/30e/1ef/ff7/30e1efff70ba8e42160586a510d602e3.png" data-width="680"/><figcaption></figcaption></figure><h3>Роутинг</h3><p>В первой части <a href="https://habr.com/ru/company/netcracker/blog/568054/">статьи</a> мы создали <a href="https://github.com/ilya-isupov/multi-framework-module-federation">pet project</a>, в котором использовали хост на Angular и удаленные плагины на Angular. В такой связке роутинг хостового приложения отрабатывает все варианты его нативного использования. Например, в хостовом приложении есть роут <strong>/plugin</strong>, а в плагине есть два роута <strong>/first</strong> и <strong>/second</strong>. Получается, в готовом приложении мы получим <strong>/plugin/first</strong> и <strong>/plugin/second</strong>. Такая система будет идеально работать на любом уровне вложенности.</p><figure class="full-width "><img src="/img/image-loader.svg" height="528" data-src="https://habrastorage.org/getpro/habr/upload_files/cc3/370/2e5/cc33702e52d09ff336e890f8c6dcd592.png" data-width="786"/><figcaption></figcaption></figure><p> Разберем пример чилдового роутинга для Angular плагина.</p><figure class="bordered full-width "><img src="/img/image-loader.svg" height="626" data-src="https://habrastorage.org/getpro/habr/upload_files/156/8f5/b1d/1568f5b1d216cbee8e29d3c465ce6143.png" data-width="581"/><figcaption></figcaption></figure><p>Рассматриваем задачу: в Angular приложении использовать плагин, написанный на другом фреймворке – React.</p><p>Здесь обычно возникает вопрос: а зачем вы это делаете? И почему не написать все на одном фреймворке? Отвлечемся на минутку от техники и поясним.</p><p>Действительно, в простых и средних по  сложности проектах, если есть возможность посадить все команды на одни технологии, это стоит сделать. Задача совмещать несколько фреймфорков  актуальна для сложных проектов, где независимые команды из разных доменов (микросервисов), разрабатывают свои компоненты, в своих релизных циклах, на разных технологиях. Далее эти компоненты должны использоваться в одном интерфейсе. Наш опыт говорит, что мир усложняется, поэтому усложняются и IT-системы, и таких сложных проектов становится все больше и больше.</p><p>Например, возьмем рабочее место оператора контактного центра. Вот мы видим на экране финансовую информацию, которая разрабатывалась командой подразделения Billing, она надежна как танк и редко меняется. А вот рядом виджет с новомодным Next Best Action, написанной динамичной командой хипстеров, которые постоянно экспериментируют. А еще чат-боты, скриптинги, маркетинговые акции, визарды для решения технических проблем, базы знаний и многое другое. Под каждым компонентом большое количество бизнес-логики и большие команды, их разрабатывающие. </p><p>Согласитесь, навязывать той или иной команде технологии неправильно, это будет противоречить идее микросервисной архитектуры.</p><p><strong>Вернемся к технике. </strong></p><p>Если просто создать Angular роут <strong>/React</strong> в нашем хост приложении и положить под него React плагин с роутингом, то все будет работать, но не совсем так, как ожидалось.</p><p>Создаем роутинг в React плагине.</p><figure class="full-width "><img src="/img/image-loader.svg" height="303" data-src="https://habrastorage.org/getpro/habr/upload_files/e3e/c66/a35/e3ec66a356d29fde5949ca9bf59a88c9.png" data-width="791"/><figcaption></figcaption></figure><p>В такой реализации при переходе на <strong>/React</strong>, мы увидим, что URL в браузере поменяется на <strong>&lt;host_url>/first</strong>. Это не то, что мы ожидаем. Решаем проблему с помощью <a href="https://reactrouter.com/web/api/BrowserRouter">basename</a>. Идея: нужно пробросить из хост приложения роут, под которым лежит наш React плагин в сам плагин, чтобы инициализировать BrowserRouter с правильным basename. В двух словах, basename - это URL, относительно которого будет строиться react роутинг.</p><p>Итак, пробрасываем на стороне хоста. Понятное дело, нужно значение <strong>routePath</strong> непосредственно из конфигурации самого плагина.</p><figure class="full-width "><img src="/img/image-loader.svg" height="531" data-src="https://habrastorage.org/getpro/habr/upload_files/7d5/264/b64/7d5264b645053d7be6c4ac7f8f67ba84.png" data-width="1270"/><figcaption></figcaption></figure><p>Принимаем на стороне плагина.</p><figure class="full-width "><img src="/img/image-loader.svg" height="213" data-src="https://habrastorage.org/getpro/habr/upload_files/e13/66d/907/e1366d90714e7de0ac7ba1cf556ef069.png" data-width="864"/><figcaption></figcaption></figure><p>Получаем готовое полноценное решение <strong>Angular Router + React Browser Router</strong>. </p><figure class=""><img src="/img/image-loader.svg" height="438" data-src="https://habrastorage.org/getpro/habr/upload_files/775/e16/92b/775e1692bf9698a8a26e40ecc73902bf.png" data-width="351"/><figcaption></figcaption></figure><h3>Супер нативные адаптеры для микрофронтендов</h3><p>Рассмотрим:</p><ul><li><p>Angular адаптер</p></li><li><p>React адаптер</p></li><li><p>Vue адаптер</p></li></ul><p>Инициализировать какой-либо плагин с набором пропсов – просто, но это решает только половину задачи. А если мы хотим использовать удаленный плагин как часть своего приложения, как глупую компоненту, просто как компоненту, которой иногда нужны пропсы от хоста или другого плагина?</p><p>Создаем Change Detector для наших плагинов. Детектор уже есть, давайте научимся пропсы в плагины прокидывать :)</p><p>Схема с пропсами должна быть всем понятна, но, на всякий случай, нарисуем картинку.</p><figure class="full-width "><img src="/img/image-loader.svg" height="872" data-src="https://habrastorage.org/getpro/habr/upload_files/5d9/f72/9bd/5d9f729bdbff7a9a1a4ef2f67e76be9d.png" data-width="953"/><figcaption></figcaption></figure><p><strong>Допущение</strong>. На стороне плагина получить обновленные пропсы можно только в сеттере, так как мы их пробрасываем руками, а не стандартным механизмом обнаружения изменений.</p><h3>Angular Adapter</h3><p><strong>Components</strong></p><p>Мы немного дописали/переписали наш Angular адаптер, и получился вот <a href="https://github.com/ilya-isupov/multi-framework-module-federation/blob/master/angular-shell/src/app/components/angular-wrapper/angular-wrapper.component.ts">такой код</a>. </p><p>Нововведения заключаются в возможности использовать любой компонент из любого модуля из любого удаленного репозитория с необходимыми провайдерами. Это значит, что если у нас в репозитории плагина есть модуль с компонентом, который использует сервис, который провайдит этот же модуль, мы можем экспортировать целиком этот модуль с его провайдерами и не переживать, что какой-то сервис потеряется.</p><p>Как это реализуется:</p><p>На стороне плагина нам нужно предоставить модуль и компоненту, которую хотим использовать. Одного модуля недостаточно, потому что все component factory этого модуля не попадут в бандл (tree-shakable components) при build –prod, и останется один модуль с инжектором. </p><p>Выглядит это вот так:</p><figure class="full-width "><img src="/img/image-loader.svg" height="151" data-src="https://habrastorage.org/getpro/habr/upload_files/f18/3cf/7f2/f183cf7f2a79543b29427b8d03a844fe.png" data-width="1375"/><figcaption></figcaption></figure><p>На стороне, принимающей плагин, должна быть расширенная конфигурация, вида:</p><figure class="full-width "><img src="/img/image-loader.svg" height="413" data-src="https://habrastorage.org/getpro/habr/upload_files/903/50f/732/90350f73289637491653879385201195.png" data-width="903"/><figcaption></figcaption></figure><p>Эти 4 проперти, обведенные красным, обеспечивают загрузку модуля и компоненты плагина.</p><p>Вот план, как будем грузить:</p><figure class="full-width "><img src="/img/image-loader.svg" height="858" data-src="https://habrastorage.org/getpro/habr/upload_files/aef/374/669/aef3746691576b635e93e84d0e853345.png" data-width="698"/><figcaption></figcaption></figure><p>Вот код:</p><figure class="full-width "><img src="/img/image-loader.svg" height="532" data-src="https://habrastorage.org/getpro/habr/upload_files/af3/f70/ff1/af3f70ff15b05d6e764de8384f21813a.png" data-width="1187"/><figcaption></figcaption></figure><p>Этот код развязывает нам руки! Теперь можно достать любую компоненту из любого модуля :)</p><p><strong>А сервисы можно? Можно!</strong></p><figure class="full-width "><img src="/img/image-loader.svg" height="726" data-src="https://habrastorage.org/getpro/habr/upload_files/9ce/061/d7a/9ce061d7a575ff81155934e3ee61750e.png" data-width="596"/><figcaption></figcaption></figure><p>Для чего использовать shared сервисы из remote модулей? У нас есть набор бекендсервисов, которые предоставляют нам REST API. Каждый сервис отвечает за свой бизнес. Когда двум плагинам нужно обратиться к одному бекенду, каждый плагин должен создать GraphQL query, добавить реализацию GraphQL модуля к себе в репозиторий, не забыть про модели данных. (╯°□°）╯︵ ┻━┻. </p><p>Идея заключается в создании master UI сервисов для бекендов. Тогда для каждого бекенда будет один Singleton сервис на всё приложение (для хоста и всех плагинов). И тянуть мы их будем в рантайме.</p><p>Запровайдим сервис в remote модуле вот так:</p><figure class="full-width "><img src="/img/image-loader.svg" height="278" data-src="https://habrastorage.org/getpro/habr/upload_files/36a/163/2a0/36a1632a0b648b527a6da01eebca5464.png" data-width="548"/><figcaption></figcaption></figure><p>Это нужно, чтобы вытащить его потом из инжектора по стринге:</p><figure class="bordered full-width "><img src="/img/image-loader.svg" height="595" data-src="https://habrastorage.org/getpro/habr/upload_files/6dc/5c8/7fa/6dc5c87fa9dca95930b5325ac169a467.png" data-width="1106"/><figcaption></figcaption></figure><p>Скажем прямо –  то, как мы сможем использовать этот сервис –  не идеально, но теперь мы хотя бы можем это делать. Все так сложно, потому что мы из инжектора вытащим не просто сервис, а сервис со всеми его зависимостями, если таковые имеются. И дополнительно на стороне консьюмера не нужно ничего провайдить, <strong>все само заработает</strong>!</p><figure class=""><img src="/img/image-loader.svg" height="306" data-src="https://habrastorage.org/getpro/habr/upload_files/4a5/25e/59d/4a525e59dc32df017c50291344a31023.png" data-width="299"/><figcaption></figcaption></figure><h3>React adapter</h3><p>Адаптер для связки Angular-React будет чуть проще. Поскольку expose’ить из React намного проще – можно не делить на умные и глупые компоненты, то и в реализации адаптера предусматривать это не будем.</p><p>Мы должны уметь:</p><ul><li><p>Нарисовать компоненту под роутом</p></li><li><p>Нарисовать компоненту в любом месте Angular компоненты через адаптер</p></li></ul><p>Под роутом мы уже умеем:</p><figure class="full-width "><img src="/img/image-loader.svg" height="517" data-src="https://habrastorage.org/getpro/habr/upload_files/3dc/dbf/d41/3dcdbfd41d179c195555a1cee4e6dfd1.png" data-width="784"/><figcaption></figcaption></figure><p>А рисовать компоненты в произвольном месте – давайте учиться. Концептуально будет так же, как с Angular плагином. Нужно просто вставить React адаптер для плагина в шаблон, положить в него конфигурацию плагина и пропсы.</p><figure class="bordered full-width "><img src="/img/image-loader.svg" height="166" data-src="https://habrastorage.org/getpro/habr/upload_files/06b/c5b/80e/06bc5b80e6fc7ed3445f4c3953ef65c5.png" data-width="1088"/><figcaption></figcaption></figure><p>Адаптер нарисует нам наш плагин:</p><figure class="full-width "><img src="/img/image-loader.svg" height="548" data-src="https://habrastorage.org/getpro/habr/upload_files/d3b/3b2/99d/d3b3b299de73b98fb0b48c8d40082620.png" data-width="1357"/><figcaption></figcaption></figure><p>Установит новые пропсы, когда они придут:</p><figure class="full-width "><img src="/img/image-loader.svg" height="289" data-src="https://habrastorage.org/getpro/habr/upload_files/e47/a3a/fc2/e47a3afc240afed0d17b5fd43f59c3fd.png" data-width="1201"/><figcaption></figcaption></figure><p>И не забудем сделать unmount, когда компонента задестроится:</p><figure class="bordered full-width "><img src="/img/image-loader.svg" height="104" data-src="https://habrastorage.org/getpro/habr/upload_files/33d/e86/322/33de86322257f3ed6758938566017afd.png" data-width="766"/><figcaption></figcaption></figure><p>Профит :)</p><h3>Vue adapter</h3><p>Код адаптера для vue структурно похож на адаптеры для React и Angular. Основное отличие только в самом коде рендера, компоненты или приложения.</p><pre><code class="javascript">private async renderComponent(configuration: FederationPlugin, props?: Record&lt;string, unknown>): Promise&lt;void> {
  this.configuration = configuration;
  const component = await loadRemoteModule({
    remoteEntry: configuration.remoteEntry,
    remoteName: configuration.remoteName,
    exposedModule: configuration.exposedModule
  });

  const vueComponent = component[configuration.moduleClassName || 'default'];
  this.vueComponentRef = createApp(vueComponent, {
      ...this.props
  });
  this.vueComponentRef.mount(this.hostRef.nativeElement);
}</code></pre><p>Получаем компоненту и, соответственно, «маунтим» ее на наш хост элемент адаптера.</p><p>Также можно написать самовызывающийся адаптер, который подойдет для случая, когда мы хотим отдать логику по байндингу  настроек , настройке роутинга и подключения каких-то библиотек на откуп ремоут плагину.</p><pre><code class="javascript">const selfRunApp = component[configuration.moduleClassName || 'default'];
selfRunApp(this.hostRef.nativeElement, this.props, configuration.routePath);</code></pre><p>И уже во vue проекте, экспортируем bootstrap функцию, как пример: </p><pre><code class="javascript">// bootstrapFunction.js
export default (refElement, props, base) => {
    const router = createRouter({
        history: createWebHistory(base),
        routes
    })
    const app = createApp(App, {
        data: () => {
            return (this.props || {});
        }
    });
    app.use(router);
    app.mount(refElement);
}</code></pre><p>в которой просто используем переданный элемент и прикрепляем к нему наш компонент, приложение. </p><p>Так как Module Federation позволяет expose’ить любой javascript, конфигурация вебпака не сильно изменится.</p><pre><code class="javascript">new ModuleFederationPlugin({
  name: "vue_app",
  filename: "remoteEntry.js",
  exposes: {
    "./Content": "./src/components/Content",
    "./Button": "./src/components/Button",
    "./App": "./src/bootstrapFunction",
  },
}),</code></pre><h3>P.S.</h3><p>Весь код, о котором мы поговорили можно найти на <a href="https://github.com/ilya-isupov/multi-framework-module-federation">github</a>.</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmicrofrontends%5D" class="tm-tags-list__link">microfrontends</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmodule%20federation%5D" class="tm-tags-list__link">module federation</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmicroservices%5D" class="tm-tags-list__link">microservices</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/netcracker/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Netcracker
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/javascript/" class="tm-hubs-list__link">
    JavaScript
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/angular/" class="tm-hubs-list__link">
    Angular
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/reactjs/" class="tm-hubs-list__link">
    ReactJS
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/microservices/" class="tm-hubs-list__link">
    Микросервисы
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 3: ↑3 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 3: ↑3 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+3</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    19
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/netcracker/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/a56/d77/c66/a56d77c6615d2284efee97805fbcade9.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/netcracker/profile/" class="tm-company-snippet__title">Netcracker</a> <div class="tm-company-snippet__description">Технологическое перерождение телеком разработки</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="http://www.netcracker.com/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/netcracker_team/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/ff6/091/eb4/ff6091eb42b01e8b2a799f7f4ee6b5c8.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 14 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    8
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">3</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Netcracker Team</span> <a href="/ru/users/netcracker_team/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @netcracker_team
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/netcracker/blog/584542/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="1992-12-31T21:00:00.000Z" title="1993-01-01, 00:00">1  января  1993</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    США
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://www.netcracker.com/" target="_blank" class="tm-company-basic-info__link">
      www.netcracker.com
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    5 001–10 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2015-11-24T10:12:11.000Z" title="2015-11-24, 13:12">24  ноября  2015</time></dd></dl> <!----></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/netcracker/blog/584542/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/netcracker/blog/584542/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"584542":{"id":"584542","timePublished":"2021-10-20T12:04:49+00:00","isCorporative":true,"lang":"ru","titleHtml":"Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive","leadData":{"textHtml":"\u003Cp\u003EПо мотивам вопросов из \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fnetcracker\u002Fblog\u002F568054\u002F\"\u003Eпредыдущей статьи\u003C\u002Fa\u003E мы решили написать вторую часть и рассказать, что удалось сделать еще. \u003C\u002Fp\u003E\u003Cp\u003EНа повестке дня:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E•\u003C\u002Fstrong\u003E Роутинг хостового приложения (React\u002FVue Routing внутри Angular)\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E•\u003C\u002Fstrong\u003E Полноценные адаптеры для работы удаленных плагинов\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003E•\u003C\u002Fstrong\u003E Использование сервисных модулей в рантайме\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fae9\u002F4a2\u002F07f\u002Fae94a207f927af71d603698331676aec.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fae9\u002F4a2\u002F07f\u002Fae94a207f927af71d603698331676aec.png","fit":"cover","positionY":0,"positionX":0}},"editorVersion":"2.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":8,"votesCount":14},"rating":3,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"488908","alias":"netcracker_team","fullname":"Netcracker Team","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fff6\u002F091\u002Feb4\u002Fff6091eb42b01e8b2a799f7f4ee6b5c8.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":19,"readingCount":1916,"score":3,"votesCount":3},"hubs":[{"relatedData":null,"id":"19717","alias":"netcracker","type":"corporative","title":"Блог компании Netcracker","titleHtml":"Блог компании Netcracker","isProfiled":false},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"18109","alias":"angular","type":"collective","title":"Angular","titleHtml":"Angular","isProfiled":true},{"relatedData":null,"id":"19327","alias":"reactjs","type":"collective","title":"ReactJS","titleHtml":"ReactJS","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EПо мотивам вопросов из \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fnetcracker\u002Fblog\u002F568054\u002F\"\u003Eпредыдущей статьи\u003C\u002Fa\u003E мы решили написать вторую часть и рассказать, что удалось сделать еще. \u003C\u002Fp\u003E\u003Cp\u003EНа повестке дня:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EРоутинг хостового приложения (React\u002FVue Routing внутри Angular)\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПолноценные адаптеры для работы удаленных плагинов\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EИспользование сервисных модулей в рантайме\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"385\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F30e\u002F1ef\u002Fff7\u002F30e1efff70ba8e42160586a510d602e3.png\" data-width=\"680\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EРоутинг\u003C\u002Fh3\u003E\u003Cp\u003EВ первой части \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fnetcracker\u002Fblog\u002F568054\u002F\"\u003Eстатьи\u003C\u002Fa\u003E мы создали \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Filya-isupov\u002Fmulti-framework-module-federation\"\u003Epet project\u003C\u002Fa\u003E, в котором использовали хост на Angular и удаленные плагины на Angular. В такой связке роутинг хостового приложения отрабатывает все варианты его нативного использования. Например, в хостовом приложении есть роут \u003Cstrong\u003E\u002Fplugin\u003C\u002Fstrong\u003E, а в плагине есть два роута \u003Cstrong\u003E\u002Ffirst\u003C\u002Fstrong\u003E и \u003Cstrong\u003E\u002Fsecond\u003C\u002Fstrong\u003E. Получается, в готовом приложении мы получим \u003Cstrong\u003E\u002Fplugin\u002Ffirst\u003C\u002Fstrong\u003E и \u003Cstrong\u003E\u002Fplugin\u002Fsecond\u003C\u002Fstrong\u003E. Такая система будет идеально работать на любом уровне вложенности.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"528\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcc3\u002F370\u002F2e5\u002Fcc33702e52d09ff336e890f8c6dcd592.png\" data-width=\"786\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E Разберем пример чилдового роутинга для Angular плагина.\u003C\u002Fp\u003E\u003Cfigure class=\"bordered full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"626\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F156\u002F8f5\u002Fb1d\u002F1568f5b1d216cbee8e29d3c465ce6143.png\" data-width=\"581\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EРассматриваем задачу: в Angular приложении использовать плагин, написанный на другом фреймворке – React.\u003C\u002Fp\u003E\u003Cp\u003EЗдесь обычно возникает вопрос: а зачем вы это делаете? И почему не написать все на одном фреймворке? Отвлечемся на минутку от техники и поясним.\u003C\u002Fp\u003E\u003Cp\u003EДействительно, в простых и средних по  сложности проектах, если есть возможность посадить все команды на одни технологии, это стоит сделать. Задача совмещать несколько фреймфорков  актуальна для сложных проектов, где независимые команды из разных доменов (микросервисов), разрабатывают свои компоненты, в своих релизных циклах, на разных технологиях. Далее эти компоненты должны использоваться в одном интерфейсе. Наш опыт говорит, что мир усложняется, поэтому усложняются и IT-системы, и таких сложных проектов становится все больше и больше.\u003C\u002Fp\u003E\u003Cp\u003EНапример, возьмем рабочее место оператора контактного центра. Вот мы видим на экране финансовую информацию, которая разрабатывалась командой подразделения Billing, она надежна как танк и редко меняется. А вот рядом виджет с новомодным Next Best Action, написанной динамичной командой хипстеров, которые постоянно экспериментируют. А еще чат-боты, скриптинги, маркетинговые акции, визарды для решения технических проблем, базы знаний и многое другое. Под каждым компонентом большое количество бизнес-логики и большие команды, их разрабатывающие. \u003C\u002Fp\u003E\u003Cp\u003EСогласитесь, навязывать той или иной команде технологии неправильно, это будет противоречить идее микросервисной архитектуры.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EВернемся к технике. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EЕсли просто создать Angular роут \u003Cstrong\u003E\u002FReact\u003C\u002Fstrong\u003E в нашем хост приложении и положить под него React плагин с роутингом, то все будет работать, но не совсем так, как ожидалось.\u003C\u002Fp\u003E\u003Cp\u003EСоздаем роутинг в React плагине.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"303\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3e\u002Fc66\u002Fa35\u002Fe3ec66a356d29fde5949ca9bf59a88c9.png\" data-width=\"791\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВ такой реализации при переходе на \u003Cstrong\u003E\u002FReact\u003C\u002Fstrong\u003E, мы увидим, что URL в браузере поменяется на \u003Cstrong\u003E&lt;host_url\u003E\u002Ffirst\u003C\u002Fstrong\u003E. Это не то, что мы ожидаем. Решаем проблему с помощью \u003Ca href=\"https:\u002F\u002Freactrouter.com\u002Fweb\u002Fapi\u002FBrowserRouter\"\u003Ebasename\u003C\u002Fa\u003E. Идея: нужно пробросить из хост приложения роут, под которым лежит наш React плагин в сам плагин, чтобы инициализировать BrowserRouter с правильным basename. В двух словах, basename - это URL, относительно которого будет строиться react роутинг.\u003C\u002Fp\u003E\u003Cp\u003EИтак, пробрасываем на стороне хоста. Понятное дело, нужно значение \u003Cstrong\u003EroutePath\u003C\u002Fstrong\u003E непосредственно из конфигурации самого плагина.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"531\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7d5\u002F264\u002Fb64\u002F7d5264b645053d7be6c4ac7f8f67ba84.png\" data-width=\"1270\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПринимаем на стороне плагина.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"213\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe13\u002F66d\u002F907\u002Fe1366d90714e7de0ac7ba1cf556ef069.png\" data-width=\"864\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПолучаем готовое полноценное решение \u003Cstrong\u003EAngular Router + React Browser Router\u003C\u002Fstrong\u003E. \u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"438\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F775\u002Fe16\u002F92b\u002F775e1692bf9698a8a26e40ecc73902bf.png\" data-width=\"351\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EСупер нативные адаптеры для микрофронтендов\u003C\u002Fh3\u003E\u003Cp\u003EРассмотрим:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EAngular адаптер\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EReact адаптер\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EVue адаптер\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EИнициализировать какой-либо плагин с набором пропсов – просто, но это решает только половину задачи. А если мы хотим использовать удаленный плагин как часть своего приложения, как глупую компоненту, просто как компоненту, которой иногда нужны пропсы от хоста или другого плагина?\u003C\u002Fp\u003E\u003Cp\u003EСоздаем Change Detector для наших плагинов. Детектор уже есть, давайте научимся пропсы в плагины прокидывать :)\u003C\u002Fp\u003E\u003Cp\u003EСхема с пропсами должна быть всем понятна, но, на всякий случай, нарисуем картинку.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"872\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5d9\u002Ff72\u002F9bd\u002F5d9f729bdbff7a9a1a4ef2f67e76be9d.png\" data-width=\"953\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Cstrong\u003EДопущение\u003C\u002Fstrong\u003E. На стороне плагина получить обновленные пропсы можно только в сеттере, так как мы их пробрасываем руками, а не стандартным механизмом обнаружения изменений.\u003C\u002Fp\u003E\u003Ch3\u003EAngular Adapter\u003C\u002Fh3\u003E\u003Cp\u003E\u003Cstrong\u003EComponents\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EМы немного дописали\u002Fпереписали наш Angular адаптер, и получился вот \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Filya-isupov\u002Fmulti-framework-module-federation\u002Fblob\u002Fmaster\u002Fangular-shell\u002Fsrc\u002Fapp\u002Fcomponents\u002Fangular-wrapper\u002Fangular-wrapper.component.ts\"\u003Eтакой код\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\u003Cp\u003EНововведения заключаются в возможности использовать любой компонент из любого модуля из любого удаленного репозитория с необходимыми провайдерами. Это значит, что если у нас в репозитории плагина есть модуль с компонентом, который использует сервис, который провайдит этот же модуль, мы можем экспортировать целиком этот модуль с его провайдерами и не переживать, что какой-то сервис потеряется.\u003C\u002Fp\u003E\u003Cp\u003EКак это реализуется:\u003C\u002Fp\u003E\u003Cp\u003EНа стороне плагина нам нужно предоставить модуль и компоненту, которую хотим использовать. Одного модуля недостаточно, потому что все component factory этого модуля не попадут в бандл (tree-shakable components) при build –prod, и останется один модуль с инжектором. \u003C\u002Fp\u003E\u003Cp\u003EВыглядит это вот так:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"151\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff18\u002F3cf\u002F7f2\u002Ff183cf7f2a79543b29427b8d03a844fe.png\" data-width=\"1375\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EНа стороне, принимающей плагин, должна быть расширенная конфигурация, вида:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"413\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F903\u002F50f\u002F732\u002F90350f73289637491653879385201195.png\" data-width=\"903\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЭти 4 проперти, обведенные красным, обеспечивают загрузку модуля и компоненты плагина.\u003C\u002Fp\u003E\u003Cp\u003EВот план, как будем грузить:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"858\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faef\u002F374\u002F669\u002Faef3746691576b635e93e84d0e853345.png\" data-width=\"698\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EВот код:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"532\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faf3\u002Ff70\u002Fff1\u002Faf3f70ff15b05d6e764de8384f21813a.png\" data-width=\"1187\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЭтот код развязывает нам руки! Теперь можно достать любую компоненту из любого модуля :)\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EА сервисы можно? Можно!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"726\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9ce\u002F061\u002Fd7a\u002F9ce061d7a575ff81155934e3ee61750e.png\" data-width=\"596\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EДля чего использовать shared сервисы из remote модулей? У нас есть набор бекендсервисов, которые предоставляют нам REST API. Каждый сервис отвечает за свой бизнес. Когда двум плагинам нужно обратиться к одному бекенду, каждый плагин должен создать GraphQL query, добавить реализацию GraphQL модуля к себе в репозиторий, не забыть про модели данных. (╯°□°）╯︵ ┻━┻. \u003C\u002Fp\u003E\u003Cp\u003EИдея заключается в создании master UI сервисов для бекендов. Тогда для каждого бекенда будет один Singleton сервис на всё приложение (для хоста и всех плагинов). И тянуть мы их будем в рантайме.\u003C\u002Fp\u003E\u003Cp\u003EЗапровайдим сервис в remote модуле вот так:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"278\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F36a\u002F163\u002F2a0\u002F36a1632a0b648b527a6da01eebca5464.png\" data-width=\"548\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EЭто нужно, чтобы вытащить его потом из инжектора по стринге:\u003C\u002Fp\u003E\u003Cfigure class=\"bordered full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"595\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6dc\u002F5c8\u002F7fa\u002F6dc5c87fa9dca95930b5325ac169a467.png\" data-width=\"1106\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EСкажем прямо –  то, как мы сможем использовать этот сервис –  не идеально, но теперь мы хотя бы можем это делать. Все так сложно, потому что мы из инжектора вытащим не просто сервис, а сервис со всеми его зависимостями, если таковые имеются. И дополнительно на стороне консьюмера не нужно ничего провайдить, \u003Cstrong\u003Eвсе само заработает\u003C\u002Fstrong\u003E!\u003C\u002Fp\u003E\u003Cfigure class=\"\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"306\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4a5\u002F25e\u002F59d\u002F4a525e59dc32df017c50291344a31023.png\" data-width=\"299\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3\u003EReact adapter\u003C\u002Fh3\u003E\u003Cp\u003EАдаптер для связки Angular-React будет чуть проще. Поскольку expose’ить из React намного проще – можно не делить на умные и глупые компоненты, то и в реализации адаптера предусматривать это не будем.\u003C\u002Fp\u003E\u003Cp\u003EМы должны уметь:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EНарисовать компоненту под роутом\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНарисовать компоненту в любом месте Angular компоненты через адаптер\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПод роутом мы уже умеем:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"517\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3dc\u002Fdbf\u002Fd41\u002F3dcdbfd41d179c195555a1cee4e6dfd1.png\" data-width=\"784\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EА рисовать компоненты в произвольном месте – давайте учиться. Концептуально будет так же, как с Angular плагином. Нужно просто вставить React адаптер для плагина в шаблон, положить в него конфигурацию плагина и пропсы.\u003C\u002Fp\u003E\u003Cfigure class=\"bordered full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"166\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F06b\u002Fc5b\u002F80e\u002F06bc5b80e6fc7ed3445f4c3953ef65c5.png\" data-width=\"1088\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EАдаптер нарисует нам наш плагин:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"548\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd3b\u002F3b2\u002F99d\u002Fd3b3b299de73b98fb0b48c8d40082620.png\" data-width=\"1357\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EУстановит новые пропсы, когда они придут:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"289\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe47\u002Fa3a\u002Ffc2\u002Fe47a3afc240afed0d17b5fd43f59c3fd.png\" data-width=\"1201\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EИ не забудем сделать unmount, когда компонента задестроится:\u003C\u002Fp\u003E\u003Cfigure class=\"bordered full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"104\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F33d\u002Fe86\u002F322\u002F33de86322257f3ed6758938566017afd.png\" data-width=\"766\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПрофит :)\u003C\u002Fp\u003E\u003Ch3\u003EVue adapter\u003C\u002Fh3\u003E\u003Cp\u003EКод адаптера для vue структурно похож на адаптеры для React и Angular. Основное отличие только в самом коде рендера, компоненты или приложения.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003Eprivate async renderComponent(configuration: FederationPlugin, props?: Record&lt;string, unknown\u003E): Promise&lt;void\u003E {\n  this.configuration = configuration;\n  const component = await loadRemoteModule({\n    remoteEntry: configuration.remoteEntry,\n    remoteName: configuration.remoteName,\n    exposedModule: configuration.exposedModule\n  });\n\n  const vueComponent = component[configuration.moduleClassName || 'default'];\n  this.vueComponentRef = createApp(vueComponent, {\n      ...this.props\n  });\n  this.vueComponentRef.mount(this.hostRef.nativeElement);\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EПолучаем компоненту и, соответственно, «маунтим» ее на наш хост элемент адаптера.\u003C\u002Fp\u003E\u003Cp\u003EТакже можно написать самовызывающийся адаптер, который подойдет для случая, когда мы хотим отдать логику по байндингу  настроек , настройке роутинга и подключения каких-то библиотек на откуп ремоут плагину.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003Econst selfRunApp = component[configuration.moduleClassName || 'default'];\nselfRunApp(this.hostRef.nativeElement, this.props, configuration.routePath);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EИ уже во vue проекте, экспортируем bootstrap функцию, как пример: \u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E\u002F\u002F bootstrapFunction.js\nexport default (refElement, props, base) =\u003E {\n    const router = createRouter({\n        history: createWebHistory(base),\n        routes\n    })\n    const app = createApp(App, {\n        data: () =\u003E {\n            return (this.props || {});\n        }\n    });\n    app.use(router);\n    app.mount(refElement);\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eв которой просто используем переданный элемент и прикрепляем к нему наш компонент, приложение. \u003C\u002Fp\u003E\u003Cp\u003EТак как Module Federation позволяет expose’ить любой javascript, конфигурация вебпака не сильно изменится.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003Enew ModuleFederationPlugin({\n  name: \"vue_app\",\n  filename: \"remoteEntry.js\",\n  exposes: {\n    \".\u002FContent\": \".\u002Fsrc\u002Fcomponents\u002FContent\",\n    \".\u002FButton\": \".\u002Fsrc\u002Fcomponents\u002FButton\",\n    \".\u002FApp\": \".\u002Fsrc\u002FbootstrapFunction\",\n  },\n}),\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3\u003EP.S.\u003C\u002Fh3\u003E\u003Cp\u003EВесь код, о котором мы поговорили можно найти на \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Filya-isupov\u002Fmulti-framework-module-federation\"\u003Egithub\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"microfrontends"},{"titleHtml":"module federation"},{"titleHtml":"microservices"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fae9\u002F4a2\u002F07f\u002Fae94a207f927af71d603698331676aec.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fae9\u002F4a2\u002F07f\u002Fae94a207f927af71d603698331676aec.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fnetcracker\\\u002Fblog\\\u002F584542\\\u002F\"},\"headline\":\"Webpack Module Federation — микрофронтенд на современных технологиях (часть 2) – deep dive\",\"datePublished\":\"2021-10-20T15:04:49+03:00\",\"dateModified\":\"2021-10-21T00:52:16+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Netcracker Team\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (Rea...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fnetcracker\\\u002Fblog\\\u002F584542\\\u002F#post-content-body\",\"about\":[\"c_netcracker\",\"h_javascript\",\"h_angular\",\"h_reactjs\",\"h_microservices\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F584542\\\u002Fc8dc6c4cae8b7e08d3ffa8c295c908e1\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F30e\\\u002F1ef\\\u002Fff7\\\u002F30e1efff70ba8e42160586a510d602e3.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fcc3\\\u002F370\\\u002F2e5\\\u002Fcc33702e52d09ff336e890f8c6dcd592.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F156\\\u002F8f5\\\u002Fb1d\\\u002F1568f5b1d216cbee8e29d3c465ce6143.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe3e\\\u002Fc66\\\u002Fa35\\\u002Fe3ec66a356d29fde5949ca9bf59a88c9.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F7d5\\\u002F264\\\u002Fb64\\\u002F7d5264b645053d7be6c4ac7f8f67ba84.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe13\\\u002F66d\\\u002F907\\\u002Fe1366d90714e7de0ac7ba1cf556ef069.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F775\\\u002Fe16\\\u002F92b\\\u002F775e1692bf9698a8a26e40ecc73902bf.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F5d9\\\u002Ff72\\\u002F9bd\\\u002F5d9f729bdbff7a9a1a4ef2f67e76be9d.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Ff18\\\u002F3cf\\\u002F7f2\\\u002Ff183cf7f2a79543b29427b8d03a844fe.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F903\\\u002F50f\\\u002F732\\\u002F90350f73289637491653879385201195.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Faef\\\u002F374\\\u002F669\\\u002Faef3746691576b635e93e84d0e853345.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Faf3\\\u002Ff70\\\u002Fff1\\\u002Faf3f70ff15b05d6e764de8384f21813a.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F9ce\\\u002F061\\\u002Fd7a\\\u002F9ce061d7a575ff81155934e3ee61750e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F36a\\\u002F163\\\u002F2a0\\\u002F36a1632a0b648b527a6da01eebca5464.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F6dc\\\u002F5c8\\\u002F7fa\\\u002F6dc5c87fa9dca95930b5325ac169a467.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F4a5\\\u002F25e\\\u002F59d\\\u002F4a525e59dc32df017c50291344a31023.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F3dc\\\u002Fdbf\\\u002Fd41\\\u002F3dcdbfd41d179c195555a1cee4e6dfd1.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F06b\\\u002Fc5b\\\u002F80e\\\u002F06bc5b80e6fc7ed3445f4c3953ef65c5.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fd3b\\\u002F3b2\\\u002F99d\\\u002Fd3b3b299de73b98fb0b48c8d40082620.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe47\\\u002Fa3a\\\u002Ffc2\\\u002Fe47a3afc240afed0d17b5fd43f59c3fd.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F33d\\\u002Fe86\\\u002F322\\\u002F33de86322257f3ed6758938566017afd.png\"]}","metaDescription":"По мотивам вопросов из предыдущей статьи мы решили написать вторую часть и рассказать, что удалось сделать еще. На повестке дня:Роутинг хостового приложения (React\u002FVue Routing внутри...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"netcracker":{"alias":"netcracker","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002Fa56\u002Fd77\u002Fc66\u002Fa56d77c6615d2284efee97805fbcade9.png","titleHtml":"Netcracker","descriptionHtml":"Технологическое перерождение телеком разработки","relatedData":null,"statistics":{"postsCount":22,"newsCount":0,"vacanciesCount":0,"employeesCount":60,"careerRating":null,"subscribersCount":533,"rating":61.61,"invest":null},"foundationDate":{"year":"1993","month":"01","day":"01"},"location":{"city":null,"region":null,"country":{"id":"198","title":"США"}},"siteUrl":"http:\u002F\u002Fwww.netcracker.com\u002F","staffNumber":"5 001–10 000 человек","registrationDate":"2015-11-24T10:12:11+00:00","representativeUser":null,"contacts":[{"title":"Сайт","url":"http:\u002F\u002Fwww.netcracker.com\u002F"}],"settings":{"analyticsSettings":[],"branding":null,"status":"active"},"metadata":{"titleHtml":"Netcracker, США - Технологическое перерождение телеком разработки с 1 января 1993 г.","title":"Netcracker, США - Технологическое перерождение телеком разработки с 1 января 1993 г.","keywords":["JavaScript","Angular","ReactJS","Микросервисы","Программирование"],"descriptionHtml":"22 статьи от авторов компании Netcracker","description":"22 статьи от авторов компании Netcracker"},"aDeskSettings":null,"careerAlias":"netcrackercom","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
