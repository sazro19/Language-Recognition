<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Делаем визуализацию распределения доходов населения России на основе данных Росстата / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/583970\/"},"headline":"Делаем визуализацию распределения доходов населения России на основе данных Росстата","datePublished":"2021-10-18T08:35:48+03:00","dateModified":"2021-10-19T17:30:43+03:00","author":{"@type":"Person","name":"Максим Андреев"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек &mdash; одного...","url":"https:\/\/habr.com\/ru\/post\/583970\/#post-content-body","about":["h_javascript","h_opendata","h_data_visualization","h_infographics","f_develop","f_popsci"],"image":["https:\/\/habr.com\/share\/publication\/583970\/1aaf644383663630163176cf5692e7d1\/","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/5a1\/36d\/f85\/5a136df85ed4671d90f7fe5b55ee01c7.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/357\/e12\/be2\/357e12be227847c6dbdcf4abaad5f818.png","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/8da\/1c6\/f1c\/8da1c6f1ce13b02452f9806179630abe.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/630\/529\/a9b\/630529a9b2b15f9b3bb7d4129113bd5a.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/e36\/64d\/4bf\/e3664d4bf2382d302ca515b2f4c250af.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/903\/084\/480\/903084480e6a9216d898d2a7cc175c35.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/827\/1aa\/d1c\/8271aad1ca07b95c8a1c3e48123b9bf7.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/7ea\/383\/637\/7ea38363730b092f32279d7f2dfc3cd5.svg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/8b5\/21d\/bb7\/8b521dbb7d6b75ab674849c874023374.jpg","https:\/\/habrastorage.org\/getpro\/habr\/upload_files\/111\/e28\/680\/111e286806b7db4ffbb79c0da6835030.jpg"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Делаем визуализацию распределения доходов населения России на основе данных Росстата" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Делаем визуализацию распределения доходов населения России на основе данных Росстата" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Делаем визуализацию распределения доходов населения России на основе данных Росстата" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/getpro/habr/upload_files/a71/90e/c95/a7190ec95a4209cba8df82a237c77722.jpg" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/getpro/habr/upload_files/a71/90e/c95/a7190ec95a4209cba8df82a237c77722.jpg" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/getpro/habr/upload_files/a71/90e/c95/a7190ec95a4209cba8df82a237c77722.jpg" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/getpro/habr/upload_files/a71/90e/c95/a7190ec95a4209cba8df82a237c77722.jpg" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/getpro/habr/upload_files/a71/90e/c95/a7190ec95a4209cba8df82a237c77722.jpg" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="583970" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2021-10-18T05:35:48.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/583970/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/583970/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habrastorage.org/getpro/habr/upload_files/a71/90e/c95/a7190ec95a4209cba8df82a237c77722.jpg" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Maxim_Andreev/" title="Maxim_Andreev" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/fc8/ee7/d61/fc8ee7d61f9f3766e639bac39343629b.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/Maxim_Andreev/" class="tm-user-info__username">
      Maxim_Andreev
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2021-10-18T05:35:48.000Z" title="2021-10-18, 08:35">18  октября   в 08:35</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Делаем визуализацию распределения доходов населения России на основе данных Росстата</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/javascript/" class="tm-article-snippet__hubs-item-link"><span>JavaScript</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/opendata/" class="tm-article-snippet__hubs-item-link"><span>Открытые данные</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/data_visualization/" class="tm-article-snippet__hubs-item-link"><span>Визуализация данных</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/infographics/" class="tm-article-snippet__hubs-item-link"><span>Инфографика</span> <!----></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/5a1/36d/f85/5a136df85ed4671d90f7fe5b55ee01c7.jpg" width="1798" height="1646" data-src="https://habrastorage.org/getpro/habr/upload_files/5a1/36d/f85/5a136df85ed4671d90f7fe5b55ee01c7.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний ежемесячный доход будет равен ровно 35 700 ₽. Чтобы лучше продемонстрировать распределение доходов, я смастерил <a href="https://labs.maximandreev.de/personal-income-russia/" rel="noopener noreferrer nofollow">калькулятор</a>, который позволяет посчитать количество людей с заданным диапазоном дохода и наглядно продемонстрировать их вклад в общий уровень доходов. </p><p>В этом посте я расскажу как из довольно скупых данных, которые доступны на сайте Росстата сгенерировать датасет для подробной инфографики.</p><h3>Обзор существующих решений</h3><p>Перед тем как приступить к изобретению велосипеда я посмотрел как обычно изображают распределение доходов. Практически все варианты можно разделить на два класса:</p><h4>1. Гистограммы</h4><figure class="full-width "><img src="/img/image-loader.svg" alt="" title="" height="1518" data-src="https://habrastorage.org/getpro/habr/upload_files/357/e12/be2/357e12be227847c6dbdcf4abaad5f818.png" data-width="2408"/><figcaption></figcaption></figure><p><a href="https://commons.wikimedia.org/wiki/File:Germany_household_income.svg" rel="noopener noreferrer nofollow">Delphi234</a>, CC0, via Wikimedia Commons</p><p>Гистограмма представляет из себя двухмерный график, по горизонтальной оси которого отложен размер дохода, а по вертикальной — количество людей с соответствующим доходом. Этот вариант наиболее точно отражают суть явления, но, к сожалению, понятен он только тем читателям, которые привыкли работать с графиками.</p><p>Примеры:</p><ul><li><p><a href="https://zen.yandex.ru/media/gizh/raspredelenie-rossiian-po-dohodu-5b2e1ee4c8dfbc00a85539e3" rel="noopener noreferrer nofollow">Графики и жизнь</a></p></li><li><p><a href="https://career.habr.com/salaries" rel="noopener noreferrer nofollow">Хабр Карьера</a></p></li><li><p><a href="https://www.zeit.de/wirtschaft/2018-12/mittelschicht-einkommen-deutschland" rel="noopener noreferrer nofollow">Die Zeit (немецкий)</a></p></li><li><p><a href="https://www.iwkoeln.de/fileadmin/user_upload/HTML/2019/einkommensverteilung/index.html" rel="noopener noreferrer nofollow">IW (снова немецкий)</a></p></li></ul><h4>2. Пирамиды</h4><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/8da/1c6/f1c/8da1c6f1ce13b02452f9806179630abe.jpg" width="763" height="990" data-src="https://habrastorage.org/getpro/habr/upload_files/8da/1c6/f1c/8da1c6f1ce13b02452f9806179630abe.jpg" data-blurred="true"/><figcaption></figcaption></figure><p><a href="https://commons.wikimedia.org/wiki/File:Pyramid_of_Capitalist_System.jpg" rel="noopener noreferrer nofollow">Artist not credited. Published by International Pub. Co., Cleveland, Ohio.</a>, Public domain, via Wikimedia Commons </p><p>Пирамиды в представлении социального неравенства стары как сама инфографика и очень хорошо понятны всем читателям, но как правило крайне манипулятивны. В зависимости от политического мировоззрения авторов социальные низы представляются либо трудягами-страдальцами, которые сгорбившись несут на своих плечах пирующих бездельников, либо какими-нибудь бомжами, которые по мере своего движения по этажам пирамиды обзаводятся приличной одеждой и довольной улыбкой. Так или иначе, экономику нам пытаются преподнести как некую игру с нулевой суммой, в которой увеличить своё благосостояние можно только отобрав кусок у ближнего. В реальности же, если кто-то из бедняков переберётся с нижнего этажа наверх, то оставшимся беднякам от этого точно тяжелее не станет. А богачи в свою очередь не только не должны будут потесниться, но и могут сами увеличить свой доход, если у бедняков вдруг появятся лишние деньги.</p><p>Примеры:</p><ul><li><p><a href="https://www.statista.com/chart/3384/the-global-pyramid-of-wealth/" rel="noopener noreferrer nofollow">Statista</a></p></li><li><p><a href="https://www.zeit.de/wirtschaft/2021-02/soziale-ungleichheit-armut-reichtum-schichten-rechner-studie-deutschland" rel="noopener noreferrer nofollow">Die Zeit (немецкий)</a></p></li></ul><h3>Мой вариант</h3><p>Мне показалась более удачной аналогия с биологическими клетками. У всех есть примерно одинаковое ядро, рост клетки зависит от внешних условий и не обязательно связан с пожиранием соседних клеток: </p><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/630/529/a9b/630529a9b2b15f9b3bb7d4129113bd5a.jpg" width="1736" height="388" data-src="https://habrastorage.org/getpro/habr/upload_files/630/529/a9b/630529a9b2b15f9b3bb7d4129113bd5a.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>При этом я посчитал нужным отсортировать эти клетки по их размерам, чтобы отразить характерные социальные пузыри, которые часто мешают людям поверить в правдивость статистики.</p><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/e36/64d/4bf/e3664d4bf2382d302ca515b2f4c250af.jpg" width="954" height="933" data-src="https://habrastorage.org/getpro/habr/upload_files/e36/64d/4bf/e3664d4bf2382d302ca515b2f4c250af.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Таким образом, чтобы реализовать эту концепцию, мне нужно было поделить население России на произвольное количество групп и иметь возможность посчитать среднедушевой доход для этой группы.</p><h3>Исходные данные Росстата</h3><p>Самое близкое из того, что мне нужно на сайте Росстата — это данные по <a href="https://rosstat.gov.ru/storage/mediabank/urov_32g.doc" rel="noopener noreferrer nofollow">распределению общего объёма доходов по 20-процентным группам населения</a>, а также <a href="https://rosstat.gov.ru/storage/mediabank/urov_31g.doc" rel="noopener noreferrer nofollow">распределение населения по величине среднедушевых доходов</a>. Только лишь на основе этих данных можно было бы нарисовать четыре кружка, которые не дали бы ровно никакого представления о картине в целом. Для более мелкой дискретизации нужно как-то интерполировать данные. Находим <a href="https://rosstat.gov.ru/storage/mediabank/met_4.rar" rel="noopener noreferrer nofollow">методику</a>, по которой убеждаемся, что в основу модели распределения населения по доходам заложено логнормальное распределение: </p><img class="formula" source=" f(x) = \frac1{x\sigma\sqrt{2\pi}}exp\left(-\frac{(\ln x-\mu)^2}{2\sigma^2}\right)" alt=" f(x) = \frac1{x\sigma\sqrt{2\pi}}exp\left(-\frac{(\ln x-\mu)^2}{2\sigma^2}\right)" src="https://habrastorage.org/getpro/habr/upload_files/903/084/480/903084480e6a9216d898d2a7cc175c35.svg" width="305" height="54"/><p>где <code>x</code> — ежемесячный доход, а параметры <code>mu</code> и <code>sigma</code> рассчитываются из среднего (<em>x<sub>mean</sub></em>) и медианного (<em>x<sub>median</sub></em>) доходов следующим образом: </p><img class="formula" source="\mu=\ln(x_{median})" alt="\mu=\ln(x_{median})" src="https://habrastorage.org/getpro/habr/upload_files/827/1aa/d1c/8271aad1ca07b95c8a1c3e48123b9bf7.svg" width="129" height="22"/><img class="formula" source="\sigma=\sqrt{2(\mu+\ln(x_{mean}))}" alt="\sigma=\sqrt{2(\mu+\ln(x_{mean}))}" src="https://habrastorage.org/getpro/habr/upload_files/7ea/383/637/7ea38363730b092f32279d7f2dfc3cd5.svg" width="197" height="40"/><p>На графике это всё выглядит следующим образом:</p><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/8b5/21d/bb7/8b521dbb7d6b75ab674849c874023374.jpg" width="1596" height="1097" data-src="https://habrastorage.org/getpro/habr/upload_files/8b5/21d/bb7/8b521dbb7d6b75ab674849c874023374.jpg" data-blurred="true"/><figcaption></figcaption></figure><p>Теперь, когда у нас есть непрерывная функция, можно перейти к созданию своего датасета.</p><h3>Генерируем датасет</h3><p>Чтобы сравнение доходов различных социальных групп имело смысл, нужно разделить всю популяцию на равное число групп <code>nGroups</code>. Для визуализации нам понадобятся следующие характеристики каждой группы:</p><ul><li><p>размер популяции группы, <code>population</code></p></li><li><p>минимальный уровень дохода, <code>incomeMin</code></p></li><li><p>средний уровень дохода, <code>incomeMean</code></p></li><li><p>максимальный уровень дохода, <code>incomeMax</code></p></li><li><p>годовой доход всей группы, <code>populationIncomeYear</code></p></li></ul><figure class="full-width "><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/111/e28/680/111e286806b7db4ffbb79c0da6835030.jpg" alt="Иллюстрация для расчёта параметров датасета" title="Иллюстрация для расчёта параметров датасета" width="1596" height="1097" data-src="https://habrastorage.org/getpro/habr/upload_files/111/e28/680/111e286806b7db4ffbb79c0da6835030.jpg" data-blurred="true"/><figcaption>Иллюстрация для расчёта параметров датасета</figcaption></figure><p>Минимальный доход равен максимальному доходу предыдущей группы. Максимальный доход высчитывается таким образом, чтобы размер популяции группы был равен заданному. Размер популяции получается интегрированием функции распределения населения по доходам от минимального его значения до максимального. Чтобы получить размер дохода всей группы, нужно проинтегрировать ту же функцию, умноженную на текущий размер дохода.</p><p>Задачка получается неявная, поэтому размер максимального дохода я считаю методом Ньютона (благо, производная функции известна). Максимальный доход самой богатой группы стремится к бесконечности, поэтому её доход считается по остаточному принципу по известному общему доходу всей популяции. Алгоритм далёк от оптимального в плане количества вычислений, но датасет нужно сгенерировать только один раз, поэтому я подумал, что и так сойдёт... </p><details class="spoiler"><summary>Кусок кода с расчётом параметров для датасета:</summary><div class="spoiler__content"><pre><code class="javascript">datasetPure = {
  function incomeDistribution(nGroups) {
    
    let data = []
    let groupPopulation = populationTotal/nGroups
    let groupIncomeMin = 1e-12, groupIncomeMax, groupIncomeMean
    let groupTotalYearIncome = []
    //The function f and its derivative dfdx come in handy for Newtonian iterations
    let f = function(groupIncomeMin, groupIncomeMax) {
      return integral(populationWithIncome, groupIncomeMin, groupIncomeMax, 1) - groupPopulation
    }
    let dfdx = function(groupIncomeMax) {
      return populationWithIncome(groupIncomeMax)
    }
    let delta0 = 10000 //initial step
    for (let i = 0; i &lt; nGroups; i++) {
      if (i &lt; nGroups-1) { //
        groupIncomeMax = groupIncomeMin + delta0
        let groupIncomeMaxPre = groupIncomeMax
        let err = 100
        let j = 0
        //Newton iterations: Calculating the maximum income difference at which the population size is equal to a given population size.
        while (err*err > 0.01) {
          groupIncomeMax += -f(groupIncomeMin, groupIncomeMaxPre)/dfdx(groupIncomeMaxPre)
          err = groupIncomeMax - groupIncomeMaxPre
          groupIncomeMaxPre = groupIncomeMax
          
          j++
          if (j>15) {
            groupIncomeMax = j + " iterations were not enough, last result: " + groupIncomeMax
            groupIncomeMean = j + " iterations were not enough"
            break
          }
          groupTotalYearIncome[i] = integral(incomeOfPopulationGroup, groupIncomeMin, groupIncomeMax, 1)*12
          groupIncomeMean = groupTotalYearIncome[i]/12.0/groupPopulation
          delta0 = groupIncomeMax - groupIncomeMin
        }
        
      } else { //The maximum income can be infinitely large, so we just write that it is very large.
        groupTotalYearIncome[i] = incomeTotal
        for (let j = 0; j &lt; nGroups - 1; j++) {
          groupTotalYearIncome[i] -= groupTotalYearIncome[j]
        }
        
        groupIncomeMean = groupTotalYearIncome[i]/12/groupPopulation
        groupIncomeMax = "дохрена"
      }
      
      data.push({population: groupPopulation, incomeMin: groupIncomeMin, incomeMean: groupIncomeMean,  incomeMax: groupIncomeMax, populationIncomeYear: groupTotalYearIncome[i]})

      groupIncomeMin = groupIncomeMax
    }
    return data
  }
    return incomeDistribution
}</code></pre></div></details><p>Для визуализации я пользовался библиотекой <a href="https://d3js.org" rel="noopener noreferrer nofollow">D3.js</a>. Получившийся датасет нужно привести к читаемому библиотекой виду: дать имена группам и назначить "детей" с учётом возможной разбивки на классы, ну и настроить всякие цвета и переключения...</p><h3>Ресурсы проекта</h3><ul><li><p>Программа генерации датасета на <a href="https://observablehq.com/@maxim-a-de/calculation-of-income-distribution-based-on-the-lognormal" rel="noopener noreferrer nofollow">Observable</a>. Когда появятся данные по регионам за 2020-й год, можно будет довольно быстро наделать датасетов для каждого региона.</p></li><li><p>Репозиторий сайта на <a href="https://github.com/maxim-a-de/incomeDistributionRussia2020" rel="noopener noreferrer nofollow">GitHub</a>.</p></li></ul></div></div> <!----> <div class="tm-article-poll"><div class="tm-notice tm-article-poll__notice tm-notice_positive"><!----> <div class="tm-notice__inner"><!----> <div class="tm-notice__content"><span>Только зарегистрированные пользователи могут участвовать в опросе. <a rel="nofollow" href="/kek/v1/auth/habrahabr/?back=/ru/post/583970/&hl=ru">Войдите</a>, пожалуйста.</span></div></div></div> <div class="tm-article-poll__header">Мой уровень дохода по этому калькулятору</div> <div class="tm-article-poll__answers"><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            8.09%
          </span> <span class="tm-article-poll__answer-label">низкий</span> <span class="tm-article-poll__answer-votes">
            41
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:8.09%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            12.82%
          </span> <span class="tm-article-poll__answer-label">средний</span> <span class="tm-article-poll__answer-votes">
            65
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:12.82%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            15.38%
          </span> <span class="tm-article-poll__answer-label">выше среднего</span> <span class="tm-article-poll__answer-votes">
            78
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:15.38%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            12.43%
          </span> <span class="tm-article-poll__answer-label">высокий</span> <span class="tm-article-poll__answer-votes">
            63
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:12.43%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent tm-article-poll__answer-percent_winning">
            34.52%
          </span> <span class="tm-article-poll__answer-label">очень высокий</span> <span class="tm-article-poll__answer-votes">
            175
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress tm-article-poll__answer-progress_winning" style="width:34.52%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            16.77%
          </span> <span class="tm-article-poll__answer-label">живу за пределами России</span> <span class="tm-article-poll__answer-votes">
            85
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:16.77%;"></div></div></div></div> <div class="tm-article-poll__stats">
       Проголосовали 507 пользователей. 

       Воздержались 172 пользователя. 
    </div></div></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B0%D1%81%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%D0%BE%D0%B2%5D" class="tm-tags-list__link">распределение доходов</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B8%D0%BD%D1%84%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">инфографика</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/javascript/" class="tm-hubs-list__link">
    JavaScript
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/opendata/" class="tm-hubs-list__link">
    Открытые данные
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/data_visualization/" class="tm-hubs-list__link">
    Визуализация данных
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/infographics/" class="tm-hubs-list__link">
    Инфографика
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 42: ↑41 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 42: ↑41 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+40</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">31K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    47
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Maxim_Andreev/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/fc8/ee7/d61/fc8ee7d61f9f3766e639bac39343629b.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 96 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    31.5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">42</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Максим Андреев</span> <a href="/ru/users/Maxim_Andreev/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @Maxim_Andreev
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Инженер</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="https://github.com/maxim-a-de/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Github
    </a><a href="https://telegram.me/MaximAndreev" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/583970/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 123 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/583970/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/583970/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"583970":{"id":"583970","timePublished":"2021-10-18T05:35:48+00:00","isCorporative":false,"lang":"ru","titleHtml":"Делаем визуализацию распределения доходов населения России на основе данных Росстата","leadData":{"textHtml":"\u003Cp\u003EПо данным Росстта в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний ежемесячный доход будет равен ровно 35 700 ₽. Чтобы лучше продемонстрировать распределение доходов, я смастерил \u003Ca href=\"https:\u002F\u002Flabs.maximandreev.de\u002Fpersonal-income-russia\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eкалькулятор\u003C\u002Fa\u003E, который позволяет посчитать количество людей с заданным диапазоном дохода и наглядно продемонстрировать их вклад в общий уровень доходов. \u003C\u002Fp\u003E\u003Cp\u003EВ этом посте я расскажу как от довольно скупых данных, которые доступны на сайте Росстата сгенерировать датасет для подробной инфографики.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa71\u002F90e\u002Fc95\u002Fa7190ec95a4209cba8df82a237c77722.jpg","buttonTextHtml":"Поехали!","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa71\u002F90e\u002Fc95\u002Fa7190ec95a4209cba8df82a237c77722.jpg","fit":"cover","positionY":7.7272727272727,"positionX":0.76923076923076}},"editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":31.5,"votesCount":96},"rating":42,"relatedData":null,"contacts":[{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fmaxim-a-de\u002F","value":"maxim-a-de"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002FMaximAndreev","value":"MaximAndreev"}],"authorContacts":[{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fmaxim-a-de\u002F","value":"maxim-a-de"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002FMaximAndreev","value":"MaximAndreev"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"691105","alias":"Maxim_Andreev","fullname":"Максим Андреев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ffc8\u002Fee7\u002Fd61\u002Ffc8ee7d61f9f3766e639bac39343629b.jpg","speciality":"Инженер"},"statistics":{"commentsCount":123,"favoritesCount":47,"readingCount":30597,"score":40,"votesCount":42},"hubs":[{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"18081","alias":"opendata","type":"collective","title":"Открытые данные","titleHtml":"Открытые данные","isProfiled":true},{"relatedData":null,"id":"18202","alias":"data_visualization","type":"collective","title":"Визуализация данных","titleHtml":"Визуализация данных","isProfiled":false},{"relatedData":null,"id":"21926","alias":"infographics","type":"collective","title":"Инфографика","titleHtml":"Инфографика","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5a1\u002F36d\u002Ff85\u002F5a136df85ed4671d90f7fe5b55ee01c7.jpg\" width=\"1798\" height=\"1646\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5a1\u002F36d\u002Ff85\u002F5a136df85ed4671d90f7fe5b55ee01c7.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПо данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний ежемесячный доход будет равен ровно 35 700 ₽. Чтобы лучше продемонстрировать распределение доходов, я смастерил \u003Ca href=\"https:\u002F\u002Flabs.maximandreev.de\u002Fpersonal-income-russia\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eкалькулятор\u003C\u002Fa\u003E, который позволяет посчитать количество людей с заданным диапазоном дохода и наглядно продемонстрировать их вклад в общий уровень доходов. \u003C\u002Fp\u003E\u003Cp\u003EВ этом посте я расскажу как из довольно скупых данных, которые доступны на сайте Росстата сгенерировать датасет для подробной инфографики.\u003C\u002Fp\u003E\u003Ch3\u003EОбзор существующих решений\u003C\u002Fh3\u003E\u003Cp\u003EПеред тем как приступить к изобретению велосипеда я посмотрел как обычно изображают распределение доходов. Практически все варианты можно разделить на два класса:\u003C\u002Fp\u003E\u003Ch4\u003E1. Гистограммы\u003C\u002Fh4\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"\" title=\"\" height=\"1518\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F357\u002Fe12\u002Fbe2\u002F357e12be227847c6dbdcf4abaad5f818.png\" data-width=\"2408\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fcommons.wikimedia.org\u002Fwiki\u002FFile:Germany_household_income.svg\" rel=\"noopener noreferrer nofollow\"\u003EDelphi234\u003C\u002Fa\u003E, CC0, via Wikimedia Commons\u003C\u002Fp\u003E\u003Cp\u003EГистограмма представляет из себя двухмерный график, по горизонтальной оси которого отложен размер дохода, а по вертикальной — количество людей с соответствующим доходом. Этот вариант наиболее точно отражают суть явления, но, к сожалению, понятен он только тем читателям, которые привыкли работать с графиками.\u003C\u002Fp\u003E\u003Cp\u003EПримеры:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fzen.yandex.ru\u002Fmedia\u002Fgizh\u002Fraspredelenie-rossiian-po-dohodu-5b2e1ee4c8dfbc00a85539e3\" rel=\"noopener noreferrer nofollow\"\u003EГрафики и жизнь\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fcareer.habr.com\u002Fsalaries\" rel=\"noopener noreferrer nofollow\"\u003EХабр Карьера\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.zeit.de\u002Fwirtschaft\u002F2018-12\u002Fmittelschicht-einkommen-deutschland\" rel=\"noopener noreferrer nofollow\"\u003EDie Zeit (немецкий)\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.iwkoeln.de\u002Ffileadmin\u002Fuser_upload\u002FHTML\u002F2019\u002Feinkommensverteilung\u002Findex.html\" rel=\"noopener noreferrer nofollow\"\u003EIW (снова немецкий)\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch4\u003E2. Пирамиды\u003C\u002Fh4\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8da\u002F1c6\u002Ff1c\u002F8da1c6f1ce13b02452f9806179630abe.jpg\" width=\"763\" height=\"990\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8da\u002F1c6\u002Ff1c\u002F8da1c6f1ce13b02452f9806179630abe.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fcommons.wikimedia.org\u002Fwiki\u002FFile:Pyramid_of_Capitalist_System.jpg\" rel=\"noopener noreferrer nofollow\"\u003EArtist not credited. Published by International Pub. Co., Cleveland, Ohio.\u003C\u002Fa\u003E, Public domain, via Wikimedia Commons \u003C\u002Fp\u003E\u003Cp\u003EПирамиды в представлении социального неравенства стары как сама инфографика и очень хорошо понятны всем читателям, но как правило крайне манипулятивны. В зависимости от политического мировоззрения авторов социальные низы представляются либо трудягами-страдальцами, которые сгорбившись несут на своих плечах пирующих бездельников, либо какими-нибудь бомжами, которые по мере своего движения по этажам пирамиды обзаводятся приличной одеждой и довольной улыбкой. Так или иначе, экономику нам пытаются преподнести как некую игру с нулевой суммой, в которой увеличить своё благосостояние можно только отобрав кусок у ближнего. В реальности же, если кто-то из бедняков переберётся с нижнего этажа наверх, то оставшимся беднякам от этого точно тяжелее не станет. А богачи в свою очередь не только не должны будут потесниться, но и могут сами увеличить свой доход, если у бедняков вдруг появятся лишние деньги.\u003C\u002Fp\u003E\u003Cp\u003EПримеры:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.statista.com\u002Fchart\u002F3384\u002Fthe-global-pyramid-of-wealth\u002F\" rel=\"noopener noreferrer nofollow\"\u003EStatista\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.zeit.de\u002Fwirtschaft\u002F2021-02\u002Fsoziale-ungleichheit-armut-reichtum-schichten-rechner-studie-deutschland\" rel=\"noopener noreferrer nofollow\"\u003EDie Zeit (немецкий)\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch3\u003EМой вариант\u003C\u002Fh3\u003E\u003Cp\u003EМне показалась более удачной аналогия с биологическими клетками. У всех есть примерно одинаковое ядро, рост клетки зависит от внешних условий и не обязательно связан с пожиранием соседних клеток: \u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F630\u002F529\u002Fa9b\u002F630529a9b2b15f9b3bb7d4129113bd5a.jpg\" width=\"1736\" height=\"388\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F630\u002F529\u002Fa9b\u002F630529a9b2b15f9b3bb7d4129113bd5a.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EПри этом я посчитал нужным отсортировать эти клетки по их размерам, чтобы отразить характерные социальные пузыри, которые часто мешают людям поверить в правдивость статистики.\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe36\u002F64d\u002F4bf\u002Fe3664d4bf2382d302ca515b2f4c250af.jpg\" width=\"954\" height=\"933\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe36\u002F64d\u002F4bf\u002Fe3664d4bf2382d302ca515b2f4c250af.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EТаким образом, чтобы реализовать эту концепцию, мне нужно было поделить население России на произвольное количество групп и иметь возможность посчитать среднедушевой доход для этой группы.\u003C\u002Fp\u003E\u003Ch3\u003EИсходные данные Росстата\u003C\u002Fh3\u003E\u003Cp\u003EСамое близкое из того, что мне нужно на сайте Росстата — это данные по \u003Ca href=\"https:\u002F\u002Frosstat.gov.ru\u002Fstorage\u002Fmediabank\u002Furov_32g.doc\" rel=\"noopener noreferrer nofollow\"\u003Eраспределению общего объёма доходов по 20-процентным группам населения\u003C\u002Fa\u003E, а также \u003Ca href=\"https:\u002F\u002Frosstat.gov.ru\u002Fstorage\u002Fmediabank\u002Furov_31g.doc\" rel=\"noopener noreferrer nofollow\"\u003Eраспределение населения по величине среднедушевых доходов\u003C\u002Fa\u003E. Только лишь на основе этих данных можно было бы нарисовать четыре кружка, которые не дали бы ровно никакого представления о картине в целом. Для более мелкой дискретизации нужно как-то интерполировать данные. Находим \u003Ca href=\"https:\u002F\u002Frosstat.gov.ru\u002Fstorage\u002Fmediabank\u002Fmet_4.rar\" rel=\"noopener noreferrer nofollow\"\u003Eметодику\u003C\u002Fa\u003E, по которой убеждаемся, что в основу модели распределения населения по доходам заложено логнормальное распределение: \u003C\u002Fp\u003E\u003Cimg class=\"formula\" source=\" f(x) = \\frac1{x\\sigma\\sqrt{2\\pi}}exp\\left(-\\frac{(\\ln x-\\mu)^2}{2\\sigma^2}\\right)\" alt=\" f(x) = \\frac1{x\\sigma\\sqrt{2\\pi}}exp\\left(-\\frac{(\\ln x-\\mu)^2}{2\\sigma^2}\\right)\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F903\u002F084\u002F480\u002F903084480e6a9216d898d2a7cc175c35.svg\" width=\"305\" height=\"54\"\u002F\u003E\u003Cp\u003Eгде \u003Ccode\u003Ex\u003C\u002Fcode\u003E — ежемесячный доход, а параметры \u003Ccode\u003Emu\u003C\u002Fcode\u003E и \u003Ccode\u003Esigma\u003C\u002Fcode\u003E рассчитываются из среднего (\u003Cem\u003Ex\u003Csub\u003Emean\u003C\u002Fsub\u003E\u003C\u002Fem\u003E) и медианного (\u003Cem\u003Ex\u003Csub\u003Emedian\u003C\u002Fsub\u003E\u003C\u002Fem\u003E) доходов следующим образом: \u003C\u002Fp\u003E\u003Cimg class=\"formula\" source=\"\\mu=\\ln(x_{median})\" alt=\"\\mu=\\ln(x_{median})\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F827\u002F1aa\u002Fd1c\u002F8271aad1ca07b95c8a1c3e48123b9bf7.svg\" width=\"129\" height=\"22\"\u002F\u003E\u003Cimg class=\"formula\" source=\"\\sigma=\\sqrt{2(\\mu+\\ln(x_{mean}))}\" alt=\"\\sigma=\\sqrt{2(\\mu+\\ln(x_{mean}))}\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7ea\u002F383\u002F637\u002F7ea38363730b092f32279d7f2dfc3cd5.svg\" width=\"197\" height=\"40\"\u002F\u003E\u003Cp\u003EНа графике это всё выглядит следующим образом:\u003C\u002Fp\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8b5\u002F21d\u002Fbb7\u002F8b521dbb7d6b75ab674849c874023374.jpg\" width=\"1596\" height=\"1097\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8b5\u002F21d\u002Fbb7\u002F8b521dbb7d6b75ab674849c874023374.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EТеперь, когда у нас есть непрерывная функция, можно перейти к созданию своего датасета.\u003C\u002Fp\u003E\u003Ch3\u003EГенерируем датасет\u003C\u002Fh3\u003E\u003Cp\u003EЧтобы сравнение доходов различных социальных групп имело смысл, нужно разделить всю популяцию на равное число групп \u003Ccode\u003EnGroups\u003C\u002Fcode\u003E. Для визуализации нам понадобятся следующие характеристики каждой группы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eразмер популяции группы, \u003Ccode\u003Epopulation\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eминимальный уровень дохода, \u003Ccode\u003EincomeMin\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсредний уровень дохода, \u003Ccode\u003EincomeMean\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eмаксимальный уровень дохода, \u003Ccode\u003EincomeMax\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eгодовой доход всей группы, \u003Ccode\u003EpopulationIncomeYear\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cfigure class=\"full-width \"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F111\u002Fe28\u002F680\u002F111e286806b7db4ffbb79c0da6835030.jpg\" alt=\"Иллюстрация для расчёта параметров датасета\" title=\"Иллюстрация для расчёта параметров датасета\" width=\"1596\" height=\"1097\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F111\u002Fe28\u002F680\u002F111e286806b7db4ffbb79c0da6835030.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cfigcaption\u003EИллюстрация для расчёта параметров датасета\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003EМинимальный доход равен максимальному доходу предыдущей группы. Максимальный доход высчитывается таким образом, чтобы размер популяции группы был равен заданному. Размер популяции получается интегрированием функции распределения населения по доходам от минимального его значения до максимального. Чтобы получить размер дохода всей группы, нужно проинтегрировать ту же функцию, умноженную на текущий размер дохода.\u003C\u002Fp\u003E\u003Cp\u003EЗадачка получается неявная, поэтому размер максимального дохода я считаю методом Ньютона (благо, производная функции известна). Максимальный доход самой богатой группы стремится к бесконечности, поэтому её доход считается по остаточному принципу по известному общему доходу всей популяции. Алгоритм далёк от оптимального в плане количества вычислений, но датасет нужно сгенерировать только один раз, поэтому я подумал, что и так сойдёт... \u003C\u002Fp\u003E\u003Cdetails class=\"spoiler\"\u003E\u003Csummary\u003EКусок кода с расчётом параметров для датасета:\u003C\u002Fsummary\u003E\u003Cdiv class=\"spoiler__content\"\u003E\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003EdatasetPure = {\n  function incomeDistribution(nGroups) {\n    \n    let data = []\n    let groupPopulation = populationTotal\u002FnGroups\n    let groupIncomeMin = 1e-12, groupIncomeMax, groupIncomeMean\n    let groupTotalYearIncome = []\n    \u002F\u002FThe function f and its derivative dfdx come in handy for Newtonian iterations\n    let f = function(groupIncomeMin, groupIncomeMax) {\n      return integral(populationWithIncome, groupIncomeMin, groupIncomeMax, 1) - groupPopulation\n    }\n    let dfdx = function(groupIncomeMax) {\n      return populationWithIncome(groupIncomeMax)\n    }\n    let delta0 = 10000 \u002F\u002Finitial step\n    for (let i = 0; i &lt; nGroups; i++) {\n      if (i &lt; nGroups-1) { \u002F\u002F\n        groupIncomeMax = groupIncomeMin + delta0\n        let groupIncomeMaxPre = groupIncomeMax\n        let err = 100\n        let j = 0\n        \u002F\u002FNewton iterations: Calculating the maximum income difference at which the population size is equal to a given population size.\n        while (err*err \u003E 0.01) {\n          groupIncomeMax += -f(groupIncomeMin, groupIncomeMaxPre)\u002Fdfdx(groupIncomeMaxPre)\n          err = groupIncomeMax - groupIncomeMaxPre\n          groupIncomeMaxPre = groupIncomeMax\n          \n          j++\n          if (j\u003E15) {\n            groupIncomeMax = j + \" iterations were not enough, last result: \" + groupIncomeMax\n            groupIncomeMean = j + \" iterations were not enough\"\n            break\n          }\n          groupTotalYearIncome[i] = integral(incomeOfPopulationGroup, groupIncomeMin, groupIncomeMax, 1)*12\n          groupIncomeMean = groupTotalYearIncome[i]\u002F12.0\u002FgroupPopulation\n          delta0 = groupIncomeMax - groupIncomeMin\n        }\n        \n      } else { \u002F\u002FThe maximum income can be infinitely large, so we just write that it is very large.\n        groupTotalYearIncome[i] = incomeTotal\n        for (let j = 0; j &lt; nGroups - 1; j++) {\n          groupTotalYearIncome[i] -= groupTotalYearIncome[j]\n        }\n        \n        groupIncomeMean = groupTotalYearIncome[i]\u002F12\u002FgroupPopulation\n        groupIncomeMax = \"дохрена\"\n      }\n      \n      data.push({population: groupPopulation, incomeMin: groupIncomeMin, incomeMean: groupIncomeMean,  incomeMax: groupIncomeMax, populationIncomeYear: groupTotalYearIncome[i]})\n\n      groupIncomeMin = groupIncomeMax\n    }\n    return data\n  }\n    return incomeDistribution\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdetails\u003E\u003Cp\u003EДля визуализации я пользовался библиотекой \u003Ca href=\"https:\u002F\u002Fd3js.org\" rel=\"noopener noreferrer nofollow\"\u003ED3.js\u003C\u002Fa\u003E. Получившийся датасет нужно привести к читаемому библиотекой виду: дать имена группам и назначить \"детей\" с учётом возможной разбивки на классы, ну и настроить всякие цвета и переключения...\u003C\u002Fp\u003E\u003Ch3\u003EРесурсы проекта\u003C\u002Fh3\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EПрограмма генерации датасета на \u003Ca href=\"https:\u002F\u002Fobservablehq.com\u002F@maxim-a-de\u002Fcalculation-of-income-distribution-based-on-the-lognormal\" rel=\"noopener noreferrer nofollow\"\u003EObservable\u003C\u002Fa\u003E. Когда появятся данные по регионам за 2020-й год, можно будет довольно быстро наделать датасетов для каждого региона.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EРепозиторий сайта на \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmaxim-a-de\u002FincomeDistributionRussia2020\" rel=\"noopener noreferrer nofollow\"\u003EGitHub\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"распределение доходов"},{"titleHtml":"инфографика"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa71\u002F90e\u002Fc95\u002Fa7190ec95a4209cba8df82a237c77722.jpg","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa71\u002F90e\u002Fc95\u002Fa7190ec95a4209cba8df82a237c77722.jpg","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583970\\\u002F\"},\"headline\":\"Делаем визуализацию распределения доходов населения России на основе данных Росстата\",\"datePublished\":\"2021-10-18T08:35:48+03:00\",\"dateModified\":\"2021-10-19T17:30:43+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Максим Андреев\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек &mdash; одного...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F583970\\\u002F#post-content-body\",\"about\":[\"h_javascript\",\"h_opendata\",\"h_data_visualization\",\"h_infographics\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F583970\\\u002F1aaf644383663630163176cf5692e7d1\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F5a1\\\u002F36d\\\u002Ff85\\\u002F5a136df85ed4671d90f7fe5b55ee01c7.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F357\\\u002Fe12\\\u002Fbe2\\\u002F357e12be227847c6dbdcf4abaad5f818.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F8da\\\u002F1c6\\\u002Ff1c\\\u002F8da1c6f1ce13b02452f9806179630abe.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F630\\\u002F529\\\u002Fa9b\\\u002F630529a9b2b15f9b3bb7d4129113bd5a.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002Fe36\\\u002F64d\\\u002F4bf\\\u002Fe3664d4bf2382d302ca515b2f4c250af.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F903\\\u002F084\\\u002F480\\\u002F903084480e6a9216d898d2a7cc175c35.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F827\\\u002F1aa\\\u002Fd1c\\\u002F8271aad1ca07b95c8a1c3e48123b9bf7.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F7ea\\\u002F383\\\u002F637\\\u002F7ea38363730b092f32279d7f2dfc3cd5.svg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F8b5\\\u002F21d\\\u002Fbb7\\\u002F8b521dbb7d6b75ab674849c874023374.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fupload_files\\\u002F111\\\u002Fe28\\\u002F680\\\u002F111e286806b7db4ffbb79c0da6835030.jpg\"]}","metaDescription":"По данным Росстата в среднем житель России имеет доход 35 700 ₽ в месяц. Эта цифра мало что говорит о благосостоянии населения. Если взять двух человек — одного с доходом 70 000 ₽ и 1400 ₽, их средний...","mainImageUrl":null,"amp":false},"polls":[{"id":"36106","timeElapsed":null,"answersType":"radio","votesCount":507,"passCount":172,"textHtml":"Мой уровень дохода по этому калькулятору","relatedData":null,"variants":[{"id":"170200","textHtml":"низкий","votesCount":41,"percent":8.09,"selected":false},{"id":"170202","textHtml":"средний","votesCount":65,"percent":12.82,"selected":false},{"id":"170204","textHtml":"выше среднего","votesCount":78,"percent":15.38,"selected":false},{"id":"170206","textHtml":"высокий","votesCount":63,"percent":12.43,"selected":false},{"id":"170208","textHtml":"очень высокий","votesCount":175,"percent":34.52,"selected":false},{"id":"170210","textHtml":"живу за пределами России","votesCount":85,"percent":16.77,"selected":false}]}],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"javascript,opendata,data_visualization,infographics"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
